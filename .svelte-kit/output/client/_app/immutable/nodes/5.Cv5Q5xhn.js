import{Z as vt,s as Ye,e as s,j as N,b as c,q as v,d as Z,h as a,m as T,v as b,i as j,w as r,x as ce,n as ze,z as De,_ as dn,B as h,o as et,k as Se,$ as gt,t as me,r as ve,f as q,a0 as _n,a1 as xe,A as He,y as Le,a2 as en,a3 as Ge,a4 as tn,a5 as nn,l as hn,p as pn,F as mn}from"../chunks/index.CdEBkEwf.js";import{S as Qe,i as Ze,t as ct,a as _t,c as vn,b as gn,d as bn,m as kn,e as En,g as In}from"../chunks/index.Dw8w8a4z.js";import{e as Re,u as tt,d as nt,g as Fe,a as $e,h as Pe,b as On,c as Nn,i as on,f as Tn,j as ln,k as Cn,m as yn,n as ht,o as wn,q as rn,r as an,s as bt,t as Ue,v as Ln,w as zn,x as sn,y as cn,z as Mn,A as An,B as Sn,C as Dn,p as Hn}from"../chunks/index.By3iV_o1.js";import"../chunks/index-6e05b96e.C_9q9BoX.js";import{m as ot,D as ut,a as Xe,I as Bn}from"../chunks/IonPage.CHnXyFSZ.js";import{q as Pn,t as Rn}from"../chunks/ion-modal.BYMRzj9z.js";import{g as Ke}from"../chunks/entry.DlWua9u_.js";const Un=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,Vn=(i,e)=>{if(!customElements.get(i)){class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const n={};for(const o of this.attributes)n[o.name]=o.value;new e({target:this.shadowRoot,props:n})}}customElements.define(i,t)}},Fn=function(i){return document.createElement(i).constructor!==HTMLElement},qn=(i,e)=>{Fn(i)||Vn(i,e)},qe=async(i,e,t)=>{Pn(),Rn(),qn(i,e);const l=await ot.create({component:i,componentProps:t});return l.present(),await l.onWillDismiss()};let We=vt({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]}),un=vt({flag:[]});function jn(i){let e,t,l,n,o="Cancelar",f,u,p="Captura de Km/Gas",O,k,m,d="Confirmar",g,E,C,y,P,B,V;return{c(){e=s("ion-header"),t=s("ion-toolbar"),l=s("ion-buttons"),n=s("ion-button"),n.textContent=o,f=N(),u=s("ion-title"),u.textContent=p,O=N(),k=s("ion-buttons"),m=s("ion-button"),m.textContent=d,g=N(),E=s("ion-content"),C=s("ion-item"),y=s("ion-input"),this.h()},l(R){e=c(R,"ION-HEADER",{translucent:!0});var K=v(e);t=c(K,"ION-TOOLBAR",{});var H=v(t);l=c(H,"ION-BUTTONS",{slot:!0});var L=v(l);n=c(L,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),Z(n)!=="svelte-17pq4f4"&&(n.textContent=o),L.forEach(a),f=T(H),u=c(H,"ION-TITLE",{"data-svelte-h":!0}),Z(u)!=="svelte-1yhkaq7"&&(u.textContent=p),O=T(H),k=c(H,"ION-BUTTONS",{slot:!0});var w=v(k);m=c(w,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),Z(m)!=="svelte-cm6j4s"&&(m.textContent=d),w.forEach(a),H.forEach(a),K.forEach(a),g=T(R),E=c(R,"ION-CONTENT",{fullscreen:!0});var M=v(E);C=c(M,"ION-ITEM",{});var D=v(C);y=c(D,"ION-INPUT",{class:!0,inputmode:!0,pattern:!0,type:!0,placeholder:!0,value:!0,required:!0});var U=v(y);U.forEach(a),D.forEach(a),M.forEach(a),this.h()},h(){b(n,"color","medium"),b(l,"slot","start"),b(m,"strong",""),b(k,"slot","end"),b(e,"translucent",""),b(y,"class","fin-km"),b(y,"inputmode","numeric"),b(y,"pattern","[0-9]*"),b(y,"type","number"),b(y,"placeholder",P="Ingresa "+i[0]+" actual"),b(y,"value",i[1]),b(y,"required",""),b(E,"fullscreen","")},m(R,K){j(R,e,K),r(e,t),r(t,l),r(l,n),r(t,f),r(t,u),r(t,O),r(t,k),r(k,m),j(R,g,K),j(R,E,K),r(E,C),r(C,y),B||(V=[ce(n,"click",i[2]),ce(m,"click",i[3]),ce(y,"input",i[4])],B=!0)},p(R,[K]){K&1&&P!==(P="Ingresa "+R[0]+" actual")&&b(y,"placeholder",P),K&2&&b(y,"value",R[1])},i:ze,o:ze,d(R){R&&(a(e),a(g),a(E)),B=!1,De(V)}}}function Gn(i,e,t){const l=dn();let o=document.querySelector("ion-modal").componentProps.data_type,f="";un.subscribe(m=>{o=m.flag[0],o=="km_final"||o=="km_inicial"?t(0,f="kilometraje"):t(0,f="litros de gasolina")});let u=0;function p(){ot.dismiss()}function O(){l("modalResult",{data:"Your data",role:"confirm"}),o=="km_inicial"?We.update(d=>({...d,km_inicial:[u]})):o=="gas_inicial"?We.update(d=>({...d,gas_inicial:[u]})):o=="km_final"?We.update(d=>({...d,km_final:[u]})):o=="gas_final"&&We.update(d=>({...d,gas_final:[u]})),p()}return[f,u,p,O,m=>t(1,u=m.target.value)]}class Kn extends Qe{constructor(e){super(),Ze(this,e,Gn,jn,Ye,{})}}const ft=vt({items:[],checkedIndices:[],mandatory:[]});function It(i,e,t){const l=i.slice();return l[56]=e[t],l[57]=e,l[58]=t,l}function Xn(i){let e,t,l,n,o,f="Kilometraje inicial",u,p,O=i[0]?i[0]+" km.":"Cargar km",k,m,d,g,E,C,y,P="Gasolina inicial (litros)",B,V,R=i[1]?i[1]+" litros":"Cargar gas",K,H,L,w;return H=gt(i[21][0]),{c(){e=s("ion-item"),t=s("ion-label"),l=s("input"),n=N(),o=s("p"),o.textContent=f,u=N(),p=s("ion-button"),k=me(O),m=N(),d=s("ion-item"),g=s("ion-label"),E=s("input"),C=N(),y=s("p"),y.textContent=P,B=N(),V=s("ion-button"),K=me(R),this.h()},l(M){e=c(M,"ION-ITEM",{});var D=v(e);t=c(D,"ION-LABEL",{style:!0});var U=v(t);l=c(U,"INPUT",{id:!0,style:!0,type:!0}),n=T(U),o=c(U,"P",{style:!0,"data-svelte-h":!0}),Z(o)!=="svelte-88twxi"&&(o.textContent=f),U.forEach(a),u=T(D),p=c(D,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var F=v(p);k=ve(F,O),F.forEach(a),D.forEach(a),m=T(M),d=c(M,"ION-ITEM",{});var S=v(d);g=c(S,"ION-LABEL",{style:!0});var X=v(g);E=c(X,"INPUT",{id:!0,style:!0,type:!0}),C=T(X),y=c(X,"P",{style:!0,"data-svelte-h":!0}),Z(y)!=="svelte-1ux30eb"&&(y.textContent=P),X.forEach(a),B=T(S),V=c(S,"ION-BUTTON",{fill:!0,class:!0,size:!0,style:!0});var ee=v(V);K=ve(ee,R),ee.forEach(a),S.forEach(a),this.h()},h(){q(l,"id","chkbox-km-ini"),h(l,"pointer-events","auto"),q(l,"type","checkbox"),l.required=!0,h(o,"margin-left","10px"),h(t,"display","flex"),b(p,"fill","outline"),b(p,"size","small"),b(p,"class","loadKmInicial"),b(p,"aria-selected",""),q(E,"id","chkbox-gas-ini"),h(E,"pointer-events","auto"),q(E,"type","checkbox"),E.required=!0,h(y,"margin-left","10px"),h(g,"display","flex"),b(V,"fill","outline"),b(V,"class","loadGasInicial"),b(V,"size","small"),h(V,"height","16px "),H.p(l,E)},m(M,D){j(M,e,D),r(e,t),r(t,l),l.checked=~(i[4]||[]).indexOf(l.__value),i[28](l),r(t,n),r(t,o),r(e,u),r(e,p),r(p,k),j(M,m,D),j(M,d,D),r(d,g),r(g,E),i[30](E),E.checked=~(i[4]||[]).indexOf(E.__value),r(g,C),r(g,y),r(d,B),r(d,V),r(V,K),L||(w=[ce(l,"change",i[27]),ce(p,"click",i[29]),ce(E,"change",i[31]),ce(V,"click",i[32])],L=!0)},p(M,D){D[0]&16&&(l.checked=~(M[4]||[]).indexOf(l.__value)),D[0]&1&&O!==(O=M[0]?M[0]+" km.":"Cargar km")&&Le(k,O),D[0]&16&&(E.checked=~(M[4]||[]).indexOf(E.__value)),D[0]&2&&R!==(R=M[1]?M[1]+" litros":"Cargar gas")&&Le(K,R)},d(M){M&&(a(e),a(m),a(d)),i[28](null),i[30](null),H.r(),L=!1,De(w)}}}function Wn(i){let e,t,l,n,o,f="Kilometraje final",u,p,O=i[2]?i[2]+" km.":"Cargar km",k,m,d,g,E,C,y,P="Gasolina final (litros)",B,V,R=i[3]?i[3]+" litros":"Cargar gas",K,H,L,w;return H=gt(i[21][0]),{c(){e=s("ion-item"),t=s("ion-label"),l=s("input"),n=N(),o=s("p"),o.textContent=f,u=N(),p=s("ion-button"),k=me(O),m=N(),d=s("ion-item"),g=s("ion-label"),E=s("input"),C=N(),y=s("p"),y.textContent=P,B=N(),V=s("ion-button"),K=me(R),this.h()},l(M){e=c(M,"ION-ITEM",{});var D=v(e);t=c(D,"ION-LABEL",{style:!0});var U=v(t);l=c(U,"INPUT",{id:!0,style:!0,type:!0}),n=T(U),o=c(U,"P",{style:!0,"data-svelte-h":!0}),Z(o)!=="svelte-ccmu71"&&(o.textContent=f),U.forEach(a),u=T(D),p=c(D,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var F=v(p);k=ve(F,O),F.forEach(a),D.forEach(a),m=T(M),d=c(M,"ION-ITEM",{});var S=v(d);g=c(S,"ION-LABEL",{style:!0});var X=v(g);E=c(X,"INPUT",{id:!0,style:!0,type:!0}),C=T(X),y=c(X,"P",{style:!0,"data-svelte-h":!0}),Z(y)!=="svelte-wsoyd2"&&(y.textContent=P),X.forEach(a),B=T(S),V=c(S,"ION-BUTTON",{fill:!0,size:!0,class:!0});var ee=v(V);K=ve(ee,R),ee.forEach(a),S.forEach(a),this.h()},h(){q(l,"id","chkbox-km-fin"),h(l,"pointer-events","auto"),q(l,"type","checkbox"),l.required=!0,h(o,"margin-left","10px"),h(t,"display","flex"),b(p,"fill","outline"),b(p,"size","small"),b(p,"class","loadKmInicial"),b(p,"aria-selected",""),q(E,"id","chkbox-gas-fin"),h(E,"pointer-events","auto"),q(E,"type","checkbox"),E.required=!0,h(y,"margin-left","10px"),h(g,"display","flex"),b(V,"fill","outline"),b(V,"size","small"),b(V,"class","loadGasInicial"),H.p(l,E)},m(M,D){j(M,e,D),r(e,t),r(t,l),l.checked=~(i[4]||[]).indexOf(l.__value),i[22](l),r(t,n),r(t,o),r(e,u),r(e,p),r(p,k),j(M,m,D),j(M,d,D),r(d,g),r(g,E),E.checked=~(i[4]||[]).indexOf(E.__value),i[25](E),r(g,C),r(g,y),r(d,B),r(d,V),r(V,K),L||(w=[ce(l,"change",i[20]),ce(p,"click",i[23]),ce(E,"change",i[24]),ce(V,"click",i[26])],L=!0)},p(M,D){D[0]&16&&(l.checked=~(M[4]||[]).indexOf(l.__value)),D[0]&4&&O!==(O=M[2]?M[2]+" km.":"Cargar km")&&Le(k,O),D[0]&16&&(E.checked=~(M[4]||[]).indexOf(E.__value)),D[0]&8&&R!==(R=M[3]?M[3]+" litros":"Cargar gas")&&Le(K,R)},d(M){M&&(a(e),a(m),a(d)),i[22](null),i[25](null),H.r(),L=!1,De(w)}}}function Jn(i){let e=[],t=new Map,l,n=Re(i[13]);const o=f=>f[56].id_checklist_event;for(let f=0;f<n.length;f+=1){let u=It(i,n,f),p=o(u);t.set(p,e[f]=Ot(p,u))}return{c(){for(let f=0;f<e.length;f+=1)e[f].c();l=Se()},l(f){for(let u=0;u<e.length;u+=1)e[u].l(f);l=Se()},m(f,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(f,u);j(f,l,u)},p(f,u){u[0]&407664&&(n=Re(f[13]),e=tt(e,u,o,1,f,n,t,l.parentNode,nt,Ot,l,It))},d(f){f&&a(l);for(let u=0;u<e.length;u+=1)e[u].d(f)}}}function Yn(i){let e,t=(i[12][i[56].id_checklist_event]?i[12][i[56].id_checklist_event]:"Cargar evidencia")+"",l;return{c(){e=s("label"),l=me(t),this.h()},l(n){e=c(n,"LABEL",{for:!0,class:!0});var o=v(e);l=ve(o,t),o.forEach(a),this.h()},h(){q(e,"for","chklist-"+i[56].id_checklist_event),q(e,"class","button-label svelte-1ruehls")},m(n,o){j(n,e,o),r(e,l)},p(n,o){o[0]&4096&&t!==(t=(n[12][n[56].id_checklist_event]?n[12][n[56].id_checklist_event]:"Cargar evidencia")+"")&&Le(l,t)},d(n){n&&a(e)}}}function Qn(i){let e;return{c(){e=s("ion-spinner"),this.h()},l(t){e=c(t,"ION-SPINNER",{name:!0,class:!0}),v(e).forEach(a),this.h()},h(){b(e,"name","dots"),b(e,"class","button-spinner svelte-1ruehls")},m(t,l){j(t,e,l)},p:ze,d(t){t&&a(e)}}}function Ot(i,e){let t,l,n,o=e[56],f,u,p=e[56].item+"",O,k,m,d=e[56].mandatory=="1"?" * ":"",g,E,C,y,P,B,V,R,K,H;const L=()=>e[34](n,o),w=()=>e[34](null,o);function M(){return e[35](e[56])}function D(X,ee){return X[11][X[56].id_checklist_event]?Qn:Yn}let U=D(e),F=U(e);function S(...X){return e[37](e[56],...X)}return R=gt(e[21][0]),{key:i,first:null,c(){t=s("ion-item"),l=s("ion-label"),n=s("input"),f=N(),u=s("p"),O=me(p),k=N(),m=s("b"),g=me(d),E=N(),C=s("ion-button"),y=s("div"),F.c(),P=N(),B=s("input"),V=N(),this.h()},l(X){t=c(X,"ION-ITEM",{});var ee=v(t);l=c(ee,"ION-LABEL",{style:!0});var ie=v(l);n=c(ie,"INPUT",{id:!0,style:!0,type:!0}),f=T(ie),u=c(ie,"P",{style:!0});var re=v(u);O=ve(re,p),k=T(re),re.forEach(a),m=c(ie,"B",{style:!0});var Ee=v(m);g=ve(Ee,d),Ee.forEach(a),ie.forEach(a),E=T(ee),C=c(ee,"ION-BUTTON",{fill:!0,class:!0,size:!0});var W=v(C);y=c(W,"DIV",{class:!0});var se=v(y);F.l(se),P=T(se),B=c(se,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),se.forEach(a),W.forEach(a),V=T(ee),ee.forEach(a),this.h()},h(){q(n,"id",`chkbox-${e[56].id_checklist_event}`),h(n,"pointer-events","auto"),q(n,"type","checkbox"),n.__value=e[56].id_checklist_event,_n(n,n.__value),n.required=!0,h(u,"margin-left","10px"),h(m,"margin-left","5px"),h(l,"display","flex"),h(B,"display","none"),q(B,"id","chklist-"+e[56].id_checklist_event),q(B,"name","fileToUpload"),q(B,"type","file"),q(B,"accept","image/*"),q(B,"capture","environment"),q(y,"class","button-content svelte-1ruehls"),b(C,"fill","outline"),b(C,"class","loadEvidence svelte-1ruehls"),b(C,"size","small"),R.p(n),this.first=t},m(X,ee){j(X,t,ee),r(t,l),r(l,n),n.checked=~(e[4]||[]).indexOf(n.__value),L(),r(l,f),r(l,u),r(u,O),r(u,k),r(l,m),r(m,g),r(t,E),r(t,C),r(C,y),F.m(y,null),r(y,P),r(y,B),e[36](B),r(t,V),K||(H=[ce(n,"change",e[33]),ce(n,"change",M),ce(B,"change",S)],K=!0)},p(X,ee){e=X,ee[0]&16&&(n.checked=~(e[4]||[]).indexOf(n.__value)),o!==e[56]&&(w(),o=e[56],L()),U===(U=D(e))&&F?F.p(e,ee):(F.d(1),F=U(e),F&&(F.c(),F.m(y,P)))},d(X){X&&a(t),w(),F.d(),e[36](null),R.r(),K=!1,De(H)}}}function Zn(i){let e,t,l,n,o="Cancelar",f,u,p="REQUERIMIENTOS DE RUTA",O,k,m,d,g,E,C,y="Confirmar",P,B;function V(L,w){return L[14]?Wn:Xn}let K=V(i)(i),H=i[13]&&Jn(i);return{c(){e=s("ion-header"),t=s("ion-toolbar"),l=s("ion-buttons"),n=s("ion-button"),n.textContent=o,f=N(),u=s("ion-title"),u.textContent=p,O=N(),k=s("ion-content"),m=s("ion-list"),K.c(),d=N(),H&&H.c(),g=N(),E=s("ion-footer"),C=s("ion-button"),C.textContent=y,this.h()},l(L){e=c(L,"ION-HEADER",{translucent:!0});var w=v(e);t=c(w,"ION-TOOLBAR",{});var M=v(t);l=c(M,"ION-BUTTONS",{slot:!0});var D=v(l);n=c(D,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1dnmkxs"&&(n.textContent=o),D.forEach(a),f=T(M),u=c(M,"ION-TITLE",{"data-svelte-h":!0}),Z(u)!=="svelte-19bar5p"&&(u.textContent=p),M.forEach(a),w.forEach(a),O=T(L),k=c(L,"ION-CONTENT",{fullscreen:!0});var U=v(k);m=c(U,"ION-LIST",{});var F=v(m);K.l(F),d=T(F),H&&H.l(F),F.forEach(a),U.forEach(a),g=T(L),E=c(L,"ION-FOOTER",{});var S=v(E);C=c(S,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),Z(C)!=="svelte-g82qqw"&&(C.textContent=y),S.forEach(a),this.h()},h(){b(n,"color","medium"),b(l,"slot","start"),b(e,"translucent",""),b(k,"fullscreen",""),b(C,"fill","outline"),b(C,"color","tertiary"),b(C,"strong",""),h(C,"width","99%"),h(C,"height","auto")},m(L,w){j(L,e,w),r(e,t),r(t,l),r(l,n),r(t,f),r(t,u),j(L,O,w),j(L,k,w),r(k,m),K.m(m,null),r(m,d),H&&H.m(m,null),j(L,g,w),j(L,E,w),r(E,C),P||(B=[ce(n,"click",i[15]),ce(C,"click",i[16])],P=!0)},p(L,w){K.p(L,w),L[13]&&H.p(L,w)},i:ze,o:ze,d(L){L&&(a(e),a(O),a(k),a(g),a(E)),K.d(),H&&H.d(),P=!1,De(B)}}}function pt(i,e){if(typeof i=="object"&&i!==null||Array.isArray(i)){if(Array.isArray(i))return i.map(t=>pt(t,e)).flat();{const t=Object.keys(i);let l;return e=="id_checklist_event"?l=t.filter(o=>o.toLowerCase().includes("id_checklist_event")).map(o=>i[o]):e=="mandatory"?l=t.filter(o=>o.toLowerCase().includes("mandatory")).map(o=>i[o]):(console.error("Tipo de dato no reconocido."),l=!1),l}}else return console.error("Invalid input. Please provide a valid object or array."),[]}function xn(i,e,t){let l=ut,n=document.querySelector("ion-modal");const o=n.componentProps.checklist,f=n.componentProps.driverId,u=n.componentProps.routeId,p=n.componentProps.isLast;let O,k,m,d,g=[],E=null,C={},y,P,B,V,R={},K=new Object,H={},L={};et(()=>{K=JSON.parse(localStorage.getItem("userSession")),p?console.log("Último checklist"):ft.update(z=>(z.mandatory=pt(o,"mandatory"),z.items=pt(o,"id_checklist_event"),z))});function w(z){t(11,R[z]=!0,R)}const M=async()=>{await(await Xe.create({header:"Datos o checklist incompletos",message:"Carga la evidencia requerida y marca todas las casillas para confirmar",buttons:[{text:"Cerrar"}]})).present()},D=async(z,x)=>{await(await Xe.create({header:z||"Error",message:x||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},U=async z=>{await(await Xe.create({header:"Datos inválidos",message:z=="km"?"Llena correctamente el campo de kilometraje inicial":"Llena correctamente el campo de gasolina inicial",buttons:[{text:"Cerrar"}]})).present()},F=()=>{ot.dismiss(),f?Ke(`/drivers/${f}`):Ke("/drivers/me")},S=()=>{if(p){var z=Ee(m,"km"),x=Ee(d,"gas");let oe=new Object;oe.km_final=z,oe.gas_final=x,oe.id_route=u,oe.id_user_over=K.id_user,oe.token=K.token,z&&x?(F(),Fe(`${l}api/admin/checklist/add_evidence.php`,function(ne){ne.success?D("Datos capturados","El kilometraje y gasolina final fueron registrados correctamente, espere aprobación para finalizar ruta"):D("Error","Vuelva a intentar capturar los datos solicitados")},oe)):M()}else{var Q=Ee(O,"km"),te=Ee(k,"gas");ft.update(oe=>{oe.items;const ne=oe.mandatory;if(oe.items.filter((Te,we)=>oe.mandatory[we]==="1").every(Te=>oe.checkedIndices.includes(Te))&&Q&&te){let Te=new FormData;Te=pe(Te),Te.append("km_inicial",Q),Te.append("gas_inicial",te),Te.append("id_route",u);for(const we in H)if(H.hasOwnProperty(we)){const{img:Ve,img_id:Be}=H[we];Te.append(`selectedImages[${we}][img]`,Ve),Te.append(`selectedImages[${we}][img_id]`,Be)}fetch(`${l}api/admin/checklist/add_evidence.php`,{method:"POST",body:Te}).then(we=>we.json()).then(we=>{ne&&ne.some(Ve=>Ve==="1")?re(u,"checklist-pending"):re(u,"enroute")}).catch(we=>{console.error("Error fetching data:",we)}).finally(()=>{F()})}else if(!ne&&Q&&te){let Te=new FormData;Te.append("km_inicial",Q),Te.append("gas_inicial",te),Te=pe(Te),fetch(`${l}api/admin/checklist/add_evidence.php`,{method:"POST",body:Te}).then(we=>we.json()).then(we=>{re(u,"enroute")}).catch(we=>{console.error("Error fetching data:",we)})}else M();return oe})}ge()},X=async(z,x)=>{w(x);const te=z.target.files[0],oe=await ee(te);if(oe){let ne=new FormData;ne.append("fileToUpload",oe),ne=pe(ne);try{const Ie=await fetch(`${l}api/admin/manager/upload_img_driver.php`,{method:"POST",body:ne});if(Ie.ok){const Ce=await Ie.json();H={...H,[x]:{img:Ce.img,img_id:Ce.img_id}},t(12,L={...L,[x]:Ce.filename}),ie(x),t(6,C[x].checked=!0,C),t(11,R[x]=!1,R)}else console.error("File upload failed:",Ie.statusText)}catch(Ie){console.error("Error during file upload:",Ie)}}},ee=async z=>new Promise(x=>{const Q=new Image;Q.src=URL.createObjectURL(z),Q.onload=()=>{const te=document.createElement("canvas"),oe=te.getContext("2d"),ne=800,Ie=600;let Ce=Q.width,Te=Q.height;Ce>ne&&(Te*=ne/Ce,Ce=ne),Te>Ie&&(Ce*=Ie/Te,Te=Ie),te.width=Ce,te.height=Te,oe.drawImage(Q,0,0,Ce,Te),te.toBlob(we=>{x(we),URL.revokeObjectURL(Q.src),oe.clearRect(0,0,te.width,te.height)},"image/jpeg",.7)}}),ie=z=>{ft.update(x=>(x.checkedIndices.indexOf(z)===-1?x.checkedIndices.push(z):console.error(`ID ${z} is already checked.`),x.items.forEach(te=>{te.id_checklist_event===z&&(te.checked=!0)}),x))};function re(z,x){let Q=new FormData;Q.append("id_route",z),Q.append("status",x),Q=pe(Q),fetch(`${l}api/admin/route/change_status.php`,{method:"POST",body:Q}).then(te=>te.json()).then(te=>{}).catch(te=>{console.error("Error fetching data:",te)})}function Ee(z,x){return/^\d+$/.test(z)?parseInt(z,10):(U(x),null)}function W(z,x){se(x),n.componentProps.data_type=x,qe("modal-gas-km",Kn,{r:x}).then(()=>{We.subscribe(Q=>{he(Q,x)})})}function se(z){un.update(x=>({...x,flag:[z]}))}function he(z,x){t(0,O=z.km_inicial?z.km_inicial:null),t(1,k=z.gas_inicial?z.gas_inicial:null),t(2,m=z.km_final?z.km_final:null),t(3,d=z.gas_final?z.gas_final:null),x=="km_inicial"&&y&&t(7,y.checked=!0,y),x=="gas_inicial"&&P&&t(8,P.checked=!0,P),x=="km_final"&&B&&t(9,B.checked=!0,B),x=="gas_final"&&V&&t(10,V.checked=!0,V)}function ge(){We.set({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]})}function pe(z){return z.append("token",K.token),z.append("id_user_over",K.id_user),z}const fe=[[]];function de(){g=xe(fe[0],this.__value,this.checked),t(4,g)}function ue(z){He[z?"unshift":"push"](()=>{B=z,t(9,B)})}const be=z=>W(z,"km_final");function ke(){g=xe(fe[0],this.__value,this.checked),t(4,g)}function Oe(z){He[z?"unshift":"push"](()=>{V=z,t(10,V)})}const ye=z=>W(z,"gas_final");function Ne(){g=xe(fe[0],this.__value,this.checked),t(4,g)}function _e(z){He[z?"unshift":"push"](()=>{y=z,t(7,y)})}const Y=z=>W(z,"km_inicial");function $(z){He[z?"unshift":"push"](()=>{P=z,t(8,P)})}function J(){g=xe(fe[0],this.__value,this.checked),t(4,g)}const _=z=>W(z,"gas_inicial");function I(){g=xe(fe[0],this.__value,this.checked),t(4,g)}function A(z,x){He[z?"unshift":"push"](()=>{C[x.id_checklist_event]=z,t(6,C)})}const G=z=>ie(z.id_checklist_event);function ae(z){He[z?"unshift":"push"](()=>{E=z,t(5,E)})}return[O,k,m,d,g,E,C,y,P,B,V,R,L,o,p,F,S,X,ie,W,de,fe,ue,be,ke,Oe,ye,Ne,_e,Y,$,J,_,I,A,G,ae,(z,x)=>X(x,z.id_checklist_event)]}class fn extends Qe{constructor(e){super(),Ze(this,e,xn,Zn,Ye,{},null,[-1,-1])}}function Nt(i,e,t){const l=i.slice();return l[49]=e[t],l[51]=t,l}function $n(i){let e,t,l="Confirmar",n,o;return{c(){e=s("ion-buttons"),t=s("ion-button"),t.textContent=l,this.h()},l(f){e=c(f,"ION-BUTTONS",{slot:!0});var u=v(e);t=c(u,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),Z(t)!=="svelte-1ida0il"&&(t.textContent=l),u.forEach(a),this.h()},h(){b(t,"strong",""),b(e,"slot","end")},m(f,u){j(f,e,u),r(e,t),n||(o=ce(t,"click",i[22]),n=!0)},p:ze,d(f){f&&a(e),n=!1,o()}}}function eo(i){let e,t,l,n,o,f="Empresa",u,p,O=i[11].enterprise_name+"",k;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),p=s("h2"),k=me(O),this.h()},l(m){e=c(m,"ION-ITEM",{});var d=v(e);t=c(d,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=T(d),n=c(d,"ION-LABEL",{});var g=v(n);o=c(g,"P",{"data-svelte-h":!0}),Z(o)!=="svelte-6noid3"&&(o.textContent=f),u=T(g),p=c(g,"H2",{});var E=v(p);k=ve(E,O),E.forEach(a),g.forEach(a),d.forEach(a),this.h()},h(){b(t,"icon",an),b(t,"slot","start")},m(m,d){j(m,e,d),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,p),r(p,k)},p:ze,d(m){m&&a(e)}}}function to(i){let e,t,l,n,o,f="Negocio",u,p,O=i[11].client_name+"",k;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),p=s("h2"),k=me(O),this.h()},l(m){e=c(m,"ION-ITEM",{});var d=v(e);t=c(d,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=T(d),n=c(d,"ION-LABEL",{});var g=v(n);o=c(g,"P",{"data-svelte-h":!0}),Z(o)!=="svelte-57b1dg"&&(o.textContent=f),u=T(g),p=c(g,"H2",{});var E=v(p);k=ve(E,O),E.forEach(a),g.forEach(a),d.forEach(a),this.h()},h(){b(t,"icon",an),b(t,"slot","start")},m(m,d){j(m,e,d),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,p),r(p,k)},p:ze,d(m){m&&a(e)}}}function no(i){let e,t,l,n,o,f="Teléfono de Negocio",u,p,O=i[11].client_phone+"",k;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),p=s("h2"),k=me(O),this.h()},l(m){e=c(m,"ION-ITEM",{href:!0});var d=v(e);t=c(d,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=T(d),n=c(d,"ION-LABEL",{class:!0});var g=v(n);o=c(g,"P",{"data-svelte-h":!0}),Z(o)!=="svelte-1u5l7fz"&&(o.textContent=f),u=T(g),p=c(g,"H2",{});var E=v(p);k=ve(E,O),E.forEach(a),g.forEach(a),d.forEach(a),this.h()},h(){b(t,"icon",On),b(t,"slot","start"),b(n,"class","ion-text-wrap"),b(e,"href","tel:"+i[11].client_phone)},m(m,d){j(m,e,d),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,p),r(p,k)},p:ze,d(m){m&&a(e)}}}function oo(i){let e,t,l,n,o,f="Domicilio Alternativo",u,p,O=i[11].line2+"",k,m,d;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),p=s("h2"),k=me(O),m=N(),d=s("ion-icon"),this.h()},l(g){e=c(g,"ION-ITEM",{href:!0});var E=v(e);t=c(E,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=T(E),n=c(E,"ION-LABEL",{class:!0});var C=v(n);o=c(C,"P",{"data-svelte-h":!0}),Z(o)!=="svelte-1ub9uzw"&&(o.textContent=f),u=T(C),p=c(C,"H2",{});var y=v(p);k=ve(y,O),y.forEach(a),C.forEach(a),m=T(E),d=c(E,"ION-ICON",{icon:!0,slot:!0}),v(d).forEach(a),E.forEach(a),this.h()},h(){b(t,"icon",bt),b(t,"slot","start"),b(n,"class","ion-text-wrap"),b(d,"icon",Ue),b(d,"slot","end"),b(e,"href","https://www.google.com/maps/searhc/?api=1&query="+i[11].line2)},m(g,E){j(g,e,E),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,p),r(p,k),r(e,m),r(e,d)},p:ze,d(g){g&&a(e)}}}function lo(i){let e,t,l,n,o,f="Domicilio",u,p,O=i[11].line1+"",k,m,d,g,E=i[11].line2&&i[11].line2.trim().length,C,y=E&&io(i);return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),p=s("h2"),k=me(O),m=N(),d=s("ion-icon"),g=N(),y&&y.c(),C=Se(),this.h()},l(P){e=c(P,"ION-ITEM",{href:!0});var B=v(e);t=c(B,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=T(B),n=c(B,"ION-LABEL",{class:!0});var V=v(n);o=c(V,"P",{"data-svelte-h":!0}),Z(o)!=="svelte-cbm7q1"&&(o.textContent=f),u=T(V),p=c(V,"H2",{});var R=v(p);k=ve(R,O),R.forEach(a),V.forEach(a),m=T(B),d=c(B,"ION-ICON",{icon:!0,slot:!0}),v(d).forEach(a),B.forEach(a),g=T(P),y&&y.l(P),C=Se(),this.h()},h(){b(t,"icon",bt),b(t,"slot","start"),b(n,"class","ion-text-wrap"),b(d,"icon",Ue),b(d,"slot","end"),b(e,"href","https://www.google.com/maps/search/?api=1&query="+i[11].line1)},m(P,B){j(P,e,B),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,p),r(p,k),r(e,m),r(e,d),j(P,g,B),y&&y.m(P,B),j(P,C,B)},p(P,B){E&&y.p(P,B)},d(P){P&&(a(e),a(g),a(C)),y&&y.d(P)}}}function io(i){let e,t,l,n,o,f="Domicilio Alternativo",u,p,O=i[11].line2+"",k,m,d;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),p=s("h2"),k=me(O),m=N(),d=s("ion-icon"),this.h()},l(g){e=c(g,"ION-ITEM",{href:!0});var E=v(e);t=c(E,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=T(E),n=c(E,"ION-LABEL",{class:!0});var C=v(n);o=c(C,"P",{"data-svelte-h":!0}),Z(o)!=="svelte-1ub9uzw"&&(o.textContent=f),u=T(C),p=c(C,"H2",{});var y=v(p);k=ve(y,O),y.forEach(a),C.forEach(a),m=T(E),d=c(E,"ION-ICON",{icon:!0,slot:!0}),v(d).forEach(a),E.forEach(a),this.h()},h(){b(t,"icon",bt),b(t,"slot","start"),b(n,"class","ion-text-wrap"),b(d,"icon",Ue),b(d,"slot","end"),b(e,"href","https://www.google.com/maps/search/?api=1&query="+i[11].line2)},m(g,E){j(g,e,E),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,p),r(p,k),r(e,m),r(e,d)},p:ze,d(g){g&&a(e)}}}function Tt(i){let e,t,l,n,o,f="Contacto del Cliente",u,p,O,k,m=i[15]&&i[15]==="1"&&ro(i);return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),p=s("h2"),O=me(i[6]),k=N(),m&&m.c(),this.h()},l(d){e=c(d,"ION-ITEM",{});var g=v(e);t=c(g,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=T(g),n=c(g,"ION-LABEL",{class:!0});var E=v(n);o=c(E,"P",{"data-svelte-h":!0}),Z(o)!=="svelte-1utsyb6"&&(o.textContent=f),u=T(E),p=c(E,"H2",{});var C=v(p);O=ve(C,i[6]),C.forEach(a),E.forEach(a),k=T(g),m&&m.l(g),g.forEach(a),this.h()},h(){b(t,"icon",Nn),b(t,"slot","start"),b(n,"class","ion-text-wrap")},m(d,g){j(d,e,g),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,p),r(p,O),r(e,k),m&&m.m(e,null)},p(d,g){g[0]&64&&Le(O,d[6]),d[15]&&d[15]==="1"&&m.p(d,g)},d(d){d&&a(e),m&&m.d()}}}function ro(i){let e,t=`<ion-icon icon="${Ln}" slot="start"></ion-icon>
                        Notificar Cliente`,l,n;return{c(){e=s("ion-button"),e.innerHTML=t,this.h()},l(o){e=c(o,"ION-BUTTON",{fill:!0,style:!0,"data-svelte-h":!0}),Z(e)!=="svelte-w3qtwm"&&(e.innerHTML=t),this.h()},h(){b(e,"fill","outline"),h(e,"margin-left","16px")},m(o,f){j(o,e,f),l||(n=ce(e,"click",i[23]),l=!0)},p:ze,d(o){o&&a(e),l=!1,n()}}}function Ct(i){let e,t,l,n,o,f="Notas de ubicación",u,p,O;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),p=s("h2"),O=me(i[7]),this.h()},l(k){e=c(k,"ION-ITEM",{});var m=v(e);t=c(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=T(m),n=c(m,"ION-LABEL",{class:!0});var d=v(n);o=c(d,"P",{"data-svelte-h":!0}),Z(o)!=="svelte-nhm2ft"&&(o.textContent=f),u=T(d),p=c(d,"H2",{});var g=v(p);O=ve(g,i[7]),g.forEach(a),d.forEach(a),m.forEach(a),this.h()},h(){b(t,"icon",on),b(t,"slot","start"),b(n,"class","ion-text-wrap")},m(k,m){j(k,e,m),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,p),r(p,O)},p(k,m){m[0]&128&&Le(O,k[7])},d(k){k&&a(e)}}}function ao(i){let e,t,l,n,o,f="Horarios",u,p,O=i[11].schedule+"",k;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),p=s("h2"),k=me(O),this.h()},l(m){e=c(m,"ION-ITEM",{});var d=v(e);t=c(d,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=T(d),n=c(d,"ION-LABEL",{});var g=v(n);o=c(g,"P",{"data-svelte-h":!0}),Z(o)!=="svelte-11q7hm5"&&(o.textContent=f),u=T(g),p=c(g,"H2",{});var E=v(p);k=ve(E,O),E.forEach(a),g.forEach(a),d.forEach(a),this.h()},h(){b(t,"icon",Tn),b(t,"slot","start")},m(m,d){j(m,e,d),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,p),r(p,k)},p:ze,d(m){m&&a(e)}}}function so(i){let e,t,l,n,o,f="Notas del operador",u,p,O=i[11].driver_comments+"",k;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),p=s("h2"),k=me(O),this.h()},l(m){e=c(m,"ION-ITEM",{});var d=v(e);t=c(d,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=T(d),n=c(d,"ION-LABEL",{});var g=v(n);o=c(g,"P",{"data-svelte-h":!0}),Z(o)!=="svelte-1yk9qp4"&&(o.textContent=f),u=T(g),p=c(g,"H2",{});var E=v(p);k=ve(E,O),E.forEach(a),g.forEach(a),d.forEach(a),this.h()},h(){b(t,"icon",ln),b(t,"slot","start")},m(m,d){j(m,e,d),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,p),r(p,k)},p:ze,d(m){m&&a(e)}}}function co(i){let e,t=i[11].logistic_comments!="<br>"&&uo(i);return{c(){t&&t.c(),e=Se()},l(l){t&&t.l(l),e=Se()},m(l,n){t&&t.m(l,n),j(l,e,n)},p(l,n){l[11].logistic_comments!="<br>"&&t.p(l,n)},d(l){l&&a(e),t&&t.d(l)}}}function uo(i){let e,t,l,n,o,f="Comentarios logísticos",u,p,O=i[11].logistic_comments+"",k;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),p=s("h2"),k=me(O),this.h()},l(m){e=c(m,"ION-ITEM",{});var d=v(e);t=c(d,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=T(d),n=c(d,"ION-LABEL",{class:!0});var g=v(n);o=c(g,"P",{"data-svelte-h":!0}),Z(o)!=="svelte-1iz85r6"&&(o.textContent=f),u=T(g),p=c(g,"H2",{});var E=v(p);k=ve(E,O),E.forEach(a),g.forEach(a),d.forEach(a),this.h()},h(){b(t,"icon",on),b(t,"slot","start"),b(n,"class","ion-text-wrap")},m(m,d){j(m,e,d),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,p),r(p,k)},p:ze,d(m){m&&a(e)}}}function fo(i){let e,t,l,n,o="<p>Etiqueta</p>",f,u,p=(i[11].tag?i[11].tag:"")+"",O;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),n.innerHTML=o,f=N(),u=s("div"),O=me(p),this.h()},l(k){e=c(k,"ION-ITEM",{});var m=v(e);t=c(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=T(m),n=c(m,"ION-LABEL",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-50rr6d"&&(n.innerHTML=o),f=T(m),u=c(m,"DIV",{class:!0,style:!0});var d=v(u);O=ve(d,p),d.forEach(a),m.forEach(a),this.h()},h(){b(t,"icon",Cn),b(t,"slot","start"),b(n,"class","ion-text-wrap"),q(u,"class","stop-tag"),h(u,"background-color",i[16]),h(u,"border","1px solid "+i[17]),h(u,"color",i[11].tag_color),h(u,"font-size","14px"),h(u,"text-align","center"),h(u,"align-content","center"),h(u,"border-radius","20px"),h(u,"white-space","normal"),h(u,"padding","4px 8px"),h(u,"width","auto",1),h(u,"display","inline-block")},m(k,m){j(k,e,m),r(e,t),r(e,l),r(e,n),r(e,f),r(e,u),r(u,O)},p:ze,d(k){k&&a(e)}}}function _o(i){let e,t,l,n,o,f="Estado de entrega",u,p,O="Entregado",k,m,d="No Entregado",g,E,C="Entrega Parcial",y,P,B,V,R,K,H,L,w=i[4]===!0&&yt(i),M=(i[5]===!0||i[5]===!1&&i[4]===!1)&&wt(i);return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-select"),o=s("div"),o.textContent=f,u=N(),p=s("ion-select-option"),p.textContent=O,k=N(),m=s("ion-select-option"),m.textContent=d,g=N(),E=s("ion-select-option"),E.textContent=C,y=N(),P=s("ion-item"),B=s("ion-icon"),V=N(),R=s("ion-textarea"),K=N(),H=s("section"),w&&w.c(),L=N(),M&&M.c(),this.h()},l(D){e=c(D,"ION-ITEM",{});var U=v(e);t=c(U,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=T(U),n=c(U,"ION-SELECT",{value:!0});var F=v(n);o=c(F,"DIV",{slot:!0,"data-svelte-h":!0}),Z(o)!=="svelte-1635zca"&&(o.textContent=f),u=T(F),p=c(F,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),Z(p)!=="svelte-s33eln"&&(p.textContent=O),k=T(F),m=c(F,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),Z(m)!=="svelte-1a859l3"&&(m.textContent=d),g=T(F),E=c(F,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),Z(E)!=="svelte-1c4dcm8"&&(E.textContent=C),F.forEach(a),U.forEach(a),y=T(D),P=c(D,"ION-ITEM",{});var S=v(P);B=c(S,"ION-ICON",{icon:!0,slot:!0}),v(B).forEach(a),V=T(S),R=c(S,"ION-TEXTAREA",{label:!0,placeholder:!0}),v(R).forEach(a),S.forEach(a),K=T(D),H=c(D,"SECTION",{style:!0});var X=v(H);w&&w.l(X),L=T(X),M&&M.l(X),X.forEach(a),this.h()},h(){b(t,"icon",yn),b(t,"slot","start"),q(o,"slot","label"),b(p,"value","delivered"),b(m,"value","notdelivered"),b(E,"value","partialdeliver"),b(n,"value",i[14]?i[14]:"delivered"),b(B,"icon",ht),b(B,"slot","start"),b(R,"label","Notas"),b(R,"placeholder","Escribe aquí..."),h(H,"display","flex"),h(H,"gap","8px"),h(H,"padding","16px 16px 6px")},m(D,U){j(D,e,U),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,p),r(n,k),r(n,m),r(n,g),r(n,E),i[29](n),j(D,y,U),j(D,P,U),r(P,B),r(P,V),r(P,R),i[30](R),j(D,K,U),j(D,H,U),w&&w.m(H,null),r(H,L),M&&M.m(H,null)},p(D,U){D[4]===!0?w?w.p(D,U):(w=yt(D),w.c(),w.m(H,L)):w&&(w.d(1),w=null),D[5]===!0||D[5]===!1&&D[4]===!1?M?M.p(D,U):(M=wt(D),M.c(),M.m(H,null)):M&&(M.d(1),M=null)},d(D){D&&(a(e),a(y),a(P),a(K),a(H)),i[29](null),i[30](null),w&&w.d(),M&&M.d()}}}function yt(i){let e,t=`<ion-icon icon="${zn}" slot="start"></ion-icon>
                        Ingreso`,l,n;return{c(){e=s("ion-button"),e.innerHTML=t,this.h()},l(o){e=c(o,"ION-BUTTON",{id:!0,style:!0,"data-svelte-h":!0}),Z(e)!=="svelte-3onvnr"&&(e.innerHTML=t),this.h()},h(){b(e,"id","checkInBtn"),h(e,"flex","1")},m(o,f){j(o,e,f),l||(n=ce(e,"click",i[24]),l=!0)},p:ze,d(o){o&&a(e),l=!1,n()}}}function wt(i){let e,t,l,n,o,f;return{c(){e=s("ion-button"),t=s("ion-icon"),l=me(`
                        Salida`),this.h()},l(u){e=c(u,"ION-BUTTON",{id:!0,style:!0,disabled:!0});var p=v(e);t=c(p,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),l=ve(p,`
                        Salida`),p.forEach(a),this.h()},h(){b(t,"icon",wn),b(t,"slot","start"),b(e,"id","checkOutBtn"),h(e,"flex","1"),b(e,"disabled",n=i[5]===!1)},m(u,p){j(u,e,p),r(e,t),r(e,l),o||(f=ce(e,"click",i[25]),o=!0)},p(u,p){p[0]&32&&n!==(n=u[5]===!1)&&b(e,"disabled",n)},d(u){u&&a(e),o=!1,f()}}}function ho(i){let e,t,l,n,o,f,u,p;return{c(){e=s("section"),t=s("ion-button"),l=s("label"),n=s("ion-icon"),o=me(`
                                Subir Evidencia
                            `),f=s("input"),this.h()},l(O){e=c(O,"SECTION",{style:!0});var k=v(e);t=c(k,"ION-BUTTON",{fill:!0,class:!0,style:!0});var m=v(t);l=c(m,"LABEL",{for:!0,style:!0});var d=v(l);n=c(d,"ION-ICON",{icon:!0,slot:!0,style:!0}),v(n).forEach(a),o=ve(d,`
                                Subir Evidencia
                            `),f=c(d,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),d.forEach(a),m.forEach(a),k.forEach(a),this.h()},h(){b(n,"icon",rn),b(n,"slot","start"),h(n,"vertical-align","middle"),h(f,"display","none"),q(f,"id","eventEvidence"),q(f,"name","fileToUpload"),q(f,"type","file"),f.multiple=!0,q(f,"accept","image/*"),q(f,"capture","environment"),q(l,"for","eventEvidence"),h(l,"width","100%"),h(l,"height","100%"),b(t,"fill","outline"),b(t,"class","loadEvidence"),h(t,"flex","1"),h(t,"display","flex"),h(t,"align-items","center"),h(t,"gap","8px"),h(e,"display","flex"),h(e,"gap","8px"),h(e,"padding","0px 16px")},m(O,k){j(O,e,k),r(e,t),r(t,l),r(l,n),r(l,o),r(l,f),u||(p=[ce(f,"change",i[18]),ce(f,"click",i[19])],u=!0)},p:ze,d(O){O&&a(e),u=!1,De(p)}}}function Lt(i){let e,t,l=Re(i[2]),n=[];for(let o=0;o<l.length;o+=1)n[o]=zt(Nt(i,l,o));return{c(){e=s("section"),t=s("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=c(o,"SECTION",{});var f=v(e);t=c(f,"DIV",{class:!0,style:!0});var u=v(t);for(let p=0;p<n.length;p+=1)n[p].l(u);u.forEach(a),f.forEach(a),this.h()},h(){q(t,"class","image-grid"),h(t,"display","grid"),h(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),h(t,"gap","10px"),h(t,"padding","0px 10px")},m(o,f){j(o,e,f),r(e,t);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null)},p(o,f){if(f[0]&69206020){l=Re(o[2]);let u;for(u=0;u<l.length;u+=1){const p=Nt(o,l,u);n[u]?n[u].p(p,f):(n[u]=zt(p),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=l.length}},d(o){o&&a(e),en(n,o)}}}function zt(i){let e,t,l,n,o,f=`<ion-icon icon="${sn}"></ion-icon>`,u,p,O;function k(){return i[31](i[49])}function m(){return i[32](i[51])}return{c(){e=s("div"),t=s("ion-img"),n=N(),o=s("button"),o.innerHTML=f,u=N(),this.h()},l(d){e=c(d,"DIV",{class:!0,style:!0});var g=v(e);t=c(g,"ION-IMG",{src:!0,alt:!0,style:!0}),v(t).forEach(a),n=T(g),o=c(g,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),Z(o)!=="svelte-ciiuxr"&&(o.innerHTML=f),u=T(g),g.forEach(a),this.h()},h(){Ge(t.src,l=i[49])||b(t,"src",l),b(t,"alt","Evidencia fotográfica"),h(t,"width","100%"),h(t,"height","100px"),h(t,"object-fit","cover"),h(t,"cursor","pointer"),h(t,"border","1px solid #ccc"),h(t,"border-radius","4px"),h(t,"margin-top","16px"),q(o,"class","remove-button"),h(o,"position","absolute"),h(o,"top","5px"),h(o,"right","5px"),h(o,"border","none"),h(o,"cursor","pointer"),h(o,"font-size","18px"),h(o,"background","white"),h(o,"border-radius","50%"),h(o,"padding","3px 4px 0px"),h(o,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),h(o,"color","#0000008f"),q(e,"class","image-container"),h(e,"position","relative")},m(d,g){j(d,e,g),r(e,t),r(e,n),r(e,o),r(e,u),p||(O=[ce(t,"click",k),ce(o,"click",m)],p=!0)},p(d,g){i=d,g[0]&4&&!Ge(t.src,l=i[49])&&b(t,"src",l)},d(d){d&&a(e),p=!1,De(O)}}}function Mt(i){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=s("div"),e.innerHTML=t,this.h()},l(l){e=c(l,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),Z(e)!=="svelte-h8s7r2"&&(e.innerHTML=t),this.h()},h(){q(e,"class","overlay"),h(e,"position","fixed"),h(e,"top","0"),h(e,"left","0"),h(e,"width","100vw"),h(e,"height","100vh"),h(e,"background","rgba(0, 0, 0, 0.5)"),h(e,"display","flex"),h(e,"align-items","center"),h(e,"justify-content","center"),h(e,"z-index","9999")},m(l,n){j(l,e,n)},d(l){l&&a(e)}}}function At(i){let e,t,l,n,o,f,u=`<ion-icon icon="${cn}"></ion-icon>`,p,O;return{c(){e=s("div"),t=s("div"),l=s("ion-img"),o=N(),f=s("button"),f.innerHTML=u,this.h()},l(k){e=c(k,"DIV",{class:!0,style:!0});var m=v(e);t=c(m,"DIV",{class:!0,style:!0});var d=v(t);l=c(d,"ION-IMG",{src:!0,alt:!0,style:!0}),v(l).forEach(a),o=T(d),f=c(d,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),Z(f)!=="svelte-g0qr0o"&&(f.innerHTML=u),d.forEach(a),m.forEach(a),this.h()},h(){Ge(l.src,n=i[9])||b(l,"src",n),b(l,"alt","Evidencia fotográfica"),h(l,"width","100%"),h(l,"height","auto"),q(f,"class","close-button"),h(f,"position","absolute"),h(f,"top","5px"),h(f,"right","5px"),h(f,"background","white"),h(f,"color","#444444d1"),h(f,"border","none"),h(f,"cursor","pointer"),h(f,"padding","2px 2px 0px 6px"),h(f,"border-radius","50%"),h(f,"font-size","20px"),q(t,"class","modal-content"),h(t,"position","relative"),h(t,"background","white"),h(t,"padding","20px"),h(t,"border-radius","8px"),h(t,"max-width","90vw"),h(t,"max-height","90vh"),h(t,"overflow","auto"),q(e,"class","modal-overlay"),h(e,"position","fixed"),h(e,"top","0"),h(e,"left","0"),h(e,"width","100vw"),h(e,"height","100vh"),h(e,"background","rgba(0, 0, 0, 0.8)"),h(e,"display","flex"),h(e,"justify-content","center"),h(e,"align-items","center"),h(e,"z-index","1000")},m(k,m){j(k,e,m),r(e,t),r(t,l),r(t,o),r(t,f),p||(O=[ce(f,"click",i[27]),ce(t,"click",tn(i[28])),ce(e,"click",i[27])],p=!0)},p(k,m){m[0]&512&&!Ge(l.src,n=k[9])&&b(l,"src",n)},d(k){k&&a(e),p=!1,De(O)}}}function po(i){let e,t,l,n,o="Cerrar",f,u,p=i[11].title+"",O,k,m,d,g,E,C=i[11].client_phone&&i[11].client_phone.trim().length,y,P,B,V,R=i[11].schedule&&i[11].schedule.trim().length,K,H,L=i[11].logistic_comments&&i[11].logistic_comments.trim().length,w,M,D,U,F,S,X,ee,ie,re=(!i[12]&&!i[13]||i[12]&&i[13])&&$n(i);function Ee(_,I){return _[11].client_name!=null?to:eo}let se=Ee(i)(i),he=C&&no(i);function ge(_,I){if(_[11].line1&&_[11].line1.trim().length)return lo;if(_[11].line2&&_[11].line2.trim().length)return oo}let pe=ge(i),fe=pe&&pe(i),de=i[6]&&Tt(i),ue=i[7]&&i[7]!=="<br>"&&Ct(i),be=R&&ao(i),ke=i[11].driver_comments&&so(i),Oe=L&&co(i),ye=i[11].tag&&i[11].tag_color&&fo(i),Ne=!i[13]&&_o(i),_e=(i[12]&&i[13]||!i[12]&&!i[13])&&ho(i),Y=i[1]&&Lt(i),$=i[3]&&Mt(),J=i[8]&&At(i);return{c(){e=s("ion-header"),t=s("ion-toolbar"),l=s("ion-buttons"),n=s("ion-button"),n.textContent=o,f=N(),u=s("ion-title"),O=me(p),k=N(),re&&re.c(),m=N(),d=s("ion-content"),g=s("ion-list"),se.c(),E=N(),he&&he.c(),y=N(),fe&&fe.c(),P=N(),de&&de.c(),B=N(),ue&&ue.c(),V=N(),be&&be.c(),K=N(),ke&&ke.c(),H=N(),Oe&&Oe.c(),w=N(),ye&&ye.c(),M=N(),Ne&&Ne.c(),D=N(),_e&&_e.c(),U=N(),Y&&Y.c(),F=N(),$&&$.c(),S=N(),J&&J.c(),X=Se(),this.h()},l(_){e=c(_,"ION-HEADER",{translucent:!0});var I=v(e);t=c(I,"ION-TOOLBAR",{});var A=v(t);l=c(A,"ION-BUTTONS",{slot:!0});var G=v(l);n=c(G,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),Z(n)!=="svelte-2ks32x"&&(n.textContent=o),G.forEach(a),f=T(A),u=c(A,"ION-TITLE",{style:!0,title:!0});var ae=v(u);O=ve(ae,p),ae.forEach(a),k=T(A),re&&re.l(A),A.forEach(a),I.forEach(a),m=T(_),d=c(_,"ION-CONTENT",{fullscreen:!0});var le=v(d);g=c(le,"ION-LIST",{});var z=v(g);se.l(z),E=T(z),he&&he.l(z),y=T(z),fe&&fe.l(z),P=T(z),de&&de.l(z),B=T(z),ue&&ue.l(z),V=T(z),be&&be.l(z),K=T(z),ke&&ke.l(z),H=T(z),Oe&&Oe.l(z),w=T(z),ye&&ye.l(z),M=T(z),Ne&&Ne.l(z),D=T(z),_e&&_e.l(z),U=T(z),Y&&Y.l(z),z.forEach(a),le.forEach(a),F=T(_),$&&$.l(_),S=T(_),J&&J.l(_),X=Se(),this.h()},h(){b(n,"color","medium"),b(l,"slot","start"),h(u,"text-align","center"),b(u,"title",i[11].title),b(e,"translucent",""),b(d,"fullscreen","")},m(_,I){j(_,e,I),r(e,t),r(t,l),r(l,n),r(t,f),r(t,u),r(u,O),r(t,k),re&&re.m(t,null),j(_,m,I),j(_,d,I),r(d,g),se.m(g,null),r(g,E),he&&he.m(g,null),r(g,y),fe&&fe.m(g,null),r(g,P),de&&de.m(g,null),r(g,B),ue&&ue.m(g,null),r(g,V),be&&be.m(g,null),r(g,K),ke&&ke.m(g,null),r(g,H),Oe&&Oe.m(g,null),r(g,w),ye&&ye.m(g,null),r(g,M),Ne&&Ne.m(g,null),r(g,D),_e&&_e.m(g,null),r(g,U),Y&&Y.m(g,null),j(_,F,I),$&&$.m(_,I),j(_,S,I),J&&J.m(_,I),j(_,X,I),ee||(ie=ce(n,"click",i[20]),ee=!0)},p(_,I){(!_[12]&&!_[13]||_[12]&&_[13])&&re.p(_,I),se.p(_,I),C&&he.p(_,I),fe&&fe.p(_,I),_[6]?de?de.p(_,I):(de=Tt(_),de.c(),de.m(g,B)):de&&(de.d(1),de=null),_[7]&&_[7]!=="<br>"?ue?ue.p(_,I):(ue=Ct(_),ue.c(),ue.m(g,V)):ue&&(ue.d(1),ue=null),R&&be.p(_,I),_[11].driver_comments&&ke.p(_,I),L&&Oe.p(_,I),_[11].tag&&_[11].tag_color&&ye.p(_,I),_[13]||Ne.p(_,I),(_[12]&&_[13]||!_[12]&&!_[13])&&_e.p(_,I),_[1]?Y?Y.p(_,I):(Y=Lt(_),Y.c(),Y.m(g,null)):Y&&(Y.d(1),Y=null),_[3]?$||($=Mt(),$.c(),$.m(S.parentNode,S)):$&&($.d(1),$=null),_[8]?J?J.p(_,I):(J=At(_),J.c(),J.m(X.parentNode,X)):J&&(J.d(1),J=null)},i:ze,o:ze,d(_){_&&(a(e),a(m),a(d),a(F),a(S),a(X)),re&&re.d(),se.d(),he&&he.d(),fe&&fe.d(),de&&de.d(),ue&&ue.d(),be&&be.d(),ke&&ke.d(),Oe&&Oe.d(),ye&&ye.d(),Ne&&Ne.d(),_e&&_e.d(),Y&&Y.d(),$&&$.d(_),J&&J.d(_),ee=!1,ie()}}}const St=/Teléfono:\s*(\d{10,})/;function mo(i,e,t){let l=ut,n=document.querySelector("ion-modal"),o=n.componentProps.delivery,f=n.componentProps.isLast||!1,u=n.componentProps.flag||!1,p=o.driver_comments?o.driver_comments:"",O=o.deliver_status?o.deliver_status:"",k=o.img?o.img:"",m=o.img_id?o.img_id:"",d=k?$e(k):new Array,g=m?$e(m):new Array,E={latitude:null,longitude:null},C=o.stopsApproval,y=o.smsActive,P=!1,B=!0,V=!1,R="",K=o.comments_ext,H=!1,L="",w=new Object,M="",D=o.tag_color?Pe(o.tag_color,.2):"",U=o.tag_color?Pe(o.tag_color,.3):"";et(()=>{w=JSON.parse(localStorage.getItem("userSession")),F()});function F(){o.date_service?o.date_service&&!o.date_completed&&!o.service_time?(t(4,B=!1),t(5,V=!0)):o.date_service&&o.date_completed&&o.service_time&&(t(4,B=!1),t(5,V=!1)):(t(4,B=!0),t(5,V=!1))}if(o.comments_ext){const _=o.comments_ext.match(St);_&&(R=_[1],K=o.comments_ext.replace(St,"").trim())}const S=async(_,I)=>{await(await Xe.create({header:_||"Error",message:I||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},X=async(_="",I="",A="",G=function(le={}){},ae={})=>{console.log(ae),await(await Xe.create({header:_||"Error",message:I||"Vuelva a intentar",buttons:[{text:"No",role:"cancel",handler:()=>{}},{text:"Sí",handler:()=>{t(3,P=!0),Fe(A,function(z={}){t(3,P=!1),G(z)},ae)}}]})).present()},ee=async _=>{if(d.length>=5){S("Límite de evidencias","Solo se permite subir 5 fotos por parada");return}if(u&&f&&d.length>=1){S("Límite de evidencias","Para el final de la ruta solo se permite subir 1 foto");return}const A=_.target.files[0];if(A)try{t(3,P=!0);const G=await Ee(A);G&&Fe(`${l}api/admin/manager/upload_img_driver.php`,function(ae){ae.success?(t(1,k=k?`${k},${ae.img}`:ae.img),m=m?`${m},${ae.img_id}`:ae.img_id,t(2,d=$e(k)),g=$e(m)):S("Carga fallida","Actualiza la página y vuelve a intentar. Si el problema persiste, contacta a soporte.")},{fileToUpload:G})}catch(G){console.error("Compression error:",G)}finally{t(3,P=!1)}};function ie(_){var I=o.service_time;!I&&B&&!f&&!u&&(_.preventDefault(),S("Registrar Ingreso","Antes de subir la evidencia registra el ingreso a la actual parada."))}function re(){var _=u?o.date_completed:!1;if(!_&&!B&&V&&!f&&!u){var I=new Object;I.id_event=o.id_event,I.type="checkout",I.id_user_over=w.id_user,I.token=w.token,X("Registrar Salida","¿Completaste tu entrega?",l+"api/admin/route/record_check_date.php",function(A){A.minutes&&S("Tiempo por parada","Completaste la parada en "+A.minutes+" minutos.")},I)}}const Ee=async _=>new Promise(I=>{const A=new Image;A.src=URL.createObjectURL(_),A.onload=()=>{const G=document.createElement("canvas"),ae=G.getContext("2d"),le=800,z=600;let x=A.width,Q=A.height;x>le&&(Q*=le/x,x=le),Q>z&&(x*=z/Q,Q=z),G.width=x,G.height=Q,ae.drawImage(A,0,0,x,Q),G.toBlob(te=>{I(te),URL.revokeObjectURL(A.src),ae.clearRect(0,0,G.width,G.height)},"image/jpeg",.7)}}),W=()=>{n.dismiss({data:Date.now()})};function se(_){t(2,d=d.filter((I,A)=>A!==_))}const he=async()=>{try{if(t(3,P=!0),t(1,k=d.join(",")),m=g.join(","),re(),await pe())if(M.value=="delivered"||M.value!=="delivered"&&(p.value||o.driver_comments)||u&&f){const I={id_route:o.id_route,...!u&&!f&&{id_event:o.id_event},...!u&&!f&&{comments:p.value},...!u&&!f&&{deliver_status:M.value},img:k,img_id:m,lat:E.latitude,lon:E.longitude,...C==="0"&&{approve:"0"},...f&&{isLast:!0},...u&&f&&{destiny:!0},id_user_over:w.id_user,token:w.token};I.img&&I.img_id||k?(t(3,P=!0),Fe(`${l}api/admin/evidence/send_evidence.php`,function(A){if(A.success==!0){const G=I.id_route;W(),f&&(ge("","",G,f),C=="0"&&ye(G,"completed")),t(3,P=!1)}else t(3,P=!1),S("Carga fallida","Actualiza la página y vuelve a intentar cargar la información!")},I)):S("Información incompleta","Cargar evidencia fotográfica faltante para completar parada.")}else S("Motivo de status de entrega","Favor de ingresar en notas el motivo por el que la entrega no fue entregada correctamente");else S("Ubicación faltante","Asegúrate darle permisos a Rutaflow para acceder a tu ubicación")}catch(_){console.error("Error fetching data:",_)}finally{t(3,P=!1)}},ge=(_,I,A,G)=>{n.componentProps.routeId=A,n.componentProps.driverId=o.id_driver,qe("modal-km-gas",fn,{checklist:_,driverId:I,routeId:A,isLast:G}).then(ae=>{})},pe=async()=>navigator.geolocation?new Promise((_,I)=>{navigator.geolocation.getCurrentPosition(A=>{E.latitude=A.coords.latitude,E.longitude=A.coords.longitude,_(!0)},A=>{console.error("Error getting location:",A),_(!1)})}):(console.error("Geolocation is not supported by your browser"),!1);async function fe(_){_.stopPropagation();let I=new Object;I.client_phone=R,I.client_name=o.title,I.delivery_phone=o.client_phone,I.enterprise_name=o.enterprise_name,I.id_user_over=w.id_user,I.token=w.token;try{Fe(`${l}api/admin/message_central/send_sms.php`,function(A){A.success?S("SMS enviado","Se envío correctamente un SMS a "+o.title+" con número de teléfono: "+R):S("SMS no enviado","Hubo un error al enviar SMS a "+o.title+" con número de teléfono: "+R+". Por favor contacte a soporte.")},I)}catch(A){console.error("Error during file upload:",A)}}function de(){t(4,B=!1),t(5,V=!0),be(o.id_event,"checkin")}function ue(){t(5,V=!1),t(4,B=!1),be(o.id_event,"checkout")}async function be(_,I){if(I){let A=new Object;A.type=I,A.id_event=_,A.id_user_over=w.id_user,A.token=w.token;try{Fe(`${l}api/admin/route/record_check_date.php`,function(G){G.minutes&&S("Tiempo por parada","Completaste la parada en "+G.minutes+" minutos.")},A)}catch(G){console.error("Error during file upload:",G)}finally{}}}const ke=_=>{t(9,L=_),t(8,H=!0)},Oe=()=>{t(8,H=!1),t(9,L="")};function ye(_,I){let A=new Object;return A.id_route=_,A.status=I,A.id_user_over=w.id_user,A.token=w.token,Fe(`${l}api/admin/route/change_status.php`,function(){},A),""}function Ne(_){nn.call(this,i,_)}function _e(_){He[_?"unshift":"push"](()=>{M=_,t(10,M)})}function Y(_){He[_?"unshift":"push"](()=>{p=_,t(0,p)})}return[p,k,d,P,B,V,R,K,H,L,M,o,f,u,O,y,D,U,ee,ie,W,se,he,fe,de,ue,ke,Oe,Ne,_e,Y,_=>ke(_),_=>se(_)]}class Dt extends Qe{constructor(e){super(),Ze(this,e,mo,po,Ye,{},null,[-1,-1])}}function Ht(i,e,t){const l=i.slice();return l[32]=e[t],l[34]=t,l}function Bt(i){let e,t,l=Re(i[1]),n=[];for(let o=0;o<l.length;o+=1)n[o]=Pt(Ht(i,l,o));return{c(){e=s("section"),t=s("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=c(o,"SECTION",{});var f=v(e);t=c(f,"DIV",{class:!0,style:!0});var u=v(t);for(let p=0;p<n.length;p+=1)n[p].l(u);u.forEach(a),f.forEach(a),this.h()},h(){q(t,"class","image-grid"),h(t,"display","grid"),h(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),h(t,"gap","10px"),h(t,"padding","0px 10px")},m(o,f){j(o,e,f),r(e,t);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null)},p(o,f){if(f[0]&32770){l=Re(o[1]);let u;for(u=0;u<l.length;u+=1){const p=Ht(o,l,u);n[u]?n[u].p(p,f):(n[u]=Pt(p),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=l.length}},d(o){o&&a(e),en(n,o)}}}function Pt(i){let e,t,l,n,o,f=`<ion-icon icon="${sn}"></ion-icon>`,u,p,O;function k(){return i[22](i[32])}function m(){return i[23](i[34])}return{c(){e=s("div"),t=s("ion-img"),n=N(),o=s("button"),o.innerHTML=f,u=N(),this.h()},l(d){e=c(d,"DIV",{class:!0,style:!0});var g=v(e);t=c(g,"ION-IMG",{src:!0,alt:!0,style:!0}),v(t).forEach(a),n=T(g),o=c(g,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),Z(o)!=="svelte-zguiov"&&(o.innerHTML=f),u=T(g),g.forEach(a),this.h()},h(){Ge(t.src,l=i[32])||b(t,"src",l),b(t,"alt","Evidencia fotográfica"),h(t,"width","100%"),h(t,"height","100px"),h(t,"object-fit","cover"),h(t,"cursor","pointer"),h(t,"border","1px solid #ccc"),h(t,"border-radius","4px"),h(t,"margin-top","16px"),q(o,"class","remove-button"),h(o,"position","absolute"),h(o,"top","5px"),h(o,"right","5px"),h(o,"border","none"),h(o,"cursor","pointer"),h(o,"font-size","18px"),h(o,"background","white"),h(o,"border-radius","50%"),h(o,"padding","3px 4px 0px"),h(o,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),h(o,"color","#0000008f"),q(e,"class","image-container"),h(e,"position","relative")},m(d,g){j(d,e,g),r(e,t),r(e,n),r(e,o),r(e,u),p||(O=[ce(t,"click",k),ce(o,"click",m)],p=!0)},p(d,g){i=d,g[0]&2&&!Ge(t.src,l=i[32])&&b(t,"src",l)},d(d){d&&a(e),p=!1,De(O)}}}function Rt(i){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=s("div"),e.innerHTML=t,this.h()},l(l){e=c(l,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),Z(e)!=="svelte-h8s7r2"&&(e.innerHTML=t),this.h()},h(){q(e,"class","overlay"),h(e,"position","fixed"),h(e,"top","0"),h(e,"left","0"),h(e,"width","100vw"),h(e,"height","100vh"),h(e,"background","rgba(0, 0, 0, 0.5)"),h(e,"display","flex"),h(e,"align-items","center"),h(e,"justify-content","center"),h(e,"z-index","9999")},m(l,n){j(l,e,n)},d(l){l&&a(e)}}}function Ut(i){let e,t,l,n,o,f,u=`<ion-icon icon="${cn}"></ion-icon>`,p,O;return{c(){e=s("div"),t=s("div"),l=s("ion-img"),o=N(),f=s("button"),f.innerHTML=u,this.h()},l(k){e=c(k,"DIV",{class:!0,style:!0});var m=v(e);t=c(m,"DIV",{class:!0,style:!0});var d=v(t);l=c(d,"ION-IMG",{src:!0,alt:!0,style:!0}),v(l).forEach(a),o=T(d),f=c(d,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),Z(f)!=="svelte-g0qr0o"&&(f.innerHTML=u),d.forEach(a),m.forEach(a),this.h()},h(){Ge(l.src,n=i[8])||b(l,"src",n),b(l,"alt","Evidencia fotográfica"),h(l,"width","100%"),h(l,"height","auto"),q(f,"class","close-button"),h(f,"position","absolute"),h(f,"top","5px"),h(f,"right","5px"),h(f,"background","white"),h(f,"color","#444444d1"),h(f,"border","none"),h(f,"cursor","pointer"),h(f,"padding","2px 2px 0px 6px"),h(f,"border-radius","50%"),h(f,"font-size","20px"),q(t,"class","modal-content"),h(t,"position","relative"),h(t,"background","white"),h(t,"padding","20px"),h(t,"border-radius","8px"),h(t,"max-width","90vw"),h(t,"max-height","90vh"),h(t,"overflow","auto"),q(e,"class","modal-overlay"),h(e,"position","fixed"),h(e,"top","0"),h(e,"left","0"),h(e,"width","100vw"),h(e,"height","100vh"),h(e,"background","rgba(0, 0, 0, 0.8)"),h(e,"display","flex"),h(e,"justify-content","center"),h(e,"align-items","center"),h(e,"z-index","1000")},m(k,m){j(k,e,m),r(e,t),r(t,l),r(t,o),r(t,f),p||(O=[ce(f,"click",i[16]),ce(t,"click",tn(i[17])),ce(e,"click",i[16])],p=!0)},p(k,m){m[0]&256&&!Ge(l.src,n=k[8])&&b(l,"src",n)},d(k){k&&a(e),p=!1,De(O)}}}function vo(i){let e,t,l,n,o="Cancelar",f,u,p="AGREGAR GASTO",O,k,m,d="Confirmar",g,E,C,y,P,B,V,R,K,H,L,w,M,D,U,F,S,X,ee='Tipo de pago <ion-text color="danger">(Obligatorio)</ion-text>',ie,re,Ee="Efectivo",W,se,he="Tarjeta",ge,pe,fe="Transferencia",de,ue,be,ke,Oe,ye,Ne,_e,Y,$,J=`<ion-icon icon="${rn}" slot="start"></ion-icon>
                        Subir Evidencia`,_,I,A,G,ae,le,z,x,Q=i[0]&&Bt(i),te=i[6]&&Rt(),oe=i[7]&&Ut(i);return{c(){e=s("ion-header"),t=s("ion-toolbar"),l=s("ion-buttons"),n=s("ion-button"),n.textContent=o,f=N(),u=s("ion-title"),u.textContent=p,O=N(),k=s("ion-buttons"),m=s("ion-button"),m.textContent=d,g=N(),E=s("ion-content"),C=s("ion-list"),y=s("ion-item"),P=s("ion-icon"),B=N(),V=s("ion-input"),R=N(),K=s("ion-item"),H=s("ion-icon"),L=N(),w=s("ion-input"),M=N(),D=s("ion-item"),U=s("ion-icon"),F=N(),S=s("ion-select"),X=s("div"),X.innerHTML=ee,ie=N(),re=s("ion-select-option"),re.textContent=Ee,W=N(),se=s("ion-select-option"),se.textContent=he,ge=N(),pe=s("ion-select-option"),pe.textContent=fe,de=N(),ue=s("ion-item"),be=s("ion-icon"),ke=N(),Oe=s("ion-textarea"),ye=N(),Ne=s("section"),_e=s("label"),Y=s("ion-button"),$=s("label"),$.innerHTML=J,_=N(),I=s("input"),A=N(),Q&&Q.c(),G=N(),te&&te.c(),ae=N(),oe&&oe.c(),le=Se(),this.h()},l(ne){e=c(ne,"ION-HEADER",{translucent:!0});var Ie=v(e);t=c(Ie,"ION-TOOLBAR",{});var Ce=v(t);l=c(Ce,"ION-BUTTONS",{slot:!0});var Te=v(l);n=c(Te,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1f8rjcf"&&(n.textContent=o),Te.forEach(a),f=T(Ce),u=c(Ce,"ION-TITLE",{title:!0,"data-svelte-h":!0}),Z(u)!=="svelte-efps2s"&&(u.textContent=p),O=T(Ce),k=c(Ce,"ION-BUTTONS",{slot:!0});var we=v(k);m=c(we,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),Z(m)!=="svelte-k5zoz0"&&(m.textContent=d),we.forEach(a),Ce.forEach(a),Ie.forEach(a),g=T(ne),E=c(ne,"ION-CONTENT",{fullscreen:!0});var Ve=v(E);C=c(Ve,"ION-LIST",{});var Be=v(C);y=c(Be,"ION-ITEM",{});var lt=v(y);P=c(lt,"ION-ICON",{icon:!0,slot:!0}),v(P).forEach(a),B=T(lt),V=c(lt,"ION-INPUT",{label:!0,type:!0,placeholder:!0,value:!0}),v(V).forEach(a),lt.forEach(a),R=T(Be),K=c(Be,"ION-ITEM",{});var it=v(K);H=c(it,"ION-ICON",{icon:!0,slot:!0}),v(H).forEach(a),L=T(it),w=c(it,"ION-INPUT",{label:!0,type:!0,value:!0}),v(w).forEach(a),it.forEach(a),M=T(Be),D=c(Be,"ION-ITEM",{});var rt=v(D);U=c(rt,"ION-ICON",{icon:!0,slot:!0}),v(U).forEach(a),F=T(rt),S=c(rt,"ION-SELECT",{placeholder:!0,value:!0});var je=v(S);X=c(je,"DIV",{slot:!0,"data-svelte-h":!0}),Z(X)!=="svelte-wl764p"&&(X.innerHTML=ee),ie=T(je),re=c(je,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),Z(re)!=="svelte-i9crym"&&(re.textContent=Ee),W=T(je),se=c(je,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),Z(se)!=="svelte-fx0z11"&&(se.textContent=he),ge=T(je),pe=c(je,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),Z(pe)!=="svelte-1c24jf2"&&(pe.textContent=fe),je.forEach(a),rt.forEach(a),de=T(Be),ue=c(Be,"ION-ITEM",{});var at=v(ue);be=c(at,"ION-ICON",{icon:!0,slot:!0}),v(be).forEach(a),ke=T(at),Oe=c(at,"ION-TEXTAREA",{label:!0,placeholder:!0}),v(Oe).forEach(a),at.forEach(a),ye=T(Be),Ne=c(Be,"SECTION",{});var kt=v(Ne);_e=c(kt,"LABEL",{for:!0,style:!0});var Et=v(_e);Y=c(Et,"ION-BUTTON",{fill:!0,size:!0,class:!0,expand:!0});var st=v(Y);$=c(st,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),Z($)!=="svelte-1m9yw22"&&($.innerHTML=J),_=T(st),I=c(st,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),st.forEach(a),Et.forEach(a),kt.forEach(a),A=T(Be),Q&&Q.l(Be),Be.forEach(a),Ve.forEach(a),G=T(ne),te&&te.l(ne),ae=T(ne),oe&&oe.l(ne),le=Se(),this.h()},h(){b(n,"color","medium"),b(l,"slot","start"),b(u,"title",""),b(m,"strong",""),b(k,"slot","end"),b(e,"translucent",""),b(P,"icon",ln),b(P,"slot","start"),b(V,"label","Concepto"),b(V,"type","text"),b(V,"placeholder","Escribe aquí..."),b(V,"value",i[9]?i[9]:""),b(H,"icon",ht),b(H,"slot","start"),b(w,"label","Monto $"),b(w,"type","number"),b(w,"value",i[10]?i[10]:""),b(U,"icon",Mn),b(U,"slot","start"),q(X,"slot","label"),b(re,"value","cash"),b(se,"value","card"),b(pe,"value","transfer"),b(S,"placeholder","Tipo de pago"),b(S,"value",i[11]?i[11]:""),b(be,"icon",ht),b(be,"slot","start"),b(Oe,"label","Comentarios"),b(Oe,"placeholder","Escribe aquí..."),q($,"for","eventEvidence"),h($,"width","100%"),h($,"padding","8px"),h(I,"display","none"),q(I,"id","eventEvidence"),q(I,"name","fileToUpload"),q(I,"type","file"),q(I,"accept","image/*"),q(I,"capture","environment"),b(Y,"fill","outline"),b(Y,"size","small"),b(Y,"class","loadEvidence"),b(Y,"expand","block"),q(_e,"for","eventEvidence"),h(_e,"display","block"),h(_e,"width","100%"),b(E,"fullscreen","")},m(ne,Ie){j(ne,e,Ie),r(e,t),r(t,l),r(l,n),r(t,f),r(t,u),r(t,O),r(t,k),r(k,m),j(ne,g,Ie),j(ne,E,Ie),r(E,C),r(C,y),r(y,P),r(y,B),r(y,V),i[18](V),r(C,R),r(C,K),r(K,H),r(K,L),r(K,w),i[19](w),r(C,M),r(C,D),r(D,U),r(D,F),r(D,S),r(S,X),r(S,ie),r(S,re),r(S,W),r(S,se),r(S,ge),r(S,pe),i[20](S),r(C,de),r(C,ue),r(ue,be),r(ue,ke),r(ue,Oe),i[21](Oe),r(C,ye),r(C,Ne),r(Ne,_e),r(_e,Y),r(Y,$),r(Y,_),r(Y,I),r(C,A),Q&&Q.m(C,null),j(ne,G,Ie),te&&te.m(ne,Ie),j(ne,ae,Ie),oe&&oe.m(ne,Ie),j(ne,le,Ie),z||(x=[ce(n,"click",i[13]),ce(m,"click",i[14]),ce(I,"change",i[12])],z=!0)},p(ne,Ie){ne[0]?Q?Q.p(ne,Ie):(Q=Bt(ne),Q.c(),Q.m(C,null)):Q&&(Q.d(1),Q=null),ne[6]?te||(te=Rt(),te.c(),te.m(ae.parentNode,ae)):te&&(te.d(1),te=null),ne[7]?oe?oe.p(ne,Ie):(oe=Ut(ne),oe.c(),oe.m(le.parentNode,le)):oe&&(oe.d(1),oe=null)},i:ze,o:ze,d(ne){ne&&(a(e),a(g),a(E),a(G),a(ae),a(le)),i[18](null),i[19](null),i[20](null),i[21](null),Q&&Q.d(),te&&te.d(ne),oe&&oe.d(ne),z=!1,De(x)}}}function go(i,e,t){let l=ut,n=document.querySelector("ion-modal"),o=n.componentProps.routeId,f=n.componentProps.ex_concept,u=n.componentProps.ex_amount,p=n.componentProps.ex_type,O=n.componentProps.id_expense,k="",m=new Array,d="",g="",E=0,C="",y="",P=!1,B=new Object,V=!1,R="";et(()=>{B=JSON.parse(localStorage.getItem("userSession"))});const K=async(W,se)=>{await(await Xe.create({header:W||"Error",message:se||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},H=async W=>{t(6,P=!0);const he=W.target.files[0],ge=await L(he);if(ge){var pe=new Object;pe.fileToUpload=ge,pe.id_user_over=B.id_user,pe.token=B.token;try{Fe(`${l}api/admin/manager/upload_img_driver.php`,function(fe){fe.success?(t(0,k=fe.img),t(1,m=$e(k)),d=fe.img_id):K("Error","No se pudo subir la imagen"),t(6,P=!1)},pe)}catch(fe){console.error("Error during file upload:",fe)}finally{t(6,P=!1)}}},L=async W=>new Promise(se=>{const he=new Image;he.src=URL.createObjectURL(W),he.onload=()=>{const ge=document.createElement("canvas"),pe=ge.getContext("2d"),fe=800,de=600;let ue=he.width,be=he.height;ue>fe&&(be*=fe/ue,ue=fe),be>de&&(ue*=de/be,be=de),ge.width=ue,ge.height=be,pe.drawImage(he,0,0,ue,be),ge.toBlob(ke=>{se(ke),URL.revokeObjectURL(he.src),pe.clearRect(0,0,ge.width,ge.height)},"image/jpeg",.7)}}),w=()=>{ot.dismiss()},M=()=>{var W=new Object;W.id_route=o,W.comments=C.value,W.type=g.value,W.img=k,W.img_id=d,W.amount=E.value,W.concept=y.value,W.status="done",W.id_expense=O||"null",W.id_user_over=B.id_user,W.token=B.token,!d||!k||!E.value||!y.value?K("Datos incompletos","Llena los datos requeridos para completar el registro"):Fe(`${l}api/admin/expenses/add_expense.php`,function(se){w()},W)},D=W=>{t(8,R=W),t(7,V=!0)},U=()=>{t(7,V=!1),t(8,R="")};function F(W){nn.call(this,i,W)}function S(W){He[W?"unshift":"push"](()=>{y=W,t(5,y)})}function X(W){He[W?"unshift":"push"](()=>{E=W,t(3,E)})}function ee(W){He[W?"unshift":"push"](()=>{g=W,t(2,g)})}function ie(W){He[W?"unshift":"push"](()=>{C=W,t(4,C)})}return[k,m,g,E,C,y,P,V,R,f,u,p,H,w,M,D,U,F,S,X,ee,ie,W=>D(W),W=>removeFile(W)]}class mt extends Qe{constructor(e){super(),Ze(this,e,go,vo,Ye,{},null,[-1,-1])}}function Vt(i,e,t){const l=i.slice();return l[7]=e[t],l}function bo(i){let e,t="Cargar gasto",l,n;function o(...f){return i[4](i[7],...f)}return{c(){e=s("ion-button"),e.textContent=t,this.h()},l(f){e=c(f,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),Z(e)!=="svelte-175aelj"&&(e.textContent=t),this.h()},h(){b(e,"fill","outline"),b(e,"size","small"),b(e,"aria-selected","")},m(f,u){j(f,e,u),l||(n=ce(e,"click",o),l=!0)},p(f,u){i=f},d(f){f&&a(e),l=!1,n()}}}function ko(i){let e,t="Gasto completado";return{c(){e=s("ion-button"),e.textContent=t,this.h()},l(l){e=c(l,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),Z(e)!=="svelte-tlger7"&&(e.textContent=t),this.h()},h(){b(e,"fill","solid"),b(e,"size","small"),b(e,"aria-selected","")},m(l,n){j(l,e,n)},p:ze,d(l){l&&a(e)}}}function Ft(i,e){let t,l,n,o=e[7].concept+"",f,u,p;function O(d,g){return d[7].status=="done"?ko:bo}let m=O(e)(e);return{key:i,first:null,c(){t=s("ion-item"),l=s("ion-label"),n=s("p"),f=me(o),u=N(),m.c(),p=N(),this.h()},l(d){t=c(d,"ION-ITEM",{});var g=v(t);l=c(g,"ION-LABEL",{style:!0});var E=v(l);n=c(E,"P",{style:!0});var C=v(n);f=ve(C,o),C.forEach(a),E.forEach(a),u=T(g),m.l(g),p=T(g),g.forEach(a),this.h()},h(){h(n,"margin-left","10px"),h(l,"display","flex"),this.first=t},m(d,g){j(d,t,g),r(t,l),r(l,n),r(n,f),r(t,u),m.m(t,null),r(t,p)},p(d,g){e=d,m.p(e,g)},d(d){d&&a(t),m.d()}}}function Eo(i){let e,t,l,n,o=`<ion-icon style="font-size: 25px!important;" icon="${An}"></ion-icon>`,f,u,p="LISTA DE GASTOS",O,k,m,d=[],g=new Map,E,C,y,P="Cerrar",B,V,R=Re(i[0]);const K=H=>H[7].id_expenses;for(let H=0;H<R.length;H+=1){let L=Vt(i,R,H),w=K(L);g.set(w,d[H]=Ft(w,L))}return{c(){e=s("ion-header"),t=s("ion-toolbar"),l=s("ion-buttons"),n=s("ion-button"),n.innerHTML=o,f=N(),u=s("ion-title"),u.textContent=p,O=N(),k=s("ion-content"),m=s("ion-list");for(let H=0;H<d.length;H+=1)d[H].c();E=N(),C=s("ion-footer"),y=s("ion-button"),y.textContent=P,this.h()},l(H){e=c(H,"ION-HEADER",{translucent:!0});var L=v(e);t=c(L,"ION-TOOLBAR",{});var w=v(t);l=c(w,"ION-BUTTONS",{slot:!0});var M=v(l);n=c(M,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),Z(n)!=="svelte-160xz3i"&&(n.innerHTML=o),M.forEach(a),f=T(w),u=c(w,"ION-TITLE",{"data-svelte-h":!0}),Z(u)!=="svelte-1phn90x"&&(u.textContent=p),w.forEach(a),L.forEach(a),O=T(H),k=c(H,"ION-CONTENT",{fullscreen:!0});var D=v(k);m=c(D,"ION-LIST",{});var U=v(m);for(let S=0;S<d.length;S+=1)d[S].l(U);U.forEach(a),D.forEach(a),E=T(H),C=c(H,"ION-FOOTER",{});var F=v(C);y=c(F,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),Z(y)!=="svelte-zv7v83"&&(y.textContent=P),F.forEach(a),this.h()},h(){b(n,"color","medium"),b(l,"slot","end"),b(e,"translucent",""),b(k,"fullscreen",""),b(y,"fill","outline"),b(y,"color","tertiary"),b(y,"strong",""),h(y,"width","99%"),h(y,"height","auto")},m(H,L){j(H,e,L),r(e,t),r(t,l),r(l,n),r(t,f),r(t,u),j(H,O,L),j(H,k,L),r(k,m);for(let w=0;w<d.length;w+=1)d[w]&&d[w].m(m,null);j(H,E,L),j(H,C,L),r(C,y),B||(V=[ce(n,"click",i[3]),ce(y,"click",i[1])],B=!0)},p(H,[L]){L&5&&(R=Re(H[0]),d=tt(d,L,K,1,H,R,g,m,nt,Ft,null,Vt))},i:ze,o:ze,d(H){H&&(a(e),a(O),a(k),a(E),a(C));for(let L=0;L<d.length;L+=1)d[L].d();B=!1,De(V)}}}function Io(i){let e=document.querySelector("ion-modal");e.componentProps.routeId;let t=e.componentProps.expenses;et(()=>{});const l=()=>{ot.dismiss()};function n(u,p,O,k,m){e.componentProps.ex_amount=O,e.componentProps.ex_concept=p,e.componentProps.ex_type=k,e.componentProps.id_expense=m,qe("modal-expense",mt,{amount:O,concept:p,type:k,id_expense:m}).then(()=>{}),l()}return[t,l,n,u=>{qe("modal-expense",mt,{routeId:u}).then(p=>{}),l()},(u,p)=>n(p,u.concept,u.amount,u.type,u.id_expenses)]}class Oo extends Qe{constructor(e){super(),Ze(this,e,Io,Eo,Ye,{})}}const{document:qt}=Un;function jt(i,e,t){const l=i.slice();return l[49]=e[t],l[51]=t,l}function Gt(i,e,t){const l=i.slice();return l[49]=e[t],l[51]=t,l}function Kt(i,e,t){const l=i.slice();return l[49]=e[t],l[51]=t,l}function Xt(i){let e,t;return e=new Bn({props:{$$slots:{default:[Bo]},$$scope:{ctx:i}}}),{c(){gn(e.$$.fragment)},l(l){bn(e.$$.fragment,l)},m(l,n){kn(e,l,n),t=!0},p(l,n){const o={};n[0]&2043|n[1]&8388608&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(ct(e.$$.fragment,l),t=!0)},o(l){_t(e.$$.fragment,l),t=!1},d(l){En(e,l)}}}function No(i){let e,t='<div id="g_map" style="width: 100%; height: 100vh;"></div>';return{c(){e=s("ion-content"),e.innerHTML=t},l(l){e=c(l,"ION-CONTENT",{"data-svelte-h":!0}),Z(e)!=="svelte-1ydw6i9"&&(e.innerHTML=t)},m(l,n){j(l,e,n)},p:ze,d(l){l&&a(e)}}}function To(i){let e;function t(o,f){if(o[7].length>0)return yo;if(!o[3])return Co}let l=t(i),n=l&&l(i);return{c(){n&&n.c(),e=Se()},l(o){n&&n.l(o),e=Se()},m(o,f){n&&n.m(o,f),j(o,e,f)},p(o,f){l===(l=t(o))&&n?n.p(o,f):(n&&n.d(1),n=l&&l(o),n&&(n.c(),n.m(e.parentNode,e)))},d(o){o&&a(e),n&&n.d(o)}}}function Co(i){let e,t,l,n='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jala para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',o,f,u,p,O,k,m="0",d,g,E,C,y,P=i[6].origin+"",B,V,R,K="",H,L,w,M=[],D=new Map,U,F,S,X,ee,ie=i[5].length+1+"",re,Ee,W,se,he,ge,pe=i[6].destination+"",fe,de,ue,be="",ke,Oe,ye,Ne,_e=i[4]&&Wt(i),Y=Re(i[5]);const $=J=>J[49].id_event;for(let J=0;J<Y.length;J+=1){let _=jt(i,Y,J),I=$(_);D.set(I,M[J]=Yt(I,_))}return{c(){_e&&_e.c(),e=N(),t=s("ion-content"),l=s("ion-refresher"),l.innerHTML=n,o=N(),f=s("ion-list"),u=s("ion-item"),p=s("ion-avatar"),O=s("div"),k=s("div"),k.textContent=m,g=N(),E=s("ion-label"),C=s("ion-text"),y=s("h3"),B=me(P),V=N(),R=s("div"),R.innerHTML=K,H=N(),L=s("ion-icon"),w=N();for(let J=0;J<M.length;J+=1)M[J].c();U=N(),F=s("ion-item"),S=s("ion-avatar"),X=s("div"),ee=s("div"),re=me(ie),W=N(),se=s("ion-label"),he=s("ion-text"),ge=s("h3"),fe=me(pe),de=N(),ue=s("div"),ue.innerHTML=be,ke=N(),Oe=s("ion-icon"),this.h()},l(J){_e&&_e.l(J),e=T(J),t=c(J,"ION-CONTENT",{});var _=v(t);l=c(_,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),Z(l)!=="svelte-1srnbs3"&&(l.innerHTML=n),o=T(_),f=c(_,"ION-LIST",{});var I=v(f);u=c(I,"ION-ITEM",{});var A=v(u);p=c(A,"ION-AVATAR",{slot:!0});var G=v(p);O=c(G,"DIV",{class:!0,title:!0,style:!0});var ae=v(O);k=c(ae,"DIV",{class:!0,"data-svelte-h":!0}),Z(k)!=="svelte-3lvlrb"&&(k.textContent=m),ae.forEach(a),G.forEach(a),g=T(A),E=c(A,"ION-LABEL",{button:!0});var le=v(E);C=c(le,"ION-TEXT",{color:!0});var z=v(C);y=c(z,"H3",{});var x=v(y);B=ve(x,P),x.forEach(a),z.forEach(a),V=T(le),R=c(le,"DIV",{class:!0,"data-svelte-h":!0}),Z(R)!=="svelte-gz9kb"&&(R.innerHTML=K),le.forEach(a),H=T(A),L=c(A,"ION-ICON",{icon:!0,slot:!0}),v(L).forEach(a),A.forEach(a),w=T(I);for(let we=0;we<M.length;we+=1)M[we].l(I);U=T(I),F=c(I,"ION-ITEM",{});var Q=v(F);S=c(Q,"ION-AVATAR",{slot:!0});var te=v(S);X=c(te,"DIV",{class:!0,title:!0,style:!0});var oe=v(X);ee=c(oe,"DIV",{class:!0});var ne=v(ee);re=ve(ne,ie),ne.forEach(a),oe.forEach(a),te.forEach(a),W=T(Q),se=c(Q,"ION-LABEL",{button:!0});var Ie=v(se);he=c(Ie,"ION-TEXT",{color:!0});var Ce=v(he);ge=c(Ce,"H3",{});var Te=v(ge);fe=ve(Te,pe),Te.forEach(a),Ce.forEach(a),de=T(Ie),ue=c(Ie,"DIV",{class:!0,"data-svelte-h":!0}),Z(ue)!=="svelte-130ohbs"&&(ue.innerHTML=be),Ie.forEach(a),ke=T(Q),Oe=c(Q,"ION-ICON",{icon:!0,slot:!0}),v(Oe).forEach(a),Q.forEach(a),I.forEach(a),_.forEach(a),this.h()},h(){b(l,"slot","fixed"),q(k,"class","order svelte-egzizz"),q(O,"class","order-wrapper svelte-egzizz"),q(O,"title",d="$"+i[6].origin),h(O,"background-color",i[6].color),h(O,"color",Me(i[6].color)),b(p,"slot","start"),b(C,"color","#2e2e2e"),q(R,"class","sub svelte-egzizz"),b(E,"button",""),b(L,"icon",Ue),b(L,"slot","end"),q(ee,"class","order svelte-egzizz"),q(X,"class","order-wrapper svelte-egzizz"),q(X,"title",Ee="$"+i[6].destination),h(X,"background-color",i[6].color),h(X,"color",Me(i[6].color)),b(S,"slot","start"),b(he,"color","#2e2e2e"),q(ue,"class","sub svelte-egzizz"),b(se,"button",""),b(Oe,"icon",Ue),b(Oe,"slot","end")},m(J,_){_e&&_e.m(J,_),j(J,e,_),j(J,t,_),r(t,l),i[31](l),r(t,o),r(t,f),r(f,u),r(u,p),r(p,O),r(O,k),r(u,g),r(u,E),r(E,C),r(C,y),r(y,B),r(E,V),r(E,R),r(u,H),r(u,L),r(f,w);for(let I=0;I<M.length;I+=1)M[I]&&M[I].m(f,null);r(f,U),r(f,F),r(F,S),r(S,X),r(X,ee),r(ee,re),r(F,W),r(F,se),r(se,he),r(he,ge),r(ge,fe),r(se,de),r(se,ue),r(F,ke),r(F,Oe),ye||(Ne=[ce(l,"ionRefresh",i[11]),ce(E,"click",i[32]),ce(se,"click",i[34])],ye=!0)},p(J,_){J[4]?_e?_e.p(J,_):(_e=Wt(J),_e.c(),_e.m(e.parentNode,e)):_e&&(_e.d(1),_e=null),_[0]&64&&d!==(d="$"+J[6].origin)&&q(O,"title",d),_[0]&64&&h(O,"background-color",J[6].color),_[0]&64&&h(O,"color",Me(J[6].color)),_[0]&64&&P!==(P=J[6].origin+"")&&Le(B,P),_[0]&664608&&(Y=Re(J[5]),M=tt(M,_,$,1,J,Y,D,f,nt,Yt,U,jt)),_[0]&32&&ie!==(ie=J[5].length+1+"")&&Le(re,ie),_[0]&64&&Ee!==(Ee="$"+J[6].destination)&&q(X,"title",Ee),_[0]&64&&h(X,"background-color",J[6].color),_[0]&64&&h(X,"color",Me(J[6].color)),_[0]&64&&pe!==(pe=J[6].destination+"")&&Le(fe,pe)},d(J){J&&(a(e),a(t)),_e&&_e.d(J),i[31](null);for(let _=0;_<M.length;_+=1)M[_].d();ye=!1,De(Ne)}}}function yo(i){let e,t;function l(f,u){return u[0]&144&&(e=null),e==null&&(e=!!(f[7].filter(Ro).every(Uo)&&!f[4])),e?Mo:zo}let n=l(i,[-1,-1]),o=n(i);return{c(){o.c(),t=Se()},l(f){o.l(f),t=Se()},m(f,u){o.m(f,u),j(f,t,u)},p(f,u){n===(n=l(f,u))&&o?o.p(f,u):(o.d(1),o=n(f),o&&(o.c(),o.m(t.parentNode,t)))},d(f){f&&a(t),o.d(f)}}}function Wt(i){let e=i[15]("",i[1],i[0])+"",t;return{c(){t=me(e)},l(l){t=ve(l,e)},m(l,n){j(l,t,n)},p(l,n){n[0]&3&&e!==(e=l[15]("",l[1],l[0])+"")&&Le(t,e)},d(l){l&&a(t)}}}function Jt(i){let e;return{c(){e=s("span"),this.h()},l(t){e=c(t,"SPAN",{class:!0}),v(e).forEach(a),this.h()},h(){q(e,"class","notes svelte-egzizz")},m(t,l){j(t,e,l)},d(t){t&&a(e)}}}function wo(i){let e;return{c(){e=s("ion-icon"),this.h()},l(t){e=c(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),v(e).forEach(a),this.h()},h(){b(e,"icon",Ue),b(e,"slot","end"),h(e,"color",Ae(i[49].status,i[49].date_service))},m(t,l){j(t,e,l)},p(t,l){l[0]&32&&h(e,"color",Ae(t[49].status,t[49].date_service))},d(t){t&&a(e)}}}function Lo(i){let e,t=(i[49].tag?i[49].tag:"")+"",l;return{c(){e=s("div"),l=me(t),this.h()},l(n){e=c(n,"DIV",{class:!0,slot:!0,style:!0});var o=v(e);l=ve(o,t),o.forEach(a),this.h()},h(){q(e,"class","stop-tag"),q(e,"slot","end"),h(e,"background-color",Pe(i[49].tag_color,.3)),h(e,"border","1px solid "+Pe(i[49].tag_color,.4)),h(e,"color",i[49].tag_color),h(e,"font-size","10px"),h(e,"text-align","center"),h(e,"align-content","center"),h(e,"border-radius","20px"),h(e,"white-space","normal"),h(e,"padding","3px 6px"),h(e,"width","auto",1),h(e,"display","inline-block"),h(e,"font-weight","500")},m(n,o){j(n,e,o),r(e,l)},p(n,o){o[0]&32&&t!==(t=(n[49].tag?n[49].tag:"")+"")&&Le(l,t),o[0]&32&&h(e,"background-color",Pe(n[49].tag_color,.3)),o[0]&32&&h(e,"border","1px solid "+Pe(n[49].tag_color,.4)),o[0]&32&&h(e,"color",n[49].tag_color)},d(n){n&&a(e)}}}function Yt(i,e){let t,l,n,o,f=parseInt(e[49].pos)+1+"",u,p,O,k,m,d,g=e[49].title+"",E,C,y=e[49].support_list&&e[49].support_list.length||e[17](e[49]),P,B,V,R=y&&Jt();function K(){return e[33](e[49])}function H(M,D){return M[49].tag_color&&M[49].tag?Lo:wo}let L=H(e),w=L(e);return{key:i,first:null,c(){t=s("ion-item"),l=s("ion-avatar"),n=s("div"),o=s("div"),u=me(f),O=N(),k=s("ion-label"),m=s("ion-text"),d=s("h3"),E=me(g),C=N(),R&&R.c(),P=N(),w.c(),this.h()},l(M){t=c(M,"ION-ITEM",{});var D=v(t);l=c(D,"ION-AVATAR",{slot:!0});var U=v(l);n=c(U,"DIV",{class:!0,title:!0,style:!0});var F=v(n);o=c(F,"DIV",{class:!0});var S=v(o);u=ve(S,f),S.forEach(a),F.forEach(a),U.forEach(a),O=T(D),k=c(D,"ION-LABEL",{button:!0});var X=v(k);m=c(X,"ION-TEXT",{color:!0});var ee=v(m);d=c(ee,"H3",{});var ie=v(d);E=ve(ie,g),C=T(ie),R&&R.l(ie),ie.forEach(a),ee.forEach(a),X.forEach(a),P=T(D),w.l(D),D.forEach(a),this.h()},h(){q(o,"class","order svelte-egzizz"),q(n,"class","order-wrapper svelte-egzizz"),q(n,"title",p=Je(e[49].status)),h(n,"background-color",Ae(e[49].status,e[49].date_service)),h(n,"color",Me(Ae(e[49].status))),b(l,"slot","start"),b(m,"color","#2e2e2e"),b(k,"button",""),this.first=t},m(M,D){j(M,t,D),r(t,l),r(l,n),r(n,o),r(o,u),r(t,O),r(t,k),r(k,m),r(m,d),r(d,E),r(d,C),R&&R.m(d,null),r(t,P),w.m(t,null),B||(V=ce(k,"click",K),B=!0)},p(M,D){e=M,D[0]&32&&f!==(f=parseInt(e[49].pos)+1+"")&&Le(u,f),D[0]&32&&p!==(p=Je(e[49].status))&&q(n,"title",p),D[0]&32&&h(n,"background-color",Ae(e[49].status,e[49].date_service)),D[0]&32&&h(n,"color",Me(Ae(e[49].status))),D[0]&32&&g!==(g=e[49].title+"")&&Le(E,g),D[0]&32&&(y=e[49].support_list&&e[49].support_list.length||e[17](e[49])),y?R||(R=Jt(),R.c(),R.m(d,null)):R&&(R.d(1),R=null),L===(L=H(e))&&w?w.p(e,D):(w.d(1),w=L(e),w&&(w.c(),w.m(t,null)))},d(M){M&&a(t),R&&R.d(),w.d(),B=!1,V()}}}function zo(i){let e=i[15](i[7],i[1],i[0])+"",t,l,n,o,f='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Pull to refresh" refreshing-spinner="circles" refreshing-text="Refreshing..."></ion-refresher-content>',u,p,O,k,m,d,g="0",E,C,y,P,B,V=i[6].origin+"",R,K,H,L="",w,M,D,U=[],F=new Map,S,X,ee,ie,re,Ee=i[5].length+1+"",W,se,he,ge,pe,fe,de=i[6].destination+"",ue,be,ke,Oe="",ye,Ne,_e,Y,$=Re(i[5]);const J=_=>_[49].id_event;for(let _=0;_<$.length;_+=1){let I=Gt(i,$,_),A=J(I);F.set(A,U[_]=Zt(A,I))}return{c(){t=me(e),l=N(),n=s("ion-content"),o=s("ion-refresher"),o.innerHTML=f,u=N(),p=s("ion-list"),O=s("ion-item"),k=s("ion-avatar"),m=s("div"),d=s("div"),d.textContent=g,C=N(),y=s("ion-label"),P=s("ion-text"),B=s("h3"),R=me(V),K=N(),H=s("div"),H.innerHTML=L,w=N(),M=s("ion-icon"),D=N();for(let _=0;_<U.length;_+=1)U[_].c();S=N(),X=s("ion-item"),ee=s("ion-avatar"),ie=s("div"),re=s("div"),W=me(Ee),he=N(),ge=s("ion-label"),pe=s("ion-text"),fe=s("h3"),ue=me(de),be=N(),ke=s("div"),ke.innerHTML=Oe,ye=N(),Ne=s("ion-icon"),this.h()},l(_){t=ve(_,e),l=T(_),n=c(_,"ION-CONTENT",{});var I=v(n);o=c(I,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),Z(o)!=="svelte-dvt1s"&&(o.innerHTML=f),u=T(I),p=c(I,"ION-LIST",{});var A=v(p);O=c(A,"ION-ITEM",{});var G=v(O);k=c(G,"ION-AVATAR",{slot:!0});var ae=v(k);m=c(ae,"DIV",{class:!0,title:!0,style:!0});var le=v(m);d=c(le,"DIV",{class:!0,"data-svelte-h":!0}),Z(d)!=="svelte-3lvlrb"&&(d.textContent=g),le.forEach(a),ae.forEach(a),C=T(G),y=c(G,"ION-LABEL",{button:!0});var z=v(y);P=c(z,"ION-TEXT",{color:!0});var x=v(P);B=c(x,"H3",{});var Q=v(B);R=ve(Q,V),Q.forEach(a),x.forEach(a),K=T(z),H=c(z,"DIV",{class:!0,"data-svelte-h":!0}),Z(H)!=="svelte-gz9kb"&&(H.innerHTML=L),z.forEach(a),w=T(G),M=c(G,"ION-ICON",{icon:!0,slot:!0}),v(M).forEach(a),G.forEach(a),D=T(A);for(let Ve=0;Ve<U.length;Ve+=1)U[Ve].l(A);S=T(A),X=c(A,"ION-ITEM",{});var te=v(X);ee=c(te,"ION-AVATAR",{slot:!0});var oe=v(ee);ie=c(oe,"DIV",{class:!0,title:!0,style:!0});var ne=v(ie);re=c(ne,"DIV",{class:!0});var Ie=v(re);W=ve(Ie,Ee),Ie.forEach(a),ne.forEach(a),oe.forEach(a),he=T(te),ge=c(te,"ION-LABEL",{button:!0});var Ce=v(ge);pe=c(Ce,"ION-TEXT",{color:!0});var Te=v(pe);fe=c(Te,"H3",{});var we=v(fe);ue=ve(we,de),we.forEach(a),Te.forEach(a),be=T(Ce),ke=c(Ce,"DIV",{class:!0,"data-svelte-h":!0}),Z(ke)!=="svelte-130ohbs"&&(ke.innerHTML=Oe),Ce.forEach(a),ye=T(te),Ne=c(te,"ION-ICON",{icon:!0,slot:!0}),v(Ne).forEach(a),te.forEach(a),A.forEach(a),I.forEach(a),this.h()},h(){b(o,"slot","fixed"),q(d,"class","order svelte-egzizz"),q(m,"class","order-wrapper svelte-egzizz"),q(m,"title",E="$"+i[6].origin),h(m,"background-color",i[6].color),h(m,"color",Me(i[6].color)),b(k,"slot","start"),b(P,"color","#2e2e2e"),q(H,"class","sub svelte-egzizz"),b(y,"button",""),b(M,"icon",Ue),b(M,"slot","end"),q(re,"class","order svelte-egzizz"),q(ie,"class","order-wrapper svelte-egzizz"),q(ie,"title",se="$"+i[6].destination),h(ie,"background-color",i[6].color),h(ie,"color",Me(i[6].color)),b(ee,"slot","start"),b(pe,"color","#2e2e2e"),q(ke,"class","sub svelte-egzizz"),b(ge,"button",""),b(Ne,"icon",Ue),b(Ne,"slot","end")},m(_,I){j(_,t,I),j(_,l,I),j(_,n,I),r(n,o),i[27](o),r(n,u),r(n,p),r(p,O),r(O,k),r(k,m),r(m,d),r(O,C),r(O,y),r(y,P),r(P,B),r(B,R),r(y,K),r(y,H),r(O,w),r(O,M),r(p,D);for(let A=0;A<U.length;A+=1)U[A]&&U[A].m(p,null);r(p,S),r(p,X),r(X,ee),r(ee,ie),r(ie,re),r(re,W),r(X,he),r(X,ge),r(ge,pe),r(pe,fe),r(fe,ue),r(ge,be),r(ge,ke),r(X,ye),r(X,Ne),_e||(Y=[ce(o,"ionRefresh",i[11]),ce(y,"click",i[28]),ce(ge,"click",i[30])],_e=!0)},p(_,I){I[0]&131&&e!==(e=_[15](_[7],_[1],_[0])+"")&&Le(t,e),I[0]&64&&E!==(E="$"+_[6].origin)&&q(m,"title",E),I[0]&64&&h(m,"background-color",_[6].color),I[0]&64&&h(m,"color",Me(_[6].color)),I[0]&64&&V!==(V=_[6].origin+"")&&Le(R,V),I[0]&664608&&($=Re(_[5]),U=tt(U,I,J,1,_,$,F,p,nt,Zt,S,Gt)),I[0]&32&&Ee!==(Ee=_[5].length+1+"")&&Le(W,Ee),I[0]&64&&se!==(se="$"+_[6].destination)&&q(ie,"title",se),I[0]&64&&h(ie,"background-color",_[6].color),I[0]&64&&h(ie,"color",Me(_[6].color)),I[0]&64&&de!==(de=_[6].destination+"")&&Le(ue,de)},d(_){_&&(a(t),a(l),a(n)),i[27](null);for(let I=0;I<U.length;I+=1)U[I].d();_e=!1,De(Y)}}}function Mo(i){let e,t,l='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jale para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',n,o,f,u,p,O,k="0",m,d,g,E,C,y=i[6].origin+"",P,B,V,R="",K,H,L,w=[],M=new Map,D,U,F,S,X,ee=i[5].length+1+"",ie,re,Ee,W,se,he,ge=i[6].destination+"",pe,fe,de,ue="",be,ke,Oe,ye,Ne=Re(i[5]);const _e=Y=>Y[49].id_event;for(let Y=0;Y<Ne.length;Y+=1){let $=Kt(i,Ne,Y),J=_e($);M.set(J,w[Y]=$t(J,$))}return{c(){e=s("ion-content"),t=s("ion-refresher"),t.innerHTML=l,n=N(),o=s("ion-list"),f=s("ion-item"),u=s("ion-avatar"),p=s("div"),O=s("div"),O.textContent=k,d=N(),g=s("ion-label"),E=s("ion-text"),C=s("h3"),P=me(y),B=N(),V=s("div"),V.innerHTML=R,K=N(),H=s("ion-icon"),L=N();for(let Y=0;Y<w.length;Y+=1)w[Y].c();D=N(),U=s("ion-item"),F=s("ion-avatar"),S=s("div"),X=s("div"),ie=me(ee),Ee=N(),W=s("ion-label"),se=s("ion-text"),he=s("h3"),pe=me(ge),fe=N(),de=s("div"),de.innerHTML=ue,be=N(),ke=s("ion-icon"),this.h()},l(Y){e=c(Y,"ION-CONTENT",{});var $=v(e);t=c($,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),Z(t)!=="svelte-15ukrgn"&&(t.innerHTML=l),n=T($),o=c($,"ION-LIST",{});var J=v(o);f=c(J,"ION-ITEM",{});var _=v(f);u=c(_,"ION-AVATAR",{slot:!0});var I=v(u);p=c(I,"DIV",{class:!0,title:!0,style:!0});var A=v(p);O=c(A,"DIV",{class:!0,"data-svelte-h":!0}),Z(O)!=="svelte-3lvlrb"&&(O.textContent=k),A.forEach(a),I.forEach(a),d=T(_),g=c(_,"ION-LABEL",{button:!0});var G=v(g);E=c(G,"ION-TEXT",{color:!0});var ae=v(E);C=c(ae,"H3",{});var le=v(C);P=ve(le,y),le.forEach(a),ae.forEach(a),B=T(G),V=c(G,"DIV",{class:!0,"data-svelte-h":!0}),Z(V)!=="svelte-gz9kb"&&(V.innerHTML=R),G.forEach(a),K=T(_),H=c(_,"ION-ICON",{icon:!0,slot:!0}),v(H).forEach(a),_.forEach(a),L=T(J);for(let Ce=0;Ce<w.length;Ce+=1)w[Ce].l(J);D=T(J),U=c(J,"ION-ITEM",{});var z=v(U);F=c(z,"ION-AVATAR",{slot:!0});var x=v(F);S=c(x,"DIV",{class:!0,title:!0,style:!0});var Q=v(S);X=c(Q,"DIV",{class:!0});var te=v(X);ie=ve(te,ee),te.forEach(a),Q.forEach(a),x.forEach(a),Ee=T(z),W=c(z,"ION-LABEL",{button:!0});var oe=v(W);se=c(oe,"ION-TEXT",{color:!0});var ne=v(se);he=c(ne,"H3",{});var Ie=v(he);pe=ve(Ie,ge),Ie.forEach(a),ne.forEach(a),fe=T(oe),de=c(oe,"DIV",{class:!0,"data-svelte-h":!0}),Z(de)!=="svelte-130ohbs"&&(de.innerHTML=ue),oe.forEach(a),be=T(z),ke=c(z,"ION-ICON",{icon:!0,slot:!0}),v(ke).forEach(a),z.forEach(a),J.forEach(a),$.forEach(a),this.h()},h(){b(t,"slot","fixed"),q(O,"class","order svelte-egzizz"),q(p,"class","order-wrapper svelte-egzizz"),q(p,"title",m="$"+i[6].origin),h(p,"background-color",i[6].color),h(p,"color",Me(i[6].color)),b(u,"slot","start"),b(E,"color","#2e2e2e"),q(V,"class","sub svelte-egzizz"),b(g,"button",""),b(H,"icon",Ue),b(H,"slot","end"),q(X,"class","order svelte-egzizz"),q(S,"class","order-wrapper svelte-egzizz"),q(S,"title",re="$"+i[6].destination),h(S,"background-color",i[6].color),h(S,"color",Me(i[6].color)),b(F,"slot","start"),b(se,"color","#2e2e2e"),q(de,"class","sub svelte-egzizz"),b(W,"button",""),b(ke,"icon",Ue),b(ke,"slot","end")},m(Y,$){j(Y,e,$),r(e,t),i[23](t),r(e,n),r(e,o),r(o,f),r(f,u),r(u,p),r(p,O),r(f,d),r(f,g),r(g,E),r(E,C),r(C,P),r(g,B),r(g,V),r(f,K),r(f,H),r(o,L);for(let J=0;J<w.length;J+=1)w[J]&&w[J].m(o,null);r(o,D),r(o,U),r(U,F),r(F,S),r(S,X),r(X,ie),r(U,Ee),r(U,W),r(W,se),r(se,he),r(he,pe),r(W,fe),r(W,de),r(U,be),r(U,ke),Oe||(ye=[ce(t,"ionRefresh",i[11]),ce(g,"click",i[24]),ce(W,"click",i[26])],Oe=!0)},p(Y,$){$[0]&64&&m!==(m="$"+Y[6].origin)&&q(p,"title",m),$[0]&64&&h(p,"background-color",Y[6].color),$[0]&64&&h(p,"color",Me(Y[6].color)),$[0]&64&&y!==(y=Y[6].origin+"")&&Le(P,y),$[0]&664608&&(Ne=Re(Y[5]),w=tt(w,$,_e,1,Y,Ne,M,o,nt,$t,D,Kt)),$[0]&32&&ee!==(ee=Y[5].length+1+"")&&Le(ie,ee),$[0]&64&&re!==(re="$"+Y[6].destination)&&q(S,"title",re),$[0]&64&&h(S,"background-color",Y[6].color),$[0]&64&&h(S,"color",Me(Y[6].color)),$[0]&64&&ge!==(ge=Y[6].destination+"")&&Le(pe,ge)},d(Y){Y&&a(e),i[23](null);for(let $=0;$<w.length;$+=1)w[$].d();Oe=!1,De(ye)}}}function Qt(i){let e;return{c(){e=s("span"),this.h()},l(t){e=c(t,"SPAN",{class:!0}),v(e).forEach(a),this.h()},h(){q(e,"class","notes svelte-egzizz")},m(t,l){j(t,e,l)},d(t){t&&a(e)}}}function Ao(i){let e;return{c(){e=s("ion-icon"),this.h()},l(t){e=c(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),v(e).forEach(a),this.h()},h(){b(e,"icon",Ue),b(e,"slot","end"),h(e,"color",Ae(i[49].status,i[49].date_service))},m(t,l){j(t,e,l)},p(t,l){l[0]&32&&h(e,"color",Ae(t[49].status,t[49].date_service))},d(t){t&&a(e)}}}function So(i){let e,t=(i[49].tag?i[49].tag:"")+"",l;return{c(){e=s("div"),l=me(t),this.h()},l(n){e=c(n,"DIV",{class:!0,slot:!0,style:!0});var o=v(e);l=ve(o,t),o.forEach(a),this.h()},h(){q(e,"class","stop-tag"),q(e,"slot","end"),h(e,"background-color",Pe(i[49].tag_color,.3)),h(e,"border","1px solid "+Pe(i[49].tag_color,.4)),h(e,"color",i[49].tag_color),h(e,"font-size","10px"),h(e,"text-align","center"),h(e,"align-content","center"),h(e,"border-radius","20px"),h(e,"white-space","normal"),h(e,"padding","3px 6px"),h(e,"width","auto",1),h(e,"display","inline-block"),h(e,"font-weight","500")},m(n,o){j(n,e,o),r(e,l)},p(n,o){o[0]&32&&t!==(t=(n[49].tag?n[49].tag:"")+"")&&Le(l,t),o[0]&32&&h(e,"background-color",Pe(n[49].tag_color,.3)),o[0]&32&&h(e,"border","1px solid "+Pe(n[49].tag_color,.4)),o[0]&32&&h(e,"color",n[49].tag_color)},d(n){n&&a(e)}}}function Zt(i,e){let t,l,n,o,f=parseInt(e[49].pos)+1+"",u,p,O,k,m,d,g=e[49].title+"",E,C,y=e[49].support_list&&e[49].support_list.length||e[17](e[49]),P,B,V="",R,K,H,L=y&&Qt();function w(){return e[29](e[49])}function M(F,S){return F[49].tag_color&&F[49].tag?So:Ao}let D=M(e),U=D(e);return{key:i,first:null,c(){t=s("ion-item"),l=s("ion-avatar"),n=s("div"),o=s("div"),u=me(f),O=N(),k=s("ion-label"),m=s("ion-text"),d=s("h3"),E=me(g),C=N(),L&&L.c(),P=N(),B=s("div"),B.innerHTML=V,R=N(),U.c(),this.h()},l(F){t=c(F,"ION-ITEM",{});var S=v(t);l=c(S,"ION-AVATAR",{slot:!0});var X=v(l);n=c(X,"DIV",{class:!0,title:!0,style:!0});var ee=v(n);o=c(ee,"DIV",{class:!0});var ie=v(o);u=ve(ie,f),ie.forEach(a),ee.forEach(a),X.forEach(a),O=T(S),k=c(S,"ION-LABEL",{button:!0});var re=v(k);m=c(re,"ION-TEXT",{color:!0});var Ee=v(m);d=c(Ee,"H3",{});var W=v(d);E=ve(W,g),C=T(W),L&&L.l(W),W.forEach(a),Ee.forEach(a),P=T(re),B=c(re,"DIV",{class:!0,"data-svelte-h":!0}),Z(B)!=="svelte-qaecoo"&&(B.innerHTML=V),re.forEach(a),R=T(S),U.l(S),S.forEach(a),this.h()},h(){q(o,"class","order svelte-egzizz"),q(n,"class","order-wrapper svelte-egzizz"),q(n,"title",p=Je(e[49].status)),h(n,"background-color",Ae(e[49].status,e[49].date_service)),h(n,"color",Me(Ae(e[49].status))),b(l,"slot","start"),b(m,"color","#2e2e2e"),q(B,"class","sub svelte-egzizz"),b(k,"button",""),this.first=t},m(F,S){j(F,t,S),r(t,l),r(l,n),r(n,o),r(o,u),r(t,O),r(t,k),r(k,m),r(m,d),r(d,E),r(d,C),L&&L.m(d,null),r(k,P),r(k,B),r(t,R),U.m(t,null),K||(H=ce(k,"click",w),K=!0)},p(F,S){e=F,S[0]&32&&f!==(f=parseInt(e[49].pos)+1+"")&&Le(u,f),S[0]&32&&p!==(p=Je(e[49].status))&&q(n,"title",p),S[0]&32&&h(n,"background-color",Ae(e[49].status,e[49].date_service)),S[0]&32&&h(n,"color",Me(Ae(e[49].status))),S[0]&32&&g!==(g=e[49].title+"")&&Le(E,g),S[0]&32&&(y=e[49].support_list&&e[49].support_list.length||e[17](e[49])),y?L||(L=Qt(),L.c(),L.m(d,null)):L&&(L.d(1),L=null),D===(D=M(e))&&U?U.p(e,S):(U.d(1),U=D(e),U&&(U.c(),U.m(t,null)))},d(F){F&&a(t),L&&L.d(),U.d(),K=!1,H()}}}function xt(i){let e;return{c(){e=s("span"),this.h()},l(t){e=c(t,"SPAN",{class:!0}),v(e).forEach(a),this.h()},h(){q(e,"class","notes svelte-egzizz")},m(t,l){j(t,e,l)},d(t){t&&a(e)}}}function Do(i){let e;return{c(){e=s("ion-icon"),this.h()},l(t){e=c(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),v(e).forEach(a),this.h()},h(){b(e,"icon",Ue),b(e,"slot","end"),h(e,"color",Ae(i[49].status,i[49].date_service))},m(t,l){j(t,e,l)},p(t,l){l[0]&32&&h(e,"color",Ae(t[49].status,t[49].date_service))},d(t){t&&a(e)}}}function Ho(i){let e,t=(i[49].tag?i[49].tag:"")+"",l;return{c(){e=s("div"),l=me(t),this.h()},l(n){e=c(n,"DIV",{class:!0,slot:!0,style:!0});var o=v(e);l=ve(o,t),o.forEach(a),this.h()},h(){q(e,"class","stop-tag"),q(e,"slot","end"),h(e,"background-color",Pe(i[49].tag_color,.3)),h(e,"border","1px solid "+Pe(i[49].tag_color,.4)),h(e,"color",i[49].tag_color),h(e,"font-size","10px"),h(e,"text-align","center"),h(e,"align-content","center"),h(e,"border-radius","20px"),h(e,"white-space","normal"),h(e,"padding","3px 6px"),h(e,"width","auto",1),h(e,"display","inline-block"),h(e,"font-weight","500")},m(n,o){j(n,e,o),r(e,l)},p(n,o){o[0]&32&&t!==(t=(n[49].tag?n[49].tag:"")+"")&&Le(l,t),o[0]&32&&h(e,"background-color",Pe(n[49].tag_color,.3)),o[0]&32&&h(e,"border","1px solid "+Pe(n[49].tag_color,.4)),o[0]&32&&h(e,"color",n[49].tag_color)},d(n){n&&a(e)}}}function $t(i,e){let t,l,n,o,f=parseInt(e[49].pos)+1+"",u,p,O,k,m,d,g=e[49].title+"",E,C,y=e[49].support_list&&e[49].support_list.length||e[17](e[49]),P,B,V="",R,K,H,L=y&&xt();function w(){return e[25](e[49])}function M(F,S){return F[49].tag_color&&F[49].tag?Ho:Do}let D=M(e),U=D(e);return{key:i,first:null,c(){t=s("ion-item"),l=s("ion-avatar"),n=s("div"),o=s("div"),u=me(f),O=N(),k=s("ion-label"),m=s("ion-text"),d=s("h3"),E=me(g),C=N(),L&&L.c(),P=N(),B=s("div"),B.innerHTML=V,R=N(),U.c(),this.h()},l(F){t=c(F,"ION-ITEM",{});var S=v(t);l=c(S,"ION-AVATAR",{slot:!0});var X=v(l);n=c(X,"DIV",{class:!0,title:!0,style:!0});var ee=v(n);o=c(ee,"DIV",{class:!0});var ie=v(o);u=ve(ie,f),ie.forEach(a),ee.forEach(a),X.forEach(a),O=T(S),k=c(S,"ION-LABEL",{button:!0});var re=v(k);m=c(re,"ION-TEXT",{color:!0});var Ee=v(m);d=c(Ee,"H3",{});var W=v(d);E=ve(W,g),C=T(W),L&&L.l(W),W.forEach(a),Ee.forEach(a),P=T(re),B=c(re,"DIV",{class:!0,"data-svelte-h":!0}),Z(B)!=="svelte-qaecoo"&&(B.innerHTML=V),re.forEach(a),R=T(S),U.l(S),S.forEach(a),this.h()},h(){q(o,"class","order svelte-egzizz"),q(n,"class","order-wrapper svelte-egzizz"),q(n,"title",p=Je(e[49].status)),h(n,"background-color",Ae(e[49].status,e[49].date_service)),h(n,"color",Me(Ae(e[49].status))),b(l,"slot","start"),b(m,"color","#2e2e2e"),q(B,"class","sub svelte-egzizz"),b(k,"button",""),this.first=t},m(F,S){j(F,t,S),r(t,l),r(l,n),r(n,o),r(o,u),r(t,O),r(t,k),r(k,m),r(m,d),r(d,E),r(d,C),L&&L.m(d,null),r(k,P),r(k,B),r(t,R),U.m(t,null),K||(H=ce(k,"click",w),K=!0)},p(F,S){e=F,S[0]&32&&f!==(f=parseInt(e[49].pos)+1+"")&&Le(u,f),S[0]&32&&p!==(p=Je(e[49].status))&&q(n,"title",p),S[0]&32&&h(n,"background-color",Ae(e[49].status,e[49].date_service)),S[0]&32&&h(n,"color",Me(Ae(e[49].status))),S[0]&32&&g!==(g=e[49].title+"")&&Le(E,g),S[0]&32&&(y=e[49].support_list&&e[49].support_list.length||e[17](e[49])),y?L||(L=xt(),L.c(),L.m(d,null)):L&&(L.d(1),L=null),D===(D=M(e))&&U?U.p(e,S):(U.d(1),U=D(e),U&&(U.c(),U.m(t,null)))},d(F){F&&a(t),L&&L.d(),U.d(),K=!1,H()}}}function Bo(i){let e,t,l,n,o=`<ion-icon icon="${Sn}"></ion-icon>`,f,u,p,O=`<ion-icon icon="${Dn}"></ion-icon>`,k,m,d=(i[6].name?i[6].name.toUpperCase():"")+"",g,E,C,y='<ion-segment-button value="list"><ion-label>Paradas</ion-label></ion-segment-button> <ion-segment-button value="map"><ion-label>Mapa</ion-label></ion-segment-button>',P,B,V,R;function K(w,M){if(w[9]==="list")return To;if(w[9]==="map")return No}let H=K(i),L=H&&H(i);return{c(){e=s("ion-header"),t=s("ion-toolbar"),l=s("ion-buttons"),n=s("ion-button"),n.innerHTML=o,f=N(),u=s("ion-buttons"),p=s("ion-button"),p.innerHTML=O,k=N(),m=s("ion-title"),g=me(d),E=N(),C=s("ion-segment"),C.innerHTML=y,P=N(),L&&L.c(),B=Se(),this.h()},l(w){e=c(w,"ION-HEADER",{translucent:!0});var M=v(e);t=c(M,"ION-TOOLBAR",{});var D=v(t);l=c(D,"ION-BUTTONS",{slot:!0});var U=v(l);n=c(U,"ION-BUTTON",{title:!0,alt:!0,"data-svelte-h":!0}),Z(n)!=="svelte-7ppz3r"&&(n.innerHTML=o),U.forEach(a),f=T(D),u=c(D,"ION-BUTTONS",{slot:!0});var F=v(u);p=c(F,"ION-BUTTON",{"data-svelte-h":!0}),Z(p)!=="svelte-nf50hj"&&(p.innerHTML=O),F.forEach(a),k=T(D),m=c(D,"ION-TITLE",{});var S=v(m);g=ve(S,d),S.forEach(a),D.forEach(a),E=T(M),C=c(M,"ION-SEGMENT",{value:!0,"data-svelte-h":!0}),Z(C)!=="svelte-lue4c9"&&(C.innerHTML=y),M.forEach(a),P=T(w),L&&L.l(w),B=Se(),this.h()},h(){b(n,"title","Atrás"),b(n,"alt","Atrás"),b(l,"slot","start"),b(u,"slot","end"),b(C,"value","list"),b(e,"translucent","")},m(w,M){j(w,e,M),r(e,t),r(t,l),r(l,n),r(t,f),r(t,u),r(u,p),r(t,k),r(t,m),r(m,g),r(e,E),r(e,C),j(w,P,M),L&&L.m(w,M),j(w,B,M),V||(R=[ce(n,"click",i[18]),ce(p,"click",i[21]),ce(C,"ionChange",i[22])],V=!0)},p(w,M){M[0]&64&&d!==(d=(w[6].name?w[6].name.toUpperCase():"")+"")&&Le(g,d),H===(H=K(w))&&L?L.p(w,M):(L&&L.d(1),L=H&&H(w),L&&(L.c(),L.m(B.parentNode,B)))},d(w){w&&(a(e),a(P),a(B)),L&&L.d(w),V=!1,De(R)}}}function Po(i){let e,t,l,n=i[2]&&Xt(i);return{c(){e=N(),n&&n.c(),t=Se(),this.h()},l(o){hn("svelte-kn0kph",qt.head).forEach(a),e=T(o),n&&n.l(o),t=Se(),this.h()},h(){qt.title="Rutaflow - Detalles de ruta"},m(o,f){j(o,e,f),n&&n.m(o,f),j(o,t,f),l=!0},p(o,f){o[2]?n?(n.p(o,f),f[0]&4&&ct(n,1)):(n=Xt(o),n.c(),ct(n,1),n.m(t.parentNode,t)):n&&(In(),_t(n,1,1,()=>{n=null}),vn())},i(o){l||(ct(n),l=!0)},o(o){_t(n),l=!1},d(o){o&&(a(e),a(t)),n&&n.d(o)}}}function Ae(i,e=""){let t="#ffffff";return i==="pending"&&!e?t="#f2e300":i=="pending"&&e?t="#F6A833":i==="completed"&&(t="#44d900"),t}function Je(i){let e="";return i=="pending"?e="Pendiente":i=="completed"&&(e="Completado"),e}function Me(i){i.slice(0,1)==="#"&&(i=i.slice(1)),i.length===3&&(i=i.split("").map(function(o){return o+o}).join(""));const e=parseInt(i.substr(0,2),16),t=parseInt(i.substr(2,2),16),l=parseInt(i.substr(4,2),16);return(e*299+t*587+l*114)/1e3>=128?"#414040":"#fff"}function dt(i,e){for(let t=0;t<e.length;t++)if(e[t].alias===i)return e[t].val;return""}const Ro=i=>i.mandatory==="1",Uo=i=>i.img;function Vo(i,e,t){let l;pn(i,Hn,_=>t(20,l=_));var n=this&&this.__awaiter||function(_,I,A,G){function ae(le){return le instanceof A?le:new A(function(z){z(le)})}return new(A||(A=Promise))(function(le,z){function x(oe){try{te(G.next(oe))}catch(ne){z(ne)}}function Q(oe){try{te(G.throw(oe))}catch(ne){z(ne)}}function te(oe){oe.done?le(oe.value):ae(oe.value).then(x,Q)}te((G=G.apply(_,I||[])).next())})};let{routeId:o}=e,{driverId:f}=e,u=ut,p=new Object,O=!0,k=!1,m=[],d={},g=[],E=[],C,y=!1,P="list",B,V="",R="",K="0",H=new Object;const L=()=>n(void 0,void 0,void 0,function*(){yield D(o),C.complete()});et(()=>n(void 0,void 0,void 0,function*(){he(),yield D(o)}));function w(_){return n(this,void 0,void 0,function*(){if(t(9,P=_),P==="map"){yield mn(),B=document.getElementById("g_map");const I=new google.maps.Map(B,{zoom:8,center:{lat:20.6745683,lng:-103.3986104},mapId:"4504f8b37365c3d0"}),A=new google.maps.LatLngBounds,{AdvancedMarkerElement:G,PinElement:ae}=yield google.maps.importLibrary("marker");navigator.geolocation?navigator.geolocation.getCurrentPosition(function(le){const z=new google.maps.LatLng(le.coords.latitude,le.coords.longitude);new google.maps.Marker({position:z,map:I,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"#0062ff",fillOpacity:1,scale:6,strokeColor:"#ffffff",strokeWeight:2}}),new google.maps.Circle({strokeColor:"#00BFFF",strokeOpacity:.5,strokeWeight:1,fillColor:"#00BFFF",fillOpacity:.2,map:I,center:z,radius:le.coords.accuracy}),A.extend(z)},function(le){console.error("Error retrieving location:",le)}):console.error("Geolocation not supported by this browser."),d.lat1===d.lat2&&d.lon1===d.lon2?M(A,I,{lat:d.lat2,lon:d.lon2,color:d.color,title:d.destination},{type:"icon",iconClass:"icon-home",title:"Origen/Destino",glyph:`0,${String(m.length+1)}`}):(M(A,I,{lat:d.lat1,lon:d.lon1,color:d.color,title:d.origin},{type:"icon",iconClass:"icon-home",title:"Origen",glyph:"0"}),M(A,I,{lat:d.lat2,lon:d.lon2,color:d.color,title:d.destination},{type:"icon",iconClass:"icon-flag",title:"Destino",glyph:String(m.length+1)})),m.forEach((le,z)=>{const x=parseFloat(le.lat),Q=parseFloat(le.lon),te=new google.maps.LatLng(x,Q),oe=new google.maps.Marker({position:{lat:x,lng:Q},map:I,title:le.title}),ne=new ae({background:Ae(le.status,le.date_service),borderColor:"#000",glyphColor:"#000",glyph:(parseInt(le.pos)+1).toString()});new G({map:I,position:te,content:ne.element,title:"Parada "+(parseInt(le.pos)+1).toString()+": "+le.title}).addListener("click",function(Ce){F(le,!1)}),A.extend(oe.getPosition())}),I.fitBounds(A)}})}function M(_,I,A,G){return n(this,void 0,void 0,function*(){let ae;const le=parseFloat(A.lat),z=parseFloat(A.lon),x=new google.maps.LatLng(le,z),{AdvancedMarkerElement:Q,PinElement:te}=yield google.maps.importLibrary("marker");G.type=="icon"?(ae=document.createElement("i"),ae.className=`${G.iconClass} icon`,ae.style.fontSize="14px",ae.style.color=Me(A.color),ae.style.fontWeight="600"):G.type=="text";const oe=new google.maps.Marker({position:{lat:le,lng:z},map:I,title:`${G.title}. ${A.title}`}),ne=new te({background:A.color,borderColor:"#000",glyphColor:Me(A.color),glyph:G.glyph});return new Q({map:I,position:x,content:ne.element,title:G.title+": "+A.title}).addListener("click",function(Ce){S(d,G.title=="Destino"||G.title=="Origen/Destino")}),oe})}function D(_){return n(this,void 0,void 0,function*(){let I=new FormData;I.append("id_route",_),I=se(I),I.append("id_enterprise",p.id_enterprise);try{const G=yield(yield fetch(`${u}api/admin/report/seguimiento_list.php`,{method:"POST",body:I})).json();t(6,d=G.data.seguimiento_list[0]),t(5,m=G.data.event_list),t(7,g=G.data.checklist),E=G.data.expenses,d&&t(4,k=d.km_inicial=="0"&&d.gas_inicial=="0"),t(3,O=!1)}catch(A){t(3,O=!1),console.error("Error fetching data:",A)}})}const U=_=>new Promise((I,A)=>{let G=new FormData;G.append("id_route",_.id_route),G.append("id_event",_.id_event),G=se(G),fetch(`${u}api/admin/evidence/evidence_by_event.php`,{method:"POST",body:G}).then(ae=>ae.json()).then(ae=>{I(ae.data.event_evidence[0])}).catch(ae=>{console.error("Error fetching data:",ae),A(ae)})}),F=(_,I)=>{U(_).then(A=>{_.stopsApproval=V,_.smsActive=R,A&&(_.img=A.img,_.driver_comments=A.driver_comments,_.comments=A.comments),qe("modal-delivery-info",Dt,{delivery:_,isLast:I}).then(G=>{}).finally(()=>{D(o)})})},S=(_,I)=>{var A=new Object;I?A={title:_.destination,line1:_.dest_address}:A={title:_.origin,line1:_.origin_address},A.enterprise_name=_.enterprise_name,A.client_name=_.client_name,A.client_phone=_.tel,A.id_route=_.id_route,A.stopsApproval=V,A.smsActive=R;var G=!0;qe("modal-delivery-info",Dt,{delivery:A,isLast:I,flag:G})},X=(_,I,A)=>{var G=!1;return y||(y=!0,qe("modal-checklist",fn,{checklist:_,driverId:I,routeId:A,isLast:G}).then(ae=>{y=!1}),re(A,"checklist")),""},ee=_=>n(void 0,void 0,void 0,function*(){return yield D(_),E.length>0?qe("modal-expense-detail",Oo,{routeId:_,expenses:E}).then(I=>{}):qe("modal-expense",mt,{routeId:_}).then(I=>{}),""}),ie=_=>{if(_.tracking_type=="subscription"){if(_.subscriber_info&&_.payment_type==="cash"&&new Date(_.subscriber_info.payment_next)<new Date)return!0}else if(_.tracking_type=="ecommerce"&&Number(_.payment_pending)>0)return!0;return!1};function re(_,I){let A=new FormData;return A.append("id_route",_),A.append("status",I),A=se(A),fetch(`${u}api/admin/route/change_status.php`,{method:"POST",body:A}).then(G=>G.json()).then(G=>{}).catch(G=>{console.error("Error fetching data:",G)}),""}const Ee=()=>{p.type=="super"||p.type=="admin"?Ke("/drivers/me"):p.id_driver&&Ke(`/drivers/${p.id_driver}`)},W=(_,I)=>n(void 0,void 0,void 0,function*(){yield(yield Xe.create({header:_||"Error",message:I||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()});function se(_){return _.append("token",p.token),_.append("id_user_over",p.id_user),_}const he=()=>n(void 0,void 0,void 0,function*(){if(p.id_enterprise){let _=new FormData;_.append("id_enterprise",p.id_enterprise),_=se(_);try{const I=yield fetch(`${u}api/admin/enterprise/enterprise_settings.php`,{method:"POST",body:_});I.ok?(H=(yield I.json()).nodos,V=dt("stops_wait_approval",H),R=dt("sms_active",H),t(10,K=dt("stops_order_restriction",H))):console.error("File upload failed:",I.statusText)}catch(I){console.error("Error during file upload:",I)}}}),ge=()=>ee(o),pe=_=>w(_.detail.value);function fe(_){He[_?"unshift":"push"](()=>{C=_,t(8,C)})}const de=()=>{S(d,!1)},ue=_=>{const I=m.findIndex(z=>z.id_event===_.id_event),A=I===0,G=I>0?m[I-1]:null,ae=A||G&&G.img!==null,le=_.img!==null&&_.img!=="";ae||A&&!le||K=="1"?F(_,!1):W("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},be=()=>{S(d,!0)};function ke(_){He[_?"unshift":"push"](()=>{C=_,t(8,C)})}const Oe=()=>{S(d,!1)},ye=_=>{const I=m.findIndex(z=>z.id_event===_.id_event),A=I===0,G=I>0?m[I-1]:null,ae=A||G&&G.img!==null,le=_.img!==null&&_.img!=="";ae||A&&!le||K=="1"?F(_,!1):W("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},Ne=()=>{S(d,!0)};function _e(_){He[_?"unshift":"push"](()=>{C=_,t(8,C)})}const Y=()=>{S(d,!1)},$=_=>{const I=m.findIndex(z=>z.id_event===_.id_event),A=I===0,G=I>0?m[I-1]:null,ae=A||G&&G.img!==null,le=_.img!==null&&_.img!=="";ae||A&&!le||K=="1"?F(_,!1):W("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},J=()=>{S(d,!0)};return i.$$set=_=>{"routeId"in _&&t(0,o=_.routeId),"driverId"in _&&t(1,f=_.driverId)},i.$$.update=()=>{i.$$.dirty[0]&1048581&&(t(0,{routeId:o,driverId:f}=l.params,o,(t(1,f),t(20,l),t(2,p),t(0,o))),t(2,p=JSON.parse(localStorage.getItem("userSession"))),p?p.id_user&&(p.type=="admin"||p.type=="super")?(D(o),Ke(`/drivers/me/routes/${o}`)):p.id_user&&p.id_driver&&(D(o),Ke(`/drivers/${p.id_driver}/routes/${o}`)):Ke("/"))},[o,f,p,O,k,m,d,g,C,P,K,L,w,F,S,X,ee,ie,Ee,W,l,ge,pe,fe,de,ue,be,ke,Oe,ye,Ne,_e,Y,$,J]}class Jo extends Qe{constructor(e){super(),Ze(this,e,Vo,Po,Ye,{routeId:0,driverId:1},null,[-1,-1])}}export{Jo as component};
