import{Z as gt,s as Je,e as d,j as N,b as f,q as v,d as se,h as a,m as T,v as g,i as G,w as r,x as pe,n as Ae,z as Ue,_ as kn,k as De,B as c,o as nt,$ as bt,t as Oe,r as Ne,f as F,a0 as En,a1 as ot,A as Re,y as Se,a2 as ft,a3 as ze,a4 as kt,a5 as Et,F as _n,l as In,p as On}from"../chunks/index.CdEBkEwf.js";import{S as Ye,i as Qe,t as ut,a as pt,c as Nn,b as Tn,d as yn,m as Cn,e as wn,g as Ln}from"../chunks/index.Dw8w8a4z.js";import{e as Pe,u as it,d as lt,g as qe,a as Xe,h as Ve,b as Mn,c as An,i as hn,f as Sn,j as pn,k as Dn,m as Bn,n as dt,o as Hn,q as It,r as mn,s as vn,t as Ot,v as je,w as Pn,x as Un,y as Nt,z as Tt,A as Rn,B as Vn,C as zn,D as jn,E as qn,p as Fn}from"../chunks/index.CG2AN3qo.js";import"../chunks/index-6e05b96e.C_9q9BoX.js";import{m as Ze,D as rt,a as Ge,W as xn,b as Gn,I as Kn}from"../chunks/IonPage.Bsb7kWMj.js";import{q as Wn,t as Xn}from"../chunks/ion-modal.BYMRzj9z.js";import{g as We}from"../chunks/entry.CUCICTwA.js";const Jn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,Yn=(i,e)=>{if(!customElements.get(i)){class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const n={};for(const l of this.attributes)n[l.name]=l.value;new e({target:this.shadowRoot,props:n})}}customElements.define(i,t)}},Qn=function(i){return document.createElement(i).constructor!==HTMLElement},Zn=(i,e)=>{Qn(i)||Yn(i,e)},xe=async(i,e,t)=>{Wn(),Xn(),Zn(i,e);const o=await Ze.create({component:i,componentProps:t});return o.present(),await o.onWillDismiss()};let et=gt({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]}),gn=gt({flag:[]});function $n(i){let e,t,o,n,l="Cancelar",s,u,_="Captura de Km/Gas",E,b,h,m="Confirmar",p,k,y,O,H,A,x;return{c(){e=d("ion-header"),t=d("ion-toolbar"),o=d("ion-buttons"),n=d("ion-button"),n.textContent=l,s=N(),u=d("ion-title"),u.textContent=_,E=N(),b=d("ion-buttons"),h=d("ion-button"),h.textContent=m,p=N(),k=d("ion-content"),y=d("ion-item"),O=d("ion-input"),this.h()},l(j){e=f(j,"ION-HEADER",{translucent:!0});var K=v(e);t=f(K,"ION-TOOLBAR",{});var V=v(t);o=f(V,"ION-BUTTONS",{slot:!0});var D=v(o);n=f(D,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),se(n)!=="svelte-17pq4f4"&&(n.textContent=l),D.forEach(a),s=T(V),u=f(V,"ION-TITLE",{"data-svelte-h":!0}),se(u)!=="svelte-1yhkaq7"&&(u.textContent=_),E=T(V),b=f(V,"ION-BUTTONS",{slot:!0});var B=v(b);h=f(B,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),se(h)!=="svelte-cm6j4s"&&(h.textContent=m),B.forEach(a),V.forEach(a),K.forEach(a),p=T(j),k=f(j,"ION-CONTENT",{fullscreen:!0});var S=v(k);y=f(S,"ION-ITEM",{});var I=v(y);O=f(I,"ION-INPUT",{class:!0,inputmode:!0,pattern:!0,type:!0,placeholder:!0,value:!0,required:!0});var M=v(O);M.forEach(a),I.forEach(a),S.forEach(a),this.h()},h(){g(n,"color","medium"),g(o,"slot","start"),g(h,"strong",""),g(b,"slot","end"),g(e,"translucent",""),g(O,"class","fin-km"),g(O,"inputmode","numeric"),g(O,"pattern","[0-9]*"),g(O,"type","number"),g(O,"placeholder",H="Ingresa "+i[0]+" actual"),g(O,"value",i[1]),g(O,"required",""),g(k,"fullscreen","")},m(j,K){G(j,e,K),r(e,t),r(t,o),r(o,n),r(t,s),r(t,u),r(t,E),r(t,b),r(b,h),G(j,p,K),G(j,k,K),r(k,y),r(y,O),A||(x=[pe(n,"click",i[2]),pe(h,"click",i[3]),pe(O,"input",i[4])],A=!0)},p(j,[K]){K&1&&H!==(H="Ingresa "+j[0]+" actual")&&g(O,"placeholder",H),K&2&&g(O,"value",j[1])},i:Ae,o:Ae,d(j){j&&(a(e),a(p),a(k)),A=!1,Ue(x)}}}function eo(i,e,t){const o=kn();let l=document.querySelector("ion-modal").componentProps.data_type,s="";gn.subscribe(h=>{l=h.flag[0],l=="km_final"||l=="km_inicial"?t(0,s="kilometraje"):t(0,s="litros de gasolina")});let u=0;function _(){Ze.dismiss()}function E(){o("modalResult",{data:"Your data",role:"confirm"}),l=="km_inicial"?et.update(m=>({...m,km_inicial:[u]})):l=="gas_inicial"?et.update(m=>({...m,gas_inicial:[u]})):l=="km_final"?et.update(m=>({...m,km_final:[u]})):l=="gas_final"&&et.update(m=>({...m,gas_final:[u]})),_()}return[s,u,_,E,h=>t(1,u=h.target.value)]}class to extends Ye{constructor(e){super(),Qe(this,e,eo,$n,Je,{})}}const _t=gt({items:[],checkedIndices:[],mandatory:[]});function wt(i,e,t){const o=i.slice();return o[56]=e[t],o[57]=e,o[58]=t,o}function no(i){let e,t,o,n,l,s="Kilometraje inicial",u,_,E=i[0]?i[0]+" km.":"Cargar km",b,h,m,p,k,y,O,H="Gasolina inicial (litros)",A,x,j=i[1]?i[1]+" litros":"Cargar gas",K,V,D,B;return V=bt(i[22][0]),{c(){e=d("ion-item"),t=d("ion-label"),o=d("input"),n=N(),l=d("p"),l.textContent=s,u=N(),_=d("ion-button"),b=Oe(E),h=N(),m=d("ion-item"),p=d("ion-label"),k=d("input"),y=N(),O=d("p"),O.textContent=H,A=N(),x=d("ion-button"),K=Oe(j),this.h()},l(S){e=f(S,"ION-ITEM",{});var I=v(e);t=f(I,"ION-LABEL",{style:!0});var M=v(t);o=f(M,"INPUT",{id:!0,style:!0,type:!0}),n=T(M),l=f(M,"P",{style:!0,"data-svelte-h":!0}),se(l)!=="svelte-88twxi"&&(l.textContent=s),M.forEach(a),u=T(I),_=f(I,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var R=v(_);b=Ne(R,E),R.forEach(a),I.forEach(a),h=T(S),m=f(S,"ION-ITEM",{});var L=v(m);p=f(L,"ION-LABEL",{style:!0});var Y=v(p);k=f(Y,"INPUT",{id:!0,style:!0,type:!0}),y=T(Y),O=f(Y,"P",{style:!0,"data-svelte-h":!0}),se(O)!=="svelte-1ux30eb"&&(O.textContent=H),Y.forEach(a),A=T(L),x=f(L,"ION-BUTTON",{fill:!0,class:!0,size:!0,style:!0});var J=v(x);K=Ne(J,j),J.forEach(a),L.forEach(a),this.h()},h(){F(o,"id","chkbox-km-ini"),c(o,"pointer-events","auto"),F(o,"type","checkbox"),o.required=!0,c(l,"margin-left","10px"),c(t,"display","flex"),g(_,"fill","outline"),g(_,"size","small"),g(_,"class","loadKmInicial"),g(_,"aria-selected",""),F(k,"id","chkbox-gas-ini"),c(k,"pointer-events","auto"),F(k,"type","checkbox"),k.required=!0,c(O,"margin-left","10px"),c(p,"display","flex"),g(x,"fill","outline"),g(x,"class","loadGasInicial"),g(x,"size","small"),c(x,"height","16px "),V.p(o,k)},m(S,I){G(S,e,I),r(e,t),r(t,o),o.checked=~(i[4]||[]).indexOf(o.__value),i[29](o),r(t,n),r(t,l),r(e,u),r(e,_),r(_,b),G(S,h,I),G(S,m,I),r(m,p),r(p,k),i[31](k),k.checked=~(i[4]||[]).indexOf(k.__value),r(p,y),r(p,O),r(m,A),r(m,x),r(x,K),D||(B=[pe(o,"change",i[28]),pe(_,"click",i[30]),pe(k,"change",i[32]),pe(x,"click",i[33])],D=!0)},p(S,I){I[0]&16&&(o.checked=~(S[4]||[]).indexOf(o.__value)),I[0]&1&&E!==(E=S[0]?S[0]+" km.":"Cargar km")&&Se(b,E),I[0]&16&&(k.checked=~(S[4]||[]).indexOf(k.__value)),I[0]&2&&j!==(j=S[1]?S[1]+" litros":"Cargar gas")&&Se(K,j)},d(S){S&&(a(e),a(h),a(m)),i[29](null),i[31](null),V.r(),D=!1,Ue(B)}}}function oo(i){let e,t,o,n,l,s="Kilometraje final",u,_,E=i[2]?i[2]+" km.":"Cargar km",b,h,m,p,k,y,O,H="Gasolina final (litros)",A,x,j=i[3]?i[3]+" litros":"Cargar gas",K,V,D,B;return V=bt(i[22][0]),{c(){e=d("ion-item"),t=d("ion-label"),o=d("input"),n=N(),l=d("p"),l.textContent=s,u=N(),_=d("ion-button"),b=Oe(E),h=N(),m=d("ion-item"),p=d("ion-label"),k=d("input"),y=N(),O=d("p"),O.textContent=H,A=N(),x=d("ion-button"),K=Oe(j),this.h()},l(S){e=f(S,"ION-ITEM",{});var I=v(e);t=f(I,"ION-LABEL",{style:!0});var M=v(t);o=f(M,"INPUT",{id:!0,style:!0,type:!0}),n=T(M),l=f(M,"P",{style:!0,"data-svelte-h":!0}),se(l)!=="svelte-ccmu71"&&(l.textContent=s),M.forEach(a),u=T(I),_=f(I,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var R=v(_);b=Ne(R,E),R.forEach(a),I.forEach(a),h=T(S),m=f(S,"ION-ITEM",{});var L=v(m);p=f(L,"ION-LABEL",{style:!0});var Y=v(p);k=f(Y,"INPUT",{id:!0,style:!0,type:!0}),y=T(Y),O=f(Y,"P",{style:!0,"data-svelte-h":!0}),se(O)!=="svelte-wsoyd2"&&(O.textContent=H),Y.forEach(a),A=T(L),x=f(L,"ION-BUTTON",{fill:!0,size:!0,class:!0});var J=v(x);K=Ne(J,j),J.forEach(a),L.forEach(a),this.h()},h(){F(o,"id","chkbox-km-fin"),c(o,"pointer-events","auto"),F(o,"type","checkbox"),o.required=!0,c(l,"margin-left","10px"),c(t,"display","flex"),g(_,"fill","outline"),g(_,"size","small"),g(_,"class","loadKmInicial"),g(_,"aria-selected",""),F(k,"id","chkbox-gas-fin"),c(k,"pointer-events","auto"),F(k,"type","checkbox"),k.required=!0,c(O,"margin-left","10px"),c(p,"display","flex"),g(x,"fill","outline"),g(x,"size","small"),g(x,"class","loadGasInicial"),V.p(o,k)},m(S,I){G(S,e,I),r(e,t),r(t,o),o.checked=~(i[4]||[]).indexOf(o.__value),i[23](o),r(t,n),r(t,l),r(e,u),r(e,_),r(_,b),G(S,h,I),G(S,m,I),r(m,p),r(p,k),k.checked=~(i[4]||[]).indexOf(k.__value),i[26](k),r(p,y),r(p,O),r(m,A),r(m,x),r(x,K),D||(B=[pe(o,"change",i[21]),pe(_,"click",i[24]),pe(k,"change",i[25]),pe(x,"click",i[27])],D=!0)},p(S,I){I[0]&16&&(o.checked=~(S[4]||[]).indexOf(o.__value)),I[0]&4&&E!==(E=S[2]?S[2]+" km.":"Cargar km")&&Se(b,E),I[0]&16&&(k.checked=~(S[4]||[]).indexOf(k.__value)),I[0]&8&&j!==(j=S[3]?S[3]+" litros":"Cargar gas")&&Se(K,j)},d(S){S&&(a(e),a(h),a(m)),i[23](null),i[26](null),V.r(),D=!1,Ue(B)}}}function io(i){let e=[],t=new Map,o,n=Pe(i[14]);const l=s=>s[56].id_checklist_event;for(let s=0;s<n.length;s+=1){let u=wt(i,n,s),_=l(u);t.set(_,e[s]=Lt(_,u))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();o=De()},l(s){for(let u=0;u<e.length;u+=1)e[u].l(s);o=De()},m(s,u){for(let _=0;_<e.length;_+=1)e[_]&&e[_].m(s,u);G(s,o,u)},p(s,u){u[0]&813168&&(n=Pe(s[14]),e=it(e,u,l,1,s,n,t,o.parentNode,lt,Lt,o,wt))},d(s){s&&a(o);for(let u=0;u<e.length;u+=1)e[u].d(s)}}}function lo(i){let e,t=(i[13][i[56].id_checklist_event]?i[13][i[56].id_checklist_event]:"Cargar evidencia")+"",o;return{c(){e=d("label"),o=Oe(t),this.h()},l(n){e=f(n,"LABEL",{for:!0,class:!0});var l=v(e);o=Ne(l,t),l.forEach(a),this.h()},h(){F(e,"for","chklist-"+i[56].id_checklist_event),F(e,"class","button-label")},m(n,l){G(n,e,l),r(e,o)},p(n,l){l[0]&8192&&t!==(t=(n[13][n[56].id_checklist_event]?n[13][n[56].id_checklist_event]:"Cargar evidencia")+"")&&Se(o,t)},d(n){n&&a(e)}}}function ro(i){let e;return{c(){e=d("ion-spinner"),this.h()},l(t){e=f(t,"ION-SPINNER",{name:!0,class:!0}),v(e).forEach(a),this.h()},h(){g(e,"name","dots"),g(e,"class","button-spinner")},m(t,o){G(t,e,o)},p:Ae,d(t){t&&a(e)}}}function Lt(i,e){let t,o,n,l=e[56],s,u,_=e[56].item+"",E,b,h,m=e[56].mandatory=="1"?" * ":"",p,k,y,O,H,A,x,j,K,V;const D=()=>e[35](n,l),B=()=>e[35](null,l);function S(){return e[36](e[56])}function I(Y,J){return Y[11][Y[56].id_checklist_event]?ro:lo}let M=I(e),R=M(e);function L(...Y){return e[38](e[56],...Y)}return j=bt(e[22][0]),{key:i,first:null,c(){t=d("ion-item"),o=d("ion-label"),n=d("input"),s=N(),u=d("p"),E=Oe(_),b=N(),h=d("b"),p=Oe(m),k=N(),y=d("ion-button"),O=d("div"),R.c(),H=N(),A=d("input"),x=N(),this.h()},l(Y){t=f(Y,"ION-ITEM",{});var J=v(t);o=f(J,"ION-LABEL",{style:!0});var ue=v(o);n=f(ue,"INPUT",{id:!0,style:!0,type:!0}),s=T(ue),u=f(ue,"P",{style:!0});var me=v(u);E=Ne(me,_),me.forEach(a),b=T(ue),h=f(ue,"B",{style:!0});var Ie=v(h);p=Ne(Ie,m),Ie.forEach(a),ue.forEach(a),k=T(J),y=f(J,"ION-BUTTON",{fill:!0,class:!0,size:!0});var P=v(y);O=f(P,"DIV",{class:!0});var ce=v(O);R.l(ce),H=T(ce),A=f(ce,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),ce.forEach(a),P.forEach(a),x=T(J),J.forEach(a),this.h()},h(){F(n,"id",`chkbox-${e[56].id_checklist_event}`),c(n,"pointer-events","auto"),F(n,"type","checkbox"),n.__value=e[56].id_checklist_event,En(n,n.__value),n.required=!0,c(u,"margin-left","10px"),c(h,"margin-left","5px"),c(o,"display","flex"),c(A,"display","none"),F(A,"id","chklist-"+e[56].id_checklist_event),F(A,"name","fileToUpload"),F(A,"type","file"),F(A,"accept","image/*"),F(A,"capture","environment"),F(O,"class","button-content"),g(y,"fill","outline"),g(y,"class","loadEvidence"),g(y,"size","small"),j.p(n),this.first=t},m(Y,J){G(Y,t,J),r(t,o),r(o,n),n.checked=~(e[4]||[]).indexOf(n.__value),D(),r(o,s),r(o,u),r(u,E),r(o,b),r(o,h),r(h,p),r(t,k),r(t,y),r(y,O),R.m(O,null),r(O,H),r(O,A),e[37](A),r(t,x),K||(V=[pe(n,"change",e[34]),pe(n,"change",S),pe(A,"change",L)],K=!0)},p(Y,J){e=Y,J[0]&16&&(n.checked=~(e[4]||[]).indexOf(n.__value)),l!==e[56]&&(B(),l=e[56],D()),M===(M=I(e))&&R?R.p(e,J):(R.d(1),R=M(e),R&&(R.c(),R.m(O,H)))},d(Y){Y&&a(t),B(),R.d(),e[37](null),j.r(),K=!1,Ue(V)}}}function Mt(i){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(o){e=f(o,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),se(e)!=="svelte-1aosxw0"&&(e.innerHTML=t),this.h()},h(){F(e,"class","overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(o,n){G(o,e,n)},d(o){o&&a(e)}}}function ao(i){let e,t,o,n,l="Cancelar",s,u,_="REQUERIMIENTOS DE RUTA",E,b,h,m,p,k,y,O="Confirmar",H,A,x,j;function K(I,M){return I[15]?oo:no}let D=K(i)(i),B=i[14]&&io(i),S=i[12]&&Mt();return{c(){e=d("ion-header"),t=d("ion-toolbar"),o=d("ion-buttons"),n=d("ion-button"),n.textContent=l,s=N(),u=d("ion-title"),u.textContent=_,E=N(),b=d("ion-content"),h=d("ion-list"),D.c(),m=N(),B&&B.c(),p=N(),k=d("ion-footer"),y=d("ion-button"),y.textContent=O,H=N(),S&&S.c(),A=De(),this.h()},l(I){e=f(I,"ION-HEADER",{translucent:!0});var M=v(e);t=f(M,"ION-TOOLBAR",{});var R=v(t);o=f(R,"ION-BUTTONS",{slot:!0});var L=v(o);n=f(L,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),se(n)!=="svelte-1yhpw6u"&&(n.textContent=l),L.forEach(a),s=T(R),u=f(R,"ION-TITLE",{"data-svelte-h":!0}),se(u)!=="svelte-19bar5p"&&(u.textContent=_),R.forEach(a),M.forEach(a),E=T(I),b=f(I,"ION-CONTENT",{fullscreen:!0});var Y=v(b);h=f(Y,"ION-LIST",{});var J=v(h);D.l(J),m=T(J),B&&B.l(J),J.forEach(a),Y.forEach(a),p=T(I),k=f(I,"ION-FOOTER",{});var ue=v(k);y=f(ue,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),se(y)!=="svelte-1k4i1so"&&(y.textContent=O),ue.forEach(a),H=T(I),S&&S.l(I),A=De(),this.h()},h(){g(n,"color","medium"),g(o,"slot","start"),g(e,"translucent",""),g(b,"fullscreen",""),g(y,"fill","outline"),g(y,"color","tertiary"),g(y,"strong",""),c(y,"width","99%"),c(y,"height","auto")},m(I,M){G(I,e,M),r(e,t),r(t,o),r(o,n),r(t,s),r(t,u),G(I,E,M),G(I,b,M),r(b,h),D.m(h,null),r(h,m),B&&B.m(h,null),G(I,p,M),G(I,k,M),r(k,y),G(I,H,M),S&&S.m(I,M),G(I,A,M),x||(j=[pe(n,"click",i[16]),pe(y,"click",i[17])],x=!0)},p(I,M){D.p(I,M),I[14]&&B.p(I,M),I[12]?S||(S=Mt(),S.c(),S.m(A.parentNode,A)):S&&(S.d(1),S=null)},i:Ae,o:Ae,d(I){I&&(a(e),a(E),a(b),a(p),a(k),a(H),a(A)),D.d(),B&&B.d(),S&&S.d(I),x=!1,Ue(j)}}}function mt(i,e){if(typeof i=="object"&&i!==null||Array.isArray(i)){if(Array.isArray(i))return i.map(t=>mt(t,e)).flat();{const t=Object.keys(i);let o;return e=="id_checklist_event"?o=t.filter(l=>l.toLowerCase().includes("id_checklist_event")).map(l=>i[l]):e=="mandatory"?o=t.filter(l=>l.toLowerCase().includes("mandatory")).map(l=>i[l]):(console.error("Tipo de dato no reconocido."),o=!1),o}}else return console.error("Invalid input. Please provide a valid object or array."),[]}function so(){return new Promise((i,e)=>{if(!navigator.geolocation)return e("Geoloc no soportada");navigator.geolocation.getCurrentPosition(t=>i({lat:+t.coords.latitude.toFixed(6),lng:+t.coords.longitude.toFixed(6)}),t=>e(t),{enableHighAccuracy:!0,maximumAge:0,timeout:8e3})})}function co(i,e,t){let o=rt,n=document.querySelector("ion-modal");const l=n.componentProps.checklist,s=n.componentProps.driverId,u=n.componentProps.routeId,_=n.componentProps.isLast;let E,b,h,m,p=[],k=null,y={},O,H,A,x,j={},K=new Object,V=!1,D={},B={};nt(()=>{K=JSON.parse(localStorage.getItem("userSession")),_?console.log("Último checklist"):_t.update(C=>(C.mandatory=mt(l,"mandatory"),C.items=mt(l,"id_checklist_event"),C))});function S(C){t(11,j[C]=!0,j)}const I=async()=>{await(await Ge.create({header:"Datos o checklist incompletos",message:"Carga la evidencia requerida y marca todas las casillas para confirmar",buttons:[{text:"Cerrar"}]})).present()},M=async(C,z)=>{await(await Ge.create({header:C||"Error",message:z||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},R=async C=>{await(await Ge.create({header:"Datos inválidos",message:C=="km"?"Llena correctamente el campo de kilometraje inicial":"Llena correctamente el campo de gasolina inicial",buttons:[{text:"Cerrar"}]})).present()},L=()=>{Ze.dismiss(),s?We(`/drivers/${s}`):We("/drivers/me")},Y=async()=>{if(t(12,V=!0),_){var C=P(h,"km"),z=P(m,"gas");let Z=new Object;Z.km_final=C,Z.gas_final=z,Z.id_route=u,Z.id_user_over=K.id_user,Z.token=K.token,C&&z?(L(),qe(`${o}api/admin/checklist/add_evidence.php`,function(be){be.success?(t(12,V=!1),M("Datos capturados","El kilometraje y gasolina final fueron registrados correctamente, espere aprobación para finalizar ruta")):(t(12,V=!1),M("Error","Vuelva a intentar capturar los datos solicitados"))},Z)):I()}else{var $=P(E,"km"),Q=P(b,"gas");let Z=null;try{Z=await so()}catch(be){console.warn("GPS no disponible:",be)}_t.update(be=>{be.items;const Te=be.mandatory;if(be.items.filter((ye,Le)=>be.mandatory[Le]==="1").every(ye=>be.checkedIndices.includes(ye))&&$&&Q){let ye=new FormData;ye=ee(ye),ye.append("km_inicial",$),ye.append("gas_inicial",Q),ye.append("id_route",u),Z&&(ye.append("lat",Z.lat),ye.append("lng",Z.lng));for(const Le in D)if(D.hasOwnProperty(Le)){const{img:Fe,img_id:$e}=D[Le];ye.append(`selectedImages[${Le}][img]`,Fe),ye.append(`selectedImages[${Le}][img_id]`,$e)}fetch(`${o}api/admin/checklist/add_evidence.php`,{method:"POST",body:ye}).then(Le=>Le.json()).then(Le=>{Te&&Te.some(Fe=>Fe==="1")?Ie(u,"checklist-pending"):Ie(u,"enroute")}).catch(Le=>{console.error("Error fetching data:",Le)}).finally(()=>{t(12,V=!1),L()})}else if(!Te&&$&&Q){let ye=new FormData;Z&&(ye.append("lat",Z.lat),ye.append("lng",Z.lng)),ye.append("km_inicial",$),ye.append("gas_inicial",Q),ye=ee(ye),fetch(`${o}api/admin/checklist/add_evidence.php`,{method:"POST",body:ye}).then(Le=>Le.json()).then(Le=>{Ie(u,"enroute")}).catch(Le=>{console.error("Error fetching data:",Le)}).finally(()=>{t(12,V=!1),L()})}else I();return be})}le()},J=async(C,z)=>{S(z);const Q=C.target.files[0],Z=await ue(Q);if(Z){let be=new FormData;be.append("fileToUpload",Z),be=ee(be);try{const Te=await fetch(`${o}api/admin/manager/upload_img_driver.php`,{method:"POST",body:be});if(Te.ok){const we=await Te.json();D={...D,[z]:{img:we.img,img_id:we.img_id}},t(13,B={...B,[z]:we.filename}),me(z),t(6,y[z].checked=!0,y),t(11,j[z]=!1,j)}else console.error("File upload failed:",Te.statusText)}catch(Te){console.error("Error during file upload:",Te)}}},ue=async C=>new Promise(z=>{const $=new Image;$.src=URL.createObjectURL(C),$.onload=()=>{const Q=document.createElement("canvas"),Z=Q.getContext("2d"),be=800,Te=600;let we=$.width,Me=$.height;we>be&&(Me*=be/we,we=be),Me>Te&&(we*=Te/Me,Me=Te),Q.width=we,Q.height=Me,Z.drawImage($,0,0,we,Me),Q.toBlob(ye=>{z(ye),URL.revokeObjectURL($.src),Z.clearRect(0,0,Q.width,Q.height)},"image/jpeg",.7)}}),me=C=>{_t.update(z=>(z.checkedIndices.indexOf(C)===-1?z.checkedIndices.push(C):console.error(`ID ${C} is already checked.`),z.items.forEach(Q=>{Q.id_checklist_event===C&&(Q.checked=!0)}),z))};function Ie(C,z){let $=new FormData;$.append("id_route",C),$.append("status",z),$=ee($),fetch(`${o}api/admin/route/change_status.php`,{method:"POST",body:$}).then(Q=>Q.json()).then(Q=>{}).catch(Q=>{console.error("Error fetching data:",Q)})}function P(C,z){return/^\d+$/.test(C)?parseInt(C,10):(R(z),null)}function ce(C,z){de(z),n.componentProps.data_type=z,xe("modal-gas-km",to,{r:z}).then(()=>{et.subscribe($=>{ve($,z)})})}function de(C){gn.update(z=>({...z,flag:[C]}))}function ve(C,z){t(0,E=C.km_inicial?C.km_inicial:null),t(1,b=C.gas_inicial?C.gas_inicial:null),t(2,h=C.km_final?C.km_final:null),t(3,m=C.gas_final?C.gas_final:null),z=="km_inicial"&&O&&t(7,O.checked=!0,O),z=="gas_inicial"&&H&&t(8,H.checked=!0,H),z=="km_final"&&A&&t(9,A.checked=!0,A),z=="gas_final"&&x&&t(10,x.checked=!0,x)}function le(){et.set({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]})}function ee(C){return C.append("token",K.token),C.append("id_user_over",K.id_user),C}const fe=[[]];function _e(){p=ot(fe[0],this.__value,this.checked),t(4,p)}function re(C){Re[C?"unshift":"push"](()=>{A=C,t(9,A)})}const te=C=>ce(C,"km_final");function ke(){p=ot(fe[0],this.__value,this.checked),t(4,p)}function ge(C){Re[C?"unshift":"push"](()=>{x=C,t(10,x)})}const Ee=C=>ce(C,"gas_final");function he(){p=ot(fe[0],this.__value,this.checked),t(4,p)}function ae(C){Re[C?"unshift":"push"](()=>{O=C,t(7,O)})}const X=C=>ce(C,"km_inicial");function W(C){Re[C?"unshift":"push"](()=>{H=C,t(8,H)})}function q(){p=ot(fe[0],this.__value,this.checked),t(4,p)}const ie=C=>ce(C,"gas_inicial");function Ce(){p=ot(fe[0],this.__value,this.checked),t(4,p)}function ne(C,z){Re[C?"unshift":"push"](()=>{y[z.id_checklist_event]=C,t(6,y)})}const oe=C=>me(C.id_checklist_event);function w(C){Re[C?"unshift":"push"](()=>{k=C,t(5,k)})}return[E,b,h,m,p,k,y,O,H,A,x,j,V,B,l,_,L,Y,J,me,ce,_e,fe,re,te,ke,ge,Ee,he,ae,X,W,q,ie,Ce,ne,oe,w,(C,z)=>J(z,C.id_checklist_event)]}class bn extends Ye{constructor(e){super(),Qe(this,e,co,ao,Je,{},null,[-1,-1])}}function At(i,e,t){const o=i.slice();return o[52]=e[t],o[54]=t,o}function uo(i){let e,t,o,n,l;return{c(){e=d("ion-buttons"),t=d("ion-button"),o=Oe("Confirmar"),this.h()},l(s){e=f(s,"ION-BUTTONS",{slot:!0});var u=v(e);t=f(u,"ION-BUTTON",{strong:!0,disabled:!0});var _=v(t);o=Ne(_,"Confirmar"),_.forEach(a),u.forEach(a),this.h()},h(){g(t,"strong",""),g(t,"disabled",i[10].status=="completed"),g(e,"slot","end")},m(s,u){G(s,e,u),r(e,t),r(t,o),n||(l=pe(t,"click",i[21]),n=!0)},p:Ae,d(s){s&&a(e),n=!1,l()}}}function fo(i){let e,t,o,n,l,s="Empresa",u,_,E=i[10].enterprise_name+"",b;return{c(){e=d("ion-item"),t=d("ion-icon"),o=N(),n=d("ion-label"),l=d("p"),l.textContent=s,u=N(),_=d("h2"),b=Oe(E),this.h()},l(h){e=f(h,"ION-ITEM",{});var m=v(e);t=f(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(m),n=f(m,"ION-LABEL",{});var p=v(n);l=f(p,"P",{"data-svelte-h":!0}),se(l)!=="svelte-6noid3"&&(l.textContent=s),u=T(p),_=f(p,"H2",{});var k=v(_);b=Ne(k,E),k.forEach(a),p.forEach(a),m.forEach(a),this.h()},h(){g(t,"icon",vn),g(t,"slot","start")},m(h,m){G(h,e,m),r(e,t),r(e,o),r(e,n),r(n,l),r(n,u),r(n,_),r(_,b)},p:Ae,d(h){h&&a(e)}}}function _o(i){let e,t,o,n,l,s="Negocio",u,_,E=i[10].client_name+"",b;return{c(){e=d("ion-item"),t=d("ion-icon"),o=N(),n=d("ion-label"),l=d("p"),l.textContent=s,u=N(),_=d("h2"),b=Oe(E),this.h()},l(h){e=f(h,"ION-ITEM",{});var m=v(e);t=f(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(m),n=f(m,"ION-LABEL",{});var p=v(n);l=f(p,"P",{"data-svelte-h":!0}),se(l)!=="svelte-57b1dg"&&(l.textContent=s),u=T(p),_=f(p,"H2",{});var k=v(_);b=Ne(k,E),k.forEach(a),p.forEach(a),m.forEach(a),this.h()},h(){g(t,"icon",vn),g(t,"slot","start")},m(h,m){G(h,e,m),r(e,t),r(e,o),r(e,n),r(n,l),r(n,u),r(n,_),r(_,b)},p:Ae,d(h){h&&a(e)}}}function ho(i){let e,t,o,n,l,s="Teléfono de Negocio",u,_,E=i[10].client_phone+"",b;return{c(){e=d("ion-item"),t=d("ion-icon"),o=N(),n=d("ion-label"),l=d("p"),l.textContent=s,u=N(),_=d("h2"),b=Oe(E),this.h()},l(h){e=f(h,"ION-ITEM",{href:!0});var m=v(e);t=f(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(m),n=f(m,"ION-LABEL",{class:!0});var p=v(n);l=f(p,"P",{"data-svelte-h":!0}),se(l)!=="svelte-1u5l7fz"&&(l.textContent=s),u=T(p),_=f(p,"H2",{});var k=v(_);b=Ne(k,E),k.forEach(a),p.forEach(a),m.forEach(a),this.h()},h(){g(t,"icon",Mn),g(t,"slot","start"),g(n,"class","ion-text-wrap"),g(e,"href","tel:"+i[10].client_phone)},m(h,m){G(h,e,m),r(e,t),r(e,o),r(e,n),r(n,l),r(n,u),r(n,_),r(_,b)},p:Ae,d(h){h&&a(e)}}}function po(i){let e,t,o,n,l,s="Domicilio Alternativo",u,_,E=i[10].line2+"",b,h,m;return{c(){e=d("ion-item"),t=d("ion-icon"),o=N(),n=d("ion-label"),l=d("p"),l.textContent=s,u=N(),_=d("h2"),b=Oe(E),h=N(),m=d("ion-icon"),this.h()},l(p){e=f(p,"ION-ITEM",{href:!0,target:!0,rel:!0});var k=v(e);t=f(k,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(k),n=f(k,"ION-LABEL",{class:!0});var y=v(n);l=f(y,"P",{"data-svelte-h":!0}),se(l)!=="svelte-1ub9uzw"&&(l.textContent=s),u=T(y),_=f(y,"H2",{});var O=v(_);b=Ne(O,E),O.forEach(a),y.forEach(a),h=T(k),m=f(k,"ION-ICON",{icon:!0,slot:!0}),v(m).forEach(a),k.forEach(a),this.h()},h(){g(t,"icon",Ot),g(t,"slot","start"),g(n,"class","ion-text-wrap"),g(m,"icon",je),g(m,"slot","end"),g(e,"href","https://www.google.com/maps/searhc/?api=1&query="+i[10].line2),g(e,"target","_blank"),g(e,"rel","noopener noreferrer")},m(p,k){G(p,e,k),r(e,t),r(e,o),r(e,n),r(n,l),r(n,u),r(n,_),r(_,b),r(e,h),r(e,m)},p:Ae,d(p){p&&a(e)}}}function mo(i){let e,t,o,n,l,s="Domicilio",u,_,E=i[10].line1+"",b,h,m,p,k=i[10].line2&&i[10].line2.trim().length,y,O=k&&vo(i);return{c(){e=d("ion-item"),t=d("ion-icon"),o=N(),n=d("ion-label"),l=d("p"),l.textContent=s,u=N(),_=d("h2"),b=Oe(E),h=N(),m=d("ion-icon"),p=N(),O&&O.c(),y=De(),this.h()},l(H){e=f(H,"ION-ITEM",{href:!0,target:!0,rel:!0});var A=v(e);t=f(A,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(A),n=f(A,"ION-LABEL",{class:!0});var x=v(n);l=f(x,"P",{"data-svelte-h":!0}),se(l)!=="svelte-cbm7q1"&&(l.textContent=s),u=T(x),_=f(x,"H2",{});var j=v(_);b=Ne(j,E),j.forEach(a),x.forEach(a),h=T(A),m=f(A,"ION-ICON",{icon:!0,slot:!0}),v(m).forEach(a),A.forEach(a),p=T(H),O&&O.l(H),y=De(),this.h()},h(){g(t,"icon",Ot),g(t,"slot","start"),g(n,"class","ion-text-wrap"),g(m,"icon",je),g(m,"slot","end"),g(e,"href","https://www.google.com/maps/search/?api=1&query="+i[10].line1),g(e,"target","_blank"),g(e,"rel","noopener noreferrer")},m(H,A){G(H,e,A),r(e,t),r(e,o),r(e,n),r(n,l),r(n,u),r(n,_),r(_,b),r(e,h),r(e,m),G(H,p,A),O&&O.m(H,A),G(H,y,A)},p(H,A){k&&O.p(H,A)},d(H){H&&(a(e),a(p),a(y)),O&&O.d(H)}}}function vo(i){let e,t,o,n,l,s="Domicilio Alternativo",u,_,E=i[10].line2+"",b,h,m;return{c(){e=d("ion-item"),t=d("ion-icon"),o=N(),n=d("ion-label"),l=d("p"),l.textContent=s,u=N(),_=d("h2"),b=Oe(E),h=N(),m=d("ion-icon"),this.h()},l(p){e=f(p,"ION-ITEM",{href:!0,target:!0,rel:!0});var k=v(e);t=f(k,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(k),n=f(k,"ION-LABEL",{class:!0});var y=v(n);l=f(y,"P",{"data-svelte-h":!0}),se(l)!=="svelte-1ub9uzw"&&(l.textContent=s),u=T(y),_=f(y,"H2",{});var O=v(_);b=Ne(O,E),O.forEach(a),y.forEach(a),h=T(k),m=f(k,"ION-ICON",{icon:!0,slot:!0}),v(m).forEach(a),k.forEach(a),this.h()},h(){g(t,"icon",Ot),g(t,"slot","start"),g(n,"class","ion-text-wrap"),g(m,"icon",je),g(m,"slot","end"),g(e,"href","https://www.google.com/maps/search/?api=1&query="+i[10].line2),g(e,"target","_blank"),g(e,"rel","noopener noreferrer")},m(p,k){G(p,e,k),r(e,t),r(e,o),r(e,n),r(n,l),r(n,u),r(n,_),r(_,b),r(e,h),r(e,m)},p:Ae,d(p){p&&a(e)}}}function go(i){let e,t,o,n,l,s="Contacto del Cliente",u,_,E,b,h,m=i[14]&&i[14]==="1"&&bo(i);return{c(){e=d("ion-item"),t=d("ion-icon"),o=N(),n=d("ion-label"),l=d("p"),l.textContent=s,u=N(),_=d("h2"),E=d("a"),b=Oe(i[15]),h=N(),m&&m.c(),this.h()},l(p){e=f(p,"ION-ITEM",{});var k=v(e);t=f(k,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(k),n=f(k,"ION-LABEL",{class:!0});var y=v(n);l=f(y,"P",{"data-svelte-h":!0}),se(l)!=="svelte-1utsyb6"&&(l.textContent=s),u=T(y),_=f(y,"H2",{});var O=v(_);E=f(O,"A",{href:!0,style:!0});var H=v(E);b=Ne(H,i[15]),H.forEach(a),O.forEach(a),y.forEach(a),h=T(k),m&&m.l(k),k.forEach(a),this.h()},h(){g(t,"icon",An),g(t,"slot","start"),F(E,"href",`tel:${i[15]}`),F(E,"style","text-decoration: none; color: inherit;"),g(n,"class","ion-text-wrap")},m(p,k){G(p,e,k),r(e,t),r(e,o),r(e,n),r(n,l),r(n,u),r(n,_),r(_,E),r(E,b),r(e,h),m&&m.m(e,null)},p(p,k){p[14]&&p[14]==="1"&&m.p(p,k)},d(p){p&&a(e),m&&m.d()}}}function bo(i){let e,t=`<ion-icon icon="${Pn}" slot="start"></ion-icon>
                        Notificar Cliente`,o,n;return{c(){e=d("ion-button"),e.innerHTML=t,this.h()},l(l){e=f(l,"ION-BUTTON",{fill:!0,style:!0,"data-svelte-h":!0}),se(e)!=="svelte-149vhpt"&&(e.innerHTML=t),this.h()},h(){g(e,"fill","outline"),c(e,"margin-left","16px")},m(l,s){G(l,e,s),o||(n=pe(e,"click",i[22]),o=!0)},p:Ae,d(l){l&&a(e),o=!1,n()}}}function ko(i){let e,t,o,n,l,s="Notas de ubicación",u,_,E;return{c(){e=d("ion-item"),t=d("ion-icon"),o=N(),n=d("ion-label"),l=d("p"),l.textContent=s,u=N(),_=d("h2"),E=Oe(i[16]),this.h()},l(b){e=f(b,"ION-ITEM",{});var h=v(e);t=f(h,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(h),n=f(h,"ION-LABEL",{class:!0});var m=v(n);l=f(m,"P",{"data-svelte-h":!0}),se(l)!=="svelte-nhm2ft"&&(l.textContent=s),u=T(m),_=f(m,"H2",{});var p=v(_);E=Ne(p,i[16]),p.forEach(a),m.forEach(a),h.forEach(a),this.h()},h(){g(t,"icon",hn),g(t,"slot","start"),g(n,"class","ion-text-wrap")},m(b,h){G(b,e,h),r(e,t),r(e,o),r(e,n),r(n,l),r(n,u),r(n,_),r(_,E)},p:Ae,d(b){b&&a(e)}}}function Eo(i){let e,t,o,n,l,s="Horarios",u,_,E=i[10].schedule+"",b;return{c(){e=d("ion-item"),t=d("ion-icon"),o=N(),n=d("ion-label"),l=d("p"),l.textContent=s,u=N(),_=d("h2"),b=Oe(E),this.h()},l(h){e=f(h,"ION-ITEM",{});var m=v(e);t=f(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(m),n=f(m,"ION-LABEL",{});var p=v(n);l=f(p,"P",{"data-svelte-h":!0}),se(l)!=="svelte-11q7hm5"&&(l.textContent=s),u=T(p),_=f(p,"H2",{});var k=v(_);b=Ne(k,E),k.forEach(a),p.forEach(a),m.forEach(a),this.h()},h(){g(t,"icon",Sn),g(t,"slot","start")},m(h,m){G(h,e,m),r(e,t),r(e,o),r(e,n),r(n,l),r(n,u),r(n,_),r(_,b)},p:Ae,d(h){h&&a(e)}}}function Io(i){let e,t,o,n,l,s="Notas del operador",u,_,E=i[10].driver_comments+"",b;return{c(){e=d("ion-item"),t=d("ion-icon"),o=N(),n=d("ion-label"),l=d("p"),l.textContent=s,u=N(),_=d("h2"),b=Oe(E),this.h()},l(h){e=f(h,"ION-ITEM",{});var m=v(e);t=f(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(m),n=f(m,"ION-LABEL",{});var p=v(n);l=f(p,"P",{"data-svelte-h":!0}),se(l)!=="svelte-1yk9qp4"&&(l.textContent=s),u=T(p),_=f(p,"H2",{});var k=v(_);b=Ne(k,E),k.forEach(a),p.forEach(a),m.forEach(a),this.h()},h(){g(t,"icon",pn),g(t,"slot","start")},m(h,m){G(h,e,m),r(e,t),r(e,o),r(e,n),r(n,l),r(n,u),r(n,_),r(_,b)},p:Ae,d(h){h&&a(e)}}}function Oo(i){let e,t=i[10].logistic_comments!="<br>"&&No(i);return{c(){t&&t.c(),e=De()},l(o){t&&t.l(o),e=De()},m(o,n){t&&t.m(o,n),G(o,e,n)},p(o,n){o[10].logistic_comments!="<br>"&&t.p(o,n)},d(o){o&&a(e),t&&t.d(o)}}}function No(i){let e,t,o,n,l,s="Comentarios logísticos",u,_,E=i[10].logistic_comments+"",b;return{c(){e=d("ion-item"),t=d("ion-icon"),o=N(),n=d("ion-label"),l=d("p"),l.textContent=s,u=N(),_=d("h2"),b=Oe(E),this.h()},l(h){e=f(h,"ION-ITEM",{});var m=v(e);t=f(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(m),n=f(m,"ION-LABEL",{class:!0});var p=v(n);l=f(p,"P",{"data-svelte-h":!0}),se(l)!=="svelte-1iz85r6"&&(l.textContent=s),u=T(p),_=f(p,"H2",{});var k=v(_);b=Ne(k,E),k.forEach(a),p.forEach(a),m.forEach(a),this.h()},h(){g(t,"icon",hn),g(t,"slot","start"),g(n,"class","ion-text-wrap")},m(h,m){G(h,e,m),r(e,t),r(e,o),r(e,n),r(n,l),r(n,u),r(n,_),r(_,b)},p:Ae,d(h){h&&a(e)}}}function To(i){let e,t,o,n,l="<p>Etiqueta</p>",s,u,_=(i[10].tag?i[10].tag:"")+"",E;return{c(){e=d("ion-item"),t=d("ion-icon"),o=N(),n=d("ion-label"),n.innerHTML=l,s=N(),u=d("div"),E=Oe(_),this.h()},l(b){e=f(b,"ION-ITEM",{});var h=v(e);t=f(h,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(h),n=f(h,"ION-LABEL",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-50rr6d"&&(n.innerHTML=l),s=T(h),u=f(h,"DIV",{class:!0,style:!0});var m=v(u);E=Ne(m,_),m.forEach(a),h.forEach(a),this.h()},h(){g(t,"icon",Dn),g(t,"slot","start"),g(n,"class","ion-text-wrap"),F(u,"class","stop-tag"),c(u,"background-color",i[17]),c(u,"border","1px solid "+i[18]),c(u,"color",i[10].tag_color),c(u,"font-size","14px"),c(u,"text-align","center"),c(u,"align-content","center"),c(u,"border-radius","20px"),c(u,"white-space","normal"),c(u,"padding","4px 8px"),c(u,"width","auto",1),c(u,"display","inline-block")},m(b,h){G(b,e,h),r(e,t),r(e,o),r(e,n),r(e,s),r(e,u),r(u,E)},p:Ae,d(b){b&&a(e)}}}function yo(i){let e,t,o,n,l,s="Estado de entrega",u,_,E="Entregado",b,h,m="No Entregado",p,k,y="Entrega Parcial",O,H,A,x,j,K,V,D,B=i[5]===!0&&St(i),S=(i[6]===!0||i[6]===!1&&i[5]===!1)&&Dt(i);return{c(){e=d("ion-item"),t=d("ion-icon"),o=N(),n=d("ion-select"),l=d("div"),l.textContent=s,u=N(),_=d("ion-select-option"),_.textContent=E,b=N(),h=d("ion-select-option"),h.textContent=m,p=N(),k=d("ion-select-option"),k.textContent=y,O=N(),H=d("ion-item"),A=d("ion-icon"),x=N(),j=d("ion-textarea"),K=N(),V=d("section"),B&&B.c(),D=N(),S&&S.c(),this.h()},l(I){e=f(I,"ION-ITEM",{});var M=v(e);t=f(M,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(M),n=f(M,"ION-SELECT",{value:!0});var R=v(n);l=f(R,"DIV",{slot:!0,"data-svelte-h":!0}),se(l)!=="svelte-1635zca"&&(l.textContent=s),u=T(R),_=f(R,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),se(_)!=="svelte-1nhq8vd"&&(_.textContent=E),b=T(R),h=f(R,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),se(h)!=="svelte-dhd4r3"&&(h.textContent=m),p=T(R),k=f(R,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),se(k)!=="svelte-17taxwo"&&(k.textContent=y),R.forEach(a),M.forEach(a),O=T(I),H=f(I,"ION-ITEM",{});var L=v(H);A=f(L,"ION-ICON",{icon:!0,slot:!0}),v(A).forEach(a),x=T(L),j=f(L,"ION-TEXTAREA",{label:!0,placeholder:!0}),v(j).forEach(a),L.forEach(a),K=T(I),V=f(I,"SECTION",{style:!0});var Y=v(V);B&&B.l(Y),D=T(Y),S&&S.l(Y),Y.forEach(a),this.h()},h(){g(t,"icon",Bn),g(t,"slot","start"),F(l,"slot","label"),g(_,"value","delivered"),g(h,"value","notdelivered"),g(k,"value","partialdeliver"),g(n,"value",i[13]?i[13]:"delivered"),g(A,"icon",dt),g(A,"slot","start"),g(j,"label","Notas"),g(j,"placeholder","Escribe aquí..."),c(V,"display","flex"),c(V,"gap","8px"),c(V,"padding","16px 16px 6px")},m(I,M){G(I,e,M),r(e,t),r(e,o),r(e,n),r(n,l),r(n,u),r(n,_),r(n,b),r(n,h),r(n,p),r(n,k),i[29](n),G(I,O,M),G(I,H,M),r(H,A),r(H,x),r(H,j),i[30](j),G(I,K,M),G(I,V,M),B&&B.m(V,null),r(V,D),S&&S.m(V,null)},p(I,M){I[5]===!0?B?B.p(I,M):(B=St(I),B.c(),B.m(V,D)):B&&(B.d(1),B=null),I[6]===!0||I[6]===!1&&I[5]===!1?S?S.p(I,M):(S=Dt(I),S.c(),S.m(V,null)):S&&(S.d(1),S=null)},d(I){I&&(a(e),a(O),a(H),a(K),a(V)),i[29](null),i[30](null),B&&B.d(),S&&S.d()}}}function St(i){let e,t=`<ion-icon icon="${Un}" slot="start"></ion-icon>
                        Ingreso`,o,n;return{c(){e=d("ion-button"),e.innerHTML=t,this.h()},l(l){e=f(l,"ION-BUTTON",{id:!0,style:!0,"data-svelte-h":!0}),se(e)!=="svelte-izs0s1"&&(e.innerHTML=t),this.h()},h(){g(e,"id","checkInBtn"),c(e,"flex","1")},m(l,s){G(l,e,s),o||(n=pe(e,"click",i[23]),o=!0)},p:Ae,d(l){l&&a(e),o=!1,n()}}}function Dt(i){let e,t,o,n,l,s;return{c(){e=d("ion-button"),t=d("ion-icon"),o=Oe(`
                        Salida`),this.h()},l(u){e=f(u,"ION-BUTTON",{id:!0,style:!0,disabled:!0});var _=v(e);t=f(_,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=Ne(_,`
                        Salida`),_.forEach(a),this.h()},h(){g(t,"icon",Hn),g(t,"slot","start"),g(e,"id","checkOutBtn"),c(e,"flex","1"),g(e,"disabled",n=i[6]===!1)},m(u,_){G(u,e,_),r(e,t),r(e,o),l||(s=pe(e,"click",i[24]),l=!0)},p(u,_){_[0]&64&&n!==(n=u[6]===!1)&&g(e,"disabled",n)},d(u){u&&a(e),l=!1,s()}}}function Co(i){let e,t,o,n,l,s,u,_;return{c(){e=d("section"),t=d("ion-button"),o=d("label"),n=d("ion-icon"),l=Oe(`
                        Subir Evidencia
                        `),s=d("input"),this.h()},l(E){e=f(E,"SECTION",{style:!0});var b=v(e);t=f(b,"ION-BUTTON",{fill:!0,class:!0,style:!0,disabled:!0});var h=v(t);o=f(h,"LABEL",{for:!0,style:!0});var m=v(o);n=f(m,"ION-ICON",{icon:!0,slot:!0,style:!0}),v(n).forEach(a),l=Ne(m,`
                        Subir Evidencia
                        `),s=f(m,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),m.forEach(a),h.forEach(a),b.forEach(a),this.h()},h(){g(n,"icon",It),g(n,"slot","start"),c(n,"vertical-align","middle"),c(s,"display","none"),F(s,"id","eventEvidence"),F(s,"name","fileToUpload"),F(s,"type","file"),s.multiple=!0,F(s,"accept","image/*"),F(s,"capture","environment"),F(o,"for","eventEvidence"),c(o,"width","100%"),c(o,"height","100%"),g(t,"fill","outline"),g(t,"class","loadEvidence"),c(t,"flex","1"),c(t,"display","flex"),c(t,"align-items","center"),c(t,"gap","8px"),g(t,"disabled",i[10].status=="completed"),c(e,"display","flex"),c(e,"gap","8px"),c(e,"padding","0px 16px")},m(E,b){G(E,e,b),r(e,t),r(t,o),r(o,n),r(o,l),r(o,s),u||(_=[pe(s,"change",i[19]),pe(s,"click",i[20])],u=!0)},p:Ae,d(E){E&&a(e),u=!1,Ue(_)}}}function Bt(i){let e,t,o=Pe(i[3]),n=[];for(let l=0;l<o.length;l+=1)n[l]=Ht(At(i,o,l));return{c(){e=d("section"),t=d("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=f(l,"SECTION",{});var s=v(e);t=f(s,"DIV",{class:!0,style:!0});var u=v(t);for(let _=0;_<n.length;_+=1)n[_].l(u);u.forEach(a),s.forEach(a),this.h()},h(){F(t,"class","image-grid"),c(t,"display","grid"),c(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),c(t,"gap","10px"),c(t,"padding","0px 10px")},m(l,s){G(l,e,s),r(e,t);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null)},p(l,s){if(s[0]&167773192){o=Pe(l[3]);let u;for(u=0;u<o.length;u+=1){const _=At(l,o,u);n[u]?n[u].p(_,s):(n[u]=Ht(_),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=o.length}},d(l){l&&a(e),ft(n,l)}}}function wo(i){let e,t=`<ion-icon icon="${Tt}"></ion-icon>`,o,n;function l(){return i[32](i[54])}return{c(){e=d("button"),e.innerHTML=t,this.h()},l(s){e=f(s,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),se(e)!=="svelte-mf38w5"&&(e.innerHTML=t),this.h()},h(){F(e,"class","remove-button"),c(e,"position","absolute"),c(e,"top","5px"),c(e,"right","5px"),c(e,"border","none"),c(e,"cursor","pointer"),c(e,"font-size","18px"),c(e,"background","white"),c(e,"border-radius","50%"),c(e,"padding","3px 4px 0px"),c(e,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),c(e,"color","#0000008f")},m(s,u){G(s,e,u),o||(n=pe(e,"click",l),o=!0)},p(s,u){i=s},d(s){s&&a(e),o=!1,n()}}}function Ht(i){let e,t,o,n,l,s,u;function _(){return i[31](i[52])}let E=i[10].status!=="completed"&&wo(i);return{c(){e=d("div"),t=d("ion-img"),n=N(),E&&E.c(),l=N(),this.h()},l(b){e=f(b,"DIV",{class:!0,style:!0});var h=v(e);t=f(h,"ION-IMG",{src:!0,alt:!0,style:!0}),v(t).forEach(a),n=T(h),E&&E.l(h),l=T(h),h.forEach(a),this.h()},h(){ze(t.src,o=i[52])||g(t,"src",o),g(t,"alt","Evidencia fotográfica"),c(t,"width","100%"),c(t,"height","100px"),c(t,"object-fit","cover"),c(t,"cursor","pointer"),c(t,"border","1px solid #ccc"),c(t,"border-radius","4px"),c(t,"margin-top","16px"),F(e,"class","image-container"),c(e,"position","relative")},m(b,h){G(b,e,h),r(e,t),r(e,n),E&&E.m(e,null),r(e,l),s||(u=pe(t,"click",_),s=!0)},p(b,h){i=b,h[0]&8&&!ze(t.src,o=i[52])&&g(t,"src",o),i[10].status!=="completed"&&E.p(i,h)},d(b){b&&a(e),E&&E.d(),s=!1,u()}}}function Pt(i){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(o){e=f(o,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),se(e)!=="svelte-1aosxw0"&&(e.innerHTML=t),this.h()},h(){F(e,"class","overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(o,n){G(o,e,n)},d(o){o&&a(e)}}}function Ut(i){let e,t,o,n,l,s,u=`<ion-icon icon="${Nt}"></ion-icon>`,_,E;return{c(){e=d("div"),t=d("div"),o=d("ion-img"),l=N(),s=d("button"),s.innerHTML=u,this.h()},l(b){e=f(b,"DIV",{class:!0,style:!0});var h=v(e);t=f(h,"DIV",{class:!0,style:!0});var m=v(t);o=f(m,"ION-IMG",{src:!0,alt:!0,style:!0}),v(o).forEach(a),l=T(m),s=f(m,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),se(s)!=="svelte-183t4ti"&&(s.innerHTML=u),m.forEach(a),h.forEach(a),this.h()},h(){ze(o.src,n=i[8])||g(o,"src",n),g(o,"alt","Evidencia fotográfica"),c(o,"width","100%"),c(o,"height","auto"),F(s,"class","close-button"),c(s,"position","absolute"),c(s,"top","5px"),c(s,"right","5px"),c(s,"background","white"),c(s,"color","#444444d1"),c(s,"border","none"),c(s,"cursor","pointer"),c(s,"padding","2px 2px 0px 6px"),c(s,"border-radius","50%"),c(s,"font-size","20px"),F(t,"class","modal-content"),c(t,"position","relative"),c(t,"background","white"),c(t,"padding","20px"),c(t,"border-radius","8px"),c(t,"max-width","90vw"),c(t,"max-height","90vh"),c(t,"overflow","auto"),F(e,"class","modal-overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.8)"),c(e,"display","flex"),c(e,"justify-content","center"),c(e,"align-items","center"),c(e,"z-index","1000")},m(b,h){G(b,e,h),r(e,t),r(t,o),r(t,l),r(t,s),_||(E=[pe(s,"click",i[26]),pe(t,"click",kt(i[28])),pe(e,"click",i[26])],_=!0)},p(b,h){h[0]&256&&!ze(o.src,n=b[8])&&g(o,"src",n)},d(b){b&&a(e),_=!1,Ue(E)}}}function Lo(i){let e,t,o,n,l="Cerrar",s,u,_=i[10].title+"",E,b,h,m,p,k,y=i[10].client_phone&&i[10].client_phone.trim().length,O,H,A,x,j=i[10].schedule&&i[10].schedule.trim().length,K,V,D=i[10].logistic_comments&&i[10].logistic_comments.trim().length,B,S,I,M,R,L,Y,J,ue,me=(!i[11]&&!i[12]||i[11]&&i[12])&&uo(i);function Ie(q,ie){return q[10].client_name!=null?_o:fo}let ce=Ie(i)(i),de=y&&ho(i);function ve(q,ie){if(q[10].line1&&q[10].line1.trim().length)return mo;if(q[10].line2&&q[10].line2.trim().length)return po}let le=ve(i),ee=le&&le(i),fe=i[15]&&go(i),_e=i[16]&&i[16]!=="<br>"&&ko(i),re=j&&Eo(i),te=i[10].driver_comments&&Io(i),ke=D&&Oo(i),ge=i[10].tag&&i[10].tag_color&&To(i),Ee=!i[12]&&yo(i),he=(i[11]&&i[12]||!i[11]&&!i[12])&&Co(i),ae=i[2]&&Bt(i),X=i[4]&&Pt(),W=i[7]&&Ut(i);return{c(){e=d("ion-header"),t=d("ion-toolbar"),o=d("ion-buttons"),n=d("ion-button"),n.textContent=l,s=N(),u=d("ion-title"),E=Oe(_),b=N(),me&&me.c(),h=N(),m=d("ion-content"),p=d("ion-list"),ce.c(),k=N(),de&&de.c(),O=N(),ee&&ee.c(),H=N(),fe&&fe.c(),A=N(),_e&&_e.c(),x=N(),re&&re.c(),K=N(),te&&te.c(),V=N(),ke&&ke.c(),B=N(),ge&&ge.c(),S=N(),Ee&&Ee.c(),I=N(),he&&he.c(),M=N(),ae&&ae.c(),R=N(),X&&X.c(),L=N(),W&&W.c(),Y=De(),this.h()},l(q){e=f(q,"ION-HEADER",{translucent:!0});var ie=v(e);t=f(ie,"ION-TOOLBAR",{});var Ce=v(t);o=f(Ce,"ION-BUTTONS",{slot:!0});var ne=v(o);n=f(ne,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),se(n)!=="svelte-2ks32x"&&(n.textContent=l),ne.forEach(a),s=T(Ce),u=f(Ce,"ION-TITLE",{style:!0,title:!0});var oe=v(u);E=Ne(oe,_),oe.forEach(a),b=T(Ce),me&&me.l(Ce),Ce.forEach(a),ie.forEach(a),h=T(q),m=f(q,"ION-CONTENT",{fullscreen:!0});var w=v(m);p=f(w,"ION-LIST",{});var U=v(p);ce.l(U),k=T(U),de&&de.l(U),O=T(U),ee&&ee.l(U),H=T(U),fe&&fe.l(U),A=T(U),_e&&_e.l(U),x=T(U),re&&re.l(U),K=T(U),te&&te.l(U),V=T(U),ke&&ke.l(U),B=T(U),ge&&ge.l(U),S=T(U),Ee&&Ee.l(U),I=T(U),he&&he.l(U),M=T(U),ae&&ae.l(U),U.forEach(a),w.forEach(a),R=T(q),X&&X.l(q),L=T(q),W&&W.l(q),Y=De(),this.h()},h(){g(n,"color","medium"),g(o,"slot","start"),c(u,"text-align","center"),g(u,"title",i[10].title),g(e,"translucent",""),g(m,"fullscreen","")},m(q,ie){G(q,e,ie),r(e,t),r(t,o),r(o,n),r(t,s),r(t,u),r(u,E),r(t,b),me&&me.m(t,null),G(q,h,ie),G(q,m,ie),r(m,p),ce.m(p,null),r(p,k),de&&de.m(p,null),r(p,O),ee&&ee.m(p,null),r(p,H),fe&&fe.m(p,null),r(p,A),_e&&_e.m(p,null),r(p,x),re&&re.m(p,null),r(p,K),te&&te.m(p,null),r(p,V),ke&&ke.m(p,null),r(p,B),ge&&ge.m(p,null),r(p,S),Ee&&Ee.m(p,null),r(p,I),he&&he.m(p,null),r(p,M),ae&&ae.m(p,null),G(q,R,ie),X&&X.m(q,ie),G(q,L,ie),W&&W.m(q,ie),G(q,Y,ie),J||(ue=pe(n,"click",i[0]),J=!0)},p(q,ie){(!q[11]&&!q[12]||q[11]&&q[12])&&me.p(q,ie),ce.p(q,ie),y&&de.p(q,ie),ee&&ee.p(q,ie),q[15]&&fe.p(q,ie),q[16]&&q[16]!=="<br>"&&_e.p(q,ie),j&&re.p(q,ie),q[10].driver_comments&&te.p(q,ie),D&&ke.p(q,ie),q[10].tag&&q[10].tag_color&&ge.p(q,ie),q[12]||Ee.p(q,ie),(q[11]&&q[12]||!q[11]&&!q[12])&&he.p(q,ie),q[2]?ae?ae.p(q,ie):(ae=Bt(q),ae.c(),ae.m(p,null)):ae&&(ae.d(1),ae=null),q[4]?X||(X=Pt(),X.c(),X.m(L.parentNode,L)):X&&(X.d(1),X=null),q[7]?W?W.p(q,ie):(W=Ut(q),W.c(),W.m(Y.parentNode,Y)):W&&(W.d(1),W=null)},i:Ae,o:Ae,d(q){q&&(a(e),a(h),a(m),a(R),a(L),a(Y)),me&&me.d(),ce.d(),de&&de.d(),ee&&ee.d(),fe&&fe.d(),_e&&_e.d(),re&&re.d(),te&&te.d(),ke&&ke.d(),ge&&ge.d(),Ee&&Ee.d(),he&&he.d(),ae&&ae.d(),X&&X.d(q),W&&W.d(q),J=!1,ue()}}}function Mo(i,e,t){let o=rt,n=document.querySelector("ion-modal"),l=n.componentProps.delivery,s=n.componentProps.isLast||!1,u=n.componentProps.flag||!1,_=l.driver_comments?l.driver_comments:"",E=l.deliver_status?l.deliver_status:"",b=l.img?l.img:"",h=l.img_id?l.img_id:"",m=b?Xe(b):new Array,p=h?Xe(h):new Array,k={latitude:null,longitude:null},y=l.stopsApproval,O=l.smsActive,H=!1,A=!0,x=!1,j=l.phone_notification,K=l.comments_ext,V=!1,D="",B=new Object,S="",I=l.tag_color?Ve(l.tag_color,.2):"",M=l.tag_color?Ve(l.tag_color,.3):"";nt(()=>{B=JSON.parse(localStorage.getItem("userSession")),R()});function R(){l.date_service?l.date_service&&!l.date_completed&&!l.service_time?(t(5,A=!1),t(6,x=!0)):l.date_service&&l.date_completed&&l.service_time&&(t(5,A=!1),t(6,x=!1)):(t(5,A=!0),t(6,x=!1))}const L=async(ne,oe)=>{await(await Ge.create({header:ne||"Error",message:oe||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},Y=async(ne="",oe="",w="",U=function(z={}){},C={})=>{await(await Ge.create({header:ne||"Error",message:oe||"Vuelva a intentar",buttons:[{text:"No",role:"cancel",handler:()=>{}},{text:"Sí",handler:()=>{t(4,H=!0),qe(w,function($={}){t(4,H=!1),U($)},C)}}]})).present()};async function J(ne,oe){await(await Ge.create({header:"¿Cómo quieres notificar?",message:`Elige el medio para enviar mensaje a ${ne.title} (${oe})`,buttons:[{text:"SMS",handler:()=>ee("sms",ne,oe)},{text:"WhatsApp",handler:()=>ee("whatsapp",ne,oe)}]})).present()}const ue=async ne=>{if(m.length>=5){L("Límite de evidencias","Solo se permite subir 5 fotos por parada");return}if(u&&s&&m.length>=1){L("Límite de evidencias","Para el final de la ruta solo se permite subir 1 foto");return}const w=ne.target.files[0];if(w)try{t(4,H=!0);const U=await P(w);U&&qe(`${o}api/admin/manager/upload_img_driver.php`,function(C){C.success?(t(2,b=b?`${b},${C.img}`:C.img),h=h?`${h},${C.img_id}`:C.img_id,t(3,m=Xe(b)),p=Xe(h)):L("Carga fallida","Actualiza la página y vuelve a intentar. Si el problema persiste, contacta a soporte.")},{fileToUpload:U})}catch(U){console.error("Compression error:",U)}finally{t(4,H=!1)}};function me(ne){var oe=l.service_time;!oe&&A&&!s&&!u&&(ne.preventDefault(),L("Registrar Ingreso","Antes de subir la evidencia registra el ingreso a la actual parada."))}function Ie(){var ne=u?l.date_completed:!1;if(!ne&&!A&&x&&!s&&!u){var oe=new Object;oe.id_event=l.id_event,oe.type="checkout",oe.id_user_over=B.id_user,oe.token=B.token,Y("Registrar Salida","¿Completaste tu entrega?",o+"api/admin/route/record_check_date.php",function(w){w.minutes&&L("Tiempo por parada","Completaste la parada en "+w.minutes+" minutos.")},oe)}}const P=async ne=>new Promise(oe=>{const w=new Image;w.src=URL.createObjectURL(ne),w.onload=()=>{const U=document.createElement("canvas"),C=U.getContext("2d"),z=800,$=600;let Q=w.width,Z=w.height;Q>z&&(Z*=z/Q,Q=z),Z>$&&(Q*=$/Z,Z=$),U.width=Q,U.height=Z,C.drawImage(w,0,0,Q,Z),U.toBlob(be=>{oe(be),URL.revokeObjectURL(w.src),C.clearRect(0,0,U.width,U.height)},"image/jpeg",.7)}});async function ce(){try{if(n!=null&&n.isConnected){await n.dismiss({data:Date.now()});return}const ne=await Ze.getTop();ne&&await ne.dismiss({data:Date.now()})}catch{console.warn("Close Modal Safe: modal ya cerrado o inexistente")}}const de=async()=>{if(!H){t(4,H=!0);try{if(t(2,b=m.join(",")),h=p.join(","),Ie(),await le())if(S.value=="delivered"||S.value!=="delivered"&&(_.value||l.driver_comments)||u&&s){const oe={id_route:l.id_route,...!u&&!s&&{id_event:l.id_event},...!u&&!s&&{comments:_.value},...!u&&!s&&{deliver_status:S.value},img:b,img_id:h,lat:k.latitude,lon:k.longitude,...y==="0"&&{approve:"0"},...s&&{isLast:!0},...u&&s&&{destiny:!0},id_user_over:B.id_user,token:B.token};oe.img&&oe.img_id||b?qe(`${o}api/admin/evidence/send_evidence.php`,function(w){if(w.success==!0){ce();const U=oe.id_route;s&&(ve("","",U,s),y=="0"&&he(U,"completed"))}else t(4,H=!1),L("Carga fallida","Actualiza la página y vuelve a intentar cargar la información!")},oe):L("Información incompleta","Cargar evidencia fotográfica faltante para completar parada.")}else L("Motivo de status de entrega","Favor de ingresar en notas el motivo por el que la entrega no fue entregada correctamente");else L("Ubicación faltante","Asegúrate darle permisos a Rutaflow para acceder a tu ubicación")}catch(ne){console.error("Error fetching data:",ne)}finally{t(4,H=!1)}}},ve=(ne,oe,w,U)=>{n.componentProps.routeId=w,n.componentProps.driverId=l.id_driver,xe("modal-km-gas",bn,{checklist:ne,driverId:oe,routeId:w,isLast:U}).then(C=>{})},le=async()=>navigator.geolocation?new Promise((ne,oe)=>{navigator.geolocation.getCurrentPosition(w=>{k.latitude=w.coords.latitude,k.longitude=w.coords.longitude,ne(!0)},w=>{console.error("Error getting location:",w),ne(!1)})}):(console.error("Geolocation is not supported by your browser"),!1);async function ee(ne,oe,w){const U={};if(ne==="sms"){U.id_user_over=B.id_user,U.token=B.token,U.client_phone=w,U.client_name=oe.title,U.delivery_phone=oe.client_phone,U.enterprise_name=oe.enterprise_name,qe(`${o}api/admin/message_central/send_sms.php`,fe("SMS",oe.title,w),U);return}try{var C=oe.client_phone?`
Si deseas contactarnos, entra al siguiente link: https://wa.me/${oe.client_phone}.`:".";U.text=`*Rutaflow*

El repartidor va en camino a tu domicilio ${oe.title}${C}

Enviado por _${oe.enterprise_name}_`,U.phone=w;const $=await(await fetch(`${xn}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`${Gn}`},body:JSON.stringify(U)})).json();fe("WHATSAPP",oe.title,w)($)}catch(z){console.error(z),L("WHATSAPP no enviado","Ocurrió un error de red.")}}function fe(ne,oe,w){return U=>{U.success?L(`${ne} enviado`,`Se envió correctamente un ${ne} a ${oe} con número ${w}.`):L(`${ne} no enviado`,`Hubo un error al enviar ${ne} a ${oe} (${w}).`)}}function _e(ne){ne.stopPropagation(),J(l,j)}function re(){t(5,A=!1),t(6,x=!0),ke(l.id_event,"checkin")}function te(){t(6,x=!1),t(5,A=!1),ke(l.id_event,"checkout")}async function ke(ne,oe){if(oe){let w=new Object;w.type=oe,w.id_event=ne,w.id_user_over=B.id_user,w.token=B.token;try{qe(`${o}api/admin/route/record_check_date.php`,function(U){U.minutes&&L("Tiempo por parada","Completaste la parada en "+U.minutes+" minutos.")},w)}catch(U){console.error("Error during file upload:",U)}finally{}}}const ge=ne=>{t(8,D=ne),t(7,V=!0)},Ee=()=>{t(7,V=!1),t(8,D="")};function he(ne,oe){let w=new Object;return w.id_route=ne,w.status=oe,w.id_user_over=B.id_user,w.token=B.token,qe(`${o}api/admin/route/change_status.php`,function(){},w),""}function ae(ne=0){var oe=mn(ne,m,p,b);t(3,m=oe.files),p=oe.img_ids,t(2,b=oe.selectedImages)}function X(ne){Et.call(this,i,ne)}function W(ne){Re[ne?"unshift":"push"](()=>{S=ne,t(9,S)})}function q(ne){Re[ne?"unshift":"push"](()=>{_=ne,t(1,_)})}return[ce,_,b,m,H,A,x,V,D,S,l,s,u,E,O,j,K,I,M,ue,me,de,_e,re,te,ge,Ee,ae,X,W,q,ne=>ge(ne),ne=>ae(ne)]}class Rt extends Ye{constructor(e){super(),Qe(this,e,Mo,Lo,Je,{closeModal:0},null,[-1,-1])}get closeModal(){return this.$$.ctx[0]}}function Vt(i,e,t){const o=i.slice();return o[32]=e[t],o[34]=t,o}function zt(i){let e,t,o=Pe(i[1]),n=[];for(let l=0;l<o.length;l+=1)n[l]=jt(Vt(i,o,l));return{c(){e=d("section"),t=d("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=f(l,"SECTION",{});var s=v(e);t=f(s,"DIV",{class:!0,style:!0});var u=v(t);for(let _=0;_<n.length;_+=1)n[_].l(u);u.forEach(a),s.forEach(a),this.h()},h(){F(t,"class","image-grid"),c(t,"display","grid"),c(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),c(t,"gap","10px"),c(t,"padding","0px 10px")},m(l,s){G(l,e,s),r(e,t);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null)},p(l,s){if(s[0]&32770){o=Pe(l[1]);let u;for(u=0;u<o.length;u+=1){const _=Vt(l,o,u);n[u]?n[u].p(_,s):(n[u]=jt(_),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=o.length}},d(l){l&&a(e),ft(n,l)}}}function jt(i){let e,t,o,n,l,s=`<ion-icon icon="${Tt}"></ion-icon>`,u,_,E;function b(){return i[22](i[32])}function h(){return i[23](i[34])}return{c(){e=d("div"),t=d("ion-img"),n=N(),l=d("button"),l.innerHTML=s,u=N(),this.h()},l(m){e=f(m,"DIV",{class:!0,style:!0});var p=v(e);t=f(p,"ION-IMG",{src:!0,alt:!0,style:!0}),v(t).forEach(a),n=T(p),l=f(p,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),se(l)!=="svelte-zguiov"&&(l.innerHTML=s),u=T(p),p.forEach(a),this.h()},h(){ze(t.src,o=i[32])||g(t,"src",o),g(t,"alt","Evidencia fotográfica"),c(t,"width","100%"),c(t,"height","100px"),c(t,"object-fit","cover"),c(t,"cursor","pointer"),c(t,"border","1px solid #ccc"),c(t,"border-radius","4px"),c(t,"margin-top","16px"),F(l,"class","remove-button"),c(l,"position","absolute"),c(l,"top","5px"),c(l,"right","5px"),c(l,"border","none"),c(l,"cursor","pointer"),c(l,"font-size","18px"),c(l,"background","white"),c(l,"border-radius","50%"),c(l,"padding","3px 4px 0px"),c(l,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),c(l,"color","#0000008f"),F(e,"class","image-container"),c(e,"position","relative")},m(m,p){G(m,e,p),r(e,t),r(e,n),r(e,l),r(e,u),_||(E=[pe(t,"click",b),pe(l,"click",h)],_=!0)},p(m,p){i=m,p[0]&2&&!ze(t.src,o=i[32])&&g(t,"src",o)},d(m){m&&a(e),_=!1,Ue(E)}}}function qt(i){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(o){e=f(o,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),se(e)!=="svelte-h8s7r2"&&(e.innerHTML=t),this.h()},h(){F(e,"class","overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(o,n){G(o,e,n)},d(o){o&&a(e)}}}function Ft(i){let e,t,o,n,l,s,u=`<ion-icon icon="${Nt}"></ion-icon>`,_,E;return{c(){e=d("div"),t=d("div"),o=d("ion-img"),l=N(),s=d("button"),s.innerHTML=u,this.h()},l(b){e=f(b,"DIV",{class:!0,style:!0});var h=v(e);t=f(h,"DIV",{class:!0,style:!0});var m=v(t);o=f(m,"ION-IMG",{src:!0,alt:!0,style:!0}),v(o).forEach(a),l=T(m),s=f(m,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),se(s)!=="svelte-g0qr0o"&&(s.innerHTML=u),m.forEach(a),h.forEach(a),this.h()},h(){ze(o.src,n=i[8])||g(o,"src",n),g(o,"alt","Evidencia fotográfica"),c(o,"width","100%"),c(o,"height","auto"),F(s,"class","close-button"),c(s,"position","absolute"),c(s,"top","5px"),c(s,"right","5px"),c(s,"background","white"),c(s,"color","#444444d1"),c(s,"border","none"),c(s,"cursor","pointer"),c(s,"padding","2px 2px 0px 6px"),c(s,"border-radius","50%"),c(s,"font-size","20px"),F(t,"class","modal-content"),c(t,"position","relative"),c(t,"background","white"),c(t,"padding","20px"),c(t,"border-radius","8px"),c(t,"max-width","90vw"),c(t,"max-height","90vh"),c(t,"overflow","auto"),F(e,"class","modal-overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.8)"),c(e,"display","flex"),c(e,"justify-content","center"),c(e,"align-items","center"),c(e,"z-index","1000")},m(b,h){G(b,e,h),r(e,t),r(t,o),r(t,l),r(t,s),_||(E=[pe(s,"click",i[16]),pe(t,"click",kt(i[17])),pe(e,"click",i[16])],_=!0)},p(b,h){h[0]&256&&!ze(o.src,n=b[8])&&g(o,"src",n)},d(b){b&&a(e),_=!1,Ue(E)}}}function Ao(i){let e,t,o,n,l="Cancelar",s,u,_="AGREGAR GASTO",E,b,h,m="Confirmar",p,k,y,O,H,A,x,j,K,V,D,B,S,I,M,R,L,Y,J='Tipo de pago <ion-text color="danger">(Obligatorio)</ion-text>',ue,me,Ie="Efectivo",P,ce,de="Tarjeta",ve,le,ee="Transferencia",fe,_e,re,te,ke,ge,Ee,he,ae,X,W=`<ion-icon icon="${It}" slot="start"></ion-icon>
                        Subir Evidencia`,q,ie,Ce,ne,oe,w,U,C,z=i[0]&&zt(i),$=i[6]&&qt(),Q=i[7]&&Ft(i);return{c(){e=d("ion-header"),t=d("ion-toolbar"),o=d("ion-buttons"),n=d("ion-button"),n.textContent=l,s=N(),u=d("ion-title"),u.textContent=_,E=N(),b=d("ion-buttons"),h=d("ion-button"),h.textContent=m,p=N(),k=d("ion-content"),y=d("ion-list"),O=d("ion-item"),H=d("ion-icon"),A=N(),x=d("ion-input"),j=N(),K=d("ion-item"),V=d("ion-icon"),D=N(),B=d("ion-input"),S=N(),I=d("ion-item"),M=d("ion-icon"),R=N(),L=d("ion-select"),Y=d("div"),Y.innerHTML=J,ue=N(),me=d("ion-select-option"),me.textContent=Ie,P=N(),ce=d("ion-select-option"),ce.textContent=de,ve=N(),le=d("ion-select-option"),le.textContent=ee,fe=N(),_e=d("ion-item"),re=d("ion-icon"),te=N(),ke=d("ion-textarea"),ge=N(),Ee=d("section"),he=d("label"),ae=d("ion-button"),X=d("label"),X.innerHTML=W,q=N(),ie=d("input"),Ce=N(),z&&z.c(),ne=N(),$&&$.c(),oe=N(),Q&&Q.c(),w=De(),this.h()},l(Z){e=f(Z,"ION-HEADER",{translucent:!0});var be=v(e);t=f(be,"ION-TOOLBAR",{});var Te=v(t);o=f(Te,"ION-BUTTONS",{slot:!0});var we=v(o);n=f(we,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),se(n)!=="svelte-1f8rjcf"&&(n.textContent=l),we.forEach(a),s=T(Te),u=f(Te,"ION-TITLE",{title:!0,"data-svelte-h":!0}),se(u)!=="svelte-efps2s"&&(u.textContent=_),E=T(Te),b=f(Te,"ION-BUTTONS",{slot:!0});var Me=v(b);h=f(Me,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),se(h)!=="svelte-k5zoz0"&&(h.textContent=m),Me.forEach(a),Te.forEach(a),be.forEach(a),p=T(Z),k=f(Z,"ION-CONTENT",{fullscreen:!0});var ye=v(k);y=f(ye,"ION-LIST",{});var Le=v(y);O=f(Le,"ION-ITEM",{});var Fe=v(O);H=f(Fe,"ION-ICON",{icon:!0,slot:!0}),v(H).forEach(a),A=T(Fe),x=f(Fe,"ION-INPUT",{label:!0,type:!0,placeholder:!0,value:!0}),v(x).forEach(a),Fe.forEach(a),j=T(Le),K=f(Le,"ION-ITEM",{});var $e=v(K);V=f($e,"ION-ICON",{icon:!0,slot:!0}),v(V).forEach(a),D=T($e),B=f($e,"ION-INPUT",{label:!0,type:!0,value:!0}),v(B).forEach(a),$e.forEach(a),S=T(Le),I=f(Le,"ION-ITEM",{});var at=v(I);M=f(at,"ION-ICON",{icon:!0,slot:!0}),v(M).forEach(a),R=T(at),L=f(at,"ION-SELECT",{placeholder:!0,value:!0});var Ke=v(L);Y=f(Ke,"DIV",{slot:!0,"data-svelte-h":!0}),se(Y)!=="svelte-wl764p"&&(Y.innerHTML=J),ue=T(Ke),me=f(Ke,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),se(me)!=="svelte-i9crym"&&(me.textContent=Ie),P=T(Ke),ce=f(Ke,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),se(ce)!=="svelte-fx0z11"&&(ce.textContent=de),ve=T(Ke),le=f(Ke,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),se(le)!=="svelte-1c24jf2"&&(le.textContent=ee),Ke.forEach(a),at.forEach(a),fe=T(Le),_e=f(Le,"ION-ITEM",{});var st=v(_e);re=f(st,"ION-ICON",{icon:!0,slot:!0}),v(re).forEach(a),te=T(st),ke=f(st,"ION-TEXTAREA",{label:!0,placeholder:!0}),v(ke).forEach(a),st.forEach(a),ge=T(Le),Ee=f(Le,"SECTION",{});var yt=v(Ee);he=f(yt,"LABEL",{for:!0,style:!0});var Ct=v(he);ae=f(Ct,"ION-BUTTON",{fill:!0,size:!0,class:!0,expand:!0});var ct=v(ae);X=f(ct,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),se(X)!=="svelte-1m9yw22"&&(X.innerHTML=W),q=T(ct),ie=f(ct,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),ct.forEach(a),Ct.forEach(a),yt.forEach(a),Ce=T(Le),z&&z.l(Le),Le.forEach(a),ye.forEach(a),ne=T(Z),$&&$.l(Z),oe=T(Z),Q&&Q.l(Z),w=De(),this.h()},h(){g(n,"color","medium"),g(o,"slot","start"),g(u,"title",""),g(h,"strong",""),g(b,"slot","end"),g(e,"translucent",""),g(H,"icon",pn),g(H,"slot","start"),g(x,"label","Concepto"),g(x,"type","text"),g(x,"placeholder","Escribe aquí..."),g(x,"value",i[9]?i[9]:""),g(V,"icon",dt),g(V,"slot","start"),g(B,"label","Monto $"),g(B,"type","number"),g(B,"value",i[10]?i[10]:""),g(M,"icon",Rn),g(M,"slot","start"),F(Y,"slot","label"),g(me,"value","cash"),g(ce,"value","card"),g(le,"value","transfer"),g(L,"placeholder","Tipo de pago"),g(L,"value",i[11]?i[11]:""),g(re,"icon",dt),g(re,"slot","start"),g(ke,"label","Comentarios"),g(ke,"placeholder","Escribe aquí..."),F(X,"for","eventEvidence"),c(X,"width","100%"),c(X,"padding","8px"),c(ie,"display","none"),F(ie,"id","eventEvidence"),F(ie,"name","fileToUpload"),F(ie,"type","file"),F(ie,"accept","image/*"),F(ie,"capture","environment"),g(ae,"fill","outline"),g(ae,"size","small"),g(ae,"class","loadEvidence"),g(ae,"expand","block"),F(he,"for","eventEvidence"),c(he,"display","block"),c(he,"width","100%"),g(k,"fullscreen","")},m(Z,be){G(Z,e,be),r(e,t),r(t,o),r(o,n),r(t,s),r(t,u),r(t,E),r(t,b),r(b,h),G(Z,p,be),G(Z,k,be),r(k,y),r(y,O),r(O,H),r(O,A),r(O,x),i[18](x),r(y,j),r(y,K),r(K,V),r(K,D),r(K,B),i[19](B),r(y,S),r(y,I),r(I,M),r(I,R),r(I,L),r(L,Y),r(L,ue),r(L,me),r(L,P),r(L,ce),r(L,ve),r(L,le),i[20](L),r(y,fe),r(y,_e),r(_e,re),r(_e,te),r(_e,ke),i[21](ke),r(y,ge),r(y,Ee),r(Ee,he),r(he,ae),r(ae,X),r(ae,q),r(ae,ie),r(y,Ce),z&&z.m(y,null),G(Z,ne,be),$&&$.m(Z,be),G(Z,oe,be),Q&&Q.m(Z,be),G(Z,w,be),U||(C=[pe(n,"click",i[13]),pe(h,"click",i[14]),pe(ie,"change",i[12])],U=!0)},p(Z,be){Z[0]?z?z.p(Z,be):(z=zt(Z),z.c(),z.m(y,null)):z&&(z.d(1),z=null),Z[6]?$||($=qt(),$.c(),$.m(oe.parentNode,oe)):$&&($.d(1),$=null),Z[7]?Q?Q.p(Z,be):(Q=Ft(Z),Q.c(),Q.m(w.parentNode,w)):Q&&(Q.d(1),Q=null)},i:Ae,o:Ae,d(Z){Z&&(a(e),a(p),a(k),a(ne),a(oe),a(w)),i[18](null),i[19](null),i[20](null),i[21](null),z&&z.d(),$&&$.d(Z),Q&&Q.d(Z),U=!1,Ue(C)}}}function So(i,e,t){let o=rt,n=document.querySelector("ion-modal"),l=n.componentProps.routeId,s=n.componentProps.ex_concept,u=n.componentProps.ex_amount,_=n.componentProps.ex_type,E=n.componentProps.id_expense,b="",h=new Array,m="",p="",k=0,y="",O="",H=!1,A=new Object,x=!1,j="";nt(()=>{A=JSON.parse(localStorage.getItem("userSession"))});const K=async(P,ce)=>{await(await Ge.create({header:P||"Error",message:ce||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},V=async P=>{t(6,H=!0);const de=P.target.files[0],ve=await D(de);if(ve){var le=new Object;le.fileToUpload=ve,le.id_user_over=A.id_user,le.token=A.token;try{qe(`${o}api/admin/manager/upload_img_driver.php`,function(ee){ee.success?(t(0,b=ee.img),t(1,h=Xe(b)),m=ee.img_id):K("Error","No se pudo subir la imagen"),t(6,H=!1)},le)}catch(ee){console.error("Error during file upload:",ee)}finally{t(6,H=!1)}}},D=async P=>new Promise(ce=>{const de=new Image;de.src=URL.createObjectURL(P),de.onload=()=>{const ve=document.createElement("canvas"),le=ve.getContext("2d"),ee=800,fe=600;let _e=de.width,re=de.height;_e>ee&&(re*=ee/_e,_e=ee),re>fe&&(_e*=fe/re,re=fe),ve.width=_e,ve.height=re,le.drawImage(de,0,0,_e,re),ve.toBlob(te=>{ce(te),URL.revokeObjectURL(de.src),le.clearRect(0,0,ve.width,ve.height)},"image/jpeg",.7)}}),B=()=>{Ze.dismiss()},S=()=>{var P=new Object;P.id_route=l,P.comments=y.value,P.type=p.value,P.img=b,P.img_id=m,P.amount=k.value,P.concept=O.value,P.status="done",P.id_expense=E||"null",P.id_user_over=A.id_user,P.token=A.token,!m||!b||!k.value||!O.value?K("Datos incompletos","Llena los datos requeridos para completar el registro"):qe(`${o}api/admin/expenses/add_expense.php`,function(ce){B()},P)},I=P=>{t(8,j=P),t(7,x=!0)},M=()=>{t(7,x=!1),t(8,j="")};function R(P){Et.call(this,i,P)}function L(P){Re[P?"unshift":"push"](()=>{O=P,t(5,O)})}function Y(P){Re[P?"unshift":"push"](()=>{k=P,t(3,k)})}function J(P){Re[P?"unshift":"push"](()=>{p=P,t(2,p)})}function ue(P){Re[P?"unshift":"push"](()=>{y=P,t(4,y)})}return[b,h,p,k,y,O,H,x,j,s,u,_,V,B,S,I,M,R,L,Y,J,ue,P=>I(P),P=>removeFile(P)]}class vt extends Ye{constructor(e){super(),Qe(this,e,So,Ao,Je,{},null,[-1,-1])}}function xt(i,e,t){const o=i.slice();return o[32]=e[t],o[34]=t,o}function Gt(i,e,t){const o=i.slice();return o[35]=e[t],o}function Kt(i){let e,t,o,n,l,s,u=i[35].label+"",_,E,b,h;function m(){return i[18](i[35])}return{c(){e=d("div"),t=d("ion-button"),o=d("ion-icon"),l=N(),s=d("div"),_=Oe(u),E=N(),this.h()},l(p){e=f(p,"DIV",{class:!0});var k=v(e);t=f(k,"ION-BUTTON",{color:!0,fill:!0,size:!0});var y=v(t);o=f(y,"ION-ICON",{slot:!0,icon:!0}),v(o).forEach(a),y.forEach(a),l=T(k),s=f(k,"DIV",{class:!0,style:!0});var O=v(s);_=Ne(O,u),O.forEach(a),E=T(k),k.forEach(a),this.h()},h(){g(o,"slot","icon-only"),g(o,"icon",i[35].icon),g(t,"color",n=i[6]===i[35].id?"primary":"medium"),g(t,"fill","clear"),g(t,"size","small"),F(s,"class","motive-caption"),c(s,"font-size","11px"),c(s,"margin-top","2px"),c(s,"text-align","center"),c(s,"line-height","1.1"),F(e,"class","motive-button")},m(p,k){G(p,e,k),r(e,t),r(t,o),r(e,l),r(e,s),r(s,_),r(e,E),b||(h=pe(t,"click",m),b=!0)},p(p,k){i=p,k[0]&64&&n!==(n=i[6]===i[35].id?"primary":"medium")&&g(t,"color",n)},d(p){p&&a(e),b=!1,h()}}}function Wt(i){let e;return{c(){e=d("div"),this.h()},l(t){e=f(t,"DIV",{id:!0,style:!0}),v(e).forEach(a),this.h()},h(){F(e,"id","motive-map"),c(e,"height","220px"),c(e,"margin","12px 16px"),c(e,"border-radius","8px")},m(t,o){G(t,e,o),i[19](e)},p:Ae,d(t){t&&a(e),i[19](null)}}}function Xt(i){let e,t,o=Pe(i[1]),n=[];for(let l=0;l<o.length;l+=1)n[l]=Jt(xt(i,o,l));return{c(){e=d("section"),t=d("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=f(l,"SECTION",{});var s=v(e);t=f(s,"DIV",{class:!0,style:!0});var u=v(t);for(let _=0;_<n.length;_+=1)n[_].l(u);u.forEach(a),s.forEach(a),this.h()},h(){F(t,"class","image-grid"),c(t,"display","grid"),c(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),c(t,"gap","10px"),c(t,"padding","0px 10px")},m(l,s){G(l,e,s),r(e,t);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null)},p(l,s){if(s[0]&73730){o=Pe(l[1]);let u;for(u=0;u<o.length;u+=1){const _=xt(l,o,u);n[u]?n[u].p(_,s):(n[u]=Jt(_),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=o.length}},d(l){l&&a(e),ft(n,l)}}}function Jt(i){let e,t,o,n,l,s=`<ion-icon icon="${Tt}"></ion-icon>`,u,_,E;function b(){return i[21](i[32])}function h(){return i[22](i[34])}return{c(){e=d("div"),t=d("ion-img"),n=N(),l=d("button"),l.innerHTML=s,u=N(),this.h()},l(m){e=f(m,"DIV",{class:!0,style:!0});var p=v(e);t=f(p,"ION-IMG",{src:!0,alt:!0,style:!0}),v(t).forEach(a),n=T(p),l=f(p,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),se(l)!=="svelte-ulzohx"&&(l.innerHTML=s),u=T(p),p.forEach(a),this.h()},h(){ze(t.src,o=i[32])||g(t,"src",o),g(t,"alt","Evidencia fotográfica"),c(t,"width","100%"),c(t,"height","100px"),c(t,"object-fit","cover"),c(t,"cursor","pointer"),c(t,"border","1px solid #ccc"),c(t,"border-radius","4px"),c(t,"margin-top","16px"),F(l,"class","remove-button"),c(l,"position","absolute"),c(l,"top","5px"),c(l,"right","5px"),c(l,"border","none"),c(l,"cursor","pointer"),c(l,"font-size","18px"),c(l,"background","white"),c(l,"border-radius","50%"),c(l,"padding","3px 4px 0px"),c(l,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),c(l,"color","#0000008f"),F(e,"class","image-container"),c(e,"position","relative")},m(m,p){G(m,e,p),r(e,t),r(e,n),r(e,l),r(e,u),_||(E=[pe(t,"click",b),pe(l,"click",h)],_=!0)},p(m,p){i=m,p[0]&2&&!ze(t.src,o=i[32])&&g(t,"src",o)},d(m){m&&a(e),_=!1,Ue(E)}}}function Yt(i){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(o){e=f(o,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),se(e)!=="svelte-1mz0rrk"&&(e.innerHTML=t),this.h()},h(){F(e,"class","overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(o,n){G(o,e,n)},d(o){o&&a(e)}}}function Qt(i){let e,t,o,n,l,s,u=`<ion-icon icon="${Nt}"></ion-icon>`,_,E;return{c(){e=d("div"),t=d("div"),o=d("ion-img"),l=N(),s=d("button"),s.innerHTML=u,this.h()},l(b){e=f(b,"DIV",{class:!0,style:!0});var h=v(e);t=f(h,"DIV",{class:!0,style:!0});var m=v(t);o=f(m,"ION-IMG",{src:!0,alt:!0,style:!0}),v(o).forEach(a),l=T(m),s=f(m,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),se(s)!=="svelte-1fdruw6"&&(s.innerHTML=u),m.forEach(a),h.forEach(a),this.h()},h(){ze(o.src,n=i[5])||g(o,"src",n),g(o,"alt","Evidencia fotográfica"),c(o,"width","100%"),c(o,"height","auto"),F(s,"class","close-button"),c(s,"position","absolute"),c(s,"top","5px"),c(s,"right","5px"),c(s,"background","white"),c(s,"color","#444444d1"),c(s,"border","none"),c(s,"cursor","pointer"),c(s,"padding","2px 2px 0px 6px"),c(s,"border-radius","50%"),c(s,"font-size","20px"),F(t,"class","modal-content"),c(t,"position","relative"),c(t,"background","white"),c(t,"padding","20px"),c(t,"border-radius","8px"),c(t,"max-width","90vw"),c(t,"max-height","90vh"),c(t,"overflow","auto"),F(e,"class","modal-overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.8)"),c(e,"display","flex"),c(e,"justify-content","center"),c(e,"align-items","center"),c(e,"z-index","1000")},m(b,h){G(b,e,h),r(e,t),r(t,o),r(t,l),r(t,s),_||(E=[pe(s,"click",i[14]),pe(t,"click",kt(i[17])),pe(e,"click",i[14])],_=!0)},p(b,h){h[0]&32&&!ze(o.src,n=b[5])&&g(o,"src",n)},d(b){b&&a(e),_=!1,Ue(E)}}}function Do(i){let e,t,o,n,l="Cancelar",s,u,_="AGREGAR INCIDENCIA",E,b,h,m="Confirmar",p,k,y,O,H,A,x,j,K,V,D,B,S,I,M,R,L=`<ion-icon icon="${It}" slot="start"></ion-icon>
            Subir Evidencia`,Y,J,ue,me,Ie,P,ce,de,ve=Pe(i[9]),le=[];for(let te=0;te<ve.length;te+=1)le[te]=Kt(Gt(i,ve,te));let ee=i[7].lat&&Wt(i),fe=i[0]&&Xt(i),_e=i[3]&&Yt(),re=i[4]&&Qt(i);return{c(){e=d("ion-header"),t=d("ion-toolbar"),o=d("ion-buttons"),n=d("ion-button"),n.textContent=l,s=N(),u=d("ion-title"),u.textContent=_,E=N(),b=d("ion-buttons"),h=d("ion-button"),h.textContent=m,p=N(),k=d("ion-content"),y=d("ion-list"),O=d("ion-item"),H=d("div");for(let te=0;te<le.length;te+=1)le[te].c();A=N(),ee&&ee.c(),x=N(),j=d("ion-item"),K=d("ion-icon"),V=N(),D=d("ion-textarea"),B=N(),S=d("section"),I=d("label"),M=d("ion-button"),R=d("label"),R.innerHTML=L,Y=N(),J=d("input"),ue=N(),fe&&fe.c(),me=N(),_e&&_e.c(),Ie=N(),re&&re.c(),P=De(),this.h()},l(te){e=f(te,"ION-HEADER",{translucent:!0});var ke=v(e);t=f(ke,"ION-TOOLBAR",{});var ge=v(t);o=f(ge,"ION-BUTTONS",{slot:!0});var Ee=v(o);n=f(Ee,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),se(n)!=="svelte-1f8rjcf"&&(n.textContent=l),Ee.forEach(a),s=T(ge),u=f(ge,"ION-TITLE",{title:!0,"data-svelte-h":!0}),se(u)!=="svelte-zr4yw3"&&(u.textContent=_),E=T(ge),b=f(ge,"ION-BUTTONS",{slot:!0});var he=v(b);h=f(he,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),se(h)!=="svelte-1afq5zm"&&(h.textContent=m),he.forEach(a),ge.forEach(a),ke.forEach(a),p=T(te),k=f(te,"ION-CONTENT",{fullscreen:!0});var ae=v(k);y=f(ae,"ION-LIST",{});var X=v(y);O=f(X,"ION-ITEM",{lines:!0,class:!0,style:!0});var W=v(O);H=f(W,"DIV",{class:!0,style:!0});var q=v(H);for(let w=0;w<le.length;w+=1)le[w].l(q);q.forEach(a),W.forEach(a),A=T(X),ee&&ee.l(X),x=T(X),j=f(X,"ION-ITEM",{});var ie=v(j);K=f(ie,"ION-ICON",{icon:!0,slot:!0}),v(K).forEach(a),V=T(ie),D=f(ie,"ION-TEXTAREA",{label:!0,placeholder:!0}),v(D).forEach(a),ie.forEach(a),B=T(X),S=f(X,"SECTION",{});var Ce=v(S);I=f(Ce,"LABEL",{for:!0,style:!0});var ne=v(I);M=f(ne,"ION-BUTTON",{fill:!0,size:!0,class:!0,expand:!0});var oe=v(M);R=f(oe,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),se(R)!=="svelte-1tbnglg"&&(R.innerHTML=L),Y=T(oe),J=f(oe,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),oe.forEach(a),ne.forEach(a),Ce.forEach(a),ue=T(X),fe&&fe.l(X),X.forEach(a),ae.forEach(a),me=T(te),_e&&_e.l(te),Ie=T(te),re&&re.l(te),P=De(),this.h()},h(){g(n,"color","medium"),g(o,"slot","start"),g(u,"title",""),g(h,"strong",""),g(b,"slot","end"),g(e,"translucent",""),F(H,"class","motive-grid"),c(H,"display","flex"),c(H,"gap","8px"),c(H,"flex-wrap","wrap"),c(H,"justify-content","center"),c(H,"margin-top","6px"),g(O,"lines","none"),g(O,"class","motive-item"),c(O,"display","grid"),c(O,"justify-content","center"),c(O,"margin-bottom","15px"),g(K,"icon",dt),g(K,"slot","start"),g(D,"label","Comentarios"),g(D,"placeholder","Escribe aquí..."),F(R,"for","eventEvidence"),c(R,"width","100%"),c(R,"padding","8px"),c(J,"display","none"),F(J,"id","eventEvidence"),F(J,"name","fileToUpload"),F(J,"type","file"),F(J,"accept","image/*"),F(J,"capture","environment"),g(M,"fill","outline"),g(M,"size","small"),g(M,"class","loadEvidence"),g(M,"expand","block"),F(I,"for","eventEvidence"),c(I,"display","block"),c(I,"width","100%"),g(k,"fullscreen","")},m(te,ke){G(te,e,ke),r(e,t),r(t,o),r(o,n),r(t,s),r(t,u),r(t,E),r(t,b),r(b,h),G(te,p,ke),G(te,k,ke),r(k,y),r(y,O),r(O,H);for(let ge=0;ge<le.length;ge+=1)le[ge]&&le[ge].m(H,null);r(y,A),ee&&ee.m(y,null),r(y,x),r(y,j),r(j,K),r(j,V),r(j,D),i[20](D),r(y,B),r(y,S),r(S,I),r(I,M),r(M,R),r(M,Y),r(M,J),r(y,ue),fe&&fe.m(y,null),G(te,me,ke),_e&&_e.m(te,ke),G(te,Ie,ke),re&&re.m(te,ke),G(te,P,ke),ce||(de=[pe(n,"click",i[11]),pe(h,"click",i[12]),pe(J,"change",i[10])],ce=!0)},p(te,ke){if(ke[0]&33344){ve=Pe(te[9]);let ge;for(ge=0;ge<ve.length;ge+=1){const Ee=Gt(te,ve,ge);le[ge]?le[ge].p(Ee,ke):(le[ge]=Kt(Ee),le[ge].c(),le[ge].m(H,null))}for(;ge<le.length;ge+=1)le[ge].d(1);le.length=ve.length}te[7].lat?ee?ee.p(te,ke):(ee=Wt(te),ee.c(),ee.m(y,x)):ee&&(ee.d(1),ee=null),te[0]?fe?fe.p(te,ke):(fe=Xt(te),fe.c(),fe.m(y,null)):fe&&(fe.d(1),fe=null),te[3]?_e||(_e=Yt(),_e.c(),_e.m(Ie.parentNode,Ie)):_e&&(_e.d(1),_e=null),te[4]?re?re.p(te,ke):(re=Qt(te),re.c(),re.m(P.parentNode,P)):re&&(re.d(1),re=null)},i:Ae,o:Ae,d(te){te&&(a(e),a(p),a(k),a(me),a(Ie),a(P)),ft(le,te),ee&&ee.d(),i[20](null),fe&&fe.d(),_e&&_e.d(te),re&&re.d(te),ce=!1,Ue(de)}}}function Bo(i,e,t){let o=rt,l=document.querySelector("ion-modal").componentProps.routeId,s="",u=s?Xe(s):new Array,_="",E=!1,b=new Object,h=!1,m="",p="",k={lat:null,lng:null},y,O,H;const A=[{id:"car_accident",icon:"/car-accident.svg",label:"Accidente"},{id:"hospital",icon:"/hospital.svg",label:"Hospital"},{id:"wc",icon:"/toilet.svg",label:"Baño"},{id:"restaurant",icon:"/restaurant.svg",label:"Restaurant"},{id:"parking",icon:"/parking.svg",label:"Parking"}];nt(()=>{b=JSON.parse(localStorage.getItem("userSession"))});const x=async(P,ce)=>{await(await Ge.create({header:P||"Error",message:ce||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},j=async P=>{if(u.length>=5){x("Límite de evidencias","Solo se permite subir 5 fotos por parada");return}t(3,E=!0);const de=P.target.files[0],ve=await K(de);if(ve){var le=new Object;le.fileToUpload=ve,le.id_user_over=b.id_user,le.token=b.token;try{qe(`${o}api/admin/manager/upload_img_driver.php`,function(ee){ee.success?(t(0,s=s?`${s},${ee.img}`:ee.img),t(1,u=Xe(s))):x("Error","No se pudo subir la imagen"),t(3,E=!1)},le)}catch(ee){console.error("Error during file upload:",ee)}finally{t(3,E=!1)}}},K=async P=>new Promise(ce=>{const de=new Image;de.src=URL.createObjectURL(P),de.onload=()=>{const ve=document.createElement("canvas"),le=ve.getContext("2d"),ee=800,fe=600;let _e=de.width,re=de.height;_e>ee&&(re*=ee/_e,_e=ee),re>fe&&(_e*=fe/re,re=fe),ve.width=_e,ve.height=re,le.drawImage(de,0,0,_e,re),ve.toBlob(te=>{ce(te),URL.revokeObjectURL(de.src),le.clearRect(0,0,ve.width,ve.height)},"image/jpeg",.7)}}),V=()=>{Ze.dismiss()},D=()=>{var P=new Object;t(0,s=u.join(",")),P.id_route=l,P.comments=_.value,P.lat=k.lat,P.lng=k.lng,P.type=p,P.img=s,P.id_user_over=b.id_user,P.token=b.token,!p||!s||!P.comments||!P.img?x("Datos incompletos","Llena los datos requeridos para completar el registro"):!P.lat||!P.lng?x("Ubicación no disponible","Por favor, asegúrate de que la ubicación está activada en tu dispositivo."):qe(`${o}api/admin/incidence/add_incidence.php`,function(ce){ce?x("Éxito","Incidencia registrada correctamente"):x("Error","No se pudo registrar la incidencia. Por favor, inténtalo de nuevo."),V()},P)},B=P=>{t(5,m=P),t(4,h=!0)},S=()=>{t(4,h=!1),t(5,m="")};async function I(P){t(6,p=P),t(3,E=!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(async ce=>{t(7,k.lat=ce.coords.latitude,k),t(7,k.lng=ce.coords.longitude,k),await M()},()=>console.log("Geolocalización denegada"))}async function M(){if(await _n(),!y)return;const{Map:P}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:ce}=await google.maps.importLibrary("marker");O?O.setCenter(k):O=new P(y,{zoom:15,center:k,mapId:"4504f8b37365c3d0"});const de=A.find(ee=>ee.id===p);if(!de)return;H&&H.setMap(null);const ve=document.createElement("div");ve.style.cssText=`
      display:flex;align-items:center;justify-content:center;
      width:38px;height:38px;border-radius:50%;
      background:#ffffff;border:2px solid #d13434;
      box-shadow:0 0 4px rgba(0,0,0,.3);
  `;const le=document.createElement("ion-icon");le.setAttribute("icon",de.icon),le.style.cssText="font-size:24px;color:#d13434;",ve.appendChild(le),H=new ce({map:O,position:k,title:de.label,content:ve}),t(3,E=!1)}function R(P=0){var ce=mn(P,u,[""],s);t(1,u=ce.files),t(0,s=ce.selectedImages)}function L(P){Et.call(this,i,P)}const Y=P=>I(P.id);function J(P){Re[P?"unshift":"push"](()=>{y=P,t(8,y)})}function ue(P){Re[P?"unshift":"push"](()=>{_=P,t(2,_)})}return[s,u,_,E,h,m,p,k,y,A,j,V,D,B,S,I,R,L,Y,J,ue,P=>B(P),P=>R(P)]}class Ho extends Ye{constructor(e){super(),Qe(this,e,Bo,Do,Je,{},null,[-1,-1])}}function Zt(i,e,t){const o=i.slice();return o[7]=e[t],o}function Po(i){let e,t="Cargar gasto",o,n;function l(...s){return i[4](i[7],...s)}return{c(){e=d("ion-button"),e.textContent=t,this.h()},l(s){e=f(s,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),se(e)!=="svelte-175aelj"&&(e.textContent=t),this.h()},h(){g(e,"fill","outline"),g(e,"size","small"),g(e,"aria-selected","")},m(s,u){G(s,e,u),o||(n=pe(e,"click",l),o=!0)},p(s,u){i=s},d(s){s&&a(e),o=!1,n()}}}function Uo(i){let e,t="Gasto completado";return{c(){e=d("ion-button"),e.textContent=t,this.h()},l(o){e=f(o,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),se(e)!=="svelte-tlger7"&&(e.textContent=t),this.h()},h(){g(e,"fill","solid"),g(e,"size","small"),g(e,"aria-selected","")},m(o,n){G(o,e,n)},p:Ae,d(o){o&&a(e)}}}function $t(i,e){let t,o,n,l=e[7].concept+"",s,u,_;function E(m,p){return m[7].status=="done"?Uo:Po}let h=E(e)(e);return{key:i,first:null,c(){t=d("ion-item"),o=d("ion-label"),n=d("p"),s=Oe(l),u=N(),h.c(),_=N(),this.h()},l(m){t=f(m,"ION-ITEM",{});var p=v(t);o=f(p,"ION-LABEL",{style:!0});var k=v(o);n=f(k,"P",{style:!0});var y=v(n);s=Ne(y,l),y.forEach(a),k.forEach(a),u=T(p),h.l(p),_=T(p),p.forEach(a),this.h()},h(){c(n,"margin-left","10px"),c(o,"display","flex"),this.first=t},m(m,p){G(m,t,p),r(t,o),r(o,n),r(n,s),r(t,u),h.m(t,null),r(t,_)},p(m,p){e=m,h.p(e,p)},d(m){m&&a(t),h.d()}}}function Ro(i){let e,t,o,n,l=`<ion-icon style="font-size: 25px!important;" icon="${Vn}"></ion-icon>`,s,u,_="LISTA DE GASTOS",E,b,h,m=[],p=new Map,k,y,O,H="Cerrar",A,x,j=Pe(i[0]);const K=V=>V[7].id_expenses;for(let V=0;V<j.length;V+=1){let D=Zt(i,j,V),B=K(D);p.set(B,m[V]=$t(B,D))}return{c(){e=d("ion-header"),t=d("ion-toolbar"),o=d("ion-buttons"),n=d("ion-button"),n.innerHTML=l,s=N(),u=d("ion-title"),u.textContent=_,E=N(),b=d("ion-content"),h=d("ion-list");for(let V=0;V<m.length;V+=1)m[V].c();k=N(),y=d("ion-footer"),O=d("ion-button"),O.textContent=H,this.h()},l(V){e=f(V,"ION-HEADER",{translucent:!0});var D=v(e);t=f(D,"ION-TOOLBAR",{});var B=v(t);o=f(B,"ION-BUTTONS",{slot:!0});var S=v(o);n=f(S,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),se(n)!=="svelte-160xz3i"&&(n.innerHTML=l),S.forEach(a),s=T(B),u=f(B,"ION-TITLE",{"data-svelte-h":!0}),se(u)!=="svelte-1phn90x"&&(u.textContent=_),B.forEach(a),D.forEach(a),E=T(V),b=f(V,"ION-CONTENT",{fullscreen:!0});var I=v(b);h=f(I,"ION-LIST",{});var M=v(h);for(let L=0;L<m.length;L+=1)m[L].l(M);M.forEach(a),I.forEach(a),k=T(V),y=f(V,"ION-FOOTER",{});var R=v(y);O=f(R,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),se(O)!=="svelte-zv7v83"&&(O.textContent=H),R.forEach(a),this.h()},h(){g(n,"color","medium"),g(o,"slot","end"),g(e,"translucent",""),g(b,"fullscreen",""),g(O,"fill","outline"),g(O,"color","tertiary"),g(O,"strong",""),c(O,"width","99%"),c(O,"height","auto")},m(V,D){G(V,e,D),r(e,t),r(t,o),r(o,n),r(t,s),r(t,u),G(V,E,D),G(V,b,D),r(b,h);for(let B=0;B<m.length;B+=1)m[B]&&m[B].m(h,null);G(V,k,D),G(V,y,D),r(y,O),A||(x=[pe(n,"click",i[3]),pe(O,"click",i[1])],A=!0)},p(V,[D]){D&5&&(j=Pe(V[0]),m=it(m,D,K,1,V,j,p,h,lt,$t,null,Zt))},i:Ae,o:Ae,d(V){V&&(a(e),a(E),a(b),a(k),a(y));for(let D=0;D<m.length;D+=1)m[D].d();A=!1,Ue(x)}}}function Vo(i){let e=document.querySelector("ion-modal");e.componentProps.routeId;let t=e.componentProps.expenses;nt(()=>{});const o=()=>{Ze.dismiss()};function n(u,_,E,b,h){e.componentProps.ex_amount=E,e.componentProps.ex_concept=_,e.componentProps.ex_type=b,e.componentProps.id_expense=h,xe("modal-expense",vt,{amount:E,concept:_,type:b,id_expense:h}).then(()=>{}),o()}return[t,o,n,u=>{xe("modal-expense",vt,{routeId:u}).then(_=>{}),o()},(u,_)=>n(_,u.concept,u.amount,u.type,u.id_expenses)]}class zo extends Ye{constructor(e){super(),Qe(this,e,Vo,Ro,Je,{})}}const{document:en}=Jn;function tn(i,e,t){const o=i.slice();return o[54]=e[t],o[56]=t,o}function nn(i,e,t){const o=i.slice();return o[54]=e[t],o[56]=t,o}function on(i,e,t){const o=i.slice();return o[54]=e[t],o[56]=t,o}function ln(i){let e,t;return e=new Kn({props:{$$slots:{default:[$o]},$$scope:{ctx:i}}}),{c(){Tn(e.$$.fragment)},l(o){yn(e.$$.fragment,o)},m(o,n){Cn(e,o,n),t=!0},p(o,n){const l={};n[0]&2043|n[1]&268435456&&(l.$$scope={dirty:n,ctx:o}),e.$set(l)},i(o){t||(ut(e.$$.fragment,o),t=!0)},o(o){pt(e.$$.fragment,o),t=!1},d(o){wn(e,o)}}}function jo(i){let e,t='<div id="g_map" style="width: 100%; height: 100vh;"></div>';return{c(){e=d("ion-content"),e.innerHTML=t},l(o){e=f(o,"ION-CONTENT",{"data-svelte-h":!0}),se(e)!=="svelte-h8v4nk"&&(e.innerHTML=t)},m(o,n){G(o,e,n)},p:Ae,d(o){o&&a(e)}}}function qo(i){let e;function t(l,s){if(l[7].length>0)return xo;if(!l[3])return Fo}let o=t(i),n=o&&o(i);return{c(){n&&n.c(),e=De()},l(l){n&&n.l(l),e=De()},m(l,s){n&&n.m(l,s),G(l,e,s)},p(l,s){o===(o=t(l))&&n?n.p(l,s):(n&&n.d(1),n=o&&o(l),n&&(n.c(),n.m(e.parentNode,e)))},d(l){l&&a(e),n&&n.d(l)}}}function Fo(i){let e,t,o,n='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jala para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',l,s,u,_,E,b,h="0",m,p,k,y,O,H=i[6].origin+"",A,x,j,K,V,D,B=[],S=new Map,I,M,R,L,Y,J=i[5].length+1+"",ue,me,Ie,P,ce,de,ve=i[6].destination+"",le,ee,fe,_e="",re,te,ke,ge,Ee=i[4]&&rn(i),he=Pe(i[5]);const ae=X=>X[54].id_event;for(let X=0;X<he.length;X+=1){let W=tn(i,he,X),q=ae(W);S.set(q,B[X]=sn(q,W))}return{c(){Ee&&Ee.c(),e=N(),t=d("ion-content"),o=d("ion-refresher"),o.innerHTML=n,l=N(),s=d("ion-list"),u=d("ion-item"),_=d("ion-avatar"),E=d("div"),b=d("div"),b.textContent=h,p=N(),k=d("ion-label"),y=d("ion-text"),O=d("h3"),A=Oe(H),x=N(),j=d("div"),K=N(),V=d("ion-icon"),D=N();for(let X=0;X<B.length;X+=1)B[X].c();I=N(),M=d("ion-item"),R=d("ion-avatar"),L=d("div"),Y=d("div"),ue=Oe(J),Ie=N(),P=d("ion-label"),ce=d("ion-text"),de=d("h3"),le=Oe(ve),ee=N(),fe=d("div"),fe.innerHTML=_e,re=N(),te=d("ion-icon"),this.h()},l(X){Ee&&Ee.l(X),e=T(X),t=f(X,"ION-CONTENT",{});var W=v(t);o=f(W,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),se(o)!=="svelte-1mlmyg"&&(o.innerHTML=n),l=T(W),s=f(W,"ION-LIST",{});var q=v(s);u=f(q,"ION-ITEM",{});var ie=v(u);_=f(ie,"ION-AVATAR",{slot:!0});var Ce=v(_);E=f(Ce,"DIV",{class:!0,title:!0,style:!0});var ne=v(E);b=f(ne,"DIV",{class:!0,"data-svelte-h":!0}),se(b)!=="svelte-b78non"&&(b.textContent=h),ne.forEach(a),Ce.forEach(a),p=T(ie),k=f(ie,"ION-LABEL",{button:!0});var oe=v(k);y=f(oe,"ION-TEXT",{color:!0});var w=v(y);O=f(w,"H3",{});var U=v(O);A=Ne(U,H),U.forEach(a),w.forEach(a),x=T(oe),j=f(oe,"DIV",{class:!0}),v(j).forEach(a),oe.forEach(a),K=T(ie),V=f(ie,"ION-ICON",{icon:!0,slot:!0}),v(V).forEach(a),ie.forEach(a),D=T(q);for(let we=0;we<B.length;we+=1)B[we].l(q);I=T(q),M=f(q,"ION-ITEM",{});var C=v(M);R=f(C,"ION-AVATAR",{slot:!0});var z=v(R);L=f(z,"DIV",{class:!0,title:!0,style:!0});var $=v(L);Y=f($,"DIV",{class:!0});var Q=v(Y);ue=Ne(Q,J),Q.forEach(a),$.forEach(a),z.forEach(a),Ie=T(C),P=f(C,"ION-LABEL",{button:!0});var Z=v(P);ce=f(Z,"ION-TEXT",{color:!0});var be=v(ce);de=f(be,"H3",{});var Te=v(de);le=Ne(Te,ve),Te.forEach(a),be.forEach(a),ee=T(Z),fe=f(Z,"DIV",{class:!0,"data-svelte-h":!0}),se(fe)!=="svelte-17oqe78"&&(fe.innerHTML=_e),Z.forEach(a),re=T(C),te=f(C,"ION-ICON",{icon:!0,slot:!0}),v(te).forEach(a),C.forEach(a),q.forEach(a),W.forEach(a),this.h()},h(){g(o,"slot","fixed"),F(b,"class","order svelte-1ita8l7"),F(E,"class","order-wrapper svelte-1ita8l7"),F(E,"title",m="$"+i[6].origin),c(E,"background-color",i[6].color),c(E,"color",Be(i[6].color)),g(_,"slot","start"),g(y,"color","#2e2e2e"),F(j,"class","sub svelte-1ita8l7"),g(k,"button",""),g(V,"icon",je),g(V,"slot","end"),F(Y,"class","order svelte-1ita8l7"),F(L,"class","order-wrapper svelte-1ita8l7"),F(L,"title",me="$"+i[6].destination),c(L,"background-color",i[6].color),c(L,"color",Be(i[6].color)),g(R,"slot","start"),g(ce,"color","#2e2e2e"),F(fe,"class","sub svelte-1ita8l7"),g(P,"button",""),g(te,"icon",je),g(te,"slot","end")},m(X,W){Ee&&Ee.m(X,W),G(X,e,W),G(X,t,W),r(t,o),i[33](o),r(t,l),r(t,s),r(s,u),r(u,_),r(_,E),r(E,b),r(u,p),r(u,k),r(k,y),r(y,O),r(O,A),r(k,x),r(k,j),r(u,K),r(u,V),r(s,D);for(let q=0;q<B.length;q+=1)B[q]&&B[q].m(s,null);r(s,I),r(s,M),r(M,R),r(R,L),r(L,Y),r(Y,ue),r(M,Ie),r(M,P),r(P,ce),r(ce,de),r(de,le),r(P,ee),r(P,fe),r(M,re),r(M,te),ke||(ge=[pe(o,"ionRefresh",i[11]),pe(k,"click",i[34]),pe(P,"click",i[36])],ke=!0)},p(X,W){X[4]?Ee?Ee.p(X,W):(Ee=rn(X),Ee.c(),Ee.m(e.parentNode,e)):Ee&&(Ee.d(1),Ee=null),W[0]&64&&m!==(m="$"+X[6].origin)&&F(E,"title",m),W[0]&64&&c(E,"background-color",X[6].color),W[0]&64&&c(E,"color",Be(X[6].color)),W[0]&64&&H!==(H=X[6].origin+"")&&Se(A,H),W[0]&1319968&&(he=Pe(X[5]),B=it(B,W,ae,1,X,he,S,s,lt,sn,I,tn)),W[0]&32&&J!==(J=X[5].length+1+"")&&Se(ue,J),W[0]&64&&me!==(me="$"+X[6].destination)&&F(L,"title",me),W[0]&64&&c(L,"background-color",X[6].color),W[0]&64&&c(L,"color",Be(X[6].color)),W[0]&64&&ve!==(ve=X[6].destination+"")&&Se(le,ve)},d(X){X&&(a(e),a(t)),Ee&&Ee.d(X),i[33](null);for(let W=0;W<B.length;W+=1)B[W].d();ke=!1,Ue(ge)}}}function xo(i){let e,t;function o(s,u){return u[0]&144&&(e=null),e==null&&(e=!!(s[7].filter(ti).every(ni)&&!s[4])),e?Xo:Wo}let n=o(i,[-1,-1]),l=n(i);return{c(){l.c(),t=De()},l(s){l.l(s),t=De()},m(s,u){l.m(s,u),G(s,t,u)},p(s,u){n===(n=o(s,u))&&l?l.p(s,u):(l.d(1),l=n(s),l&&(l.c(),l.m(t.parentNode,t)))},d(s){s&&a(t),l.d(s)}}}function rn(i){let e=i[15]("",i[1],i[0])+"",t;return{c(){t=Oe(e)},l(o){t=Ne(o,e)},m(o,n){G(o,t,n)},p(o,n){n[0]&3&&e!==(e=o[15]("",o[1],o[0])+"")&&Se(t,e)},d(o){o&&a(t)}}}function an(i){let e;return{c(){e=d("span"),this.h()},l(t){e=f(t,"SPAN",{class:!0}),v(e).forEach(a),this.h()},h(){F(e,"class","notes svelte-1ita8l7")},m(t,o){G(t,e,o)},d(t){t&&a(e)}}}function Go(i){let e;return{c(){e=d("ion-icon"),this.h()},l(t){e=f(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),v(e).forEach(a),this.h()},h(){g(e,"icon",je),g(e,"slot","end"),c(e,"color",He(i[54].status,i[54].date_service))},m(t,o){G(t,e,o)},p(t,o){o[0]&32&&c(e,"color",He(t[54].status,t[54].date_service))},d(t){t&&a(e)}}}function Ko(i){let e,t=(i[54].tag?i[54].tag:"")+"",o;return{c(){e=d("div"),o=Oe(t),this.h()},l(n){e=f(n,"DIV",{class:!0,slot:!0,style:!0});var l=v(e);o=Ne(l,t),l.forEach(a),this.h()},h(){F(e,"class","stop-tag"),F(e,"slot","end"),c(e,"background-color",Ve(i[54].tag_color,.3)),c(e,"border","1px solid "+Ve(i[54].tag_color,.4)),c(e,"color",i[54].tag_color),c(e,"font-size","10px"),c(e,"text-align","center"),c(e,"align-content","center"),c(e,"border-radius","20px"),c(e,"white-space","normal"),c(e,"padding","3px 6px"),c(e,"width","auto",1),c(e,"display","inline-block"),c(e,"font-weight","500")},m(n,l){G(n,e,l),r(e,o)},p(n,l){l[0]&32&&t!==(t=(n[54].tag?n[54].tag:"")+"")&&Se(o,t),l[0]&32&&c(e,"background-color",Ve(n[54].tag_color,.3)),l[0]&32&&c(e,"border","1px solid "+Ve(n[54].tag_color,.4)),l[0]&32&&c(e,"color",n[54].tag_color)},d(n){n&&a(e)}}}function sn(i,e){let t,o,n,l,s=parseInt(e[54].pos)+1+"",u,_,E,b,h,m,p=e[54].title+"",k,y,O=e[54].support_list&&e[54].support_list.length||e[18](e[54]),H,A,x,j=O&&an();function K(){return e[35](e[54])}function V(S,I){return S[54].tag_color&&S[54].tag?Ko:Go}let D=V(e),B=D(e);return{key:i,first:null,c(){t=d("ion-item"),o=d("ion-avatar"),n=d("div"),l=d("div"),u=Oe(s),E=N(),b=d("ion-label"),h=d("ion-text"),m=d("h3"),k=Oe(p),y=N(),j&&j.c(),H=N(),B.c(),this.h()},l(S){t=f(S,"ION-ITEM",{});var I=v(t);o=f(I,"ION-AVATAR",{slot:!0});var M=v(o);n=f(M,"DIV",{class:!0,title:!0,style:!0});var R=v(n);l=f(R,"DIV",{class:!0});var L=v(l);u=Ne(L,s),L.forEach(a),R.forEach(a),M.forEach(a),E=T(I),b=f(I,"ION-LABEL",{button:!0});var Y=v(b);h=f(Y,"ION-TEXT",{color:!0});var J=v(h);m=f(J,"H3",{});var ue=v(m);k=Ne(ue,p),y=T(ue),j&&j.l(ue),ue.forEach(a),J.forEach(a),Y.forEach(a),H=T(I),B.l(I),I.forEach(a),this.h()},h(){F(l,"class","order svelte-1ita8l7"),F(n,"class","order-wrapper svelte-1ita8l7"),F(n,"title",_=tt(e[54].status)),c(n,"background-color",He(e[54].status,e[54].date_service)),c(n,"color",Be(He(e[54].status))),g(o,"slot","start"),g(h,"color","#2e2e2e"),g(b,"button",""),this.first=t},m(S,I){G(S,t,I),r(t,o),r(o,n),r(n,l),r(l,u),r(t,E),r(t,b),r(b,h),r(h,m),r(m,k),r(m,y),j&&j.m(m,null),r(t,H),B.m(t,null),A||(x=pe(b,"click",K),A=!0)},p(S,I){e=S,I[0]&32&&s!==(s=parseInt(e[54].pos)+1+"")&&Se(u,s),I[0]&32&&_!==(_=tt(e[54].status))&&F(n,"title",_),I[0]&32&&c(n,"background-color",He(e[54].status,e[54].date_service)),I[0]&32&&c(n,"color",Be(He(e[54].status))),I[0]&32&&p!==(p=e[54].title+"")&&Se(k,p),I[0]&32&&(O=e[54].support_list&&e[54].support_list.length||e[18](e[54])),O?j||(j=an(),j.c(),j.m(m,null)):j&&(j.d(1),j=null),D===(D=V(e))&&B?B.p(e,I):(B.d(1),B=D(e),B&&(B.c(),B.m(t,null)))},d(S){S&&a(t),j&&j.d(),B.d(),A=!1,x()}}}function Wo(i){let e=i[15](i[7],i[1],i[0])+"",t,o,n,l,s='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Pull to refresh" refreshing-spinner="circles" refreshing-text="Refreshing..."></ion-refresher-content>',u,_,E,b,h,m,p="0",k,y,O,H,A,x=i[6].origin+"",j,K,V,D,B,S,I=[],M=new Map,R,L,Y,J,ue,me=i[5].length+1+"",Ie,P,ce,de,ve,le,ee=i[6].destination+"",fe,_e,re,te="",ke,ge,Ee,he,ae=Pe(i[5]);const X=W=>W[54].id_event;for(let W=0;W<ae.length;W+=1){let q=nn(i,ae,W),ie=X(q);M.set(ie,I[W]=un(ie,q))}return{c(){t=Oe(e),o=N(),n=d("ion-content"),l=d("ion-refresher"),l.innerHTML=s,u=N(),_=d("ion-list"),E=d("ion-item"),b=d("ion-avatar"),h=d("div"),m=d("div"),m.textContent=p,y=N(),O=d("ion-label"),H=d("ion-text"),A=d("h3"),j=Oe(x),K=N(),V=d("div"),D=N(),B=d("ion-icon"),S=N();for(let W=0;W<I.length;W+=1)I[W].c();R=N(),L=d("ion-item"),Y=d("ion-avatar"),J=d("div"),ue=d("div"),Ie=Oe(me),ce=N(),de=d("ion-label"),ve=d("ion-text"),le=d("h3"),fe=Oe(ee),_e=N(),re=d("div"),re.innerHTML=te,ke=N(),ge=d("ion-icon"),this.h()},l(W){t=Ne(W,e),o=T(W),n=f(W,"ION-CONTENT",{});var q=v(n);l=f(q,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),se(l)!=="svelte-1l8nqqz"&&(l.innerHTML=s),u=T(q),_=f(q,"ION-LIST",{});var ie=v(_);E=f(ie,"ION-ITEM",{});var Ce=v(E);b=f(Ce,"ION-AVATAR",{slot:!0});var ne=v(b);h=f(ne,"DIV",{class:!0,title:!0,style:!0});var oe=v(h);m=f(oe,"DIV",{class:!0,"data-svelte-h":!0}),se(m)!=="svelte-b78non"&&(m.textContent=p),oe.forEach(a),ne.forEach(a),y=T(Ce),O=f(Ce,"ION-LABEL",{button:!0});var w=v(O);H=f(w,"ION-TEXT",{color:!0});var U=v(H);A=f(U,"H3",{});var C=v(A);j=Ne(C,x),C.forEach(a),U.forEach(a),K=T(w),V=f(w,"DIV",{class:!0}),v(V).forEach(a),w.forEach(a),D=T(Ce),B=f(Ce,"ION-ICON",{icon:!0,slot:!0}),v(B).forEach(a),Ce.forEach(a),S=T(ie);for(let Me=0;Me<I.length;Me+=1)I[Me].l(ie);R=T(ie),L=f(ie,"ION-ITEM",{});var z=v(L);Y=f(z,"ION-AVATAR",{slot:!0});var $=v(Y);J=f($,"DIV",{class:!0,title:!0,style:!0});var Q=v(J);ue=f(Q,"DIV",{class:!0});var Z=v(ue);Ie=Ne(Z,me),Z.forEach(a),Q.forEach(a),$.forEach(a),ce=T(z),de=f(z,"ION-LABEL",{button:!0});var be=v(de);ve=f(be,"ION-TEXT",{color:!0});var Te=v(ve);le=f(Te,"H3",{});var we=v(le);fe=Ne(we,ee),we.forEach(a),Te.forEach(a),_e=T(be),re=f(be,"DIV",{class:!0,"data-svelte-h":!0}),se(re)!=="svelte-1c76q1w"&&(re.innerHTML=te),be.forEach(a),ke=T(z),ge=f(z,"ION-ICON",{icon:!0,slot:!0}),v(ge).forEach(a),z.forEach(a),ie.forEach(a),q.forEach(a),this.h()},h(){g(l,"slot","fixed"),F(m,"class","order svelte-1ita8l7"),F(h,"class","order-wrapper svelte-1ita8l7"),F(h,"title",k="$"+i[6].origin),c(h,"background-color",i[6].color),c(h,"color",Be(i[6].color)),g(b,"slot","start"),g(H,"color","#2e2e2e"),F(V,"class","sub svelte-1ita8l7"),g(O,"button",""),g(B,"icon",je),g(B,"slot","end"),F(ue,"class","order svelte-1ita8l7"),F(J,"class","order-wrapper svelte-1ita8l7"),F(J,"title",P="$"+i[6].destination),c(J,"background-color",i[6].color),c(J,"color",Be(i[6].color)),g(Y,"slot","start"),g(ve,"color","#2e2e2e"),F(re,"class","sub svelte-1ita8l7"),g(de,"button",""),g(ge,"icon",je),g(ge,"slot","end")},m(W,q){G(W,t,q),G(W,o,q),G(W,n,q),r(n,l),i[29](l),r(n,u),r(n,_),r(_,E),r(E,b),r(b,h),r(h,m),r(E,y),r(E,O),r(O,H),r(H,A),r(A,j),r(O,K),r(O,V),r(E,D),r(E,B),r(_,S);for(let ie=0;ie<I.length;ie+=1)I[ie]&&I[ie].m(_,null);r(_,R),r(_,L),r(L,Y),r(Y,J),r(J,ue),r(ue,Ie),r(L,ce),r(L,de),r(de,ve),r(ve,le),r(le,fe),r(de,_e),r(de,re),r(L,ke),r(L,ge),Ee||(he=[pe(l,"ionRefresh",i[11]),pe(O,"click",i[30]),pe(de,"click",i[32])],Ee=!0)},p(W,q){q[0]&131&&e!==(e=W[15](W[7],W[1],W[0])+"")&&Se(t,e),q[0]&64&&k!==(k="$"+W[6].origin)&&F(h,"title",k),q[0]&64&&c(h,"background-color",W[6].color),q[0]&64&&c(h,"color",Be(W[6].color)),q[0]&64&&x!==(x=W[6].origin+"")&&Se(j,x),q[0]&1319968&&(ae=Pe(W[5]),I=it(I,q,X,1,W,ae,M,_,lt,un,R,nn)),q[0]&32&&me!==(me=W[5].length+1+"")&&Se(Ie,me),q[0]&64&&P!==(P="$"+W[6].destination)&&F(J,"title",P),q[0]&64&&c(J,"background-color",W[6].color),q[0]&64&&c(J,"color",Be(W[6].color)),q[0]&64&&ee!==(ee=W[6].destination+"")&&Se(fe,ee)},d(W){W&&(a(t),a(o),a(n)),i[29](null);for(let q=0;q<I.length;q+=1)I[q].d();Ee=!1,Ue(he)}}}function Xo(i){let e,t,o='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jale para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',n,l,s,u,_,E,b="0",h,m,p,k,y,O=i[6].origin+"",H,A,x,j,K,V,D=[],B=new Map,S,I,M,R,L,Y=i[5].length+1+"",J,ue,me,Ie,P,ce,de=i[6].destination+"",ve,le,ee,fe="",_e,re,te,ke,ge=Pe(i[5]);const Ee=he=>he[54].id_event;for(let he=0;he<ge.length;he+=1){let ae=on(i,ge,he),X=Ee(ae);B.set(X,D[he]=fn(X,ae))}return{c(){e=d("ion-content"),t=d("ion-refresher"),t.innerHTML=o,n=N(),l=d("ion-list"),s=d("ion-item"),u=d("ion-avatar"),_=d("div"),E=d("div"),E.textContent=b,m=N(),p=d("ion-label"),k=d("ion-text"),y=d("h3"),H=Oe(O),A=N(),x=d("div"),j=N(),K=d("ion-icon"),V=N();for(let he=0;he<D.length;he+=1)D[he].c();S=N(),I=d("ion-item"),M=d("ion-avatar"),R=d("div"),L=d("div"),J=Oe(Y),me=N(),Ie=d("ion-label"),P=d("ion-text"),ce=d("h3"),ve=Oe(de),le=N(),ee=d("div"),ee.innerHTML=fe,_e=N(),re=d("ion-icon"),this.h()},l(he){e=f(he,"ION-CONTENT",{});var ae=v(e);t=f(ae,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),se(t)!=="svelte-vjbhg4"&&(t.innerHTML=o),n=T(ae),l=f(ae,"ION-LIST",{});var X=v(l);s=f(X,"ION-ITEM",{});var W=v(s);u=f(W,"ION-AVATAR",{slot:!0});var q=v(u);_=f(q,"DIV",{class:!0,title:!0,style:!0});var ie=v(_);E=f(ie,"DIV",{class:!0,"data-svelte-h":!0}),se(E)!=="svelte-b78non"&&(E.textContent=b),ie.forEach(a),q.forEach(a),m=T(W),p=f(W,"ION-LABEL",{button:!0});var Ce=v(p);k=f(Ce,"ION-TEXT",{color:!0});var ne=v(k);y=f(ne,"H3",{});var oe=v(y);H=Ne(oe,O),oe.forEach(a),ne.forEach(a),A=T(Ce),x=f(Ce,"DIV",{class:!0}),v(x).forEach(a),Ce.forEach(a),j=T(W),K=f(W,"ION-ICON",{icon:!0,slot:!0}),v(K).forEach(a),W.forEach(a),V=T(X);for(let be=0;be<D.length;be+=1)D[be].l(X);S=T(X),I=f(X,"ION-ITEM",{});var w=v(I);M=f(w,"ION-AVATAR",{slot:!0});var U=v(M);R=f(U,"DIV",{class:!0,title:!0,style:!0});var C=v(R);L=f(C,"DIV",{class:!0});var z=v(L);J=Ne(z,Y),z.forEach(a),C.forEach(a),U.forEach(a),me=T(w),Ie=f(w,"ION-LABEL",{button:!0});var $=v(Ie);P=f($,"ION-TEXT",{color:!0});var Q=v(P);ce=f(Q,"H3",{});var Z=v(ce);ve=Ne(Z,de),Z.forEach(a),Q.forEach(a),le=T($),ee=f($,"DIV",{class:!0,"data-svelte-h":!0}),se(ee)!=="svelte-1c76q1w"&&(ee.innerHTML=fe),$.forEach(a),_e=T(w),re=f(w,"ION-ICON",{icon:!0,slot:!0}),v(re).forEach(a),w.forEach(a),X.forEach(a),ae.forEach(a),this.h()},h(){g(t,"slot","fixed"),F(E,"class","order svelte-1ita8l7"),F(_,"class","order-wrapper svelte-1ita8l7"),F(_,"title",h="$"+i[6].origin),c(_,"background-color",i[6].color),c(_,"color",Be(i[6].color)),g(u,"slot","start"),g(k,"color","#2e2e2e"),F(x,"class","sub svelte-1ita8l7"),g(p,"button",""),g(K,"icon",je),g(K,"slot","end"),F(L,"class","order svelte-1ita8l7"),F(R,"class","order-wrapper svelte-1ita8l7"),F(R,"title",ue="$"+i[6].destination),c(R,"background-color",i[6].color),c(R,"color",Be(i[6].color)),g(M,"slot","start"),g(P,"color","#2e2e2e"),F(ee,"class","sub svelte-1ita8l7"),g(Ie,"button",""),g(re,"icon",je),g(re,"slot","end")},m(he,ae){G(he,e,ae),r(e,t),i[25](t),r(e,n),r(e,l),r(l,s),r(s,u),r(u,_),r(_,E),r(s,m),r(s,p),r(p,k),r(k,y),r(y,H),r(p,A),r(p,x),r(s,j),r(s,K),r(l,V);for(let X=0;X<D.length;X+=1)D[X]&&D[X].m(l,null);r(l,S),r(l,I),r(I,M),r(M,R),r(R,L),r(L,J),r(I,me),r(I,Ie),r(Ie,P),r(P,ce),r(ce,ve),r(Ie,le),r(Ie,ee),r(I,_e),r(I,re),te||(ke=[pe(t,"ionRefresh",i[11]),pe(p,"click",i[26]),pe(Ie,"click",i[28])],te=!0)},p(he,ae){ae[0]&64&&h!==(h="$"+he[6].origin)&&F(_,"title",h),ae[0]&64&&c(_,"background-color",he[6].color),ae[0]&64&&c(_,"color",Be(he[6].color)),ae[0]&64&&O!==(O=he[6].origin+"")&&Se(H,O),ae[0]&1319968&&(ge=Pe(he[5]),D=it(D,ae,Ee,1,he,ge,B,l,lt,fn,S,on)),ae[0]&32&&Y!==(Y=he[5].length+1+"")&&Se(J,Y),ae[0]&64&&ue!==(ue="$"+he[6].destination)&&F(R,"title",ue),ae[0]&64&&c(R,"background-color",he[6].color),ae[0]&64&&c(R,"color",Be(he[6].color)),ae[0]&64&&de!==(de=he[6].destination+"")&&Se(ve,de)},d(he){he&&a(e),i[25](null);for(let ae=0;ae<D.length;ae+=1)D[ae].d();te=!1,Ue(ke)}}}function cn(i){let e;return{c(){e=d("span"),this.h()},l(t){e=f(t,"SPAN",{class:!0}),v(e).forEach(a),this.h()},h(){F(e,"class","notes svelte-1ita8l7")},m(t,o){G(t,e,o)},d(t){t&&a(e)}}}function Jo(i){let e;return{c(){e=d("ion-icon"),this.h()},l(t){e=f(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),v(e).forEach(a),this.h()},h(){g(e,"icon",je),g(e,"slot","end"),c(e,"color",He(i[54].status,i[54].date_service))},m(t,o){G(t,e,o)},p(t,o){o[0]&32&&c(e,"color",He(t[54].status,t[54].date_service))},d(t){t&&a(e)}}}function Yo(i){let e,t=(i[54].tag?i[54].tag:"")+"",o;return{c(){e=d("div"),o=Oe(t),this.h()},l(n){e=f(n,"DIV",{class:!0,slot:!0,style:!0});var l=v(e);o=Ne(l,t),l.forEach(a),this.h()},h(){F(e,"class","stop-tag"),F(e,"slot","end"),c(e,"background-color",Ve(i[54].tag_color,.3)),c(e,"border","1px solid "+Ve(i[54].tag_color,.4)),c(e,"color",i[54].tag_color),c(e,"font-size","10px"),c(e,"text-align","center"),c(e,"align-content","center"),c(e,"border-radius","20px"),c(e,"white-space","normal"),c(e,"padding","3px 6px"),c(e,"width","auto",1),c(e,"display","inline-block"),c(e,"font-weight","500")},m(n,l){G(n,e,l),r(e,o)},p(n,l){l[0]&32&&t!==(t=(n[54].tag?n[54].tag:"")+"")&&Se(o,t),l[0]&32&&c(e,"background-color",Ve(n[54].tag_color,.3)),l[0]&32&&c(e,"border","1px solid "+Ve(n[54].tag_color,.4)),l[0]&32&&c(e,"color",n[54].tag_color)},d(n){n&&a(e)}}}function un(i,e){let t,o,n,l,s=parseInt(e[54].pos)+1+"",u,_,E,b,h,m,p=e[54].title+"",k,y,O=e[54].support_list&&e[54].support_list.length||e[18](e[54]),H,A,x="",j,K,V,D=O&&cn();function B(){return e[31](e[54])}function S(R,L){return R[54].tag_color&&R[54].tag?Yo:Jo}let I=S(e),M=I(e);return{key:i,first:null,c(){t=d("ion-item"),o=d("ion-avatar"),n=d("div"),l=d("div"),u=Oe(s),E=N(),b=d("ion-label"),h=d("ion-text"),m=d("h3"),k=Oe(p),y=N(),D&&D.c(),H=N(),A=d("div"),A.innerHTML=x,j=N(),M.c(),this.h()},l(R){t=f(R,"ION-ITEM",{});var L=v(t);o=f(L,"ION-AVATAR",{slot:!0});var Y=v(o);n=f(Y,"DIV",{class:!0,title:!0,style:!0});var J=v(n);l=f(J,"DIV",{class:!0});var ue=v(l);u=Ne(ue,s),ue.forEach(a),J.forEach(a),Y.forEach(a),E=T(L),b=f(L,"ION-LABEL",{button:!0});var me=v(b);h=f(me,"ION-TEXT",{color:!0});var Ie=v(h);m=f(Ie,"H3",{});var P=v(m);k=Ne(P,p),y=T(P),D&&D.l(P),P.forEach(a),Ie.forEach(a),H=T(me),A=f(me,"DIV",{class:!0,"data-svelte-h":!0}),se(A)!=="svelte-1cx9r38"&&(A.innerHTML=x),me.forEach(a),j=T(L),M.l(L),L.forEach(a),this.h()},h(){F(l,"class","order svelte-1ita8l7"),F(n,"class","order-wrapper svelte-1ita8l7"),F(n,"title",_=tt(e[54].status)),c(n,"background-color",He(e[54].status,e[54].date_service)),c(n,"color",Be(He(e[54].status))),g(o,"slot","start"),g(h,"color","#2e2e2e"),F(A,"class","sub svelte-1ita8l7"),g(b,"button",""),this.first=t},m(R,L){G(R,t,L),r(t,o),r(o,n),r(n,l),r(l,u),r(t,E),r(t,b),r(b,h),r(h,m),r(m,k),r(m,y),D&&D.m(m,null),r(b,H),r(b,A),r(t,j),M.m(t,null),K||(V=pe(b,"click",B),K=!0)},p(R,L){e=R,L[0]&32&&s!==(s=parseInt(e[54].pos)+1+"")&&Se(u,s),L[0]&32&&_!==(_=tt(e[54].status))&&F(n,"title",_),L[0]&32&&c(n,"background-color",He(e[54].status,e[54].date_service)),L[0]&32&&c(n,"color",Be(He(e[54].status))),L[0]&32&&p!==(p=e[54].title+"")&&Se(k,p),L[0]&32&&(O=e[54].support_list&&e[54].support_list.length||e[18](e[54])),O?D||(D=cn(),D.c(),D.m(m,null)):D&&(D.d(1),D=null),I===(I=S(e))&&M?M.p(e,L):(M.d(1),M=I(e),M&&(M.c(),M.m(t,null)))},d(R){R&&a(t),D&&D.d(),M.d(),K=!1,V()}}}function dn(i){let e;return{c(){e=d("span"),this.h()},l(t){e=f(t,"SPAN",{class:!0}),v(e).forEach(a),this.h()},h(){F(e,"class","notes svelte-1ita8l7")},m(t,o){G(t,e,o)},d(t){t&&a(e)}}}function Qo(i){let e;return{c(){e=d("ion-icon"),this.h()},l(t){e=f(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),v(e).forEach(a),this.h()},h(){g(e,"icon",je),g(e,"slot","end"),c(e,"color",He(i[54].status,i[54].date_service))},m(t,o){G(t,e,o)},p(t,o){o[0]&32&&c(e,"color",He(t[54].status,t[54].date_service))},d(t){t&&a(e)}}}function Zo(i){let e,t=(i[54].tag?i[54].tag:"")+"",o;return{c(){e=d("div"),o=Oe(t),this.h()},l(n){e=f(n,"DIV",{class:!0,slot:!0,style:!0});var l=v(e);o=Ne(l,t),l.forEach(a),this.h()},h(){F(e,"class","stop-tag"),F(e,"slot","end"),c(e,"background-color",Ve(i[54].tag_color,.3)),c(e,"border","1px solid "+Ve(i[54].tag_color,.4)),c(e,"color",i[54].tag_color),c(e,"font-size","10px"),c(e,"text-align","center"),c(e,"align-content","center"),c(e,"border-radius","20px"),c(e,"white-space","normal"),c(e,"padding","3px 6px"),c(e,"width","auto",1),c(e,"display","inline-block"),c(e,"font-weight","500")},m(n,l){G(n,e,l),r(e,o)},p(n,l){l[0]&32&&t!==(t=(n[54].tag?n[54].tag:"")+"")&&Se(o,t),l[0]&32&&c(e,"background-color",Ve(n[54].tag_color,.3)),l[0]&32&&c(e,"border","1px solid "+Ve(n[54].tag_color,.4)),l[0]&32&&c(e,"color",n[54].tag_color)},d(n){n&&a(e)}}}function fn(i,e){let t,o,n,l,s=parseInt(e[54].pos)+1+"",u,_,E,b,h,m,p=e[54].title+"",k,y,O=e[54].support_list&&e[54].support_list.length||e[18](e[54]),H,A,x="",j,K,V,D=O&&dn();function B(){return e[27](e[54])}function S(R,L){return R[54].tag_color&&R[54].tag?Zo:Qo}let I=S(e),M=I(e);return{key:i,first:null,c(){t=d("ion-item"),o=d("ion-avatar"),n=d("div"),l=d("div"),u=Oe(s),E=N(),b=d("ion-label"),h=d("ion-text"),m=d("h3"),k=Oe(p),y=N(),D&&D.c(),H=N(),A=d("div"),A.innerHTML=x,j=N(),M.c(),this.h()},l(R){t=f(R,"ION-ITEM",{});var L=v(t);o=f(L,"ION-AVATAR",{slot:!0});var Y=v(o);n=f(Y,"DIV",{class:!0,title:!0,style:!0});var J=v(n);l=f(J,"DIV",{class:!0});var ue=v(l);u=Ne(ue,s),ue.forEach(a),J.forEach(a),Y.forEach(a),E=T(L),b=f(L,"ION-LABEL",{button:!0});var me=v(b);h=f(me,"ION-TEXT",{color:!0});var Ie=v(h);m=f(Ie,"H3",{});var P=v(m);k=Ne(P,p),y=T(P),D&&D.l(P),P.forEach(a),Ie.forEach(a),H=T(me),A=f(me,"DIV",{class:!0,"data-svelte-h":!0}),se(A)!=="svelte-1cx9r38"&&(A.innerHTML=x),me.forEach(a),j=T(L),M.l(L),L.forEach(a),this.h()},h(){F(l,"class","order svelte-1ita8l7"),F(n,"class","order-wrapper svelte-1ita8l7"),F(n,"title",_=tt(e[54].status)),c(n,"background-color",He(e[54].status,e[54].date_service)),c(n,"color",Be(He(e[54].status))),g(o,"slot","start"),g(h,"color","#2e2e2e"),F(A,"class","sub svelte-1ita8l7"),g(b,"button",""),this.first=t},m(R,L){G(R,t,L),r(t,o),r(o,n),r(n,l),r(l,u),r(t,E),r(t,b),r(b,h),r(h,m),r(m,k),r(m,y),D&&D.m(m,null),r(b,H),r(b,A),r(t,j),M.m(t,null),K||(V=pe(b,"click",B),K=!0)},p(R,L){e=R,L[0]&32&&s!==(s=parseInt(e[54].pos)+1+"")&&Se(u,s),L[0]&32&&_!==(_=tt(e[54].status))&&F(n,"title",_),L[0]&32&&c(n,"background-color",He(e[54].status,e[54].date_service)),L[0]&32&&c(n,"color",Be(He(e[54].status))),L[0]&32&&p!==(p=e[54].title+"")&&Se(k,p),L[0]&32&&(O=e[54].support_list&&e[54].support_list.length||e[18](e[54])),O?D||(D=dn(),D.c(),D.m(m,null)):D&&(D.d(1),D=null),I===(I=S(e))&&M?M.p(e,L):(M.d(1),M=I(e),M&&(M.c(),M.m(t,null)))},d(R){R&&a(t),D&&D.d(),M.d(),K=!1,V()}}}function $o(i){let e,t,o,n,l=`<ion-icon icon="${zn}"></ion-icon>`,s,u,_,E=`<ion-icon icon="${jn}"></ion-icon>`,b,h,m=`<ion-icon icon="${qn}"></ion-icon>`,p,k,y=(i[6].name?i[6].name.toUpperCase():"")+"",O,H,A,x='<ion-segment-button value="list"><ion-label>Paradas</ion-label></ion-segment-button> <ion-segment-button value="map"><ion-label>Mapa</ion-label></ion-segment-button>',j,K,V,D;function B(M,R){if(M[9]==="list")return qo;if(M[9]==="map")return jo}let S=B(i),I=S&&S(i);return{c(){e=d("ion-header"),t=d("ion-toolbar"),o=d("ion-buttons"),n=d("ion-button"),n.innerHTML=l,s=N(),u=d("ion-buttons"),_=d("ion-button"),_.innerHTML=E,b=N(),h=d("ion-button"),h.innerHTML=m,p=N(),k=d("ion-title"),O=Oe(y),H=N(),A=d("ion-segment"),A.innerHTML=x,j=N(),I&&I.c(),K=De(),this.h()},l(M){e=f(M,"ION-HEADER",{translucent:!0});var R=v(e);t=f(R,"ION-TOOLBAR",{});var L=v(t);o=f(L,"ION-BUTTONS",{slot:!0});var Y=v(o);n=f(Y,"ION-BUTTON",{title:!0,alt:!0,"data-svelte-h":!0}),se(n)!=="svelte-1a21unf"&&(n.innerHTML=l),Y.forEach(a),s=T(L),u=f(L,"ION-BUTTONS",{slot:!0});var J=v(u);_=f(J,"ION-BUTTON",{"data-svelte-h":!0}),se(_)!=="svelte-dy3728"&&(_.innerHTML=E),b=T(J),h=f(J,"ION-BUTTON",{"data-svelte-h":!0}),se(h)!=="svelte-1omw1hr"&&(h.innerHTML=m),J.forEach(a),p=T(L),k=f(L,"ION-TITLE",{});var ue=v(k);O=Ne(ue,y),ue.forEach(a),L.forEach(a),H=T(R),A=f(R,"ION-SEGMENT",{value:!0,"data-svelte-h":!0}),se(A)!=="svelte-1rseadq"&&(A.innerHTML=x),R.forEach(a),j=T(M),I&&I.l(M),K=De(),this.h()},h(){g(n,"title","Atrás"),g(n,"alt","Atrás"),g(o,"slot","start"),g(u,"slot","end"),g(A,"value","list"),g(e,"translucent","")},m(M,R){G(M,e,R),r(e,t),r(t,o),r(o,n),r(t,s),r(t,u),r(u,_),r(u,b),r(u,h),r(t,p),r(t,k),r(k,O),r(e,H),r(e,A),G(M,j,R),I&&I.m(M,R),G(M,K,R),V||(D=[pe(n,"click",i[19]),pe(_,"click",i[22]),pe(h,"click",i[23]),pe(A,"ionChange",i[24])],V=!0)},p(M,R){R[0]&64&&y!==(y=(M[6].name?M[6].name.toUpperCase():"")+"")&&Se(O,y),S===(S=B(M))&&I?I.p(M,R):(I&&I.d(1),I=S&&S(M),I&&(I.c(),I.m(K.parentNode,K)))},d(M){M&&(a(e),a(j),a(K)),I&&I.d(M),V=!1,Ue(D)}}}function ei(i){let e,t,o,n=i[2]&&ln(i);return{c(){e=N(),n&&n.c(),t=De(),this.h()},l(l){In("svelte-kn0kph",en.head).forEach(a),e=T(l),n&&n.l(l),t=De(),this.h()},h(){en.title="Rutaflow - Detalles de ruta"},m(l,s){G(l,e,s),n&&n.m(l,s),G(l,t,s),o=!0},p(l,s){l[2]?n?(n.p(l,s),s[0]&4&&ut(n,1)):(n=ln(l),n.c(),ut(n,1),n.m(t.parentNode,t)):n&&(Ln(),pt(n,1,1,()=>{n=null}),Nn())},i(l){o||(ut(n),o=!0)},o(l){pt(n),o=!1},d(l){l&&(a(e),a(t)),n&&n.d(l)}}}function He(i,e=""){let t="#ffffff";return i==="pending"&&!e?t="#f2e300":i=="pending"&&e?t="#F6A833":i==="completed"&&(t="#44d900"),t}function tt(i){let e="";return i=="pending"?e="Pendiente":i=="completed"&&(e="Completado"),e}function Be(i){i.slice(0,1)==="#"&&(i=i.slice(1)),i.length===3&&(i=i.split("").map(function(l){return l+l}).join(""));const e=parseInt(i.substr(0,2),16),t=parseInt(i.substr(2,2),16),o=parseInt(i.substr(4,2),16);return(e*299+t*587+o*114)/1e3>=128?"#414040":"#fff"}function ht(i,e){for(let t=0;t<e.length;t++)if(e[t].alias===i)return e[t].val;return""}const ti=i=>i.mandatory==="1",ni=i=>i.img;function oi(i,e,t){let o;On(i,Fn,w=>t(21,o=w));var n=this&&this.__awaiter||function(w,U,C,z){function $(Q){return Q instanceof C?Q:new C(function(Z){Z(Q)})}return new(C||(C=Promise))(function(Q,Z){function be(Me){try{we(z.next(Me))}catch(ye){Z(ye)}}function Te(Me){try{we(z.throw(Me))}catch(ye){Z(ye)}}function we(Me){Me.done?Q(Me.value):$(Me.value).then(be,Te)}we((z=z.apply(w,U||[])).next())})};let{routeId:l}=e,{driverId:s}=e,u=rt,_=new Object,E=!0,b=!1,h=[],m=[],p={},k=[],y=[],O,H=!1,A="list",x,j="",K="",V="0",D=new Object,B=null;const S={car_accident:"/car-accident.svg",restaurant:"/restaurant.svg",parking:"/parking.svg",hospital:"/hospital.svg",wc:"/toilet.svg"},I=()=>n(void 0,void 0,void 0,function*(){yield L(l),O.complete()});nt(()=>n(void 0,void 0,void 0,function*(){fe(),yield L(l)}));function M(w){return n(this,void 0,void 0,function*(){if(t(9,A=w),A==="map"){yield _n(),x=document.getElementById("g_map");const U=new google.maps.Map(x,{zoom:8,center:{lat:20.6745683,lng:-103.3986104},mapId:"4504f8b37365c3d0"}),C=new google.maps.LatLngBounds,{AdvancedMarkerElement:z,PinElement:$}=yield google.maps.importLibrary("marker");navigator.geolocation?navigator.geolocation.getCurrentPosition(function(Q){const Z=new google.maps.LatLng(Q.coords.latitude,Q.coords.longitude);new google.maps.Marker({position:Z,map:U,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"#0062ff",fillOpacity:1,scale:6,strokeColor:"#ffffff",strokeWeight:2}}),new google.maps.Circle({strokeColor:"#00BFFF",strokeOpacity:.5,strokeWeight:1,fillColor:"#00BFFF",fillOpacity:.2,map:U,center:Z,radius:Q.coords.accuracy}),C.extend(Z)},function(Q){console.error("Error retrieving location:",Q)}):console.error("Geolocation not supported by this browser."),p.lat1===p.lat2&&p.lon1===p.lon2?R(C,U,{lat:p.lat2,lon:p.lon2,color:p.color,title:p.destination},{type:"icon",iconClass:"icon-home",title:"Origen/Destino",glyph:`0,${String(h.length+1)}`}):(R(C,U,{lat:p.lat1,lon:p.lon1,color:p.color,title:p.origin},{type:"icon",iconClass:"icon-home",title:"Origen",glyph:"0"}),R(C,U,{lat:p.lat2,lon:p.lon2,color:p.color,title:p.destination},{type:"icon",iconClass:"icon-flag",title:"Destino",glyph:String(h.length+1)})),h.forEach((Q,Z)=>{const be=parseFloat(Q.lat),Te=parseFloat(Q.lon),we=new google.maps.LatLng(be,Te),Me=new google.maps.Marker({position:{lat:be,lng:Te},map:U,title:Q.title}),ye=new $({background:He(Q.status,Q.date_service),borderColor:"#000",glyphColor:"#000",glyph:(parseInt(Q.pos)+1).toString()});new z({map:U,position:we,content:ye.element,title:"Parada "+(parseInt(Q.pos)+1).toString()+": "+Q.title}).addListener("click",function(Fe){J(Q,!1)}),C.extend(Me.getPosition())}),m.forEach(Q=>{const Z=+Q.lat,be=+Q.lng;if(isNaN(Z)||isNaN(be))return;const Te=S[Q.type]||"alert-sharp",we=document.createElement("div");we.style.cssText="display:flex;align-items:center;justify-content:center;transform:scale(.85);";const Me=document.createElement("ion-icon");Te.startsWith("/")?Me.setAttribute("src",Te):Me.setAttribute("icon",Te),Me.style.cssText="font-size:20px;color:#d13434;",we.appendChild(Me);const ye=new $({background:"#fff",borderColor:"#000",glyph:we}),Le=new z({map:U,position:{lat:Z,lng:be},content:ye.element,title:Q.motive||Q.type});C.extend(Le.position)}),U.fitBounds(C)}})}function R(w,U,C,z){return n(this,void 0,void 0,function*(){let $;const Q=parseFloat(C.lat),Z=parseFloat(C.lon),be=new google.maps.LatLng(Q,Z),{AdvancedMarkerElement:Te,PinElement:we}=yield google.maps.importLibrary("marker");z.type=="icon"?($=document.createElement("i"),$.className=`${z.iconClass} icon`,$.style.fontSize="14px",$.style.color=Be(C.color),$.style.fontWeight="600"):z.type=="text";const Me=new google.maps.Marker({position:{lat:Q,lng:Z},map:U,title:`${z.title}. ${C.title}`}),ye=new we({background:C.color,borderColor:"#000",glyphColor:Be(C.color),glyph:z.glyph});return new Te({map:U,position:be,content:ye.element,title:z.title+": "+C.title}).addListener("click",function(Fe){ue(p,z.title=="Destino"||z.title=="Origen/Destino")}),Me})}function L(w){return n(this,void 0,void 0,function*(){let U=new FormData;U.append("id_route",w),U=ee(U),U.append("id_enterprise",_.id_enterprise);try{const z=yield(yield fetch(`${u}api/admin/report/seguimiento_list.php`,{method:"POST",body:U})).json();t(6,p=z.data.seguimiento_list[0]),t(5,h=z.data.event_list),t(7,k=z.data.checklist),y=z.data.expenses,m=z.data.incidence_list,p&&t(4,b=p.km_inicial=="0"&&p.gas_inicial=="0"),t(3,E=!1)}catch(C){t(3,E=!1),console.error("Error fetching data:",C)}})}const Y=w=>new Promise((U,C)=>{let z=new FormData;z.append("id_route",w.id_route),z.append("id_event",w.id_event),z=ee(z),fetch(`${u}api/admin/evidence/evidence_by_event.php`,{method:"POST",body:z}).then($=>$.json()).then($=>{U($.data.event_evidence[0])}).catch($=>{console.error("Error fetching data:",$),C($)})});function J(w,U){return B||(B=n(this,void 0,void 0,function*(){let C=null;try{C=yield Y(w)}catch{}const z=Object.assign(Object.assign(Object.assign({},w),{stopsApproval:j,smsActive:K}),C||{});try{yield xe("modal-delivery-info",Rt,{delivery:z,isLast:U})}finally{B=null,L(l)}}),B)}const ue=(w,U)=>{var C=new Object;U?C={title:w.destination,line1:w.dest_address}:C={title:w.origin,line1:w.origin_address},C.enterprise_name=w.enterprise_name,C.client_name=w.client_name,C.client_phone=w.tel,C.id_route=w.id_route,C.stopsApproval=j,C.smsActive=K;var z=!0;xe("modal-delivery-info",Rt,{delivery:C,isLast:U,flag:z})},me=(w,U,C)=>{var z=!1;return H||(H=!0,xe("modal-checklist",bn,{checklist:w,driverId:U,routeId:C,isLast:z}).then($=>{H=!1}),de(C,"checklist")),""},Ie=w=>n(void 0,void 0,void 0,function*(){return yield L(w),y.length>0?xe("modal-expense-detail",zo,{routeId:w,expenses:y}).then(U=>{}):xe("modal-expense",vt,{routeId:w}).then(U=>{}),""}),P=w=>n(void 0,void 0,void 0,function*(){return yield L(w),xe("modal-incidence",Ho,{routeId:w}).then(U=>{}),""}),ce=w=>{if(w.tracking_type=="subscription"){if(w.subscriber_info&&w.payment_type==="cash"&&new Date(w.subscriber_info.payment_next)<new Date)return!0}else if(w.tracking_type=="ecommerce"&&Number(w.payment_pending)>0)return!0;return!1};function de(w,U){let C=new FormData;return C.append("id_route",w),C.append("status",U),C=ee(C),fetch(`${u}api/admin/route/change_status.php`,{method:"POST",body:C}).then(z=>z.json()).then(z=>{}).catch(z=>{console.error("Error fetching data:",z)}),""}const ve=()=>{_.type=="super"||_.type=="admin"?We("/drivers/me"):_.id_driver&&We(`/drivers/${_.id_driver}`)},le=(w,U)=>n(void 0,void 0,void 0,function*(){yield(yield Ge.create({header:w||"Error",message:U||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()});function ee(w){return w.append("token",_.token),w.append("id_user_over",_.id_user),w}const fe=()=>n(void 0,void 0,void 0,function*(){if(_.id_enterprise){let w=new FormData;w.append("id_enterprise",_.id_enterprise),w=ee(w);try{const U=yield fetch(`${u}api/admin/enterprise/enterprise_settings.php`,{method:"POST",body:w});U.ok?(D=(yield U.json()).nodos,j=ht("stops_wait_approval",D),K=ht("sms_active",D),t(10,V=ht("stops_order_restriction",D))):console.error("File upload failed:",U.statusText)}catch(U){console.error("Error during file upload:",U)}}}),_e=()=>P(l),re=()=>Ie(l),te=w=>M(w.detail.value);function ke(w){Re[w?"unshift":"push"](()=>{O=w,t(8,O)})}const ge=()=>{ue(p,!1)},Ee=w=>{const U=h.findIndex(Z=>Z.id_event===w.id_event),C=U===0,z=U>0?h[U-1]:null,$=C||z&&z.img!==null,Q=w.img!==null&&w.img!=="";$||C&&!Q||V=="1"?J(w,!1):le("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},he=()=>{ue(p,!0)};function ae(w){Re[w?"unshift":"push"](()=>{O=w,t(8,O)})}const X=()=>{ue(p,!1)},W=w=>{const U=h.findIndex(Z=>Z.id_event===w.id_event),C=U===0,z=U>0?h[U-1]:null,$=C||z&&z.img!==null,Q=w.img!==null&&w.img!=="";$||C&&!Q||V=="1"?J(w,!1):le("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},q=()=>{ue(p,!0)};function ie(w){Re[w?"unshift":"push"](()=>{O=w,t(8,O)})}const Ce=()=>{ue(p,!1)},ne=w=>{const U=h.findIndex(Z=>Z.id_event===w.id_event),C=U===0,z=U>0?h[U-1]:null,$=C||z&&z.img!==null,Q=w.img!==null&&w.img!=="";$||C&&!Q||V=="1"?J(w,!1):le("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},oe=()=>{ue(p,!0)};return i.$$set=w=>{"routeId"in w&&t(0,l=w.routeId),"driverId"in w&&t(1,s=w.driverId)},i.$$.update=()=>{i.$$.dirty[0]&2097157&&(t(0,{routeId:l,driverId:s}=o.params,l,(t(1,s),t(21,o),t(2,_),t(0,l))),t(2,_=JSON.parse(localStorage.getItem("userSession"))),_?_.id_user&&(_.type=="admin"||_.type=="super")?(L(l),We(`/drivers/me/routes/${l}`)):_.id_user&&_.id_driver&&(L(l),We(`/drivers/${_.id_driver}/routes/${l}`)):We("/"))},[l,s,_,E,b,h,p,k,O,A,V,I,M,J,ue,me,Ie,P,ce,ve,le,o,_e,re,te,ke,ge,Ee,he,ae,X,W,q,ie,Ce,ne,oe]}class di extends Ye{constructor(e){super(),Qe(this,e,oi,ei,Je,{routeId:0,driverId:1},null,[-1,-1])}}export{di as component};
