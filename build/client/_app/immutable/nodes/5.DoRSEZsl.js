import{Z as It,s as et,e as f,j as O,b as h,q as g,d as te,h as u,m as w,v as k,i as q,w as r,x as fe,n as Ce,z as He,_ as Pn,k as De,B as c,o as ot,$ as yt,t as Oe,r as we,f as G,a0 as St,y as Ae,a1 as st,A as Be,F as Ot,J as Dn,a2 as gt,a3 as Xe,a4 as wt,a5 as Nt,a6 as At,a7 as Pt,l as Bn,p as Un}from"../chunks/index.BgXu2Isl.js";import{S as tt,i as nt,b as yn,d as On,m as wn,t as ct,a as _t,e as Nn,c as zn,g as Hn}from"../chunks/index.Dk8PUFqT.js";import{e as qe,u as ut,d as dt,g as Ke,a as Ze,h as Ge,b as Rn,c as Vn,i as Tn,f as Fn,j as Cn,k as qn,m as Wn,n as pt,o as jn,q as Tt,r as Ln,s as Mn,t as Ct,v as Je,w as Gn,x as Kn,y as Lt,z as Mt,A as Xn,B as Jn,I as Yn,C as Qn,D as Zn,E as $n,p as ei}from"../chunks/index.DEBfXqHc.js";import"../chunks/index-6e05b96e.C_9q9BoX.js";import{m as $e,D as ft,a as Qe,W as ti,b as ni}from"../chunks/overlays-b874c3c3.T0IawrFY.js";import{q as ii,t as oi}from"../chunks/ion-modal.BYMRzj9z.js";import{g as at}from"../chunks/entry.DbeSo8um.js";const li=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,ri=(l,e)=>{if(!customElements.get(l)){class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){new e({target:this.shadowRoot,props:this.componentProps||{}})}}customElements.define(l,t)}},si=l=>document.createElement(l).constructor!==HTMLElement,ai=(l,e)=>{si(l)||ri(l,e)},Ye=async(l,e,t={},n={})=>{ii(),oi(),ai(l,e);const i=await $e.create({component:l,componentProps:t,...n});return i.addEventListener("ionModalDidPresent",()=>{const o=i.querySelector(l);o&&(o.componentProps=t)}),await i.present(),i.onWillDismiss()};let lt=It({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]}),xn=It({flag:[]});function ci(l){let e,t,n,i,o="Cancelar",s,a,d="Captura de Km/Gas",E,v,_,m="Confirmar",p,b,y,N,z,x,S;return{c(){e=f("ion-header"),t=f("ion-toolbar"),n=f("ion-buttons"),i=f("ion-button"),i.textContent=o,s=O(),a=f("ion-title"),a.textContent=d,E=O(),v=f("ion-buttons"),_=f("ion-button"),_.textContent=m,p=O(),b=f("ion-content"),y=f("ion-item"),N=f("ion-input"),this.h()},l(B){e=h(B,"ION-HEADER",{translucent:!0});var W=g(e);t=h(W,"ION-TOOLBAR",{});var R=g(t);n=h(R,"ION-BUTTONS",{slot:!0});var C=g(n);i=h(C,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),te(i)!=="svelte-17pq4f4"&&(i.textContent=o),C.forEach(u),s=w(R),a=h(R,"ION-TITLE",{"data-svelte-h":!0}),te(a)!=="svelte-1yhkaq7"&&(a.textContent=d),E=w(R),v=h(R,"ION-BUTTONS",{slot:!0});var D=g(v);_=h(D,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),te(_)!=="svelte-cm6j4s"&&(_.textContent=m),D.forEach(u),R.forEach(u),W.forEach(u),p=w(B),b=h(B,"ION-CONTENT",{fullscreen:!0});var A=g(b);y=h(A,"ION-ITEM",{});var I=g(y);N=h(I,"ION-INPUT",{class:!0,inputmode:!0,pattern:!0,type:!0,placeholder:!0,value:!0,required:!0});var T=g(N);T.forEach(u),I.forEach(u),A.forEach(u),this.h()},h(){k(i,"color","medium"),k(n,"slot","start"),k(_,"strong",""),k(v,"slot","end"),k(e,"translucent",""),k(N,"class","fin-km"),k(N,"inputmode","numeric"),k(N,"pattern","[0-9]*"),k(N,"type","number"),k(N,"placeholder",z="Ingresa "+l[0]+" actual"),k(N,"value",l[1]),k(N,"required",""),k(b,"fullscreen","")},m(B,W){q(B,e,W),r(e,t),r(t,n),r(n,i),r(t,s),r(t,a),r(t,E),r(t,v),r(v,_),q(B,p,W),q(B,b,W),r(b,y),r(y,N),x||(S=[fe(i,"click",l[2]),fe(_,"click",l[3]),fe(N,"input",l[4])],x=!0)},p(B,[W]){W&1&&z!==(z="Ingresa "+B[0]+" actual")&&k(N,"placeholder",z),W&2&&k(N,"value",B[1])},i:Ce,o:Ce,d(B){B&&(u(e),u(p),u(b)),x=!1,He(S)}}}function ui(l,e,t){const n=Pn();let o=document.querySelector("ion-modal").componentProps.data_type,s="";xn.subscribe(_=>{o=_.flag[0],o=="km_final"||o=="km_inicial"?t(0,s="kilometraje"):t(0,s="litros de gasolina")});let a=0;function d(){$e.dismiss()}function E(){n("modalResult",{data:"Your data",role:"confirm"}),o=="km_inicial"?lt.update(m=>({...m,km_inicial:[a]})):o=="gas_inicial"?lt.update(m=>({...m,gas_inicial:[a]})):o=="km_final"?lt.update(m=>({...m,km_final:[a]})):o=="gas_final"&&lt.update(m=>({...m,gas_final:[a]})),d()}return[s,a,d,E,_=>t(1,a=_.target.value)]}class di extends tt{constructor(e){super(),nt(this,e,ui,ci,et,{})}}const bt=It({items:[],checkedIndices:[],mandatory:[]});function Dt(l,e,t){const n=l.slice();return n[56]=e[t],n[57]=e,n[58]=t,n}function fi(l){let e,t,n,i,o,s="Kilometraje inicial",a,d,E=l[2]?l[2]+" km.":"Cargar km",v,_,m,p,b,y,N,z="Gasolina inicial (litros)",x,S,B=l[3]?l[3]+" litros":"Cargar gas",W,R,C,D;return R=yt(l[22][0]),{c(){e=f("ion-item"),t=f("ion-label"),n=f("input"),i=O(),o=f("p"),o.textContent=s,a=O(),d=f("ion-button"),v=Oe(E),_=O(),m=f("ion-item"),p=f("ion-label"),b=f("input"),y=O(),N=f("p"),N.textContent=z,x=O(),S=f("ion-button"),W=Oe(B),this.h()},l(A){e=h(A,"ION-ITEM",{});var I=g(e);t=h(I,"ION-LABEL",{style:!0});var T=g(t);n=h(T,"INPUT",{id:!0,style:!0,type:!0}),i=w(T),o=h(T,"P",{style:!0,"data-svelte-h":!0}),te(o)!=="svelte-88twxi"&&(o.textContent=s),T.forEach(u),a=w(I),d=h(I,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var P=g(d);v=we(P,E),P.forEach(u),I.forEach(u),_=w(A),m=h(A,"ION-ITEM",{});var M=g(m);p=h(M,"ION-LABEL",{style:!0});var Y=g(p);b=h(Y,"INPUT",{id:!0,style:!0,type:!0}),y=w(Y),N=h(Y,"P",{style:!0,"data-svelte-h":!0}),te(N)!=="svelte-1ux30eb"&&(N.textContent=z),Y.forEach(u),x=w(M),S=h(M,"ION-BUTTON",{fill:!0,class:!0,size:!0,style:!0});var ne=g(S);W=we(ne,B),ne.forEach(u),M.forEach(u),this.h()},h(){G(n,"id","chkbox-km-ini"),c(n,"pointer-events","auto"),G(n,"type","checkbox"),n.required=!0,c(o,"margin-left","10px"),c(t,"display","flex"),k(d,"fill","outline"),k(d,"size","small"),k(d,"class","loadKmInicial"),k(d,"aria-selected",""),G(b,"id","chkbox-gas-ini"),c(b,"pointer-events","auto"),G(b,"type","checkbox"),b.required=!0,c(N,"margin-left","10px"),c(p,"display","flex"),k(S,"fill","outline"),k(S,"class","loadGasInicial"),k(S,"size","small"),c(S,"height","16px "),R.p(n,b)},m(A,I){q(A,e,I),r(e,t),r(t,n),n.checked=~(l[6]||[]).indexOf(n.__value),l[29](n),r(t,i),r(t,o),r(e,a),r(e,d),r(d,v),q(A,_,I),q(A,m,I),r(m,p),r(p,b),l[31](b),b.checked=~(l[6]||[]).indexOf(b.__value),r(p,y),r(p,N),r(m,x),r(m,S),r(S,W),C||(D=[fe(n,"change",l[28]),fe(d,"click",l[30]),fe(b,"change",l[32]),fe(S,"click",l[33])],C=!0)},p(A,I){I[0]&65&&(n.checked=~(A[6]||[]).indexOf(n.__value)),I[0]&4&&E!==(E=A[2]?A[2]+" km.":"Cargar km")&&Ae(v,E),I[0]&65&&(b.checked=~(A[6]||[]).indexOf(b.__value)),I[0]&8&&B!==(B=A[3]?A[3]+" litros":"Cargar gas")&&Ae(W,B)},d(A){A&&(u(e),u(_),u(m)),l[29](null),l[31](null),R.r(),C=!1,He(D)}}}function hi(l){let e,t,n,i,o,s="Kilometraje final",a,d,E=l[4]?l[4]+" km.":"Cargar km",v,_,m,p,b,y,N,z="Gasolina final (litros)",x,S,B=l[5]?l[5]+" litros":"Cargar gas",W,R,C,D;return R=yt(l[22][0]),{c(){e=f("ion-item"),t=f("ion-label"),n=f("input"),i=O(),o=f("p"),o.textContent=s,a=O(),d=f("ion-button"),v=Oe(E),_=O(),m=f("ion-item"),p=f("ion-label"),b=f("input"),y=O(),N=f("p"),N.textContent=z,x=O(),S=f("ion-button"),W=Oe(B),this.h()},l(A){e=h(A,"ION-ITEM",{});var I=g(e);t=h(I,"ION-LABEL",{style:!0});var T=g(t);n=h(T,"INPUT",{id:!0,style:!0,type:!0}),i=w(T),o=h(T,"P",{style:!0,"data-svelte-h":!0}),te(o)!=="svelte-ccmu71"&&(o.textContent=s),T.forEach(u),a=w(I),d=h(I,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var P=g(d);v=we(P,E),P.forEach(u),I.forEach(u),_=w(A),m=h(A,"ION-ITEM",{});var M=g(m);p=h(M,"ION-LABEL",{style:!0});var Y=g(p);b=h(Y,"INPUT",{id:!0,style:!0,type:!0}),y=w(Y),N=h(Y,"P",{style:!0,"data-svelte-h":!0}),te(N)!=="svelte-wsoyd2"&&(N.textContent=z),Y.forEach(u),x=w(M),S=h(M,"ION-BUTTON",{fill:!0,size:!0,class:!0});var ne=g(S);W=we(ne,B),ne.forEach(u),M.forEach(u),this.h()},h(){G(n,"id","chkbox-km-fin"),c(n,"pointer-events","auto"),G(n,"type","checkbox"),n.required=!0,c(o,"margin-left","10px"),c(t,"display","flex"),k(d,"fill","outline"),k(d,"size","small"),k(d,"class","loadKmInicial"),k(d,"aria-selected",""),G(b,"id","chkbox-gas-fin"),c(b,"pointer-events","auto"),G(b,"type","checkbox"),b.required=!0,c(N,"margin-left","10px"),c(p,"display","flex"),k(S,"fill","outline"),k(S,"size","small"),k(S,"class","loadGasInicial"),R.p(n,b)},m(A,I){q(A,e,I),r(e,t),r(t,n),n.checked=~(l[6]||[]).indexOf(n.__value),l[23](n),r(t,i),r(t,o),r(e,a),r(e,d),r(d,v),q(A,_,I),q(A,m,I),r(m,p),r(p,b),b.checked=~(l[6]||[]).indexOf(b.__value),l[26](b),r(p,y),r(p,N),r(m,x),r(m,S),r(S,W),C||(D=[fe(n,"change",l[21]),fe(d,"click",l[24]),fe(b,"change",l[25]),fe(S,"click",l[27])],C=!0)},p(A,I){I[0]&65&&(n.checked=~(A[6]||[]).indexOf(n.__value)),I[0]&16&&E!==(E=A[4]?A[4]+" km.":"Cargar km")&&Ae(v,E),I[0]&65&&(b.checked=~(A[6]||[]).indexOf(b.__value)),I[0]&32&&B!==(B=A[5]?A[5]+" litros":"Cargar gas")&&Ae(W,B)},d(A){A&&(u(e),u(_),u(m)),l[23](null),l[26](null),R.r(),C=!1,He(D)}}}function Bt(l){let e=[],t=new Map,n,i=qe(l[0]);const o=s=>s[56].id_checklist_event;for(let s=0;s<i.length;s+=1){let a=Dt(l,i,s),d=o(a);t.set(d,e[s]=Ut(d,a))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();n=De()},l(s){for(let a=0;a<e.length;a+=1)e[a].l(s);n=De()},m(s,a){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(s,a);q(s,n,a)},p(s,a){a[0]&827841&&(i=qe(s[0]),e=ut(e,a,o,1,s,i,t,n.parentNode,dt,Ut,n,Dt))},d(s){s&&u(n);for(let a=0;a<e.length;a+=1)e[a].d(s)}}}function _i(l){let e,t=(l[15][l[56].id_checklist_event]?l[15][l[56].id_checklist_event]:"Cargar evidencia")+"",n,i;return{c(){e=f("label"),n=Oe(t),this.h()},l(o){e=h(o,"LABEL",{for:!0,class:!0});var s=g(e);n=we(s,t),s.forEach(u),this.h()},h(){G(e,"for",i="chklist-"+l[56].id_checklist_event),G(e,"class","button-label")},m(o,s){q(o,e,s),r(e,n)},p(o,s){s[0]&32769&&t!==(t=(o[15][o[56].id_checklist_event]?o[15][o[56].id_checklist_event]:"Cargar evidencia")+"")&&Ae(n,t),s[0]&1&&i!==(i="chklist-"+o[56].id_checklist_event)&&G(e,"for",i)},d(o){o&&u(e)}}}function pi(l){let e;return{c(){e=f("ion-spinner"),this.h()},l(t){e=h(t,"ION-SPINNER",{name:!0,class:!0}),g(e).forEach(u),this.h()},h(){k(e,"name","dots"),k(e,"class","button-spinner")},m(t,n){q(t,e,n)},p:Ce,d(t){t&&u(e)}}}function Ut(l,e){let t,n,i,o,s,a=!1,d=e[56],E,v,_=e[56].item+"",m,p,b,y=e[56].mandatory=="1"?" * ":"",N,z,x,S,B,W,R,C,D,A,I;const T=()=>e[35](i,d),P=()=>e[35](null,d);function M(){return e[36](e[56])}function Y(pe,L){return pe[13][pe[56].id_checklist_event]?pi:_i}let ne=Y(e),ie=ne(e);function re(...pe){return e[38](e[56],...pe)}return D=yt(e[22][0]),{key:l,first:null,c(){t=f("ion-item"),n=f("ion-label"),i=f("input"),E=O(),v=f("p"),m=Oe(_),p=O(),b=f("b"),N=Oe(y),z=O(),x=f("ion-button"),S=f("div"),ie.c(),B=O(),W=f("input"),C=O(),this.h()},l(pe){t=h(pe,"ION-ITEM",{});var L=g(t);n=h(L,"ION-LABEL",{style:!0});var se=g(n);i=h(se,"INPUT",{id:!0,style:!0,type:!0}),E=w(se),v=h(se,"P",{style:!0});var oe=g(v);m=we(oe,_),oe.forEach(u),p=w(se),b=h(se,"B",{style:!0});var ve=g(b);N=we(ve,y),ve.forEach(u),se.forEach(u),z=w(L),x=h(L,"ION-BUTTON",{fill:!0,class:!0,size:!0});var _e=g(x);S=h(_e,"DIV",{class:!0});var $=g(S);ie.l($),B=w($),W=h($,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),$.forEach(u),_e.forEach(u),C=w(L),L.forEach(u),this.h()},h(){G(i,"id",o=`chkbox-${e[56].id_checklist_event}`),c(i,"pointer-events","auto"),G(i,"type","checkbox"),i.__value=s=e[56].id_checklist_event,St(i,i.__value),i.required=!0,c(v,"margin-left","10px"),c(b,"margin-left","5px"),c(n,"display","flex"),c(W,"display","none"),G(W,"id",R="chklist-"+e[56].id_checklist_event),G(W,"name","fileToUpload"),G(W,"type","file"),G(W,"accept","image/*"),G(W,"capture","environment"),G(S,"class","button-content"),k(x,"fill","outline"),k(x,"class","loadEvidence"),k(x,"size","small"),D.p(i),this.first=t},m(pe,L){q(pe,t,L),r(t,n),r(n,i),i.checked=~(e[6]||[]).indexOf(i.__value),T(),r(n,E),r(n,v),r(v,m),r(n,p),r(n,b),r(b,N),r(t,z),r(t,x),r(x,S),ie.m(S,null),r(S,B),r(S,W),e[37](W),r(t,C),A||(I=[fe(i,"change",e[34]),fe(i,"change",M),fe(W,"change",re)],A=!0)},p(pe,L){e=pe,L[0]&1&&o!==(o=`chkbox-${e[56].id_checklist_event}`)&&G(i,"id",o),L[0]&1&&s!==(s=e[56].id_checklist_event)&&(i.__value=s,St(i,i.__value),a=!0),(a||L[0]&65)&&(i.checked=~(e[6]||[]).indexOf(i.__value)),d!==e[56]&&(P(),d=e[56],T()),L[0]&1&&_!==(_=e[56].item+"")&&Ae(m,_),L[0]&1&&y!==(y=e[56].mandatory=="1"?" * ":"")&&Ae(N,y),ne===(ne=Y(e))&&ie?ie.p(e,L):(ie.d(1),ie=ne(e),ie&&(ie.c(),ie.m(S,B))),L[0]&1&&R!==(R="chklist-"+e[56].id_checklist_event)&&G(W,"id",R)},d(pe){pe&&u(t),P(),ie.d(),e[37](null),D.r(),A=!1,He(I)}}}function zt(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(n){e=h(n,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),te(e)!=="svelte-1muo9sg"&&(e.innerHTML=t),this.h()},h(){G(e,"class","overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(n,i){q(n,e,i)},d(n){n&&u(e)}}}function mi(l){let e,t,n,i,o="Cancelar",s,a,d="REQUERIMIENTOS DE RUTA",E,v,_,m,p,b,y,N="Confirmar",z,x,S,B;function W(I,T){return I[1]?hi:fi}let R=W(l),C=R(l),D=l[0]&&Bt(l),A=l[14]&&zt();return{c(){e=f("ion-header"),t=f("ion-toolbar"),n=f("ion-buttons"),i=f("ion-button"),i.textContent=o,s=O(),a=f("ion-title"),a.textContent=d,E=O(),v=f("ion-content"),_=f("ion-list"),C.c(),m=O(),D&&D.c(),p=O(),b=f("ion-footer"),y=f("ion-button"),y.textContent=N,z=O(),A&&A.c(),x=De(),this.h()},l(I){e=h(I,"ION-HEADER",{translucent:!0});var T=g(e);t=h(T,"ION-TOOLBAR",{});var P=g(t);n=h(P,"ION-BUTTONS",{slot:!0});var M=g(n);i=h(M,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),te(i)!=="svelte-18837zq"&&(i.textContent=o),M.forEach(u),s=w(P),a=h(P,"ION-TITLE",{"data-svelte-h":!0}),te(a)!=="svelte-19bar5p"&&(a.textContent=d),P.forEach(u),T.forEach(u),E=w(I),v=h(I,"ION-CONTENT",{fullscreen:!0});var Y=g(v);_=h(Y,"ION-LIST",{});var ne=g(_);C.l(ne),m=w(ne),D&&D.l(ne),ne.forEach(u),Y.forEach(u),p=w(I),b=h(I,"ION-FOOTER",{});var ie=g(b);y=h(ie,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),te(y)!=="svelte-1vqzxem"&&(y.textContent=N),ie.forEach(u),z=w(I),A&&A.l(I),x=De(),this.h()},h(){k(i,"color","medium"),k(n,"slot","start"),k(e,"translucent",""),k(v,"fullscreen",""),k(y,"fill","outline"),k(y,"color","tertiary"),k(y,"strong",""),c(y,"width","99%"),c(y,"height","auto"),c(y,"margin-bottom","120px")},m(I,T){q(I,e,T),r(e,t),r(t,n),r(n,i),r(t,s),r(t,a),q(I,E,T),q(I,v,T),r(v,_),C.m(_,null),r(_,m),D&&D.m(_,null),q(I,p,T),q(I,b,T),r(b,y),q(I,z,T),A&&A.m(I,T),q(I,x,T),S||(B=[fe(i,"click",l[16]),fe(y,"click",l[17])],S=!0)},p(I,T){R===(R=W(I))&&C?C.p(I,T):(C.d(1),C=R(I),C&&(C.c(),C.m(_,m))),I[0]?D?D.p(I,T):(D=Bt(I),D.c(),D.m(_,null)):D&&(D.d(1),D=null),I[14]?A||(A=zt(),A.c(),A.m(x.parentNode,x)):A&&(A.d(1),A=null)},i:Ce,o:Ce,d(I){I&&(u(e),u(E),u(v),u(p),u(b),u(z),u(x)),C.d(),D&&D.d(),A&&A.d(I),S=!1,He(B)}}}function kt(l,e){if(typeof l=="object"&&l!==null||Array.isArray(l)){if(Array.isArray(l))return l.map(t=>kt(t,e)).flat();{const t=Object.keys(l);let n;return e=="id_checklist_event"?n=t.filter(o=>o.toLowerCase().includes("id_checklist_event")).map(o=>l[o]):e=="mandatory"?n=t.filter(o=>o.toLowerCase().includes("mandatory")).map(o=>l[o]):(console.error("Tipo de dato no reconocido."),n=!1),n}}else return console.error("Invalid input. Please provide a valid object or array."),[]}function vi(){return new Promise((l,e)=>{if(!navigator.geolocation)return e("Geoloc no soportada");navigator.geolocation.getCurrentPosition(t=>l({lat:+t.coords.latitude.toFixed(6),lng:+t.coords.longitude.toFixed(6)}),t=>e(t),{enableHighAccuracy:!0,maximumAge:0,timeout:8e3})})}function gi(l,e,t){let n=ft,i,o=[],s,a=!1,d,E,v,_,m=[],p=null,b={},y,N,z,x,S={},B=new Object,W=!1,R={},C={};ot(()=>{i=document.querySelector("ion-modal");const F=(i==null?void 0:i.componentProps)||{};if(t(0,o=F.checklist||[]),F.driverId,s=F.routeId,t(1,a=!!F.isLast),B=JSON.parse(localStorage.getItem("userSession")),a||bt.update(ue=>(ue.mandatory=kt(o,"mandatory"),ue.items=kt(o,"id_checklist_event"),ue)),i){i.breakpoints=[.25,.85,1],i.initialBreakpoint=.85;const ue=H=>{var Z;const K=(Z=H.detail)==null?void 0:Z.breakpoint;K&&K>=.6&&i.setCurrentBreakpoint(.95)};i.addEventListener("ionBreakpointDidChange",ue)}});function D(F){t(13,S[F]=!0,S)}const A=async()=>{await(await Qe.create({header:"Datos o checklist incompletos",message:"Carga la evidencia requerida y marca todas las casillas para confirmar",buttons:[{text:"Cerrar"}]})).present()},I=async(F,ue)=>{await(await Qe.create({header:F||"Error",message:ue||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},T=async F=>{await(await Qe.create({header:"Datos inválidos",message:F=="km"?"Llena correctamente el campo de kilometraje inicial":"Llena correctamente el campo de gasolina inicial",buttons:[{text:"Cerrar"}]})).present()},P=()=>{$e.dismiss()},M=async()=>{if(t(14,W=!0),a){const F=pe(v,"km"),ue=pe(_,"gas"),H={km_final:F,gas_final:ue,id_route:s,id_user_over:B.id_user,token:B.token};F&&ue?(P(),Ke(`${n}api/admin/checklist/add_evidence.php`,function(K){K.success?(t(14,W=!1),I("Datos capturados","El kilometraje y gasolina final fueron registrados correctamente, espere aprobación para finalizar ruta")):(t(14,W=!1),I("Error","Vuelva a intentar capturar los datos solicitados"))},H)):A()}else{const F=pe(d,"km"),ue=pe(E,"gas");let H=null;try{H=await vi()}catch(K){console.warn("GPS no disponible:",K)}bt.update(K=>{const Z=K.mandatory,me=K.items.filter((ee,he)=>K.mandatory[he]==="1").every(ee=>K.checkedIndices.includes(ee)),ce=Array.isArray(Z)&&Z.some(ee=>ee==="1")&&!me?"checklist-pending":"enroute";if(F&&ue){let ee=new FormData;ee=_e(ee),ee.append("km_inicial",F),ee.append("gas_inicial",ue),ee.append("id_route",s),H&&(ee.append("lat",H.lat),ee.append("lng",H.lng));for(const he in R)if(Object.prototype.hasOwnProperty.call(R,he)){const{img:Ne,img_id:Se}=R[he];ee.append(`selectedImages[${he}][img]`,Ne),ee.append(`selectedImages[${he}][img_id]`,Se)}fetch(`${n}api/admin/checklist/add_evidence.php`,{method:"POST",body:ee}).then(he=>he.json()).then(()=>{re(s,ce)}).catch(he=>{console.error("Error fetching data:",he)}).finally(()=>{t(14,W=!1),P()})}else(!F||!ue)&&A();return K})}ve()},Y=async(F,ue)=>{D(ue);const K=F.target.files[0],Z=await ne(K);if(Z){let Q=new FormData;Q.append("fileToUpload",Z),Q=_e(Q);try{const me=await fetch(`${n}api/admin/manager/upload_img_driver.php`,{method:"POST",body:Q});if(me.ok){const j=await me.json();R={...R,[ue]:{img:j.img,img_id:j.img_id}},t(15,C={...C,[ue]:j.filename}),ie(ue),t(8,b[ue].checked=!0,b),t(13,S[ue]=!1,S)}else console.error("File upload failed:",me.statusText)}catch(me){console.error("Error durante la carga del archivo:",me)}}},ne=async F=>new Promise(ue=>{const H=new Image;H.src=URL.createObjectURL(F),H.onload=()=>{const K=document.createElement("canvas"),Z=K.getContext("2d"),Q=800,me=600;let j=H.width,ce=H.height;j>Q&&(ce*=Q/j,j=Q),ce>me&&(j*=me/ce,ce=me),K.width=j,K.height=ce,Z.drawImage(H,0,0,j,ce),K.toBlob(ee=>{ue(ee),URL.revokeObjectURL(H.src),Z.clearRect(0,0,K.width,K.height)},"image/jpeg",.7)}}),ie=F=>{bt.update(ue=>(ue.checkedIndices.indexOf(F)===-1?ue.checkedIndices.push(F):console.error(`ID ${F} is already checked.`),ue.items.forEach(K=>{K.id_checklist_event===F&&(K.checked=!0)}),ue))};function re(F,ue){let H=new FormData;H.append("id_route",F),H.append("status",ue),H=_e(H),fetch(`${n}api/admin/route/change_status.php`,{method:"POST",body:H}).then(K=>K.json()).then(K=>{}).catch(K=>{console.error("Error fetching data:",K)})}function pe(F,ue){return/^\d+$/.test(F)?parseInt(F,10):(T(ue),null)}function L(F,ue){se(ue),i||(i=document.querySelector("ion-modal")),i&&(i.componentProps.data_type=ue),Ye("modal-gas-km",di,{r:ue},{breakpoints:[.25,.85,1],initialBreakpoint:.85,backdropBreakpoint:.25,handle:!0,handleBehavior:"cycle",canDismiss:!0,showBackdrop:!0}).then(()=>{lt.subscribe(H=>oe(H,ue))})}function se(F){xn.update(ue=>({...ue,flag:[F]}))}function oe(F,ue){t(2,d=F.km_inicial?F.km_inicial:null),t(3,E=F.gas_inicial?F.gas_inicial:null),t(4,v=F.km_final?F.km_final:null),t(5,_=F.gas_final?F.gas_final:null),ue=="km_inicial"&&y&&t(9,y.checked=!0,y),ue=="gas_inicial"&&N&&t(10,N.checked=!0,N),ue=="km_final"&&z&&t(11,z.checked=!0,z),ue=="gas_final"&&x&&t(12,x.checked=!0,x)}function ve(){lt.set({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]})}function _e(F){return F.append("token",B.token),F.append("id_user_over",B.id_user),F}const $=[[]];function ye(){m=st($[0],this.__value,this.checked),t(6,m)}function be(F){Be[F?"unshift":"push"](()=>{z=F,t(11,z)})}const le=F=>L(F,"km_final");function ke(){m=st($[0],this.__value,this.checked),t(6,m)}function Ie(F){Be[F?"unshift":"push"](()=>{x=F,t(12,x)})}const Ee=F=>L(F,"gas_final");function ge(){m=st($[0],this.__value,this.checked),t(6,m)}function U(F){Be[F?"unshift":"push"](()=>{y=F,t(9,y)})}const X=F=>L(F,"km_inicial");function V(F){Be[F?"unshift":"push"](()=>{N=F,t(10,N)})}function ae(){m=st($[0],this.__value,this.checked),t(6,m)}const J=F=>L(F,"gas_inicial");function de(){m=st($[0],this.__value,this.checked),t(6,m)}function Le(F,ue){Be[F?"unshift":"push"](()=>{b[ue.id_checklist_event]=F,t(8,b)})}const Pe=F=>ie(F.id_checklist_event);function xe(F){Be[F?"unshift":"push"](()=>{p=F,t(7,p)})}return[o,a,d,E,v,_,m,p,b,y,N,z,x,S,W,C,P,M,Y,ie,L,ye,$,be,le,ke,Ie,Ee,ge,U,X,V,ae,J,de,Le,Pe,xe,(F,ue)=>Y(ue,F.id_checklist_event)]}class Sn extends tt{constructor(e){super(),nt(this,e,gi,mi,et,{},null,[-1,-1])}}/*!
 * Signature Pad v5.0.10 | https://github.com/szimek/signature_pad
 * (c) 2025 Szymon Nowak | Released under the MIT license
 */class mt{constructor(e,t,n,i){if(isNaN(e)||isNaN(t))throw new Error(`Point is invalid: (${e}, ${t})`);this.x=+e,this.y=+t,this.pressure=n||0,this.time=i||Date.now()}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}equals(e){return this.x===e.x&&this.y===e.y&&this.pressure===e.pressure&&this.time===e.time}velocityFrom(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}}class xt{static fromPoints(e,t){const n=this.calculateControlPoints(e[0],e[1],e[2]).c2,i=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new xt(e[1],n,i,e[2],t.start,t.end)}static calculateControlPoints(e,t,n){const i=e.x-t.x,o=e.y-t.y,s=t.x-n.x,a=t.y-n.y,d={x:(e.x+t.x)/2,y:(e.y+t.y)/2},E={x:(t.x+n.x)/2,y:(t.y+n.y)/2},v=Math.sqrt(i*i+o*o),_=Math.sqrt(s*s+a*a),m=d.x-E.x,p=d.y-E.y,b=v+_==0?0:_/(v+_),y={x:E.x+m*b,y:E.y+p*b},N=t.x-y.x,z=t.y-y.y;return{c1:new mt(d.x+N,d.y+z),c2:new mt(E.x+N,E.y+z)}}constructor(e,t,n,i,o,s){this.startPoint=e,this.control2=t,this.control1=n,this.endPoint=i,this.startWidth=o,this.endWidth=s}length(){let t=0,n,i;for(let o=0;o<=10;o+=1){const s=o/10,a=this.point(s,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),d=this.point(s,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){const E=a-n,v=d-i;t+=Math.sqrt(E*E+v*v)}n=a,i=d}return t}point(e,t,n,i,o){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*i*(1-e)*e*e+o*e*e*e}}class bi{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(e,t,n){this._et.addEventListener(e,t,n)}dispatchEvent(e){return this._et.dispatchEvent(e)}removeEventListener(e,t,n){this._et.removeEventListener(e,t,n)}}function ki(l,e=250){let t=0,n=null,i,o,s;const a=()=>{t=Date.now(),n=null,i=l.apply(o,s),n||(o=null,s=[])};return function(...E){const v=Date.now(),_=e-(v-t);return o=this,s=E,_<=0||_>e?(n&&(clearTimeout(n),n=null),t=v,i=l.apply(o,s),n||(o=null,s=[])):n||(n=window.setTimeout(a,_)),i}}class vt extends bi{constructor(e,t={}){var n,i,o;super(),this.canvas=e,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle=(n=t.throttle)!==null&&n!==void 0?n:16,this.minDistance=(i=t.minDistance)!==null&&i!==void 0?i:5,this.dotSize=t.dotSize||0,this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=t.compositeOperation||"source-over",this.canvasContextOptions=(o=t.canvasContextOptions)!==null&&o!==void 0?o:{},this._strokeMoveUpdate=this.throttle?ki(vt.prototype._strokeUpdate,this.throttle):vt.prototype._strokeUpdate,this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this._handleTouchStart=this._handleTouchStart.bind(this),this._handleTouchMove=this._handleTouchMove.bind(this),this._handleTouchEnd=this._handleTouchEnd.bind(this),this._handlePointerDown=this._handlePointerDown.bind(this),this._handlePointerMove=this._handlePointerMove.bind(this),this._handlePointerUp=this._handlePointerUp.bind(this),this._ctx=e.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){const{_ctx:e,canvas:t}=this;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0,this._strokePointerId=void 0}fromDataURL(e,t={}){return new Promise((n,i)=>{const o=new Image,s=t.ratio||window.devicePixelRatio||1,a=t.width||this.canvas.width/s,d=t.height||this.canvas.height/s,E=t.xOffset||0,v=t.yOffset||0;this._reset(this._getPointGroupOptions()),o.onload=()=>{this._ctx.drawImage(o,E,v,a,d),n()},o.onerror=_=>{i(_)},o.crossOrigin="anonymous",o.src=e,this._isEmpty=!1})}toDataURL(e="image/png",t){switch(e){case"image/svg+xml":return typeof t!="object"&&(t=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(t))}`;default:return typeof t!="number"&&(t=void 0),this.canvas.toDataURL(e,t)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const e=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!e?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerDown),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this._removeMoveUpEventListeners()}_getListenerFunctions(){var e;const t=window.document===this.canvas.ownerDocument?window:(e=this.canvas.ownerDocument.defaultView)!==null&&e!==void 0?e:this.canvas.ownerDocument;return{addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}_removeMoveUpEventListeners(){const{removeEventListener:e}=this._getListenerFunctions();e("pointermove",this._handlePointerMove),e("pointerup",this._handlePointerUp),e("mousemove",this._handleMouseMove),e("mouseup",this._handleMouseUp),e("touchmove",this._handleTouchMove),e("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(e,{clear:t=!0}={}){t&&this.clear(),this._fromData(e,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(e)}toData(){return this._data}_isLeftButtonPressed(e,t){return t?e.buttons===1:(e.buttons&1)===1}_pointerEventToSignatureEvent(e){return{event:e,type:e.type,x:e.clientX,y:e.clientY,pressure:"pressure"in e?e.pressure:0}}_touchEventToSignatureEvent(e){const t=e.changedTouches[0];return{event:e,type:e.type,x:t.clientX,y:t.clientY,pressure:t.force}}_handleMouseDown(e){!this._isLeftButtonPressed(e,!0)||this._drawingStroke||this._strokeBegin(this._pointerEventToSignatureEvent(e))}_handleMouseMove(e){if(!this._isLeftButtonPressed(e,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(e),!1);return}this._strokeMoveUpdate(this._pointerEventToSignatureEvent(e))}_handleMouseUp(e){this._isLeftButtonPressed(e)||this._strokeEnd(this._pointerEventToSignatureEvent(e))}_handleTouchStart(e){e.targetTouches.length!==1||this._drawingStroke||(e.cancelable&&e.preventDefault(),this._strokeBegin(this._touchEventToSignatureEvent(e)))}_handleTouchMove(e){if(e.targetTouches.length===1){if(e.cancelable&&e.preventDefault(),!this._drawingStroke){this._strokeEnd(this._touchEventToSignatureEvent(e),!1);return}this._strokeMoveUpdate(this._touchEventToSignatureEvent(e))}}_handleTouchEnd(e){e.targetTouches.length===0&&(e.cancelable&&e.preventDefault(),this._strokeEnd(this._touchEventToSignatureEvent(e)))}_getPointerId(e){return e.persistentDeviceId||e.pointerId}_allowPointerId(e,t=!1){return typeof this._strokePointerId>"u"?t:this._getPointerId(e)===this._strokePointerId}_handlePointerDown(e){this._drawingStroke||!this._isLeftButtonPressed(e)||!this._allowPointerId(e,!0)||(this._strokePointerId=this._getPointerId(e),e.preventDefault(),this._strokeBegin(this._pointerEventToSignatureEvent(e)))}_handlePointerMove(e){if(this._allowPointerId(e)){if(!this._isLeftButtonPressed(e,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(e),!1);return}e.preventDefault(),this._strokeMoveUpdate(this._pointerEventToSignatureEvent(e))}}_handlePointerUp(e){this._isLeftButtonPressed(e)||!this._allowPointerId(e)||(e.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(e)))}_getPointGroupOptions(e){return{penColor:e&&"penColor"in e?e.penColor:this.penColor,dotSize:e&&"dotSize"in e?e.dotSize:this.dotSize,minWidth:e&&"minWidth"in e?e.minWidth:this.minWidth,maxWidth:e&&"maxWidth"in e?e.maxWidth:this.maxWidth,velocityFilterWeight:e&&"velocityFilterWeight"in e?e.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:e&&"compositeOperation"in e?e.compositeOperation:this.compositeOperation}}_strokeBegin(e){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:e,cancelable:!0})))return;const{addEventListener:n}=this._getListenerFunctions();switch(e.event.type){case"mousedown":n("mousemove",this._handleMouseMove,{passive:!1}),n("mouseup",this._handleMouseUp,{passive:!1});break;case"touchstart":n("touchmove",this._handleTouchMove,{passive:!1}),n("touchend",this._handleTouchEnd,{passive:!1});break;case"pointerdown":n("pointermove",this._handlePointerMove,{passive:!1}),n("pointerup",this._handlePointerUp,{passive:!1});break}this._drawingStroke=!0;const i=this._getPointGroupOptions(),o=Object.assign(Object.assign({},i),{points:[]});this._data.push(o),this._reset(i),this._strokeUpdate(e)}_strokeUpdate(e){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(e);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:e}));const t=this._createPoint(e.x,e.y,e.pressure),n=this._data[this._data.length-1],i=n.points,o=i.length>0&&i[i.length-1],s=o?t.distanceTo(o)<=this.minDistance:!1,a=this._getPointGroupOptions(n);if(!o||!(o&&s)){const d=this._addPoint(t,a);o?d&&this._drawCurve(d,a):this._drawDot(t,a),i.push({time:t.time,x:t.x,y:t.y,pressure:t.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:e}))}_strokeEnd(e,t=!0){this._removeMoveUpEventListeners(),this._drawingStroke&&(t&&this._strokeUpdate(e),this._drawingStroke=!1,this._strokePointerId=void 0,this.dispatchEvent(new CustomEvent("endStroke",{detail:e})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerDown,{passive:!1})}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown,{passive:!1})}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart,{passive:!1})}_reset(e){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(e.minWidth+e.maxWidth)/2,this._ctx.fillStyle=e.penColor,this._ctx.globalCompositeOperation=e.compositeOperation}_createPoint(e,t,n){const i=this.canvas.getBoundingClientRect();return new mt(e-i.left,t-i.top,n,new Date().getTime())}_addPoint(e,t){const{_lastPoints:n}=this;if(n.push(e),n.length>2){n.length===3&&n.unshift(n[0]);const i=this._calculateCurveWidths(n[1],n[2],t),o=xt.fromPoints(n,i);return n.shift(),o}return null}_calculateCurveWidths(e,t,n){const i=n.velocityFilterWeight*t.velocityFrom(e)+(1-n.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(i,n),s={end:o,start:this._lastWidth};return this._lastVelocity=i,this._lastWidth=o,s}_strokeWidth(e,t){return Math.max(t.maxWidth/(e+1),t.minWidth)}_drawCurveSegment(e,t,n){const i=this._ctx;i.moveTo(e,t),i.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(e,t){const n=this._ctx,i=e.endWidth-e.startWidth,o=Math.ceil(e.length())*2;n.beginPath(),n.fillStyle=t.penColor;for(let s=0;s<o;s+=1){const a=s/o,d=a*a,E=d*a,v=1-a,_=v*v,m=_*v;let p=m*e.startPoint.x;p+=3*_*a*e.control1.x,p+=3*v*d*e.control2.x,p+=E*e.endPoint.x;let b=m*e.startPoint.y;b+=3*_*a*e.control1.y,b+=3*v*d*e.control2.y,b+=E*e.endPoint.y;const y=Math.min(e.startWidth+E*i,t.maxWidth);this._drawCurveSegment(p,b,y)}n.closePath(),n.fill()}_drawDot(e,t){const n=this._ctx,i=t.dotSize>0?t.dotSize:(t.minWidth+t.maxWidth)/2;n.beginPath(),this._drawCurveSegment(e.x,e.y,i),n.closePath(),n.fillStyle=t.penColor,n.fill()}_fromData(e,t,n){for(const i of e){const{points:o}=i,s=this._getPointGroupOptions(i);if(o.length>1)for(let a=0;a<o.length;a+=1){const d=o[a],E=new mt(d.x,d.y,d.pressure,d.time);a===0&&this._reset(s);const v=this._addPoint(E,s);v&&t(v,s)}else this._reset(s),n(o[0],s)}}toSVG({includeBackgroundColor:e=!1}={}){const t=this._data,n=Math.max(window.devicePixelRatio||1,1),i=0,o=0,s=this.canvas.width/n,a=this.canvas.height/n,d=document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.setAttribute("xmlns","http://www.w3.org/2000/svg"),d.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),d.setAttribute("viewBox",`${i} ${o} ${s} ${a}`),d.setAttribute("width",s.toString()),d.setAttribute("height",a.toString()),e&&this.backgroundColor){const E=document.createElement("rect");E.setAttribute("width","100%"),E.setAttribute("height","100%"),E.setAttribute("fill",this.backgroundColor),d.appendChild(E)}return this._fromData(t,(E,{penColor:v})=>{const _=document.createElement("path");if(!isNaN(E.control1.x)&&!isNaN(E.control1.y)&&!isNaN(E.control2.x)&&!isNaN(E.control2.y)){const m=`M ${E.startPoint.x.toFixed(3)},${E.startPoint.y.toFixed(3)} C ${E.control1.x.toFixed(3)},${E.control1.y.toFixed(3)} ${E.control2.x.toFixed(3)},${E.control2.y.toFixed(3)} ${E.endPoint.x.toFixed(3)},${E.endPoint.y.toFixed(3)}`;_.setAttribute("d",m),_.setAttribute("stroke-width",(E.endWidth*2.25).toFixed(3)),_.setAttribute("stroke",v),_.setAttribute("fill","none"),_.setAttribute("stroke-linecap","round"),d.appendChild(_)}},(E,{penColor:v,dotSize:_,minWidth:m,maxWidth:p})=>{const b=document.createElement("circle"),y=_>0?_:(m+p)/2;b.setAttribute("r",y.toString()),b.setAttribute("cx",E.x.toString()),b.setAttribute("cy",E.y.toString()),b.setAttribute("fill",v),d.appendChild(b)}),d.outerHTML}}function Ei(l){let e,t;return{c(){e=f("div"),t=f("canvas"),this.h()},l(n){e=h(n,"DIV",{class:!0,style:!0});var i=g(e);t=h(i,"CANVAS",{class:!0,style:!0}),g(t).forEach(u),i.forEach(u),this.h()},h(){G(t,"class","signature-canvas"),c(t,"position","absolute"),c(t,"top","0"),c(t,"left","0"),c(t,"width","100%"),c(t,"height","100%"),c(t,"display","block"),G(e,"class","signature-container"),c(e,"position","relative"),c(e,"width","100%"),c(e,"height","150px"),c(e,"border","1px solid #ccc"),c(e,"border-radius","4px"),c(e,"touch-action","none"),c(e,"-ms-touch-action","none")},m(n,i){q(n,e,i),r(e,t),l[5](t),l[6](e)},p:Ce,i:Ce,o:Ce,d(n){n&&u(e),l[5](null),l[6](null)}}}function Ii(l,e,t){let n,i,o,s;function a(){o&&o.clear()}async function d(p="image/png"){return!o||o.isEmpty()?(await(await Qe.create({header:"Firma vacía",message:"No existe firma por guardar",buttons:[{text:"Cerrar"}]})).present(),null):o.toDataURL(p)}function E(){v(),o&&o.clear()}function v(){const p=Math.max(window.devicePixelRatio||1,1),b=i.clientWidth,y=i.clientHeight;if(!b||!y)return;const N=32767,z=Math.min(p,N/b,N/y);t(0,n.width=Math.floor(b*z),n),t(0,n.height=Math.floor(y*z),n);const x=n.getContext("2d");try{x.scale(z,z)}catch(S){console.warn("Canvas scale failed:",S)}}ot(async()=>{await Ot(),v(),o=new vt(n,{backgroundColor:"rgba(255, 255, 255, 0)",penColor:"black"}),s=new ResizeObserver(v),s.observe(i)}),Dn(()=>{s&&s.disconnect()});function _(p){Be[p?"unshift":"push"](()=>{n=p,t(0,n)})}function m(p){Be[p?"unshift":"push"](()=>{i=p,t(1,i)})}return[n,i,a,d,E,_,m]}class yi extends tt{constructor(e){super(),nt(this,e,Ii,Ei,et,{clear:2,save:3,reset:4})}get clear(){return this.$$.ctx[2]}get save(){return this.$$.ctx[3]}get reset(){return this.$$.ctx[4]}}function Oi(l){let e,t,n,i,o="Cancelar",s,a,d="Firmar",E,v,_,m,p,b,y,N="Borrar",z,x,S="Guardar",B,W,R,C={};return m=new yi({props:C}),l[4](m),{c(){e=f("ion-header"),t=f("ion-toolbar"),n=f("ion-buttons"),i=f("ion-button"),i.textContent=o,s=O(),a=f("ion-title"),a.textContent=d,E=O(),v=f("ion-content"),_=f("section"),yn(m.$$.fragment),p=O(),b=f("div"),y=f("ion-button"),y.textContent=N,z=O(),x=f("ion-button"),x.textContent=S,this.h()},l(D){e=h(D,"ION-HEADER",{translucent:!0});var A=g(e);t=h(A,"ION-TOOLBAR",{});var I=g(t);n=h(I,"ION-BUTTONS",{slot:!0});var T=g(n);i=h(T,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),te(i)!=="svelte-sam1rw"&&(i.textContent=o),T.forEach(u),s=w(I),a=h(I,"ION-TITLE",{"data-svelte-h":!0}),te(a)!=="svelte-1ibb3l9"&&(a.textContent=d),I.forEach(u),A.forEach(u),E=w(D),v=h(D,"ION-CONTENT",{fullscreen:!0,scrollY:!0,class:!0});var P=g(v);_=h(P,"SECTION",{style:!0});var M=g(_);On(m.$$.fragment,M),p=w(M),b=h(M,"DIV",{style:!0});var Y=g(b);y=h(Y,"ION-BUTTON",{fill:!0,style:!0,"data-svelte-h":!0}),te(y)!=="svelte-1rt6y6r"&&(y.textContent=N),z=w(Y),x=h(Y,"ION-BUTTON",{style:!0,"data-svelte-h":!0}),te(x)!=="svelte-7uw5bf"&&(x.textContent=S),Y.forEach(u),M.forEach(u),P.forEach(u),this.h()},h(){k(i,"color","medium"),k(n,"slot","start"),k(e,"translucent",""),k(y,"fill","outline"),c(y,"flex","1"),c(x,"flex","1"),c(b,"display","flex"),c(b,"gap","8px"),c(_,"display","flex"),c(_,"flex-direction","column"),c(_,"gap","12px"),c(_,"padding","16px"),k(v,"fullscreen",""),k(v,"scrollY",!1),k(v,"class","no-scroll svelte-1mh8gy4")},m(D,A){q(D,e,A),r(e,t),r(t,n),r(n,i),r(t,s),r(t,a),q(D,E,A),q(D,v,A),r(v,_),wn(m,_,null),r(_,p),r(_,b),r(b,y),r(b,z),r(b,x),B=!0,W||(R=[fe(i,"click",l[1]),fe(y,"click",l[3]),fe(x,"click",l[2])],W=!0)},p(D,[A]){const I={};m.$set(I)},i(D){B||(ct(m.$$.fragment,D),B=!0)},o(D){_t(m.$$.fragment,D),B=!1},d(D){D&&(u(e),u(E),u(v)),l[4](null),Nn(m),W=!1,He(R)}}}function wi(l,e,t){let n;function i(){$e.dismiss(void 0,"cancel")}async function o(){const d=await n.save();d&&$e.dismiss({dataUrl:d},"confirm")}function s(){n.clear()}function a(d){Be[d?"unshift":"push"](()=>{n=d,t(0,n)})}return[n,i,o,s,a]}class Ni extends tt{constructor(e){super(),nt(this,e,wi,Oi,et,{})}}function Ht(l,e,t){const n=l.slice();return n[60]=e[t],n[62]=t,n}function Ti(l){let e,t,n,i,o;return{c(){e=f("ion-buttons"),t=f("ion-button"),n=Oe("Confirmar"),this.h()},l(s){e=h(s,"ION-BUTTONS",{slot:!0});var a=g(e);t=h(a,"ION-BUTTON",{strong:!0,disabled:!0});var d=g(t);n=we(d,"Confirmar"),d.forEach(u),a.forEach(u),this.h()},h(){k(t,"strong",""),k(t,"disabled",l[21]()),k(e,"slot","end")},m(s,a){q(s,e,a),r(e,t),r(t,n),i||(o=fe(t,"click",l[24]),i=!0)},p:Ce,d(s){s&&u(e),i=!1,o()}}}function Ci(l){let e,t,n,i,o,s="Empresa",a,d,E=l[10].enterprise_name+"",v;return{c(){e=f("ion-item"),t=f("ion-icon"),n=O(),i=f("ion-label"),o=f("p"),o.textContent=s,a=O(),d=f("h2"),v=Oe(E),this.h()},l(_){e=h(_,"ION-ITEM",{});var m=g(e);t=h(m,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=w(m),i=h(m,"ION-LABEL",{});var p=g(i);o=h(p,"P",{"data-svelte-h":!0}),te(o)!=="svelte-6noid3"&&(o.textContent=s),a=w(p),d=h(p,"H2",{});var b=g(d);v=we(b,E),b.forEach(u),p.forEach(u),m.forEach(u),this.h()},h(){k(t,"icon",Mn),k(t,"slot","start")},m(_,m){q(_,e,m),r(e,t),r(e,n),r(e,i),r(i,o),r(i,a),r(i,d),r(d,v)},p:Ce,d(_){_&&u(e)}}}function Li(l){let e,t,n,i,o,s="Negocio",a,d,E=l[10].client_name+"",v;return{c(){e=f("ion-item"),t=f("ion-icon"),n=O(),i=f("ion-label"),o=f("p"),o.textContent=s,a=O(),d=f("h2"),v=Oe(E),this.h()},l(_){e=h(_,"ION-ITEM",{});var m=g(e);t=h(m,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=w(m),i=h(m,"ION-LABEL",{});var p=g(i);o=h(p,"P",{"data-svelte-h":!0}),te(o)!=="svelte-57b1dg"&&(o.textContent=s),a=w(p),d=h(p,"H2",{});var b=g(d);v=we(b,E),b.forEach(u),p.forEach(u),m.forEach(u),this.h()},h(){k(t,"icon",Mn),k(t,"slot","start")},m(_,m){q(_,e,m),r(e,t),r(e,n),r(e,i),r(i,o),r(i,a),r(i,d),r(d,v)},p:Ce,d(_){_&&u(e)}}}function Mi(l){let e,t,n,i,o,s="Teléfono de Negocio",a,d,E=l[10].client_phone+"",v;return{c(){e=f("ion-item"),t=f("ion-icon"),n=O(),i=f("ion-label"),o=f("p"),o.textContent=s,a=O(),d=f("h2"),v=Oe(E),this.h()},l(_){e=h(_,"ION-ITEM",{href:!0});var m=g(e);t=h(m,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=w(m),i=h(m,"ION-LABEL",{class:!0});var p=g(i);o=h(p,"P",{"data-svelte-h":!0}),te(o)!=="svelte-1u5l7fz"&&(o.textContent=s),a=w(p),d=h(p,"H2",{});var b=g(d);v=we(b,E),b.forEach(u),p.forEach(u),m.forEach(u),this.h()},h(){k(t,"icon",Rn),k(t,"slot","start"),k(i,"class","ion-text-wrap"),k(e,"href","tel:"+l[10].client_phone)},m(_,m){q(_,e,m),r(e,t),r(e,n),r(e,i),r(i,o),r(i,a),r(i,d),r(d,v)},p:Ce,d(_){_&&u(e)}}}function xi(l){let e,t,n,i,o,s="Domicilio Alternativo",a,d,E=l[10].line2+"",v,_,m;return{c(){e=f("ion-item"),t=f("ion-icon"),n=O(),i=f("ion-label"),o=f("p"),o.textContent=s,a=O(),d=f("h2"),v=Oe(E),_=O(),m=f("ion-icon"),this.h()},l(p){e=h(p,"ION-ITEM",{href:!0});var b=g(e);t=h(b,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=w(b),i=h(b,"ION-LABEL",{class:!0});var y=g(i);o=h(y,"P",{"data-svelte-h":!0}),te(o)!=="svelte-1ub9uzw"&&(o.textContent=s),a=w(y),d=h(y,"H2",{});var N=g(d);v=we(N,E),N.forEach(u),y.forEach(u),_=w(b),m=h(b,"ION-ICON",{icon:!0,slot:!0}),g(m).forEach(u),b.forEach(u),this.h()},h(){k(t,"icon",Ct),k(t,"slot","start"),k(i,"class","ion-text-wrap"),k(m,"icon",Je),k(m,"slot","end"),k(e,"href","https://www.google.com/maps/searhc/?api=1&query="+l[10].line2)},m(p,b){q(p,e,b),r(e,t),r(e,n),r(e,i),r(i,o),r(i,a),r(i,d),r(d,v),r(e,_),r(e,m)},p:Ce,d(p){p&&u(e)}}}function Si(l){let e,t,n,i,o,s="Domicilio",a,d,E=l[10].line1+"",v,_,m,p,b=l[10].line2&&l[10].line2.trim().length,y,N=b&&Ai(l);return{c(){e=f("ion-item"),t=f("ion-icon"),n=O(),i=f("ion-label"),o=f("p"),o.textContent=s,a=O(),d=f("h2"),v=Oe(E),_=O(),m=f("ion-icon"),p=O(),N&&N.c(),y=De(),this.h()},l(z){e=h(z,"ION-ITEM",{href:!0});var x=g(e);t=h(x,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=w(x),i=h(x,"ION-LABEL",{class:!0});var S=g(i);o=h(S,"P",{"data-svelte-h":!0}),te(o)!=="svelte-cbm7q1"&&(o.textContent=s),a=w(S),d=h(S,"H2",{});var B=g(d);v=we(B,E),B.forEach(u),S.forEach(u),_=w(x),m=h(x,"ION-ICON",{icon:!0,slot:!0}),g(m).forEach(u),x.forEach(u),p=w(z),N&&N.l(z),y=De(),this.h()},h(){k(t,"icon",Ct),k(t,"slot","start"),k(i,"class","ion-text-wrap"),k(m,"icon",Je),k(m,"slot","end"),k(e,"href","https://www.google.com/maps/search/?api=1&query="+l[10].line1)},m(z,x){q(z,e,x),r(e,t),r(e,n),r(e,i),r(i,o),r(i,a),r(i,d),r(d,v),r(e,_),r(e,m),q(z,p,x),N&&N.m(z,x),q(z,y,x)},p(z,x){b&&N.p(z,x)},d(z){z&&(u(e),u(p),u(y)),N&&N.d(z)}}}function Ai(l){let e,t,n,i,o,s="Domicilio Alternativo",a,d,E=l[10].line2+"",v,_,m;return{c(){e=f("ion-item"),t=f("ion-icon"),n=O(),i=f("ion-label"),o=f("p"),o.textContent=s,a=O(),d=f("h2"),v=Oe(E),_=O(),m=f("ion-icon"),this.h()},l(p){e=h(p,"ION-ITEM",{href:!0});var b=g(e);t=h(b,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=w(b),i=h(b,"ION-LABEL",{class:!0});var y=g(i);o=h(y,"P",{"data-svelte-h":!0}),te(o)!=="svelte-1ub9uzw"&&(o.textContent=s),a=w(y),d=h(y,"H2",{});var N=g(d);v=we(N,E),N.forEach(u),y.forEach(u),_=w(b),m=h(b,"ION-ICON",{icon:!0,slot:!0}),g(m).forEach(u),b.forEach(u),this.h()},h(){k(t,"icon",Ct),k(t,"slot","start"),k(i,"class","ion-text-wrap"),k(m,"icon",Je),k(m,"slot","end"),k(e,"href","https://www.google.com/maps/search/?api=1&query="+l[10].line2)},m(p,b){q(p,e,b),r(e,t),r(e,n),r(e,i),r(i,o),r(i,a),r(i,d),r(d,v),r(e,_),r(e,m)},p:Ce,d(p){p&&u(e)}}}function Pi(l){let e,t,n,i,o,s="Contacto del Cliente",a,d,E,v,_=l[15]&&l[15]==="1"&&Di(l);return{c(){e=f("ion-item"),t=f("ion-icon"),n=O(),i=f("ion-label"),o=f("p"),o.textContent=s,a=O(),d=f("h2"),E=Oe(l[17]),v=O(),_&&_.c(),this.h()},l(m){e=h(m,"ION-ITEM",{});var p=g(e);t=h(p,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=w(p),i=h(p,"ION-LABEL",{class:!0});var b=g(i);o=h(b,"P",{"data-svelte-h":!0}),te(o)!=="svelte-1utsyb6"&&(o.textContent=s),a=w(b),d=h(b,"H2",{});var y=g(d);E=we(y,l[17]),y.forEach(u),b.forEach(u),v=w(p),_&&_.l(p),p.forEach(u),this.h()},h(){k(t,"icon",Vn),k(t,"slot","start"),k(i,"class","ion-text-wrap")},m(m,p){q(m,e,p),r(e,t),r(e,n),r(e,i),r(i,o),r(i,a),r(i,d),r(d,E),r(e,v),_&&_.m(e,null)},p(m,p){m[15]&&m[15]==="1"&&_.p(m,p)},d(m){m&&u(e),_&&_.d()}}}function Di(l){let e,t=`<ion-icon icon="${Gn}" slot="start"></ion-icon>
                        Notificar Cliente`,n,i;return{c(){e=f("ion-button"),e.innerHTML=t,this.h()},l(o){e=h(o,"ION-BUTTON",{fill:!0,style:!0,"data-svelte-h":!0}),te(e)!=="svelte-149vhpt"&&(e.innerHTML=t),this.h()},h(){k(e,"fill","outline"),c(e,"margin-left","16px")},m(o,s){q(o,e,s),n||(i=fe(e,"click",l[25]),n=!0)},p:Ce,d(o){o&&u(e),n=!1,i()}}}function Bi(l){let e,t,n,i,o,s="Notas de ubicación",a,d,E;return{c(){e=f("ion-item"),t=f("ion-icon"),n=O(),i=f("ion-label"),o=f("p"),o.textContent=s,a=O(),d=f("h2"),E=Oe(l[18]),this.h()},l(v){e=h(v,"ION-ITEM",{});var _=g(e);t=h(_,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=w(_),i=h(_,"ION-LABEL",{class:!0});var m=g(i);o=h(m,"P",{"data-svelte-h":!0}),te(o)!=="svelte-nhm2ft"&&(o.textContent=s),a=w(m),d=h(m,"H2",{});var p=g(d);E=we(p,l[18]),p.forEach(u),m.forEach(u),_.forEach(u),this.h()},h(){k(t,"icon",Tn),k(t,"slot","start"),k(i,"class","ion-text-wrap")},m(v,_){q(v,e,_),r(e,t),r(e,n),r(e,i),r(i,o),r(i,a),r(i,d),r(d,E)},p:Ce,d(v){v&&u(e)}}}function Ui(l){let e,t,n,i,o,s="Horarios",a,d,E=l[10].schedule+"",v;return{c(){e=f("ion-item"),t=f("ion-icon"),n=O(),i=f("ion-label"),o=f("p"),o.textContent=s,a=O(),d=f("h2"),v=Oe(E),this.h()},l(_){e=h(_,"ION-ITEM",{});var m=g(e);t=h(m,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=w(m),i=h(m,"ION-LABEL",{});var p=g(i);o=h(p,"P",{"data-svelte-h":!0}),te(o)!=="svelte-11q7hm5"&&(o.textContent=s),a=w(p),d=h(p,"H2",{});var b=g(d);v=we(b,E),b.forEach(u),p.forEach(u),m.forEach(u),this.h()},h(){k(t,"icon",Fn),k(t,"slot","start")},m(_,m){q(_,e,m),r(e,t),r(e,n),r(e,i),r(i,o),r(i,a),r(i,d),r(d,v)},p:Ce,d(_){_&&u(e)}}}function zi(l){let e,t,n,i,o,s="Notas del operador",a,d,E=l[10].driver_comments+"",v;return{c(){e=f("ion-item"),t=f("ion-icon"),n=O(),i=f("ion-label"),o=f("p"),o.textContent=s,a=O(),d=f("h2"),v=Oe(E),this.h()},l(_){e=h(_,"ION-ITEM",{});var m=g(e);t=h(m,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=w(m),i=h(m,"ION-LABEL",{});var p=g(i);o=h(p,"P",{"data-svelte-h":!0}),te(o)!=="svelte-1yk9qp4"&&(o.textContent=s),a=w(p),d=h(p,"H2",{});var b=g(d);v=we(b,E),b.forEach(u),p.forEach(u),m.forEach(u),this.h()},h(){k(t,"icon",Cn),k(t,"slot","start")},m(_,m){q(_,e,m),r(e,t),r(e,n),r(e,i),r(i,o),r(i,a),r(i,d),r(d,v)},p:Ce,d(_){_&&u(e)}}}function Hi(l){let e,t=l[10].logistic_comments!="<br>"&&Ri(l);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,i){t&&t.m(n,i),q(n,e,i)},p(n,i){n[10].logistic_comments!="<br>"&&t.p(n,i)},d(n){n&&u(e),t&&t.d(n)}}}function Ri(l){let e,t,n,i,o,s="Comentarios logísticos",a,d,E=l[10].logistic_comments+"",v;return{c(){e=f("ion-item"),t=f("ion-icon"),n=O(),i=f("ion-label"),o=f("p"),o.textContent=s,a=O(),d=f("h2"),v=Oe(E),this.h()},l(_){e=h(_,"ION-ITEM",{});var m=g(e);t=h(m,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=w(m),i=h(m,"ION-LABEL",{class:!0});var p=g(i);o=h(p,"P",{"data-svelte-h":!0}),te(o)!=="svelte-1iz85r6"&&(o.textContent=s),a=w(p),d=h(p,"H2",{});var b=g(d);v=we(b,E),b.forEach(u),p.forEach(u),m.forEach(u),this.h()},h(){k(t,"icon",Tn),k(t,"slot","start"),k(i,"class","ion-text-wrap")},m(_,m){q(_,e,m),r(e,t),r(e,n),r(e,i),r(i,o),r(i,a),r(i,d),r(d,v)},p:Ce,d(_){_&&u(e)}}}function Vi(l){let e,t,n,i,o="<p>Etiqueta</p>",s,a,d=(l[10].tag?l[10].tag:"")+"",E;return{c(){e=f("ion-item"),t=f("ion-icon"),n=O(),i=f("ion-label"),i.innerHTML=o,s=O(),a=f("div"),E=Oe(d),this.h()},l(v){e=h(v,"ION-ITEM",{});var _=g(e);t=h(_,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=w(_),i=h(_,"ION-LABEL",{class:!0,"data-svelte-h":!0}),te(i)!=="svelte-50rr6d"&&(i.innerHTML=o),s=w(_),a=h(_,"DIV",{class:!0,style:!0});var m=g(a);E=we(m,d),m.forEach(u),_.forEach(u),this.h()},h(){k(t,"icon",qn),k(t,"slot","start"),k(i,"class","ion-text-wrap"),G(a,"class","stop-tag"),c(a,"background-color",l[19]),c(a,"border","1px solid "+l[20]),c(a,"color",l[10].tag_color),c(a,"font-size","14px"),c(a,"text-align","center"),c(a,"align-content","center"),c(a,"border-radius","20px"),c(a,"white-space","normal"),c(a,"padding","4px 8px"),c(a,"width","auto",1),c(a,"display","inline-block")},m(v,_){q(v,e,_),r(e,t),r(e,n),r(e,i),r(e,s),r(e,a),r(a,E)},p:Ce,d(v){v&&u(e)}}}function Fi(l){let e,t,n,i,o="<p>Estado de entrega</p>",s,a,d,E="Entregado",v,_,m="No Entregado",p,b,y="Entrega Parcial",N,z,x,S,B,W="<p>Notas</p>",R,C,D,A,I=!l[13]&&qi(l);return{c(){e=f("ion-item"),t=f("ion-icon"),n=O(),i=f("ion-label"),i.innerHTML=o,s=O(),a=f("ion-select"),d=f("ion-select-option"),d.textContent=E,v=O(),_=f("ion-select-option"),_.textContent=m,p=O(),b=f("ion-select-option"),b.textContent=y,N=O(),z=f("ion-item"),x=f("ion-icon"),S=O(),B=f("ion-label"),B.innerHTML=W,R=O(),C=f("ion-textarea"),D=O(),I&&I.c(),A=De(),this.h()},l(T){e=h(T,"ION-ITEM",{});var P=g(e);t=h(P,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=w(P),i=h(P,"ION-LABEL",{class:!0,"data-svelte-h":!0}),te(i)!=="svelte-1ql9csq"&&(i.innerHTML=o),s=w(P),a=h(P,"ION-SELECT",{value:!0,disabled:!0});var M=g(a);d=h(M,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),te(d)!=="svelte-1nhq8vd"&&(d.textContent=E),v=w(M),_=h(M,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),te(_)!=="svelte-dhd4r3"&&(_.textContent=m),p=w(M),b=h(M,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),te(b)!=="svelte-17taxwo"&&(b.textContent=y),M.forEach(u),P.forEach(u),N=w(T),z=h(T,"ION-ITEM",{});var Y=g(z);x=h(Y,"ION-ICON",{icon:!0,slot:!0}),g(x).forEach(u),S=w(Y),B=h(Y,"ION-LABEL",{class:!0,"data-svelte-h":!0}),te(B)!=="svelte-c9yniu"&&(B.innerHTML=W),R=w(Y),C=h(Y,"ION-TEXTAREA",{placeholder:!0,readonly:!0,disabled:!0}),g(C).forEach(u),Y.forEach(u),D=w(T),I&&I.l(T),A=De(),this.h()},h(){k(t,"icon",Wn),k(t,"slot","start"),k(i,"class","ion-text-wrap"),k(d,"value","delivered"),k(_,"value","notdelivered"),k(b,"value","partialdeliver"),k(a,"value",l[14]?l[14]:"delivered"),k(a,"disabled",l[13]),k(x,"icon",pt),k(x,"slot","start"),k(B,"class","ion-text-wrap"),k(C,"placeholder","Escribe aquí..."),k(C,"readonly",l[13]),k(C,"disabled",l[13])},m(T,P){q(T,e,P),r(e,t),r(e,n),r(e,i),r(e,s),r(e,a),r(a,d),r(a,v),r(a,_),r(a,p),r(a,b),l[33](a),q(T,N,P),q(T,z,P),r(z,x),r(z,S),r(z,B),r(z,R),r(z,C),l[34](C),q(T,D,P),I&&I.m(T,P),q(T,A,P)},p(T,P){T[13]||I.p(T,P)},d(T){T&&(u(e),u(N),u(z),u(D),u(A)),l[33](null),l[34](null),I&&I.d(T)}}}function qi(l){let e,t,n=l[5]===!0&&Rt(l),i=(l[6]===!0||l[6]===!1&&l[5]===!1)&&Vt(l);return{c(){e=f("section"),n&&n.c(),t=O(),i&&i.c(),this.h()},l(o){e=h(o,"SECTION",{style:!0});var s=g(e);n&&n.l(s),t=w(s),i&&i.l(s),s.forEach(u),this.h()},h(){c(e,"display","flex"),c(e,"gap","8px"),c(e,"padding","16px 16px 6px")},m(o,s){q(o,e,s),n&&n.m(e,null),r(e,t),i&&i.m(e,null)},p(o,s){o[5]===!0?n?n.p(o,s):(n=Rt(o),n.c(),n.m(e,t)):n&&(n.d(1),n=null),o[6]===!0||o[6]===!1&&o[5]===!1?i?i.p(o,s):(i=Vt(o),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(o){o&&u(e),n&&n.d(),i&&i.d()}}}function Rt(l){let e,t=`<ion-icon icon="${Kn}" slot="start"></ion-icon>
                        Ingreso`,n,i;return{c(){e=f("ion-button"),e.innerHTML=t,this.h()},l(o){e=h(o,"ION-BUTTON",{id:!0,style:!0,"data-svelte-h":!0}),te(e)!=="svelte-izs0s1"&&(e.innerHTML=t),this.h()},h(){k(e,"id","checkInBtn"),c(e,"flex","1")},m(o,s){q(o,e,s),n||(i=fe(e,"click",l[26]),n=!0)},p:Ce,d(o){o&&u(e),n=!1,i()}}}function Vt(l){let e,t,n,i,o,s;return{c(){e=f("ion-button"),t=f("ion-icon"),n=Oe(`\r
                        Salida`),this.h()},l(a){e=h(a,"ION-BUTTON",{id:!0,style:!0,disabled:!0});var d=g(e);t=h(d,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=we(d,`\r
                        Salida`),d.forEach(u),this.h()},h(){k(t,"icon",jn),k(t,"slot","start"),k(e,"id","checkOutBtn"),c(e,"flex","1"),k(e,"disabled",i=l[6]===!1)},m(a,d){q(a,e,d),r(e,t),r(e,n),o||(s=fe(e,"click",l[27]),o=!0)},p(a,d){d[0]&64&&i!==(i=a[6]===!1)&&k(e,"disabled",i)},d(a){a&&u(e),o=!1,s()}}}function Wi(l){let e,t,n,i,o,s,a,d,E,v=l[16]==="1"&&ji(l);return{c(){e=f("section"),t=f("ion-button"),n=f("label"),i=f("ion-icon"),o=Oe(`\r
        Evidencia\r
        `),s=f("input"),a=O(),v&&v.c(),this.h()},l(_){e=h(_,"SECTION",{style:!0});var m=g(e);t=h(m,"ION-BUTTON",{fill:!0,class:!0,style:!0,disabled:!0});var p=g(t);n=h(p,"LABEL",{for:!0,style:!0});var b=g(n);i=h(b,"ION-ICON",{icon:!0,slot:!0,style:!0}),g(i).forEach(u),o=we(b,`\r
        Evidencia\r
        `),s=h(b,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),b.forEach(u),p.forEach(u),a=w(m),v&&v.l(m),m.forEach(u),this.h()},h(){k(i,"icon",Tt),k(i,"slot","start"),c(i,"vertical-align","middle"),c(s,"display","none"),G(s,"id","eventEvidence"),G(s,"name","fileToUpload"),G(s,"type","file"),s.multiple=!0,G(s,"accept","image/*"),G(s,"capture","environment"),s.disabled=l[21](),G(n,"for","eventEvidence"),c(n,"width","100%"),c(n,"height","100%"),c(n,"pointer-events",l[21]()?"none":"auto"),k(t,"fill","outline"),k(t,"class","loadEvidence"),c(t,"flex","1"),c(t,"display","flex"),c(t,"align-items","center"),c(t,"gap","8px"),k(t,"disabled",l[21]()),c(e,"display","flex"),c(e,"gap","8px"),c(e,"padding","0px 16px")},m(_,m){q(_,e,m),r(e,t),r(t,n),r(n,i),r(n,o),r(n,s),r(e,a),v&&v.m(e,null),d||(E=[fe(s,"change",l[22]),fe(s,"click",l[23])],d=!0)},p(_,m){_[16]==="1"&&v.p(_,m)},d(_){_&&u(e),v&&v.d(),d=!1,He(E)}}}function ji(l){let e,t,n,i,o;return{c(){e=f("ion-button"),t=f("ion-icon"),n=Oe(`\r
        Firmar`),this.h()},l(s){e=h(s,"ION-BUTTON",{fill:!0,style:!0,disabled:!0});var a=g(e);t=h(a,"ION-ICON",{icon:!0,slot:!0}),g(t).forEach(u),n=we(a,`\r
        Firmar`),a.forEach(u),this.h()},h(){k(t,"icon",pt),k(t,"slot","start"),k(e,"fill","outline"),c(e,"flex","1"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"gap","8px"),k(e,"disabled",l[21]())},m(s,a){q(s,e,a),r(e,t),r(e,n),i||(o=fe(e,"click",l[31]),i=!0)},p:Ce,d(s){s&&u(e),i=!1,o()}}}function Ft(l){let e,t,n=qe(l[3]),i=[];for(let o=0;o<n.length;o+=1)i[o]=qt(Ht(l,n,o));return{c(){e=f("section"),t=f("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=h(o,"SECTION",{});var s=g(e);t=h(s,"DIV",{class:!0,style:!0});var a=g(t);for(let d=0;d<i.length;d+=1)i[d].l(a);a.forEach(u),s.forEach(u),this.h()},h(){G(t,"class","image-grid"),c(t,"display","grid"),c(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),c(t,"gap","10px"),c(t,"padding","0px 10px")},m(o,s){q(o,e,s),r(e,t);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(t,null)},p(o,s){if(s[0]&1342186504){n=qe(o[3]);let a;for(a=0;a<n.length;a+=1){const d=Ht(o,n,a);i[a]?i[a].p(d,s):(i[a]=qt(d),i[a].c(),i[a].m(t,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(o){o&&u(e),gt(i,o)}}}function Gi(l){let e,t=`<ion-icon icon="${Mt}"></ion-icon>`,n,i;function o(){return l[36](l[62])}return{c(){e=f("button"),e.innerHTML=t,this.h()},l(s){e=h(s,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),te(e)!=="svelte-mf38w5"&&(e.innerHTML=t),this.h()},h(){G(e,"class","remove-button"),c(e,"position","absolute"),c(e,"top","5px"),c(e,"right","5px"),c(e,"border","none"),c(e,"cursor","pointer"),c(e,"font-size","18px"),c(e,"background","white"),c(e,"border-radius","50%"),c(e,"padding","3px 4px 0px"),c(e,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),c(e,"color","#0000008f")},m(s,a){q(s,e,a),n||(i=fe(e,"click",o),n=!0)},p(s,a){l=s},d(s){s&&u(e),n=!1,i()}}}function qt(l){let e,t,n,i,o,s,a;function d(){return l[35](l[60])}let E=l[10].status!=="completed"&&!l[13]&&Gi(l);return{c(){e=f("div"),t=f("ion-img"),i=O(),E&&E.c(),o=O(),this.h()},l(v){e=h(v,"DIV",{class:!0,style:!0});var _=g(e);t=h(_,"ION-IMG",{src:!0,alt:!0,style:!0}),g(t).forEach(u),i=w(_),E&&E.l(_),o=w(_),_.forEach(u),this.h()},h(){Xe(t.src,n=l[60])||k(t,"src",n),k(t,"alt","Evidencia fotográfica"),c(t,"width","100%"),c(t,"height","100px"),c(t,"object-fit","cover"),c(t,"cursor","pointer"),c(t,"border","1px solid #ccc"),c(t,"border-radius","4px"),c(t,"margin-top","16px"),G(e,"class","image-container"),c(e,"position","relative")},m(v,_){q(v,e,_),r(e,t),r(e,i),E&&E.m(e,null),r(e,o),s||(a=fe(t,"click",d),s=!0)},p(v,_){l=v,_[0]&8&&!Xe(t.src,n=l[60])&&k(t,"src",n),l[10].status!=="completed"&&!l[13]&&E.p(l,_)},d(v){v&&u(e),E&&E.d(),s=!1,a()}}}function Wt(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(n){e=h(n,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),te(e)!=="svelte-1aosxw0"&&(e.innerHTML=t),this.h()},h(){G(e,"class","overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(n,i){q(n,e,i)},d(n){n&&u(e)}}}function jt(l){let e,t,n,i,o,s,a=`<ion-icon icon="${Lt}"></ion-icon>`,d,E;return{c(){e=f("div"),t=f("div"),n=f("ion-img"),o=O(),s=f("button"),s.innerHTML=a,this.h()},l(v){e=h(v,"DIV",{class:!0,style:!0});var _=g(e);t=h(_,"DIV",{class:!0,style:!0});var m=g(t);n=h(m,"ION-IMG",{src:!0,alt:!0,style:!0}),g(n).forEach(u),o=w(m),s=h(m,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),te(s)!=="svelte-183t4ti"&&(s.innerHTML=a),m.forEach(u),_.forEach(u),this.h()},h(){Xe(n.src,i=l[8])||k(n,"src",i),k(n,"alt","Evidencia fotográfica"),c(n,"width","100%"),c(n,"height","auto"),G(s,"class","close-button"),c(s,"position","absolute"),c(s,"top","5px"),c(s,"right","5px"),c(s,"background","white"),c(s,"color","#444444d1"),c(s,"border","none"),c(s,"cursor","pointer"),c(s,"padding","2px 2px 0px 6px"),c(s,"border-radius","50%"),c(s,"font-size","20px"),G(t,"class","modal-content"),c(t,"position","relative"),c(t,"background","white"),c(t,"padding","20px"),c(t,"border-radius","8px"),c(t,"max-width","90vw"),c(t,"max-height","90vh"),c(t,"overflow","auto"),G(e,"class","modal-overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.8)"),c(e,"display","flex"),c(e,"justify-content","center"),c(e,"align-items","center"),c(e,"z-index","1000")},m(v,_){q(v,e,_),r(e,t),r(t,n),r(t,o),r(t,s),d||(E=[fe(s,"click",l[29]),fe(t,"click",wt(l[32])),fe(e,"click",l[29])],d=!0)},p(v,_){_[0]&256&&!Xe(n.src,i=v[8])&&k(n,"src",i)},d(v){v&&u(e),d=!1,He(E)}}}function Ki(l){let e,t,n,i,o="Cerrar",s,a,d=l[10].title+"",E,v,_,m,p,b,y=l[10].client_phone&&l[10].client_phone.trim().length,N,z,x,S,B=l[10].schedule&&l[10].schedule.trim().length,W,R,C=l[10].logistic_comments&&l[10].logistic_comments.trim().length,D,A,I,T,P,M,Y,ne,ie,re=(!l[11]&&!l[12]||l[11]&&l[12])&&Ti(l);function pe(J,de){return J[10].client_name!=null?Li:Ci}let se=pe(l)(l),oe=y&&Mi(l);function ve(J,de){if(J[10].line1&&J[10].line1.trim().length)return Si;if(J[10].line2&&J[10].line2.trim().length)return xi}let _e=ve(l),$=_e&&_e(l),ye=l[17]&&Pi(l),be=l[18]&&l[18]!=="<br>"&&Bi(l),le=B&&Ui(l),ke=l[10].driver_comments&&zi(l),Ie=C&&Hi(l),Ee=l[10].tag&&l[10].tag_color&&Vi(l),ge=!l[12]&&Fi(l),U=(l[11]&&l[12]||!l[11]&&!l[12])&&Wi(l),X=l[2]&&Ft(l),V=l[4]&&Wt(),ae=l[7]&&jt(l);return{c(){e=f("ion-header"),t=f("ion-toolbar"),n=f("ion-buttons"),i=f("ion-button"),i.textContent=o,s=O(),a=f("ion-title"),E=Oe(d),v=O(),re&&re.c(),_=O(),m=f("ion-content"),p=f("ion-list"),se.c(),b=O(),oe&&oe.c(),N=O(),$&&$.c(),z=O(),ye&&ye.c(),x=O(),be&&be.c(),S=O(),le&&le.c(),W=O(),ke&&ke.c(),R=O(),Ie&&Ie.c(),D=O(),Ee&&Ee.c(),A=O(),ge&&ge.c(),I=O(),U&&U.c(),T=O(),X&&X.c(),P=O(),V&&V.c(),M=O(),ae&&ae.c(),Y=De(),this.h()},l(J){e=h(J,"ION-HEADER",{translucent:!0});var de=g(e);t=h(de,"ION-TOOLBAR",{});var Le=g(t);n=h(Le,"ION-BUTTONS",{slot:!0});var Pe=g(n);i=h(Pe,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),te(i)!=="svelte-2ks32x"&&(i.textContent=o),Pe.forEach(u),s=w(Le),a=h(Le,"ION-TITLE",{style:!0,title:!0});var xe=g(a);E=we(xe,d),xe.forEach(u),v=w(Le),re&&re.l(Le),Le.forEach(u),de.forEach(u),_=w(J),m=h(J,"ION-CONTENT",{fullscreen:!0});var Me=g(m);p=h(Me,"ION-LIST",{});var F=g(p);se.l(F),b=w(F),oe&&oe.l(F),N=w(F),$&&$.l(F),z=w(F),ye&&ye.l(F),x=w(F),be&&be.l(F),S=w(F),le&&le.l(F),W=w(F),ke&&ke.l(F),R=w(F),Ie&&Ie.l(F),D=w(F),Ee&&Ee.l(F),A=w(F),ge&&ge.l(F),I=w(F),U&&U.l(F),T=w(F),X&&X.l(F),F.forEach(u),Me.forEach(u),P=w(J),V&&V.l(J),M=w(J),ae&&ae.l(J),Y=De(),this.h()},h(){k(i,"color","medium"),k(n,"slot","start"),c(a,"text-align","center"),k(a,"title",l[10].title),k(e,"translucent",""),k(m,"fullscreen","")},m(J,de){q(J,e,de),r(e,t),r(t,n),r(n,i),r(t,s),r(t,a),r(a,E),r(t,v),re&&re.m(t,null),q(J,_,de),q(J,m,de),r(m,p),se.m(p,null),r(p,b),oe&&oe.m(p,null),r(p,N),$&&$.m(p,null),r(p,z),ye&&ye.m(p,null),r(p,x),be&&be.m(p,null),r(p,S),le&&le.m(p,null),r(p,W),ke&&ke.m(p,null),r(p,R),Ie&&Ie.m(p,null),r(p,D),Ee&&Ee.m(p,null),r(p,A),ge&&ge.m(p,null),r(p,I),U&&U.m(p,null),r(p,T),X&&X.m(p,null),q(J,P,de),V&&V.m(J,de),q(J,M,de),ae&&ae.m(J,de),q(J,Y,de),ne||(ie=fe(i,"click",l[0]),ne=!0)},p(J,de){(!J[11]&&!J[12]||J[11]&&J[12])&&re.p(J,de),se.p(J,de),y&&oe.p(J,de),$&&$.p(J,de),J[17]&&ye.p(J,de),J[18]&&J[18]!=="<br>"&&be.p(J,de),B&&le.p(J,de),J[10].driver_comments&&ke.p(J,de),C&&Ie.p(J,de),J[10].tag&&J[10].tag_color&&Ee.p(J,de),J[12]||ge.p(J,de),(J[11]&&J[12]||!J[11]&&!J[12])&&U.p(J,de),J[2]?X?X.p(J,de):(X=Ft(J),X.c(),X.m(p,null)):X&&(X.d(1),X=null),J[4]?V||(V=Wt(),V.c(),V.m(M.parentNode,M)):V&&(V.d(1),V=null),J[7]?ae?ae.p(J,de):(ae=jt(J),ae.c(),ae.m(Y.parentNode,Y)):ae&&(ae.d(1),ae=null)},i:Ce,o:Ce,d(J){J&&(u(e),u(_),u(m),u(P),u(M),u(Y)),re&&re.d(),se.d(),oe&&oe.d(),$&&$.d(),ye&&ye.d(),be&&be.d(),le&&le.d(),ke&&ke.d(),Ie&&Ie.d(),Ee&&Ee.d(),ge&&ge.d(),U&&U.d(),X&&X.d(),V&&V.d(J),ae&&ae.d(J),ne=!1,ie()}}}function Xi(l){const[e,t]=l.split(","),n=e.match(/:(.*?);/)[1],i=atob(t),o=i.length,s=new Uint8Array(o);for(let a=0;a<o;a++)s[a]=i.charCodeAt(a);return new Blob([s],{type:n})}function Ji(l,e,t){let n=ft,i=document.querySelector("ion-modal"),o=i.componentProps.delivery,s=i.componentProps.isLast||!1,a=i.componentProps.flag||!1,d=!!i.componentProps.readOnly,E=o.driver_comments?o.driver_comments:"",v=o.deliver_status?o.deliver_status:"",_=o.img?o.img:"",m=o.img_id?o.img_id:"",p=_?Ze(_):new Array,b=m?Ze(m):new Array,y={latitude:null,longitude:null},N=o.stopsApproval,z=o.smsActive,x=o.signatureActive,S=!1,B=!0,W=!1,R=o.phone_notification,C=o.comments_ext,D=!1,A="",I=new Object,T="",P=o.tag_color?Ge(o.tag_color,.2):"",M=o.tag_color?Ge(o.tag_color,.3):"",Y=!1;const ne=()=>d||o.status=="completed";ot(()=>{I=JSON.parse(localStorage.getItem("userSession")),ie()});function ie(){o.date_service?o.date_service&&!o.date_completed&&!o.service_time?(t(5,B=!1),t(6,W=!0)):o.date_service&&o.date_completed&&o.service_time&&(t(5,B=!1),t(6,W=!1)):(t(5,B=!0),t(6,W=!1))}const re=async(H,K)=>{await(await Qe.create({header:H||"Error",message:K||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},pe=async(H="",K="",Z="",Q=function(j={}){},me={})=>{await(await Qe.create({header:H||"Error",message:K||"Vuelva a intentar",buttons:[{text:"No",role:"cancel",handler:()=>{}},{text:"Sí",handler:()=>{t(4,S=!0),Ke(Z,function(ce={}){t(4,S=!1),Q(ce)},me)}}]})).present()};async function L(H,K){await(await Qe.create({header:"¿Cómo quieres notificar?",message:`Elige el medio para enviar mensaje a ${H.title} (${K})`,buttons:[{text:"SMS",handler:()=>ke("sms",H,K)},{text:"WhatsApp",handler:()=>ke("whatsapp",H,K)}]})).present()}const se=async H=>{if(d){re("Solo lectura","Completa los requisitos para editar.");return}if(p.length>=5){re("Límite de evidencias","Solo se permite subir 5 fotos por parada");return}if(a&&s&&p.length>=1){re("Límite de evidencias","Para el final de la ruta solo se permite subir 1 foto");return}const Z=H.target.files[0];if(Z)try{t(4,S=!0);const Q=await _e(Z);Q&&Ke(`${n}api/admin/manager/upload_img_driver.php`,function(me){me.success?(t(2,_=_?`${_},${me.img}`:me.img),m=m?`${m},${me.img_id}`:me.img_id,t(3,p=Ze(_)),b=Ze(m)):re("Carga fallida","Actualiza la página y vuelve a intentar. Si el problema persiste, contacta a soporte.")},{fileToUpload:Q})}catch(Q){console.error("Compression error:",Q)}finally{t(4,S=!1)}};function oe(H){var Z;if(d){(Z=H==null?void 0:H.preventDefault)==null||Z.call(H),re("Solo lectura","Completa los requisitos para editar.");return}var K=o.service_time;!K&&B&&!s&&!a&&(H.preventDefault(),re("Registrar Ingreso","Antes de subir la evidencia registra el ingreso a la actual parada."))}function ve(){if(d){re("Solo lectura","Completa los requisitos para editar.");return}var H=a?o.date_completed:!1;if(!H&&!B&&W&&!s&&!a){var K=new Object;K.id_event=o.id_event,K.type="checkout",K.id_user_over=I.id_user,K.token=I.token,pe("Registrar Salida","¿Completaste tu entrega?",n+"api/admin/route/record_check_date.php",function(Z){Z.minutes&&re("Tiempo por parada","Completaste la parada en "+Z.minutes+" minutos.")},K)}}const _e=async H=>new Promise(K=>{const Z=new Image;Z.src=URL.createObjectURL(H),Z.onload=()=>{const Q=document.createElement("canvas"),me=Q.getContext("2d"),j=800,ce=600;let ee=Z.width,he=Z.height;ee>j&&(he*=j/ee,ee=j),he>ce&&(ee*=ce/he,he=ce),Q.width=ee,Q.height=he,me.drawImage(Z,0,0,ee,he),Q.toBlob(Ne=>{K(Ne),URL.revokeObjectURL(Z.src),me.clearRect(0,0,Q.width,Q.height)},"image/jpeg",.7)}});async function $(){try{if(i!=null&&i.isConnected){await i.dismiss({data:Date.now()});return}const H=await $e.getTop();H&&await H.dismiss({data:Date.now()})}catch{console.warn("Close Modal Safe: modal ya cerrado o inexistente")}}const ye=async()=>{if(d){re("Solo lectura","Completa los requisitos para confirmar.");return}if(!S){t(4,S=!0);try{if(t(2,_=p.join(",")),m=b.join(","),ve(),await le())if(T.value=="delivered"||T.value!=="delivered"&&(E.value||o.driver_comments)||a&&s){const K={id_route:o.id_route,...!a&&!s&&{id_event:o.id_event},...!a&&!s&&{comments:E.value},...!a&&!s&&{deliver_status:T.value},img:_,img_id:m,lat:y.latitude,lon:y.longitude,...N==="0"&&{approve:"0"},...s&&{isLast:!0},...a&&s&&{destiny:!0},id_user_over:I.id_user,token:I.token};K.img&&K.img_id||_?Ke(`${n}api/admin/evidence/send_evidence.php`,function(Z){if(Z.success==!0){$();const Q=K.id_route;s&&(be("","",Q,s),N=="0"&&J(Q,"completed"))}else t(4,S=!1),re("Carga fallida","Actualiza la página y vuelve a intentar cargar la información!")},K):re("Información incompleta","Cargar evidencia fotográfica faltante para completar parada.")}else re("Motivo de status de entrega","Favor de ingresar en notas el motivo por el que la entrega no fue entregada correctamente");else re("Ubicación faltante","Asegúrate darle permisos a Rutaflow para acceder a tu ubicación")}catch(H){console.error("Error fetching data:",H)}finally{t(4,S=!1)}}},be=(H,K,Z,Q)=>{i.componentProps.routeId=Z,i.componentProps.driverId=o.id_driver,Ye("modal-km-gas",Sn,{checklist:H,driverId:K,routeId:Z,isLast:Q}).then(me=>{})},le=async()=>navigator.geolocation?new Promise((H,K)=>{navigator.geolocation.getCurrentPosition(Z=>{y.latitude=Z.coords.latitude,y.longitude=Z.coords.longitude,H(!0)},Z=>{console.error("Error getting location:",Z),H(!1)})}):(console.error("Geolocation is not supported by your browser"),!1);async function ke(H,K,Z){const Q={};if(H==="sms"){Q.id_user_over=I.id_user,Q.token=I.token,Q.client_phone=Z,Q.client_name=K.title,Q.delivery_phone=K.client_phone,Q.enterprise_name=K.enterprise_name,Ke(`${n}api/admin/message_central/send_sms.php`,Ie("SMS",K.title,Z),Q);return}try{var me=K.client_phone?`
Si deseas contactarnos, entra al siguiente link: https://wa.me/${K.client_phone}.`:".";Q.text=`*Rutaflow*

El repartidor va en camino a tu domicilio ${K.title}${me}

Enviado por _${K.enterprise_name}_`,Q.phone=Z;const ce=await(await fetch(`${ti}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`${ni}`},body:JSON.stringify(Q)})).json();Ie("WHATSAPP",K.title,Z)(ce)}catch(j){console.error(j),re("WHATSAPP no enviado","Ocurrió un error de red.")}}function Ie(H,K,Z){return Q=>{Q.success?re(`${H} enviado`,`Se envió correctamente un ${H} a ${K} con número ${Z}.`):re(`${H} no enviado`,`Hubo un error al enviar ${H} a ${K} (${Z}).`)}}function Ee(H){H.stopPropagation(),L(o,R)}function ge(){if(d){re("Solo lectura","Completa los requisitos para editar.");return}t(5,B=!1),t(6,W=!0),X(o.id_event,"checkin")}function U(){if(d){re("Solo lectura","Completa los requisitos para editar.");return}t(6,W=!1),t(5,B=!1),X(o.id_event,"checkout")}async function X(H,K){if(!d&&K){let Z=new Object;Z.type=K,Z.id_event=H,Z.id_user_over=I.id_user,Z.token=I.token;try{Ke(`${n}api/admin/route/record_check_date.php`,function(Q){Q.minutes&&re("Tiempo por parada","Completaste la parada en "+Q.minutes+" minutos.")},Z)}catch(Q){console.error("Error during file upload:",Q)}finally{}}}const V=H=>{t(8,A=H),t(7,D=!0)},ae=()=>{t(7,D=!1),t(8,A="")};function J(H,K){let Z=new Object;return Z.id_route=H,Z.status=K,Z.id_user_over=I.id_user,Z.token=I.token,Ke(`${n}api/admin/route/change_status.php`,function(){},Z),""}function de(H=0){if(!d){var K=Ln(H,p,b,_);t(3,p=K.files),b=K.img_ids,t(2,_=K.selectedImages)}}async function Le(){var Z;if(d){re("Solo lectura","Completa los requisitos para firmar.");return}const H=await Ye("modal-signature-plugin",Ni,{},{backdropDismiss:!1,swipeToClose:!1,showBackdrop:!0,canDismiss:(Q,me)=>me==="cancel"||me==="confirm"}),K=((Z=H==null?void 0:H.data)==null?void 0:Z.dataUrl)??(H==null?void 0:H.dataUrl)??H;if(K)try{Y=!0;const Q=Xi(K);Ke(`${n}api/admin/manager/upload_img_driver.php`,function(me){me.success?(t(2,_=_?`${_},${me.img}`:me.img),m=m?`${m},${me.img_id}`:me.img_id,t(3,p=Ze(_)),b=Ze(m)):re("Carga fallida","Actualiza la página y vuelve a intentar. Si el problema persiste, contacta a soporte.")},{fileToUpload:Q})}catch(Q){console.error(Q)}finally{Y=!1}}function Pe(H){Nt.call(this,l,H)}function xe(H){Be[H?"unshift":"push"](()=>{T=H,t(9,T)})}function Me(H){Be[H?"unshift":"push"](()=>{E=H,t(1,E)})}return[$,E,_,p,S,B,W,D,A,T,o,s,a,d,v,z,x,R,C,P,M,ne,se,oe,ye,Ee,ge,U,V,ae,de,Le,Pe,xe,Me,H=>V(H),H=>de(H)]}class Gt extends tt{constructor(e){super(),nt(this,e,Ji,Ki,et,{closeModal:0},null,[-1,-1,-1])}get closeModal(){return this.$$.ctx[0]}}function Kt(l,e,t){const n=l.slice();return n[32]=e[t],n[34]=t,n}function Xt(l){let e,t,n=qe(l[1]),i=[];for(let o=0;o<n.length;o+=1)i[o]=Jt(Kt(l,n,o));return{c(){e=f("section"),t=f("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=h(o,"SECTION",{});var s=g(e);t=h(s,"DIV",{class:!0,style:!0});var a=g(t);for(let d=0;d<i.length;d+=1)i[d].l(a);a.forEach(u),s.forEach(u),this.h()},h(){G(t,"class","image-grid"),c(t,"display","grid"),c(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),c(t,"gap","10px"),c(t,"padding","0px 10px")},m(o,s){q(o,e,s),r(e,t);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(t,null)},p(o,s){if(s[0]&32770){n=qe(o[1]);let a;for(a=0;a<n.length;a+=1){const d=Kt(o,n,a);i[a]?i[a].p(d,s):(i[a]=Jt(d),i[a].c(),i[a].m(t,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(o){o&&u(e),gt(i,o)}}}function Jt(l){let e,t,n,i,o,s=`<ion-icon icon="${Mt}"></ion-icon>`,a,d,E;function v(){return l[22](l[32])}function _(){return l[23](l[34])}return{c(){e=f("div"),t=f("ion-img"),i=O(),o=f("button"),o.innerHTML=s,a=O(),this.h()},l(m){e=h(m,"DIV",{class:!0,style:!0});var p=g(e);t=h(p,"ION-IMG",{src:!0,alt:!0,style:!0}),g(t).forEach(u),i=w(p),o=h(p,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),te(o)!=="svelte-zguiov"&&(o.innerHTML=s),a=w(p),p.forEach(u),this.h()},h(){Xe(t.src,n=l[32])||k(t,"src",n),k(t,"alt","Evidencia fotográfica"),c(t,"width","100%"),c(t,"height","100px"),c(t,"object-fit","cover"),c(t,"cursor","pointer"),c(t,"border","1px solid #ccc"),c(t,"border-radius","4px"),c(t,"margin-top","16px"),G(o,"class","remove-button"),c(o,"position","absolute"),c(o,"top","5px"),c(o,"right","5px"),c(o,"border","none"),c(o,"cursor","pointer"),c(o,"font-size","18px"),c(o,"background","white"),c(o,"border-radius","50%"),c(o,"padding","3px 4px 0px"),c(o,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),c(o,"color","#0000008f"),G(e,"class","image-container"),c(e,"position","relative")},m(m,p){q(m,e,p),r(e,t),r(e,i),r(e,o),r(e,a),d||(E=[fe(t,"click",v),fe(o,"click",_)],d=!0)},p(m,p){l=m,p[0]&2&&!Xe(t.src,n=l[32])&&k(t,"src",n)},d(m){m&&u(e),d=!1,He(E)}}}function Yt(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(n){e=h(n,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),te(e)!=="svelte-h8s7r2"&&(e.innerHTML=t),this.h()},h(){G(e,"class","overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(n,i){q(n,e,i)},d(n){n&&u(e)}}}function Qt(l){let e,t,n,i,o,s,a=`<ion-icon icon="${Lt}"></ion-icon>`,d,E;return{c(){e=f("div"),t=f("div"),n=f("ion-img"),o=O(),s=f("button"),s.innerHTML=a,this.h()},l(v){e=h(v,"DIV",{class:!0,style:!0});var _=g(e);t=h(_,"DIV",{class:!0,style:!0});var m=g(t);n=h(m,"ION-IMG",{src:!0,alt:!0,style:!0}),g(n).forEach(u),o=w(m),s=h(m,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),te(s)!=="svelte-g0qr0o"&&(s.innerHTML=a),m.forEach(u),_.forEach(u),this.h()},h(){Xe(n.src,i=l[8])||k(n,"src",i),k(n,"alt","Evidencia fotográfica"),c(n,"width","100%"),c(n,"height","auto"),G(s,"class","close-button"),c(s,"position","absolute"),c(s,"top","5px"),c(s,"right","5px"),c(s,"background","white"),c(s,"color","#444444d1"),c(s,"border","none"),c(s,"cursor","pointer"),c(s,"padding","2px 2px 0px 6px"),c(s,"border-radius","50%"),c(s,"font-size","20px"),G(t,"class","modal-content"),c(t,"position","relative"),c(t,"background","white"),c(t,"padding","20px"),c(t,"border-radius","8px"),c(t,"max-width","90vw"),c(t,"max-height","90vh"),c(t,"overflow","auto"),G(e,"class","modal-overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.8)"),c(e,"display","flex"),c(e,"justify-content","center"),c(e,"align-items","center"),c(e,"z-index","1000")},m(v,_){q(v,e,_),r(e,t),r(t,n),r(t,o),r(t,s),d||(E=[fe(s,"click",l[16]),fe(t,"click",wt(l[17])),fe(e,"click",l[16])],d=!0)},p(v,_){_[0]&256&&!Xe(n.src,i=v[8])&&k(n,"src",i)},d(v){v&&u(e),d=!1,He(E)}}}function Yi(l){let e,t,n,i,o="Cancelar",s,a,d="AGREGAR GASTO",E,v,_,m="Confirmar",p,b,y,N,z,x,S,B,W,R,C,D,A,I,T,P,M,Y,ne='Tipo de pago <ion-text color="danger">(Obligatorio)</ion-text>',ie,re,pe="Efectivo",L,se,oe="Tarjeta",ve,_e,$="Transferencia",ye,be,le,ke,Ie,Ee,ge,U,X,V,ae=`<ion-icon icon="${Tt}" slot="start"></ion-icon>
                        Subir Evidencia`,J,de,Le,Pe,xe,Me,F,ue,H=l[0]&&Xt(l),K=l[6]&&Yt(),Z=l[7]&&Qt(l);return{c(){e=f("ion-header"),t=f("ion-toolbar"),n=f("ion-buttons"),i=f("ion-button"),i.textContent=o,s=O(),a=f("ion-title"),a.textContent=d,E=O(),v=f("ion-buttons"),_=f("ion-button"),_.textContent=m,p=O(),b=f("ion-content"),y=f("ion-list"),N=f("ion-item"),z=f("ion-icon"),x=O(),S=f("ion-input"),B=O(),W=f("ion-item"),R=f("ion-icon"),C=O(),D=f("ion-input"),A=O(),I=f("ion-item"),T=f("ion-icon"),P=O(),M=f("ion-select"),Y=f("div"),Y.innerHTML=ne,ie=O(),re=f("ion-select-option"),re.textContent=pe,L=O(),se=f("ion-select-option"),se.textContent=oe,ve=O(),_e=f("ion-select-option"),_e.textContent=$,ye=O(),be=f("ion-item"),le=f("ion-icon"),ke=O(),Ie=f("ion-textarea"),Ee=O(),ge=f("section"),U=f("label"),X=f("ion-button"),V=f("label"),V.innerHTML=ae,J=O(),de=f("input"),Le=O(),H&&H.c(),Pe=O(),K&&K.c(),xe=O(),Z&&Z.c(),Me=De(),this.h()},l(Q){e=h(Q,"ION-HEADER",{translucent:!0});var me=g(e);t=h(me,"ION-TOOLBAR",{});var j=g(t);n=h(j,"ION-BUTTONS",{slot:!0});var ce=g(n);i=h(ce,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),te(i)!=="svelte-1f8rjcf"&&(i.textContent=o),ce.forEach(u),s=w(j),a=h(j,"ION-TITLE",{title:!0,"data-svelte-h":!0}),te(a)!=="svelte-efps2s"&&(a.textContent=d),E=w(j),v=h(j,"ION-BUTTONS",{slot:!0});var ee=g(v);_=h(ee,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),te(_)!=="svelte-k5zoz0"&&(_.textContent=m),ee.forEach(u),j.forEach(u),me.forEach(u),p=w(Q),b=h(Q,"ION-CONTENT",{fullscreen:!0});var he=g(b);y=h(he,"ION-LIST",{});var Ne=g(y);N=h(Ne,"ION-ITEM",{});var Se=g(N);z=h(Se,"ION-ICON",{icon:!0,slot:!0}),g(z).forEach(u),x=w(Se),S=h(Se,"ION-INPUT",{label:!0,type:!0,placeholder:!0,value:!0}),g(S).forEach(u),Se.forEach(u),B=w(Ne),W=h(Ne,"ION-ITEM",{});var Te=g(W);R=h(Te,"ION-ICON",{icon:!0,slot:!0}),g(R).forEach(u),C=w(Te),D=h(Te,"ION-INPUT",{label:!0,type:!0,value:!0}),g(D).forEach(u),Te.forEach(u),A=w(Ne),I=h(Ne,"ION-ITEM",{});var Re=g(I);T=h(Re,"ION-ICON",{icon:!0,slot:!0}),g(T).forEach(u),P=w(Re),M=h(Re,"ION-SELECT",{placeholder:!0,value:!0});var Ve=g(M);Y=h(Ve,"DIV",{slot:!0,"data-svelte-h":!0}),te(Y)!=="svelte-wl764p"&&(Y.innerHTML=ne),ie=w(Ve),re=h(Ve,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),te(re)!=="svelte-i9crym"&&(re.textContent=pe),L=w(Ve),se=h(Ve,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),te(se)!=="svelte-fx0z11"&&(se.textContent=oe),ve=w(Ve),_e=h(Ve,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),te(_e)!=="svelte-1c24jf2"&&(_e.textContent=$),Ve.forEach(u),Re.forEach(u),ye=w(Ne),be=h(Ne,"ION-ITEM",{});var We=g(be);le=h(We,"ION-ICON",{icon:!0,slot:!0}),g(le).forEach(u),ke=w(We),Ie=h(We,"ION-TEXTAREA",{label:!0,placeholder:!0}),g(Ie).forEach(u),We.forEach(u),Ee=w(Ne),ge=h(Ne,"SECTION",{});var Fe=g(ge);U=h(Fe,"LABEL",{for:!0,style:!0});var je=g(U);X=h(je,"ION-BUTTON",{fill:!0,size:!0,class:!0,expand:!0});var it=g(X);V=h(it,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),te(V)!=="svelte-1m9yw22"&&(V.innerHTML=ae),J=w(it),de=h(it,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),it.forEach(u),je.forEach(u),Fe.forEach(u),Le=w(Ne),H&&H.l(Ne),Ne.forEach(u),he.forEach(u),Pe=w(Q),K&&K.l(Q),xe=w(Q),Z&&Z.l(Q),Me=De(),this.h()},h(){k(i,"color","medium"),k(n,"slot","start"),k(a,"title",""),k(_,"strong",""),k(v,"slot","end"),k(e,"translucent",""),k(z,"icon",Cn),k(z,"slot","start"),k(S,"label","Concepto"),k(S,"type","text"),k(S,"placeholder","Escribe aquí..."),k(S,"value",l[9]?l[9]:""),k(R,"icon",pt),k(R,"slot","start"),k(D,"label","Monto $"),k(D,"type","number"),k(D,"value",l[10]?l[10]:""),k(T,"icon",Xn),k(T,"slot","start"),G(Y,"slot","label"),k(re,"value","cash"),k(se,"value","card"),k(_e,"value","transfer"),k(M,"placeholder","Tipo de pago"),k(M,"value",l[11]?l[11]:""),k(le,"icon",pt),k(le,"slot","start"),k(Ie,"label","Comentarios"),k(Ie,"placeholder","Escribe aquí..."),G(V,"for","eventEvidence"),c(V,"width","100%"),c(V,"padding","8px"),c(de,"display","none"),G(de,"id","eventEvidence"),G(de,"name","fileToUpload"),G(de,"type","file"),G(de,"accept","image/*"),G(de,"capture","environment"),k(X,"fill","outline"),k(X,"size","small"),k(X,"class","loadEvidence"),k(X,"expand","block"),G(U,"for","eventEvidence"),c(U,"display","block"),c(U,"width","100%"),k(b,"fullscreen","")},m(Q,me){q(Q,e,me),r(e,t),r(t,n),r(n,i),r(t,s),r(t,a),r(t,E),r(t,v),r(v,_),q(Q,p,me),q(Q,b,me),r(b,y),r(y,N),r(N,z),r(N,x),r(N,S),l[18](S),r(y,B),r(y,W),r(W,R),r(W,C),r(W,D),l[19](D),r(y,A),r(y,I),r(I,T),r(I,P),r(I,M),r(M,Y),r(M,ie),r(M,re),r(M,L),r(M,se),r(M,ve),r(M,_e),l[20](M),r(y,ye),r(y,be),r(be,le),r(be,ke),r(be,Ie),l[21](Ie),r(y,Ee),r(y,ge),r(ge,U),r(U,X),r(X,V),r(X,J),r(X,de),r(y,Le),H&&H.m(y,null),q(Q,Pe,me),K&&K.m(Q,me),q(Q,xe,me),Z&&Z.m(Q,me),q(Q,Me,me),F||(ue=[fe(i,"click",l[13]),fe(_,"click",l[14]),fe(de,"change",l[12])],F=!0)},p(Q,me){Q[0]?H?H.p(Q,me):(H=Xt(Q),H.c(),H.m(y,null)):H&&(H.d(1),H=null),Q[6]?K||(K=Yt(),K.c(),K.m(xe.parentNode,xe)):K&&(K.d(1),K=null),Q[7]?Z?Z.p(Q,me):(Z=Qt(Q),Z.c(),Z.m(Me.parentNode,Me)):Z&&(Z.d(1),Z=null)},i:Ce,o:Ce,d(Q){Q&&(u(e),u(p),u(b),u(Pe),u(xe),u(Me)),l[18](null),l[19](null),l[20](null),l[21](null),H&&H.d(),K&&K.d(Q),Z&&Z.d(Q),F=!1,He(ue)}}}function Qi(l,e,t){let n=ft,i=document.querySelector("ion-modal"),o=i.componentProps.routeId,s=i.componentProps.ex_concept,a=i.componentProps.ex_amount,d=i.componentProps.ex_type,E=i.componentProps.id_expense,v="",_=new Array,m="",p="",b=0,y="",N="",z=!1,x=new Object,S=!1,B="";ot(()=>{x=JSON.parse(localStorage.getItem("userSession"))});const W=async(L,se)=>{await(await Qe.create({header:L||"Error",message:se||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},R=async L=>{t(6,z=!0);const oe=L.target.files[0],ve=await C(oe);if(ve){var _e=new Object;_e.fileToUpload=ve,_e.id_user_over=x.id_user,_e.token=x.token;try{Ke(`${n}api/admin/manager/upload_img_driver.php`,function($){$.success?(t(0,v=$.img),t(1,_=Ze(v)),m=$.img_id):W("Error","No se pudo subir la imagen"),t(6,z=!1)},_e)}catch($){console.error("Error during file upload:",$)}finally{t(6,z=!1)}}},C=async L=>new Promise(se=>{const oe=new Image;oe.src=URL.createObjectURL(L),oe.onload=()=>{const ve=document.createElement("canvas"),_e=ve.getContext("2d"),$=800,ye=600;let be=oe.width,le=oe.height;be>$&&(le*=$/be,be=$),le>ye&&(be*=ye/le,le=ye),ve.width=be,ve.height=le,_e.drawImage(oe,0,0,be,le),ve.toBlob(ke=>{se(ke),URL.revokeObjectURL(oe.src),_e.clearRect(0,0,ve.width,ve.height)},"image/jpeg",.7)}}),D=()=>{$e.dismiss()},A=()=>{var L=new Object;L.id_route=o,L.comments=y.value,L.type=p.value,L.img=v,L.img_id=m,L.amount=b.value,L.concept=N.value,L.status="done",L.id_expense=E||"null",L.id_user_over=x.id_user,L.token=x.token,!m||!v||!b.value||!N.value?W("Datos incompletos","Llena los datos requeridos para completar el registro"):Ke(`${n}api/admin/expenses/add_expense.php`,function(se){D()},L)},I=L=>{t(8,B=L),t(7,S=!0)},T=()=>{t(7,S=!1),t(8,B="")};function P(L){Nt.call(this,l,L)}function M(L){Be[L?"unshift":"push"](()=>{N=L,t(5,N)})}function Y(L){Be[L?"unshift":"push"](()=>{b=L,t(3,b)})}function ne(L){Be[L?"unshift":"push"](()=>{p=L,t(2,p)})}function ie(L){Be[L?"unshift":"push"](()=>{y=L,t(4,y)})}return[v,_,p,b,y,N,z,S,B,s,a,d,R,D,A,I,T,P,M,Y,ne,ie,L=>I(L),L=>removeFile(L)]}class Et extends tt{constructor(e){super(),nt(this,e,Qi,Yi,et,{},null,[-1,-1])}}/*!
 * Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */var Zi={prefix:"fas",iconName:"ellipsis",icon:[448,512,["ellipsis-h"],"f141","M0 256a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm168 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm224-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z"]},$i={prefix:"fas",iconName:"traffic-light",icon:[320,512,[128678],"f637","M64-32C28.7-32 0-3.3 0 32L0 384c0 88.4 71.6 160 160 160s160-71.6 160-160l0-352c0-35.3-28.7-64-64-64L64-32zm96 392c30.9 0 56 25.1 56 56s-25.1 56-56 56-56-25.1-56-56 25.1-56 56-56zm56-104a56 56 0 1 1 -112 0 56 56 0 1 1 112 0zM160 152a56 56 0 1 1 0-112 56 56 0 1 1 0 112z"]},eo={prefix:"fas",iconName:"hospital",icon:[576,512,[127973,62589,"hospital-alt","hospital-wide"],"f0f8","M128 64c0-35.3 28.7-64 64-64L384 0c35.3 0 64 28.7 64 64l0 64 64 0c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 192c0-35.3 28.7-64 64-64l64 0 0-64zM272 352c-17.7 0-32 14.3-32 32l0 80 96 0 0-80c0-17.7-14.3-32-32-32l-32 0zM128 368l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16zM112 256c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0zM512 368l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16zM496 256c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0zM264 104l0 32-32 0c-8.8 0-16 7.2-16 16l0 16c0 8.8 7.2 16 16 16l32 0 0 32c0 8.8 7.2 16 16 16l16 0c8.8 0 16-7.2 16-16l0-32 32 0c8.8 0 16-7.2 16-16l0-16c0-8.8-7.2-16-16-16l-32 0 0-32c0-8.8-7.2-16-16-16l-16 0c-8.8 0-16 7.2-16 16z"]},to={prefix:"fas",iconName:"utensils",icon:[512,512,[127860,61685,"cutlery"],"f2e7","M63.9 14.4C63.1 6.2 56.2 0 48 0s-15.1 6.2-16 14.3L17.9 149.7c-1.3 6-1.9 12.1-1.9 18.2 0 45.9 35.1 83.6 80 87.7L96 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-224.4c44.9-4.1 80-41.8 80-87.7 0-6.1-.6-12.2-1.9-18.2L223.9 14.3C223.1 6.2 216.2 0 208 0s-15.1 6.2-15.9 14.4L178.5 149.9c-.6 5.7-5.4 10.1-11.1 10.1-5.8 0-10.6-4.4-11.2-10.2L143.9 14.6C143.2 6.3 136.3 0 128 0s-15.2 6.3-15.9 14.6L99.8 149.8c-.5 5.8-5.4 10.2-11.2 10.2-5.8 0-10.6-4.4-11.1-10.1L63.9 14.4zM448 0C432 0 320 32 320 176l0 112c0 35.3 28.7 64 64 64l32 0 0 128c0 17.7 14.3 32 32 32s32-14.3 32-32l0-448c0-17.7-14.3-32-32-32z"]},no={prefix:"fas",iconName:"gas-pump",icon:[512,512,[9981],"f52f","M32 64C32 28.7 60.7 0 96 0L256 0c35.3 0 64 28.7 64 64l0 192 8 0c48.6 0 88 39.4 88 88l0 32c0 13.3 10.7 24 24 24s24-10.7 24-24l0-154c-27.6-7.1-48-32.2-48-62l0-59.5-25.8-28.3c-8.9-9.8-8.2-25 1.6-33.9s25-8.2 33.9 1.6l71.7 78.8c9.4 10.3 14.6 23.7 14.6 37.7L512 376c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-32c0-22.1-17.9-40-40-40l-8 0 0 161.4c9.3 3.3 16 12.2 16 22.6 0 13.3-10.7 24-24 24L40 512c-13.3 0-24-10.7-24-24 0-10.5 6.7-19.3 16-22.6L32 64zM96 80l0 96c0 8.8 7.2 16 16 16l128 0c8.8 0 16-7.2 16-16l0-96c0-8.8-7.2-16-16-16L112 64c-8.8 0-16 7.2-16 16z"]},io={prefix:"fas",iconName:"restroom",icon:[640,512,[],"f7bd","M80 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm40 304l0 128c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-154.8c-8.1 9.2-21.1 13.2-33.5 9.4-16.9-5.3-26.3-23.2-21-40.1l29.7-95.2C44.4 156.9 83.6 128 128 128s83.6 28.9 96.8 71.2l29.7 95.2c5.3 16.9-4.1 34.8-21 40.1-12.4 3.9-25.4-.2-33.5-9.4L200 480c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-128-16 0zM320 0c13.3 0 24 10.7 24 24l0 464c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-464c0-13.3 10.7-24 24-24zM464 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM440 480l0-96-17.8 0c-10.9 0-18.6-10.7-15.2-21.1l9-26.9c-3.2 0-6.4-.5-9.5-1.5-16.9-5.3-26.3-23.2-21-40.1l29.7-95.2C428.4 156.9 467.6 128 512 128s83.6 28.9 96.8 71.2l29.7 95.2c5.3 16.9-4.1 34.8-21 40.1-3.2 1-6.4 1.5-9.5 1.5l9 26.9c3.5 10.4-4.3 21.1-15.2 21.1l-17.8 0 0 96c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-96-16 0 0 96c0 17.7-14.3 32-32 32s-32-14.3-32-32z"]},oo={prefix:"fas",iconName:"car-burst",icon:[640,512,["car-crash"],"f5e1","M232 16.1l0-48c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24s24-10.7 24-24zM32 168.1l48 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24s10.7 24 24 24zM281.5 70.6c9.4 9.4 24.6 9.4 33.9 0l33.9-33.9c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L281.5 36.6c-9.4 9.4-9.4 24.6 0 33.9zm-181 215l33.9-33.9c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L66.6 251.6c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0zM66.6 2.7c-9.4 9.4-9.4 24.6 0 33.9l33.9 33.9c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L100.5 2.7C91.1-6.7 76-6.7 66.6 2.7zM352.9 175.4L505 216.2c6.4 1.7 11.1 7.3 11.8 13.9l7.2 74-231.5-62 43.2-60.5c3.9-5.4 10.7-7.9 17.2-6.2zM223.6 228.5l-2.1 2.9c-21.7 5.5-39.9 22.3-46.1 45.5-4.1 15.5-12.4 46.4-24.8 92.7l-8.3 30.9c-4.6 17.1 5.6 34.6 22.6 39.2l15.5 4.1c17.1 4.6 34.6-5.6 39.2-22.6l8.3-30.9 278.2 74.5-8.3 30.9c-4.6 17.1 5.6 34.6 22.6 39.2l15.5 4.1c17.1 4.6 34.6-5.6 39.2-22.6 4.1-15.5 12.4-46.4 24.8-92.7l8.3-30.9c6.2-23.2-1.1-46.8-17.2-62.5l-.3-3.6-10-103c-3.2-33.2-26.7-60.9-58.9-69.5L369.5 113.6c-32.2-8.6-66.4 3.6-85.8 30.8l-60.2 84.2zm48.7 57.8a32 32 0 1 1 -16.6 61.8 32 32 0 1 1 16.6-61.8zm208.1 88.9a32 32 0 1 1 61.8 16.6 32 32 0 1 1 -61.8-16.6z"]},lo={prefix:"fas",iconName:"square-parking",icon:[448,512,[127359,"parking"],"f540","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM192 256l48 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-48 0 0 64zm48 64l-48 0 0 32c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-184c0-22.1 17.9-40 40-40l72 0c53 0 96 43 96 96s-43 96-96 96z"]},ro={prefix:"fas",iconName:"user-secret",icon:[448,512,[128373],"f21b","M171-16c-36.4 0-57.8 58.3-68.3 112L72 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l24 0 0 32c0 17 3.3 33.2 9.3 48l-9.3 0 0 0-20.5 0c-15.2 0-27.5 12.3-27.5 27.5 0 3 .5 5.9 1.4 8.7l28.9 86.6C40.2 379.6 16 428.1 16 482.3 16 498.7 29.3 512 45.7 512l356.6 0c16.4 0 29.7-13.3 29.7-29.7 0-54.2-24.2-102.7-62.3-135.4l28.9-86.6c.9-2.8 1.4-5.7 1.4-8.7 0-15.2-12.3-27.5-27.5-27.5l-20.5 0 0 0-9.3 0c6-14.8 9.3-31 9.3-48l0-32 24 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-30.7 0c-10.4-53.7-31.9-112-68.3-112-9.6 0-19 3.9-27.5 8.2-8.2 4.1-18.4 7.8-25.5 7.8s-17.3-3.7-25.5-7.8C190-12.1 180.6-16 171-16zm93.7 484.4l-24.8-70.9 27.9-32.5c2.7-3.2 4.2-7.2 4.2-11.4 0-9.7-7.8-17.5-17.5-17.5l-61 0c-9.7 0-17.5 7.8-17.5 17.5 0 4.2 1.5 8.2 4.2 11.4l27.9 32.5-24.8 70.9-57-180.4 35.7 0c18.4 10.2 39.5 16 62 16s43.6-5.8 62-16l35.7 0-57 180.4zM224 256c-34.7 0-64.2-22.1-75.3-53 5.7 3.2 12.3 5 19.3 5l12.4 0c16.5 0 31.1-10.6 36.3-26.2 2.3-7 12.2-7 14.5 0 5.2 15.6 19.9 26.2 36.3 26.2l12.4 0c7 0 13.6-1.8 19.3-5-11.1 30.9-40.6 53-75.3 53z"]};function Zt(l,e,t){const n=l.slice();return n[32]=e[t],n[34]=t,n}function $t(l,e,t){const n=l.slice();return n[35]=e[t],n}function en(l){let e,t,n,i,o,s,a=l[35].label+"",d,E,v,_;function m(){return l[18](l[35])}return{c(){e=f("div"),t=f("div"),n=At("svg"),i=At("path"),o=O(),s=f("span"),d=Oe(a),E=O(),this.h()},l(p){e=h(p,"DIV",{style:!0});var b=g(e);t=h(b,"DIV",{style:!0});var y=g(t);n=Pt(y,"svg",{width:!0,height:!0,viewBox:!0,style:!0});var N=g(n);i=Pt(N,"path",{fill:!0,d:!0}),g(i).forEach(u),N.forEach(u),y.forEach(u),o=w(b),s=h(b,"SPAN",{style:!0});var z=g(s);d=we(z,a),z.forEach(u),E=w(b),b.forEach(u),this.h()},h(){G(i,"fill","currentColor"),G(i,"d",l[35].icon.icon[4]),G(n,"width","40"),G(n,"height","20"),G(n,"viewBox","0 0 512 512"),c(n,"color","#333"),c(t,"width","42px"),c(t,"height","42px"),c(t,"border-radius","50%"),c(t,"background-color",l[35].color),c(t,"display","flex"),c(t,"align-items","center"),c(t,"justify-content","center"),c(s,"font-size","11px"),c(s,"font-weight","500"),c(s,"color","#333"),c(s,"text-align","center"),c(e,"width","calc(33.333% - 7px)"),c(e,"background","white"),c(e,"border",l[6]===l[35].id?"2px solid #3880ff":"2px solid #e0e0e0"),c(e,"border-radius","10px"),c(e,"padding","10px 6px"),c(e,"display","flex"),c(e,"flex-direction","column"),c(e,"align-items","center"),c(e,"gap","6px"),c(e,"cursor","pointer"),c(e,"box-sizing","border-box"),c(e,"box-shadow",l[6]===l[35].id?"0 2px 8px rgba(56, 128, 255, 0.2)":"none")},m(p,b){q(p,e,b),r(e,t),r(t,n),r(n,i),r(e,o),r(e,s),r(s,d),r(e,E),v||(_=fe(e,"click",m),v=!0)},p(p,b){l=p,b[0]&64&&c(e,"border",l[6]===l[35].id?"2px solid #3880ff":"2px solid #e0e0e0"),b[0]&64&&c(e,"box-shadow",l[6]===l[35].id?"0 2px 8px rgba(56, 128, 255, 0.2)":"none")},d(p){p&&u(e),v=!1,_()}}}function tn(l){let e;return{c(){e=f("div"),this.h()},l(t){e=h(t,"DIV",{id:!0,style:!0}),g(e).forEach(u),this.h()},h(){G(e,"id","motive-map"),c(e,"height","140px"),c(e,"margin","0 10px 10px 10px"),c(e,"border-radius","10px"),c(e,"box-shadow","0 2px 6px rgba(0,0,0,0.1)")},m(t,n){q(t,e,n),l[19](e)},p:Ce,d(t){t&&u(e),l[19](null)}}}function nn(l){let e,t,n=qe(l[1]),i=[];for(let o=0;o<n.length;o+=1)i[o]=on(Zt(l,n,o));return{c(){e=f("section"),t=f("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=h(o,"SECTION",{style:!0});var s=g(e);t=h(s,"DIV",{style:!0});var a=g(t);for(let d=0;d<i.length;d+=1)i[d].l(a);a.forEach(u),s.forEach(u),this.h()},h(){c(t,"display","flex"),c(t,"flex-wrap","wrap"),c(t,"gap","8px"),c(e,"padding","0 10px")},m(o,s){q(o,e,s),r(e,t);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(t,null)},p(o,s){if(s[0]&73730){n=qe(o[1]);let a;for(a=0;a<n.length;a+=1){const d=Zt(o,n,a);i[a]?i[a].p(d,s):(i[a]=on(d),i[a].c(),i[a].m(t,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(o){o&&u(e),gt(i,o)}}}function on(l){let e,t,n,i,o,s=`<ion-icon icon="${Mt}"></ion-icon>`,a,d,E;function v(){return l[21](l[32])}function _(){return l[22](l[34])}return{c(){e=f("div"),t=f("ion-img"),i=O(),o=f("button"),o.innerHTML=s,a=O(),this.h()},l(m){e=h(m,"DIV",{style:!0});var p=g(e);t=h(p,"ION-IMG",{src:!0,alt:!0,style:!0}),g(t).forEach(u),i=w(p),o=h(p,"BUTTON",{style:!0,"data-svelte-h":!0}),te(o)!=="svelte-yp839i"&&(o.innerHTML=s),a=w(p),p.forEach(u),this.h()},h(){Xe(t.src,n=l[32])||k(t,"src",n),k(t,"alt","Evidencia fotográfica"),c(t,"width","100%"),c(t,"height","100%"),c(t,"object-fit","cover"),c(t,"border","1px solid #ddd"),c(t,"cursor","pointer"),c(o,"position","absolute"),c(o,"top","4px"),c(o,"right","4px"),c(o,"width","24px"),c(o,"height","24px"),c(o,"background","rgba(255,255,255,0.95)"),c(o,"border","none"),c(o,"border-radius","50%"),c(o,"display","flex"),c(o,"align-items","center"),c(o,"justify-content","center"),c(o,"color","#d13434"),c(o,"box-shadow","0 1px 4px rgba(0,0,0,0.2)"),c(o,"cursor","pointer"),c(o,"font-size","16px"),c(e,"width","calc(33.333% - 6px)"),c(e,"position","relative"),c(e,"aspect-ratio","1"),c(e,"border-radius","8px"),c(e,"overflow","hidden"),c(e,"box-sizing","border-box")},m(m,p){q(m,e,p),r(e,t),r(e,i),r(e,o),r(e,a),d||(E=[fe(t,"click",v),fe(o,"click",_)],d=!0)},p(m,p){l=m,p[0]&2&&!Xe(t.src,n=l[32])&&k(t,"src",n)},d(m){m&&u(e),d=!1,He(E)}}}function ln(l){let e,t,n,i,o,s,a=`<ion-icon icon="${Lt}"></ion-icon>`,d,E;return{c(){e=f("div"),t=f("div"),n=f("ion-img"),o=O(),s=f("button"),s.innerHTML=a,this.h()},l(v){e=h(v,"DIV",{style:!0});var _=g(e);t=h(_,"DIV",{style:!0});var m=g(t);n=h(m,"ION-IMG",{src:!0,alt:!0,style:!0}),g(n).forEach(u),o=w(m),s=h(m,"BUTTON",{style:!0,"data-svelte-h":!0}),te(s)!=="svelte-24n2ej"&&(s.innerHTML=a),m.forEach(u),_.forEach(u),this.h()},h(){Xe(n.src,i=l[5])||k(n,"src",i),k(n,"alt","Evidencia fotográfica"),c(n,"width","100%"),c(n,"height","auto"),c(s,"position","absolute"),c(s,"top","10px"),c(s,"right","10px"),c(s,"width","36px"),c(s,"height","36px"),c(s,"background","rgba(255,255,255,0.95)"),c(s,"border","none"),c(s,"border-radius","50%"),c(s,"display","flex"),c(s,"align-items","center"),c(s,"justify-content","center"),c(s,"cursor","pointer"),c(t,"position","relative"),c(t,"background","white"),c(t,"padding","20px"),c(t,"border-radius","12px"),c(t,"max-width","90vw"),c(t,"max-height","90vh"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0,0,0,0.85)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","10000")},m(v,_){q(v,e,_),r(e,t),r(t,n),r(t,o),r(t,s),d||(E=[fe(s,"click",l[14]),fe(t,"click",wt(l[17])),fe(e,"click",l[14])],d=!0)},p(v,_){_[0]&32&&!Xe(n.src,i=v[5])&&k(n,"src",i)},d(v){v&&u(e),d=!1,He(E)}}}function rn(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(n){e=h(n,"DIV",{style:!0,"data-svelte-h":!0}),te(e)!=="svelte-1is61st"&&(e.innerHTML=t),this.h()},h(){c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0,0,0,0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(n,i){q(n,e,i)},d(n){n&&u(e)}}}function so(l){let e,t,n,i,o="Cancelar",s,a,d="Agregar Incidencia",E,v,_,m="Confirmar",p,b,y,N,z="Tipo de Incidencia",x,S,B,W,R,C,D="Comentarios",A,I,T,P,M,Y,ne,ie,re=`<ion-icon icon="${Tt}" slot="start"></ion-icon>
          Subir Evidencia`,pe,L,se,oe,ve,_e,$,ye,be=qe(l[9]),le=[];for(let U=0;U<be.length;U+=1)le[U]=en($t(l,be,U));let ke=l[7].lat&&tn(l),Ie=l[0]&&nn(l),Ee=l[4]&&ln(l),ge=l[3]&&rn();return{c(){e=f("ion-header"),t=f("ion-toolbar"),n=f("ion-buttons"),i=f("ion-button"),i.textContent=o,s=O(),a=f("ion-title"),a.textContent=d,E=O(),v=f("ion-buttons"),_=f("ion-button"),_.textContent=m,p=O(),b=f("ion-content"),y=f("div"),N=f("h3"),N.textContent=z,x=O(),S=f("div");for(let U=0;U<le.length;U+=1)le[U].c();B=O(),ke&&ke.c(),W=O(),R=f("div"),C=f("h3"),C.textContent=D,A=O(),I=f("ion-item"),T=f("ion-textarea"),P=O(),M=f("section"),Y=f("label"),ne=f("ion-button"),ie=f("label"),ie.innerHTML=re,pe=O(),L=f("input"),se=O(),Ie&&Ie.c(),oe=O(),Ee&&Ee.c(),ve=O(),ge&&ge.c(),_e=De(),this.h()},l(U){e=h(U,"ION-HEADER",{translucent:!0});var X=g(e);t=h(X,"ION-TOOLBAR",{});var V=g(t);n=h(V,"ION-BUTTONS",{slot:!0});var ae=g(n);i=h(ae,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),te(i)!=="svelte-1f8rjcf"&&(i.textContent=o),ae.forEach(u),s=w(V),a=h(V,"ION-TITLE",{"data-svelte-h":!0}),te(a)!=="svelte-p6dvaq"&&(a.textContent=d),E=w(V),v=h(V,"ION-BUTTONS",{slot:!0});var J=g(v);_=h(J,"ION-BUTTON",{color:!0,strong:!0,"data-svelte-h":!0}),te(_)!=="svelte-1chv7eq"&&(_.textContent=m),J.forEach(u),V.forEach(u),X.forEach(u),p=w(U),b=h(U,"ION-CONTENT",{fullscreen:!0});var de=g(b);y=h(de,"DIV",{style:!0});var Le=g(y);N=h(Le,"H3",{style:!0,"data-svelte-h":!0}),te(N)!=="svelte-fci20u"&&(N.textContent=z),x=w(Le),S=h(Le,"DIV",{style:!0});var Pe=g(S);for(let K=0;K<le.length;K+=1)le[K].l(Pe);Pe.forEach(u),Le.forEach(u),B=w(de),ke&&ke.l(de),W=w(de),R=h(de,"DIV",{style:!0});var xe=g(R);C=h(xe,"H3",{style:!0,"data-svelte-h":!0}),te(C)!=="svelte-183y9rn"&&(C.textContent=D),A=w(xe),I=h(xe,"ION-ITEM",{lines:!0,style:!0});var Me=g(I);T=h(Me,"ION-TEXTAREA",{placeholder:!0,rows:!0}),g(T).forEach(u),Me.forEach(u),xe.forEach(u),P=w(de),M=h(de,"SECTION",{style:!0});var F=g(M);Y=h(F,"LABEL",{for:!0,style:!0});var ue=g(Y);ne=h(ue,"ION-BUTTON",{fill:!0,color:!0,expand:!0,style:!0});var H=g(ne);ie=h(H,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),te(ie)!=="svelte-18yehmm"&&(ie.innerHTML=re),pe=w(H),L=h(H,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),H.forEach(u),ue.forEach(u),F.forEach(u),se=w(de),Ie&&Ie.l(de),de.forEach(u),oe=w(U),Ee&&Ee.l(U),ve=w(U),ge&&ge.l(U),_e=De(),this.h()},h(){k(i,"color","medium"),k(n,"slot","start"),k(_,"color","primary"),k(_,"strong",""),k(v,"slot","end"),k(e,"translucent",""),c(N,"margin","0 0 10px 0"),c(N,"font-size","16px"),c(N,"font-weight","600"),c(S,"display","flex"),c(S,"flex-wrap","wrap"),c(S,"gap","10px"),c(y,"padding","12px"),c(y,"background","white"),c(y,"margin","10px"),c(y,"border-radius","12px"),c(C,"margin","0 0 8px 0"),c(C,"font-size","16px"),c(C,"font-weight","600"),k(T,"placeholder","Describe la incidencia aquí..."),k(T,"rows","2"),k(I,"lines","none"),c(I,"--background","#f5f5f5"),c(I,"--border-radius","10px"),c(R,"padding","12px"),c(R,"background","white"),c(R,"margin","0 10px 10px 10px"),c(R,"border-radius","12px"),G(ie,"for","eventEvidence"),c(ie,"width","100%"),c(ie,"padding","8px"),c(ie,"cursor","pointer"),c(L,"display","none"),G(L,"id","eventEvidence"),G(L,"name","fileToUpload"),G(L,"type","file"),G(L,"accept","image/*"),G(L,"capture","environment"),k(ne,"fill","outline"),k(ne,"color","primary"),k(ne,"expand","block"),c(ne,"--border-radius","10px"),c(ne,"height","40px"),c(ne,"font-size","14px"),G(Y,"for","eventEvidence"),c(Y,"display","block"),c(Y,"width","100%"),c(M,"padding","0 10px 10px 10px"),k(b,"fullscreen","")},m(U,X){q(U,e,X),r(e,t),r(t,n),r(n,i),r(t,s),r(t,a),r(t,E),r(t,v),r(v,_),q(U,p,X),q(U,b,X),r(b,y),r(y,N),r(y,x),r(y,S);for(let V=0;V<le.length;V+=1)le[V]&&le[V].m(S,null);r(b,B),ke&&ke.m(b,null),r(b,W),r(b,R),r(R,C),r(R,A),r(R,I),r(I,T),l[20](T),r(b,P),r(b,M),r(M,Y),r(Y,ne),r(ne,ie),r(ne,pe),r(ne,L),r(b,se),Ie&&Ie.m(b,null),q(U,oe,X),Ee&&Ee.m(U,X),q(U,ve,X),ge&&ge.m(U,X),q(U,_e,X),$||(ye=[fe(i,"click",l[11]),fe(_,"click",l[12]),fe(L,"change",l[10])],$=!0)},p(U,X){if(X[0]&33344){be=qe(U[9]);let V;for(V=0;V<be.length;V+=1){const ae=$t(U,be,V);le[V]?le[V].p(ae,X):(le[V]=en(ae),le[V].c(),le[V].m(S,null))}for(;V<le.length;V+=1)le[V].d(1);le.length=be.length}U[7].lat?ke?ke.p(U,X):(ke=tn(U),ke.c(),ke.m(b,W)):ke&&(ke.d(1),ke=null),U[0]?Ie?Ie.p(U,X):(Ie=nn(U),Ie.c(),Ie.m(b,null)):Ie&&(Ie.d(1),Ie=null),U[4]?Ee?Ee.p(U,X):(Ee=ln(U),Ee.c(),Ee.m(ve.parentNode,ve)):Ee&&(Ee.d(1),Ee=null),U[3]?ge||(ge=rn(),ge.c(),ge.m(_e.parentNode,_e)):ge&&(ge.d(1),ge=null)},i:Ce,o:Ce,d(U){U&&(u(e),u(p),u(b),u(oe),u(ve),u(_e)),gt(le,U),ke&&ke.d(),l[20](null),Ie&&Ie.d(),Ee&&Ee.d(U),ge&&ge.d(U),$=!1,He(ye)}}}function ao(l,e,t){let n=ft,o=document.querySelector("ion-modal").componentProps.routeId,s="",a=s?Ze(s):new Array,d="",E=!1,v=new Object,_=!1,m="",p="",b={lat:null,lng:null},y,N,z;const x=[{id:"car_accident",icon:oo,label:"Accidente",color:"#FFE4E1"},{id:"hospital",icon:eo,label:"Hospital",color:"#E1F5E1"},{id:"wc",icon:io,label:"Baño",color:"#E1E8FF"},{id:"restaurant",icon:to,label:"Restaurant",color:"#FFE8D1"},{id:"parking",icon:lo,label:"Parking",color:"#F0E1FF"},{id:"traffic",icon:$i,label:"Tráfico",color:"#FFF9E1"},{id:"gas",icon:no,label:"Gasolina",color:"#FFEAA7"},{id:"robbery",icon:ro,label:"Robo",color:"#FFD1DC"},{id:"other",icon:Zi,label:"Otro",color:"#E8E8E8"}];ot(()=>{v=JSON.parse(localStorage.getItem("userSession"))});const S=async(L,se)=>{await(await Qe.create({header:L||"Error",message:se||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},B=async L=>{t(3,E=!0);try{if(a.length>=5){S("Límite de evidencias","Solo se permite subir 5 fotos por parada");return}const oe=L.target.files[0],ve=await W(oe);if(!ve){S("Error","No se pudo comprimir la imagen");return}const _e={fileToUpload:ve,id_user_over:v.id_user,token:v.token},$=await new Promise((ye,be)=>{Ke(`${n}api/admin/manager/upload_img_driver.php`,le=>ye(le),_e)});$.success?(t(0,s=s?`${s},${$.img}`:$.img),t(1,a=Ze(s))):S("Error","No se pudo subir la imagen")}catch(se){console.error("Error during file upload:",se),S("Error","Algo salió mal al subir la imagen.")}finally{t(3,E=!1)}},W=async L=>new Promise(se=>{const oe=new Image;oe.src=URL.createObjectURL(L),oe.onload=()=>{const ve=document.createElement("canvas"),_e=ve.getContext("2d"),$=800,ye=600;let be=oe.width,le=oe.height;be>$&&(le*=$/be,be=$),le>ye&&(be*=ye/le,le=ye),ve.width=be,ve.height=le,_e.drawImage(oe,0,0,be,le),ve.toBlob(ke=>{se(ke),URL.revokeObjectURL(oe.src),_e.clearRect(0,0,ve.width,ve.height)},"image/jpeg",.7)}}),R=()=>{$e.dismiss()},C=()=>{t(3,E=!0);var L=new Object;t(0,s=a.join(",")),L.id_route=o,L.comments=d.value,L.lat=b.lat,L.lng=b.lng,L.type=p,L.img=s,L.id_user_over=v.id_user,L.token=v.token,L.id_driver=v.id_driver,!p||!s||!L.comments||!L.img?(t(3,E=!1),S("Datos incompletos","Llena los datos requeridos para completar el registro")):!L.lat||!L.lng?(t(3,E=!1),S("Ubicación no disponible","Por favor, asegúrate de que la ubicación está activada en tu dispositivo.")):Ke(`${n}api/admin/incidence/add_incidence.php`,function(se){se?(t(3,E=!1),S("Éxito","Incidencia registrada correctamente")):(t(3,E=!1),S("Error","No se pudo registrar la incidencia. Por favor, inténtalo de nuevo.")),R()},L)},D=L=>{t(5,m=L),t(4,_=!0)},A=()=>{t(4,_=!1),t(5,m="")};async function I(L){t(6,p=L),t(3,E=!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(async se=>{t(7,b.lat=se.coords.latitude,b),t(7,b.lng=se.coords.longitude,b),await T()},()=>{console.log("Geolocalización denegada"),t(3,E=!1)})}async function T(){if(await Ot(),!y)return;const{Map:L}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:se}=await google.maps.importLibrary("marker");N?N.setCenter(b):N=new L(y,{zoom:15,center:b,mapId:"4504f8b37365c3d0"});const oe=x.find(ye=>ye.id===p);if(!oe)return;z&&z.setMap(null);const ve=document.createElement("div");ve.style.cssText=`
      display:flex;align-items:center;justify-content:center;
      width:38px;height:38px;border-radius:50%;
      background:#ffffff;border:2px solid #d13434;
      box-shadow:0 0 4px rgba(0,0,0,.3);
    `;const _e=document.createElementNS("http://www.w3.org/2000/svg","svg");_e.setAttribute("width","18"),_e.setAttribute("height","18"),_e.setAttribute("viewBox","0 0 512 512"),_e.style.cssText="color:#d13434;";const $=document.createElementNS("http://www.w3.org/2000/svg","path");$.setAttribute("fill","currentColor"),$.setAttribute("d",oe.icon.icon[4]),_e.appendChild($),ve.appendChild(_e),z=new se({map:N,position:b,title:oe.label,content:ve}),t(3,E=!1)}function P(L=0){var se=Ln(L,a,[""],s);t(1,a=se.files),t(0,s=se.selectedImages)}function M(L){Nt.call(this,l,L)}const Y=L=>I(L.id);function ne(L){Be[L?"unshift":"push"](()=>{y=L,t(8,y)})}function ie(L){Be[L?"unshift":"push"](()=>{d=L,t(2,d)})}return[s,a,d,E,_,m,p,b,y,x,B,R,C,D,A,I,P,M,Y,ne,ie,L=>D(L),L=>P(L)]}class co extends tt{constructor(e){super(),nt(this,e,ao,so,et,{},null,[-1,-1])}}function sn(l,e,t){const n=l.slice();return n[7]=e[t],n}function uo(l){let e,t="Cargar gasto",n,i;function o(...s){return l[4](l[7],...s)}return{c(){e=f("ion-button"),e.textContent=t,this.h()},l(s){e=h(s,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),te(e)!=="svelte-175aelj"&&(e.textContent=t),this.h()},h(){k(e,"fill","outline"),k(e,"size","small"),k(e,"aria-selected","")},m(s,a){q(s,e,a),n||(i=fe(e,"click",o),n=!0)},p(s,a){l=s},d(s){s&&u(e),n=!1,i()}}}function fo(l){let e,t="Gasto completado";return{c(){e=f("ion-button"),e.textContent=t,this.h()},l(n){e=h(n,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),te(e)!=="svelte-tlger7"&&(e.textContent=t),this.h()},h(){k(e,"fill","solid"),k(e,"size","small"),k(e,"aria-selected","")},m(n,i){q(n,e,i)},p:Ce,d(n){n&&u(e)}}}function an(l,e){let t,n,i,o=e[7].concept+"",s,a,d;function E(m,p){return m[7].status=="done"?fo:uo}let _=E(e)(e);return{key:l,first:null,c(){t=f("ion-item"),n=f("ion-label"),i=f("p"),s=Oe(o),a=O(),_.c(),d=O(),this.h()},l(m){t=h(m,"ION-ITEM",{});var p=g(t);n=h(p,"ION-LABEL",{style:!0});var b=g(n);i=h(b,"P",{style:!0});var y=g(i);s=we(y,o),y.forEach(u),b.forEach(u),a=w(p),_.l(p),d=w(p),p.forEach(u),this.h()},h(){c(i,"margin-left","10px"),c(n,"display","flex"),this.first=t},m(m,p){q(m,t,p),r(t,n),r(n,i),r(i,s),r(t,a),_.m(t,null),r(t,d)},p(m,p){e=m,_.p(e,p)},d(m){m&&u(t),_.d()}}}function ho(l){let e,t,n,i,o=`<ion-icon style="font-size: 25px!important;" icon="${Jn}"></ion-icon>`,s,a,d="LISTA DE GASTOS",E,v,_,m=[],p=new Map,b,y,N,z="Cerrar",x,S,B=qe(l[0]);const W=R=>R[7].id_expenses;for(let R=0;R<B.length;R+=1){let C=sn(l,B,R),D=W(C);p.set(D,m[R]=an(D,C))}return{c(){e=f("ion-header"),t=f("ion-toolbar"),n=f("ion-buttons"),i=f("ion-button"),i.innerHTML=o,s=O(),a=f("ion-title"),a.textContent=d,E=O(),v=f("ion-content"),_=f("ion-list");for(let R=0;R<m.length;R+=1)m[R].c();b=O(),y=f("ion-footer"),N=f("ion-button"),N.textContent=z,this.h()},l(R){e=h(R,"ION-HEADER",{translucent:!0});var C=g(e);t=h(C,"ION-TOOLBAR",{});var D=g(t);n=h(D,"ION-BUTTONS",{slot:!0});var A=g(n);i=h(A,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),te(i)!=="svelte-160xz3i"&&(i.innerHTML=o),A.forEach(u),s=w(D),a=h(D,"ION-TITLE",{"data-svelte-h":!0}),te(a)!=="svelte-1phn90x"&&(a.textContent=d),D.forEach(u),C.forEach(u),E=w(R),v=h(R,"ION-CONTENT",{fullscreen:!0});var I=g(v);_=h(I,"ION-LIST",{});var T=g(_);for(let M=0;M<m.length;M+=1)m[M].l(T);T.forEach(u),I.forEach(u),b=w(R),y=h(R,"ION-FOOTER",{});var P=g(y);N=h(P,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),te(N)!=="svelte-zv7v83"&&(N.textContent=z),P.forEach(u),this.h()},h(){k(i,"color","medium"),k(n,"slot","end"),k(e,"translucent",""),k(v,"fullscreen",""),k(N,"fill","outline"),k(N,"color","tertiary"),k(N,"strong",""),c(N,"width","99%"),c(N,"height","auto")},m(R,C){q(R,e,C),r(e,t),r(t,n),r(n,i),r(t,s),r(t,a),q(R,E,C),q(R,v,C),r(v,_);for(let D=0;D<m.length;D+=1)m[D]&&m[D].m(_,null);q(R,b,C),q(R,y,C),r(y,N),x||(S=[fe(i,"click",l[3]),fe(N,"click",l[1])],x=!0)},p(R,[C]){C&5&&(B=qe(R[0]),m=ut(m,C,W,1,R,B,p,_,dt,an,null,sn))},i:Ce,o:Ce,d(R){R&&(u(e),u(E),u(v),u(b),u(y));for(let C=0;C<m.length;C+=1)m[C].d();x=!1,He(S)}}}function _o(l){let e=document.querySelector("ion-modal");e.componentProps.routeId;let t=e.componentProps.expenses;ot(()=>{});const n=()=>{$e.dismiss()};function i(a,d,E,v,_){e.componentProps.ex_amount=E,e.componentProps.ex_concept=d,e.componentProps.ex_type=v,e.componentProps.id_expense=_,Ye("modal-expense",Et,{amount:E,concept:d,type:v,id_expense:_}).then(()=>{}),n()}return[t,n,i,a=>{Ye("modal-expense",Et,{routeId:a}).then(d=>{}),n()},(a,d)=>i(d,a.concept,a.amount,a.type,a.id_expenses)]}class po extends tt{constructor(e){super(),nt(this,e,_o,ho,et,{})}}const{document:cn}=li;function un(l,e,t){const n=l.slice();return n[63]=e[t],n[65]=t,n}function dn(l,e,t){const n=l.slice();return n[63]=e[t],n[65]=t,n}function fn(l,e,t){const n=l.slice();return n[63]=e[t],n[65]=t,n}function hn(l){let e,t;return e=new Yn({props:{$$slots:{default:[Co]},$$scope:{ctx:l}}}),{c(){yn(e.$$.fragment)},l(n){On(e.$$.fragment,n)},m(n,i){wn(e,n,i),t=!0},p(n,i){const o={};i[0]&6139|i[2]&64&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(ct(e.$$.fragment,n),t=!0)},o(n){_t(e.$$.fragment,n),t=!1},d(n){Nn(e,n)}}}function mo(l){let e,t='<div id="g_map" style="width: 100%; height: 100vh;"></div>';return{c(){e=f("ion-content"),e.innerHTML=t},l(n){e=h(n,"ION-CONTENT",{"data-svelte-h":!0}),te(e)!=="svelte-h8v4nk"&&(e.innerHTML=t)},m(n,i){q(n,e,i)},p:Ce,d(n){n&&u(e)}}}function vo(l){let e,t=l[9]==="list"&&l[12]&&l[14](),n;function i(d,E){if(d[7].length>0)return bo;if(!d[3])return go}let o=i(l),s=o&&o(l),a=t&&En(l);return{c(){s&&s.c(),e=O(),a&&a.c(),n=De()},l(d){s&&s.l(d),e=w(d),a&&a.l(d),n=De()},m(d,E){s&&s.m(d,E),q(d,e,E),a&&a.m(d,E),q(d,n,E)},p(d,E){o===(o=i(d))&&s?s.p(d,E):(s&&s.d(1),s=o&&o(d),s&&(s.c(),s.m(e.parentNode,e))),E[0]&4608&&(t=d[9]==="list"&&d[12]&&d[14]()),t?a?a.p(d,E):(a=En(d),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(d){d&&(u(e),u(n)),s&&s.d(d),a&&a.d(d)}}}function go(l){let e,t,n,i='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jala para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',o,s,a,d,E,v,_="0",m,p,b,y,N,z=l[6].origin+"",x,S,B,W,R,C,D=[],A=new Map,I,T,P,M,Y,ne=l[5].length+1+"",ie,re,pe,L,se,oe,ve=l[6].destination+"",_e,$,ye,be="",le,ke,Ie,Ee,ge=l[4]&&_n(),U=qe(l[5]);const X=V=>V[63].id_event;for(let V=0;V<U.length;V+=1){let ae=un(l,U,V),J=X(ae);A.set(J,D[V]=mn(J,ae))}return{c(){ge&&ge.c(),e=O(),t=f("ion-content"),n=f("ion-refresher"),n.innerHTML=i,o=O(),s=f("ion-list"),a=f("ion-item"),d=f("ion-avatar"),E=f("div"),v=f("div"),v.textContent=_,p=O(),b=f("ion-label"),y=f("ion-text"),N=f("h3"),x=Oe(z),S=O(),B=f("div"),W=O(),R=f("ion-icon"),C=O();for(let V=0;V<D.length;V+=1)D[V].c();I=O(),T=f("ion-item"),P=f("ion-avatar"),M=f("div"),Y=f("div"),ie=Oe(ne),pe=O(),L=f("ion-label"),se=f("ion-text"),oe=f("h3"),_e=Oe(ve),$=O(),ye=f("div"),ye.innerHTML=be,le=O(),ke=f("ion-icon"),this.h()},l(V){ge&&ge.l(V),e=w(V),t=h(V,"ION-CONTENT",{});var ae=g(t);n=h(ae,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),te(n)!=="svelte-1mlmyg"&&(n.innerHTML=i),o=w(ae),s=h(ae,"ION-LIST",{});var J=g(s);a=h(J,"ION-ITEM",{});var de=g(a);d=h(de,"ION-AVATAR",{slot:!0});var Le=g(d);E=h(Le,"DIV",{class:!0,title:!0,style:!0});var Pe=g(E);v=h(Pe,"DIV",{class:!0,"data-svelte-h":!0}),te(v)!=="svelte-b78non"&&(v.textContent=_),Pe.forEach(u),Le.forEach(u),p=w(de),b=h(de,"ION-LABEL",{button:!0});var xe=g(b);y=h(xe,"ION-TEXT",{color:!0});var Me=g(y);N=h(Me,"H3",{});var F=g(N);x=we(F,z),F.forEach(u),Me.forEach(u),S=w(xe),B=h(xe,"DIV",{class:!0}),g(B).forEach(u),xe.forEach(u),W=w(de),R=h(de,"ION-ICON",{icon:!0,slot:!0}),g(R).forEach(u),de.forEach(u),C=w(J);for(let ce=0;ce<D.length;ce+=1)D[ce].l(J);I=w(J),T=h(J,"ION-ITEM",{});var ue=g(T);P=h(ue,"ION-AVATAR",{slot:!0});var H=g(P);M=h(H,"DIV",{class:!0,title:!0,style:!0});var K=g(M);Y=h(K,"DIV",{class:!0});var Z=g(Y);ie=we(Z,ne),Z.forEach(u),K.forEach(u),H.forEach(u),pe=w(ue),L=h(ue,"ION-LABEL",{button:!0});var Q=g(L);se=h(Q,"ION-TEXT",{color:!0});var me=g(se);oe=h(me,"H3",{});var j=g(oe);_e=we(j,ve),j.forEach(u),me.forEach(u),$=w(Q),ye=h(Q,"DIV",{class:!0,"data-svelte-h":!0}),te(ye)!=="svelte-1284run"&&(ye.innerHTML=be),Q.forEach(u),le=w(ue),ke=h(ue,"ION-ICON",{icon:!0,slot:!0}),g(ke).forEach(u),ue.forEach(u),J.forEach(u),ae.forEach(u),this.h()},h(){k(n,"slot","fixed"),G(v,"class","order svelte-1ita8l7"),G(E,"class","order-wrapper svelte-1ita8l7"),G(E,"title",m="$"+l[6].origin),c(E,"background-color",l[6].color),c(E,"color",Ue(l[6].color)),k(d,"slot","start"),k(y,"color","#2e2e2e"),G(B,"class","sub svelte-1ita8l7"),k(b,"button",""),k(R,"icon",Je),k(R,"slot","end"),G(Y,"class","order svelte-1ita8l7"),G(M,"class","order-wrapper svelte-1ita8l7"),G(M,"title",re="$"+l[6].destination),c(M,"background-color",l[6].color),c(M,"color",Ue(l[6].color)),k(P,"slot","start"),k(se,"color","#2e2e2e"),G(ye,"class","sub svelte-1ita8l7"),k(L,"button",""),k(ke,"icon",Je),k(ke,"slot","end")},m(V,ae){ge&&ge.m(V,ae),q(V,e,ae),q(V,t,ae),r(t,n),l[36](n),r(t,o),r(t,s),r(s,a),r(a,d),r(d,E),r(E,v),r(a,p),r(a,b),r(b,y),r(y,N),r(N,x),r(b,S),r(b,B),r(a,W),r(a,R),r(s,C);for(let J=0;J<D.length;J+=1)D[J]&&D[J].m(s,null);r(s,I),r(s,T),r(T,P),r(P,M),r(M,Y),r(Y,ie),r(T,pe),r(T,L),r(L,se),r(se,oe),r(oe,_e),r(L,$),r(L,ye),r(T,le),r(T,ke),Ie||(Ee=[fe(n,"ionRefresh",l[13]),fe(b,"click",l[37]),fe(L,"click",l[39])],Ie=!0)},p(V,ae){V[4]?ge||(ge=_n(),ge.c(),ge.m(e.parentNode,e)):ge&&(ge.d(1),ge=null),ae[0]&64&&m!==(m="$"+V[6].origin)&&G(E,"title",m),ae[0]&64&&c(E,"background-color",V[6].color),ae[0]&64&&c(E,"color",Ue(V[6].color)),ae[0]&64&&z!==(z=V[6].origin+"")&&Ae(x,z),ae[0]&10552352&&(U=qe(V[5]),D=ut(D,ae,X,1,V,U,A,s,dt,mn,I,un)),ae[0]&32&&ne!==(ne=V[5].length+1+"")&&Ae(ie,ne),ae[0]&64&&re!==(re="$"+V[6].destination)&&G(M,"title",re),ae[0]&64&&c(M,"background-color",V[6].color),ae[0]&64&&c(M,"color",Ue(V[6].color)),ae[0]&64&&ve!==(ve=V[6].destination+"")&&Ae(_e,ve)},d(V){V&&(u(e),u(t)),ge&&ge.d(V),l[36](null);for(let ae=0;ae<D.length;ae+=1)D[ae].d();Ie=!1,He(Ee)}}}function bo(l){let e,t;function n(s,a){return a[0]&144&&(e=null),e==null&&(e=!!(s[7].filter(Mo).every(xo)&&!s[4])),e?yo:Io}let i=n(l,[-1,-1,-1]),o=i(l);return{c(){o.c(),t=De()},l(s){o.l(s),t=De()},m(s,a){o.m(s,a),q(s,t,a)},p(s,a){i===(i=n(s,a))&&o?o.p(s,a):(o.d(1),o=i(s),o&&(o.c(),o.m(t.parentNode,t)))},d(s){s&&u(t),o.d(s)}}}function _n(l){return{c:Ce,l:Ce,m:Ce,d:Ce}}function pn(l){let e;return{c(){e=f("span"),this.h()},l(t){e=h(t,"SPAN",{class:!0}),g(e).forEach(u),this.h()},h(){G(e,"class","notes svelte-1ita8l7")},m(t,n){q(t,e,n)},d(t){t&&u(e)}}}function ko(l){let e;return{c(){e=f("ion-icon"),this.h()},l(t){e=h(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),g(e).forEach(u),this.h()},h(){k(e,"icon",Je),k(e,"slot","end"),c(e,"color",ze(l[63].status,l[63].date_service))},m(t,n){q(t,e,n)},p(t,n){n[0]&32&&c(e,"color",ze(t[63].status,t[63].date_service))},d(t){t&&u(e)}}}function Eo(l){let e,t=(l[63].tag?l[63].tag:"")+"",n;return{c(){e=f("div"),n=Oe(t),this.h()},l(i){e=h(i,"DIV",{class:!0,slot:!0,style:!0});var o=g(e);n=we(o,t),o.forEach(u),this.h()},h(){G(e,"class","stop-tag"),G(e,"slot","end"),c(e,"background-color",Ge(l[63].tag_color,.3)),c(e,"border","1px solid "+Ge(l[63].tag_color,.4)),c(e,"color",l[63].tag_color),c(e,"font-size","10px"),c(e,"text-align","center"),c(e,"align-content","center"),c(e,"border-radius","20px"),c(e,"white-space","normal"),c(e,"padding","3px 6px"),c(e,"width","auto",1),c(e,"display","inline-block"),c(e,"font-weight","500")},m(i,o){q(i,e,o),r(e,n)},p(i,o){o[0]&32&&t!==(t=(i[63].tag?i[63].tag:"")+"")&&Ae(n,t),o[0]&32&&c(e,"background-color",Ge(i[63].tag_color,.3)),o[0]&32&&c(e,"border","1px solid "+Ge(i[63].tag_color,.4)),o[0]&32&&c(e,"color",i[63].tag_color)},d(i){i&&u(e)}}}function mn(l,e){let t,n,i,o,s=parseInt(e[63].pos)+1+"",a,d,E,v,_,m,p=e[63].title+"",b,y,N=e[63].support_list&&e[63].support_list.length||e[21](e[63]),z,x,S,B=N&&pn();function W(){return e[38](e[63])}function R(A,I){return A[63].tag_color&&A[63].tag?Eo:ko}let C=R(e),D=C(e);return{key:l,first:null,c(){t=f("ion-item"),n=f("ion-avatar"),i=f("div"),o=f("div"),a=Oe(s),E=O(),v=f("ion-label"),_=f("ion-text"),m=f("h3"),b=Oe(p),y=O(),B&&B.c(),z=O(),D.c(),this.h()},l(A){t=h(A,"ION-ITEM",{});var I=g(t);n=h(I,"ION-AVATAR",{slot:!0});var T=g(n);i=h(T,"DIV",{class:!0,title:!0,style:!0});var P=g(i);o=h(P,"DIV",{class:!0});var M=g(o);a=we(M,s),M.forEach(u),P.forEach(u),T.forEach(u),E=w(I),v=h(I,"ION-LABEL",{button:!0});var Y=g(v);_=h(Y,"ION-TEXT",{color:!0});var ne=g(_);m=h(ne,"H3",{});var ie=g(m);b=we(ie,p),y=w(ie),B&&B.l(ie),ie.forEach(u),ne.forEach(u),Y.forEach(u),z=w(I),D.l(I),I.forEach(u),this.h()},h(){G(o,"class","order svelte-1ita8l7"),G(i,"class","order-wrapper svelte-1ita8l7"),G(i,"title",d=rt(e[63].status)),c(i,"background-color",ze(e[63].status,e[63].date_service)),c(i,"color",Ue(ze(e[63].status))),k(n,"slot","start"),k(_,"color","#2e2e2e"),k(v,"button",""),this.first=t},m(A,I){q(A,t,I),r(t,n),r(n,i),r(i,o),r(o,a),r(t,E),r(t,v),r(v,_),r(_,m),r(m,b),r(m,y),B&&B.m(m,null),r(t,z),D.m(t,null),x||(S=fe(v,"click",W),x=!0)},p(A,I){e=A,I[0]&32&&s!==(s=parseInt(e[63].pos)+1+"")&&Ae(a,s),I[0]&32&&d!==(d=rt(e[63].status))&&G(i,"title",d),I[0]&32&&c(i,"background-color",ze(e[63].status,e[63].date_service)),I[0]&32&&c(i,"color",Ue(ze(e[63].status))),I[0]&32&&p!==(p=e[63].title+"")&&Ae(b,p),I[0]&32&&(N=e[63].support_list&&e[63].support_list.length||e[21](e[63])),N?B||(B=pn(),B.c(),B.m(m,null)):B&&(B.d(1),B=null),C===(C=R(e))&&D?D.p(e,I):(D.d(1),D=C(e),D&&(D.c(),D.m(t,null)))},d(A){A&&u(t),B&&B.d(),D.d(),x=!1,S()}}}function Io(l){let e,t,n='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Pull to refresh" refreshing-spinner="circles" refreshing-text="Refreshing..."></ion-refresher-content>',i,o,s,a,d,E,v="0",_,m,p,b,y,N=l[6].origin+"",z,x,S,B,W,R,C=[],D=new Map,A,I,T,P,M,Y=l[5].length+1+"",ne,ie,re,pe,L,se,oe=l[6].destination+"",ve,_e,$,ye="",be,le,ke,Ie,Ee=qe(l[5]);const ge=U=>U[63].id_event;for(let U=0;U<Ee.length;U+=1){let X=dn(l,Ee,U),V=ge(X);D.set(V,C[U]=gn(V,X))}return{c(){e=f("ion-content"),t=f("ion-refresher"),t.innerHTML=n,i=O(),o=f("ion-list"),s=f("ion-item"),a=f("ion-avatar"),d=f("div"),E=f("div"),E.textContent=v,m=O(),p=f("ion-label"),b=f("ion-text"),y=f("h3"),z=Oe(N),x=O(),S=f("div"),B=O(),W=f("ion-icon"),R=O();for(let U=0;U<C.length;U+=1)C[U].c();A=O(),I=f("ion-item"),T=f("ion-avatar"),P=f("div"),M=f("div"),ne=Oe(Y),re=O(),pe=f("ion-label"),L=f("ion-text"),se=f("h3"),ve=Oe(oe),_e=O(),$=f("div"),$.innerHTML=ye,be=O(),le=f("ion-icon"),this.h()},l(U){e=h(U,"ION-CONTENT",{});var X=g(e);t=h(X,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),te(t)!=="svelte-1l8nqqz"&&(t.innerHTML=n),i=w(X),o=h(X,"ION-LIST",{});var V=g(o);s=h(V,"ION-ITEM",{});var ae=g(s);a=h(ae,"ION-AVATAR",{slot:!0});var J=g(a);d=h(J,"DIV",{class:!0,title:!0,style:!0});var de=g(d);E=h(de,"DIV",{class:!0,"data-svelte-h":!0}),te(E)!=="svelte-b78non"&&(E.textContent=v),de.forEach(u),J.forEach(u),m=w(ae),p=h(ae,"ION-LABEL",{button:!0});var Le=g(p);b=h(Le,"ION-TEXT",{color:!0});var Pe=g(b);y=h(Pe,"H3",{});var xe=g(y);z=we(xe,N),xe.forEach(u),Pe.forEach(u),x=w(Le),S=h(Le,"DIV",{class:!0}),g(S).forEach(u),Le.forEach(u),B=w(ae),W=h(ae,"ION-ICON",{icon:!0,slot:!0}),g(W).forEach(u),ae.forEach(u),R=w(V);for(let me=0;me<C.length;me+=1)C[me].l(V);A=w(V),I=h(V,"ION-ITEM",{});var Me=g(I);T=h(Me,"ION-AVATAR",{slot:!0});var F=g(T);P=h(F,"DIV",{class:!0,title:!0,style:!0});var ue=g(P);M=h(ue,"DIV",{class:!0});var H=g(M);ne=we(H,Y),H.forEach(u),ue.forEach(u),F.forEach(u),re=w(Me),pe=h(Me,"ION-LABEL",{button:!0});var K=g(pe);L=h(K,"ION-TEXT",{color:!0});var Z=g(L);se=h(Z,"H3",{});var Q=g(se);ve=we(Q,oe),Q.forEach(u),Z.forEach(u),_e=w(K),$=h(K,"DIV",{class:!0,"data-svelte-h":!0}),te($)!=="svelte-1uxrbi7"&&($.innerHTML=ye),K.forEach(u),be=w(Me),le=h(Me,"ION-ICON",{icon:!0,slot:!0}),g(le).forEach(u),Me.forEach(u),V.forEach(u),X.forEach(u),this.h()},h(){k(t,"slot","fixed"),G(E,"class","order svelte-1ita8l7"),G(d,"class","order-wrapper svelte-1ita8l7"),G(d,"title",_="$"+l[6].origin),c(d,"background-color",l[6].color),c(d,"color",Ue(l[6].color)),k(a,"slot","start"),k(b,"color","#2e2e2e"),G(S,"class","sub svelte-1ita8l7"),k(p,"button",""),k(W,"icon",Je),k(W,"slot","end"),G(M,"class","order svelte-1ita8l7"),G(P,"class","order-wrapper svelte-1ita8l7"),G(P,"title",ie="$"+l[6].destination),c(P,"background-color",l[6].color),c(P,"color",Ue(l[6].color)),k(T,"slot","start"),k(L,"color","#2e2e2e"),G($,"class","sub svelte-1ita8l7"),k(pe,"button",""),k(le,"icon",Je),k(le,"slot","end")},m(U,X){q(U,e,X),r(e,t),l[32](t),r(e,i),r(e,o),r(o,s),r(s,a),r(a,d),r(d,E),r(s,m),r(s,p),r(p,b),r(b,y),r(y,z),r(p,x),r(p,S),r(s,B),r(s,W),r(o,R);for(let V=0;V<C.length;V+=1)C[V]&&C[V].m(o,null);r(o,A),r(o,I),r(I,T),r(T,P),r(P,M),r(M,ne),r(I,re),r(I,pe),r(pe,L),r(L,se),r(se,ve),r(pe,_e),r(pe,$),r(I,be),r(I,le),ke||(Ie=[fe(t,"ionRefresh",l[13]),fe(p,"click",l[33]),fe(pe,"click",l[35])],ke=!0)},p(U,X){X[0]&64&&_!==(_="$"+U[6].origin)&&G(d,"title",_),X[0]&64&&c(d,"background-color",U[6].color),X[0]&64&&c(d,"color",Ue(U[6].color)),X[0]&64&&N!==(N=U[6].origin+"")&&Ae(z,N),X[0]&10552352&&(Ee=qe(U[5]),C=ut(C,X,ge,1,U,Ee,D,o,dt,gn,A,dn)),X[0]&32&&Y!==(Y=U[5].length+1+"")&&Ae(ne,Y),X[0]&64&&ie!==(ie="$"+U[6].destination)&&G(P,"title",ie),X[0]&64&&c(P,"background-color",U[6].color),X[0]&64&&c(P,"color",Ue(U[6].color)),X[0]&64&&oe!==(oe=U[6].destination+"")&&Ae(ve,oe)},d(U){U&&u(e),l[32](null);for(let X=0;X<C.length;X+=1)C[X].d();ke=!1,He(Ie)}}}function yo(l){let e,t,n='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jale para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',i,o,s,a,d,E,v="0",_,m,p,b,y,N=l[6].origin+"",z,x,S,B,W,R,C=[],D=new Map,A,I,T,P,M,Y=l[5].length+1+"",ne,ie,re,pe,L,se,oe=l[6].destination+"",ve,_e,$,ye="",be,le,ke,Ie,Ee=qe(l[5]);const ge=U=>U[63].id_event;for(let U=0;U<Ee.length;U+=1){let X=fn(l,Ee,U),V=ge(X);D.set(V,C[U]=kn(V,X))}return{c(){e=f("ion-content"),t=f("ion-refresher"),t.innerHTML=n,i=O(),o=f("ion-list"),s=f("ion-item"),a=f("ion-avatar"),d=f("div"),E=f("div"),E.textContent=v,m=O(),p=f("ion-label"),b=f("ion-text"),y=f("h3"),z=Oe(N),x=O(),S=f("div"),B=O(),W=f("ion-icon"),R=O();for(let U=0;U<C.length;U+=1)C[U].c();A=O(),I=f("ion-item"),T=f("ion-avatar"),P=f("div"),M=f("div"),ne=Oe(Y),re=O(),pe=f("ion-label"),L=f("ion-text"),se=f("h3"),ve=Oe(oe),_e=O(),$=f("div"),$.innerHTML=ye,be=O(),le=f("ion-icon"),this.h()},l(U){e=h(U,"ION-CONTENT",{});var X=g(e);t=h(X,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),te(t)!=="svelte-vjbhg4"&&(t.innerHTML=n),i=w(X),o=h(X,"ION-LIST",{});var V=g(o);s=h(V,"ION-ITEM",{});var ae=g(s);a=h(ae,"ION-AVATAR",{slot:!0});var J=g(a);d=h(J,"DIV",{class:!0,title:!0,style:!0});var de=g(d);E=h(de,"DIV",{class:!0,"data-svelte-h":!0}),te(E)!=="svelte-b78non"&&(E.textContent=v),de.forEach(u),J.forEach(u),m=w(ae),p=h(ae,"ION-LABEL",{button:!0});var Le=g(p);b=h(Le,"ION-TEXT",{color:!0});var Pe=g(b);y=h(Pe,"H3",{});var xe=g(y);z=we(xe,N),xe.forEach(u),Pe.forEach(u),x=w(Le),S=h(Le,"DIV",{class:!0}),g(S).forEach(u),Le.forEach(u),B=w(ae),W=h(ae,"ION-ICON",{icon:!0,slot:!0}),g(W).forEach(u),ae.forEach(u),R=w(V);for(let me=0;me<C.length;me+=1)C[me].l(V);A=w(V),I=h(V,"ION-ITEM",{});var Me=g(I);T=h(Me,"ION-AVATAR",{slot:!0});var F=g(T);P=h(F,"DIV",{class:!0,title:!0,style:!0});var ue=g(P);M=h(ue,"DIV",{class:!0});var H=g(M);ne=we(H,Y),H.forEach(u),ue.forEach(u),F.forEach(u),re=w(Me),pe=h(Me,"ION-LABEL",{button:!0});var K=g(pe);L=h(K,"ION-TEXT",{color:!0});var Z=g(L);se=h(Z,"H3",{});var Q=g(se);ve=we(Q,oe),Q.forEach(u),Z.forEach(u),_e=w(K),$=h(K,"DIV",{class:!0,"data-svelte-h":!0}),te($)!=="svelte-1uxrbi7"&&($.innerHTML=ye),K.forEach(u),be=w(Me),le=h(Me,"ION-ICON",{icon:!0,slot:!0}),g(le).forEach(u),Me.forEach(u),V.forEach(u),X.forEach(u),this.h()},h(){k(t,"slot","fixed"),G(E,"class","order svelte-1ita8l7"),G(d,"class","order-wrapper svelte-1ita8l7"),G(d,"title",_="$"+l[6].origin),c(d,"background-color",l[6].color),c(d,"color",Ue(l[6].color)),k(a,"slot","start"),k(b,"color","#2e2e2e"),G(S,"class","sub svelte-1ita8l7"),k(p,"button",""),k(W,"icon",Je),k(W,"slot","end"),G(M,"class","order svelte-1ita8l7"),G(P,"class","order-wrapper svelte-1ita8l7"),G(P,"title",ie="$"+l[6].destination),c(P,"background-color",l[6].color),c(P,"color",Ue(l[6].color)),k(T,"slot","start"),k(L,"color","#2e2e2e"),G($,"class","sub svelte-1ita8l7"),k(pe,"button",""),k(le,"icon",Je),k(le,"slot","end")},m(U,X){q(U,e,X),r(e,t),l[28](t),r(e,i),r(e,o),r(o,s),r(s,a),r(a,d),r(d,E),r(s,m),r(s,p),r(p,b),r(b,y),r(y,z),r(p,x),r(p,S),r(s,B),r(s,W),r(o,R);for(let V=0;V<C.length;V+=1)C[V]&&C[V].m(o,null);r(o,A),r(o,I),r(I,T),r(T,P),r(P,M),r(M,ne),r(I,re),r(I,pe),r(pe,L),r(L,se),r(se,ve),r(pe,_e),r(pe,$),r(I,be),r(I,le),ke||(Ie=[fe(t,"ionRefresh",l[13]),fe(p,"click",l[29]),fe(pe,"click",l[31])],ke=!0)},p(U,X){X[0]&64&&_!==(_="$"+U[6].origin)&&G(d,"title",_),X[0]&64&&c(d,"background-color",U[6].color),X[0]&64&&c(d,"color",Ue(U[6].color)),X[0]&64&&N!==(N=U[6].origin+"")&&Ae(z,N),X[0]&10552352&&(Ee=qe(U[5]),C=ut(C,X,ge,1,U,Ee,D,o,dt,kn,A,fn)),X[0]&32&&Y!==(Y=U[5].length+1+"")&&Ae(ne,Y),X[0]&64&&ie!==(ie="$"+U[6].destination)&&G(P,"title",ie),X[0]&64&&c(P,"background-color",U[6].color),X[0]&64&&c(P,"color",Ue(U[6].color)),X[0]&64&&oe!==(oe=U[6].destination+"")&&Ae(ve,oe)},d(U){U&&u(e),l[28](null);for(let X=0;X<C.length;X+=1)C[X].d();ke=!1,He(Ie)}}}function vn(l){let e;return{c(){e=f("span"),this.h()},l(t){e=h(t,"SPAN",{class:!0}),g(e).forEach(u),this.h()},h(){G(e,"class","notes svelte-1ita8l7")},m(t,n){q(t,e,n)},d(t){t&&u(e)}}}function Oo(l){let e;return{c(){e=f("ion-icon"),this.h()},l(t){e=h(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),g(e).forEach(u),this.h()},h(){k(e,"icon",Je),k(e,"slot","end"),c(e,"color",ze(l[63].status,l[63].date_service))},m(t,n){q(t,e,n)},p(t,n){n[0]&32&&c(e,"color",ze(t[63].status,t[63].date_service))},d(t){t&&u(e)}}}function wo(l){let e,t=(l[63].tag?l[63].tag:"")+"",n;return{c(){e=f("div"),n=Oe(t),this.h()},l(i){e=h(i,"DIV",{class:!0,slot:!0,style:!0});var o=g(e);n=we(o,t),o.forEach(u),this.h()},h(){G(e,"class","stop-tag"),G(e,"slot","end"),c(e,"background-color",Ge(l[63].tag_color,.3)),c(e,"border","1px solid "+Ge(l[63].tag_color,.4)),c(e,"color",l[63].tag_color),c(e,"font-size","10px"),c(e,"text-align","center"),c(e,"align-content","center"),c(e,"border-radius","20px"),c(e,"white-space","normal"),c(e,"padding","3px 6px"),c(e,"width","auto",1),c(e,"display","inline-block"),c(e,"font-weight","500")},m(i,o){q(i,e,o),r(e,n)},p(i,o){o[0]&32&&t!==(t=(i[63].tag?i[63].tag:"")+"")&&Ae(n,t),o[0]&32&&c(e,"background-color",Ge(i[63].tag_color,.3)),o[0]&32&&c(e,"border","1px solid "+Ge(i[63].tag_color,.4)),o[0]&32&&c(e,"color",i[63].tag_color)},d(i){i&&u(e)}}}function gn(l,e){let t,n,i,o,s=parseInt(e[63].pos)+1+"",a,d,E,v,_,m,p=e[63].title+"",b,y,N=e[63].support_list&&e[63].support_list.length||e[21](e[63]),z,x,S="",B,W,R,C=N&&vn();function D(){return e[34](e[63])}function A(P,M){return P[63].tag_color&&P[63].tag?wo:Oo}let I=A(e),T=I(e);return{key:l,first:null,c(){t=f("ion-item"),n=f("ion-avatar"),i=f("div"),o=f("div"),a=Oe(s),E=O(),v=f("ion-label"),_=f("ion-text"),m=f("h3"),b=Oe(p),y=O(),C&&C.c(),z=O(),x=f("div"),x.innerHTML=S,B=O(),T.c(),this.h()},l(P){t=h(P,"ION-ITEM",{});var M=g(t);n=h(M,"ION-AVATAR",{slot:!0});var Y=g(n);i=h(Y,"DIV",{class:!0,title:!0,style:!0});var ne=g(i);o=h(ne,"DIV",{class:!0});var ie=g(o);a=we(ie,s),ie.forEach(u),ne.forEach(u),Y.forEach(u),E=w(M),v=h(M,"ION-LABEL",{button:!0});var re=g(v);_=h(re,"ION-TEXT",{color:!0});var pe=g(_);m=h(pe,"H3",{});var L=g(m);b=we(L,p),y=w(L),C&&C.l(L),L.forEach(u),pe.forEach(u),z=w(re),x=h(re,"DIV",{class:!0,"data-svelte-h":!0}),te(x)!=="svelte-4k5p1b"&&(x.innerHTML=S),re.forEach(u),B=w(M),T.l(M),M.forEach(u),this.h()},h(){G(o,"class","order svelte-1ita8l7"),G(i,"class","order-wrapper svelte-1ita8l7"),G(i,"title",d=rt(e[63].status)),c(i,"background-color",ze(e[63].status,e[63].date_service)),c(i,"color",Ue(ze(e[63].status))),k(n,"slot","start"),k(_,"color","#2e2e2e"),G(x,"class","sub svelte-1ita8l7"),k(v,"button",""),this.first=t},m(P,M){q(P,t,M),r(t,n),r(n,i),r(i,o),r(o,a),r(t,E),r(t,v),r(v,_),r(_,m),r(m,b),r(m,y),C&&C.m(m,null),r(v,z),r(v,x),r(t,B),T.m(t,null),W||(R=fe(v,"click",D),W=!0)},p(P,M){e=P,M[0]&32&&s!==(s=parseInt(e[63].pos)+1+"")&&Ae(a,s),M[0]&32&&d!==(d=rt(e[63].status))&&G(i,"title",d),M[0]&32&&c(i,"background-color",ze(e[63].status,e[63].date_service)),M[0]&32&&c(i,"color",Ue(ze(e[63].status))),M[0]&32&&p!==(p=e[63].title+"")&&Ae(b,p),M[0]&32&&(N=e[63].support_list&&e[63].support_list.length||e[21](e[63])),N?C||(C=vn(),C.c(),C.m(m,null)):C&&(C.d(1),C=null),I===(I=A(e))&&T?T.p(e,M):(T.d(1),T=I(e),T&&(T.c(),T.m(t,null)))},d(P){P&&u(t),C&&C.d(),T.d(),W=!1,R()}}}function bn(l){let e;return{c(){e=f("span"),this.h()},l(t){e=h(t,"SPAN",{class:!0}),g(e).forEach(u),this.h()},h(){G(e,"class","notes svelte-1ita8l7")},m(t,n){q(t,e,n)},d(t){t&&u(e)}}}function No(l){let e;return{c(){e=f("ion-icon"),this.h()},l(t){e=h(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),g(e).forEach(u),this.h()},h(){k(e,"icon",Je),k(e,"slot","end"),c(e,"color",ze(l[63].status,l[63].date_service))},m(t,n){q(t,e,n)},p(t,n){n[0]&32&&c(e,"color",ze(t[63].status,t[63].date_service))},d(t){t&&u(e)}}}function To(l){let e,t=(l[63].tag?l[63].tag:"")+"",n;return{c(){e=f("div"),n=Oe(t),this.h()},l(i){e=h(i,"DIV",{class:!0,slot:!0,style:!0});var o=g(e);n=we(o,t),o.forEach(u),this.h()},h(){G(e,"class","stop-tag"),G(e,"slot","end"),c(e,"background-color",Ge(l[63].tag_color,.3)),c(e,"border","1px solid "+Ge(l[63].tag_color,.4)),c(e,"color",l[63].tag_color),c(e,"font-size","10px"),c(e,"text-align","center"),c(e,"align-content","center"),c(e,"border-radius","20px"),c(e,"white-space","normal"),c(e,"padding","3px 6px"),c(e,"width","auto",1),c(e,"display","inline-block"),c(e,"font-weight","500")},m(i,o){q(i,e,o),r(e,n)},p(i,o){o[0]&32&&t!==(t=(i[63].tag?i[63].tag:"")+"")&&Ae(n,t),o[0]&32&&c(e,"background-color",Ge(i[63].tag_color,.3)),o[0]&32&&c(e,"border","1px solid "+Ge(i[63].tag_color,.4)),o[0]&32&&c(e,"color",i[63].tag_color)},d(i){i&&u(e)}}}function kn(l,e){let t,n,i,o,s=parseInt(e[63].pos)+1+"",a,d,E,v,_,m,p=e[63].title+"",b,y,N=e[63].support_list&&e[63].support_list.length||e[21](e[63]),z,x,S="",B,W,R,C=N&&bn();function D(){return e[30](e[63])}function A(P,M){return P[63].tag_color&&P[63].tag?To:No}let I=A(e),T=I(e);return{key:l,first:null,c(){t=f("ion-item"),n=f("ion-avatar"),i=f("div"),o=f("div"),a=Oe(s),E=O(),v=f("ion-label"),_=f("ion-text"),m=f("h3"),b=Oe(p),y=O(),C&&C.c(),z=O(),x=f("div"),x.innerHTML=S,B=O(),T.c(),this.h()},l(P){t=h(P,"ION-ITEM",{});var M=g(t);n=h(M,"ION-AVATAR",{slot:!0});var Y=g(n);i=h(Y,"DIV",{class:!0,title:!0,style:!0});var ne=g(i);o=h(ne,"DIV",{class:!0});var ie=g(o);a=we(ie,s),ie.forEach(u),ne.forEach(u),Y.forEach(u),E=w(M),v=h(M,"ION-LABEL",{button:!0});var re=g(v);_=h(re,"ION-TEXT",{color:!0});var pe=g(_);m=h(pe,"H3",{});var L=g(m);b=we(L,p),y=w(L),C&&C.l(L),L.forEach(u),pe.forEach(u),z=w(re),x=h(re,"DIV",{class:!0,"data-svelte-h":!0}),te(x)!=="svelte-4k5p1b"&&(x.innerHTML=S),re.forEach(u),B=w(M),T.l(M),M.forEach(u),this.h()},h(){G(o,"class","order svelte-1ita8l7"),G(i,"class","order-wrapper svelte-1ita8l7"),G(i,"title",d=rt(e[63].status)),c(i,"background-color",ze(e[63].status,e[63].date_service)),c(i,"color",Ue(ze(e[63].status))),k(n,"slot","start"),k(_,"color","#2e2e2e"),G(x,"class","sub svelte-1ita8l7"),k(v,"button",""),this.first=t},m(P,M){q(P,t,M),r(t,n),r(n,i),r(i,o),r(o,a),r(t,E),r(t,v),r(v,_),r(_,m),r(m,b),r(m,y),C&&C.m(m,null),r(v,z),r(v,x),r(t,B),T.m(t,null),W||(R=fe(v,"click",D),W=!0)},p(P,M){e=P,M[0]&32&&s!==(s=parseInt(e[63].pos)+1+"")&&Ae(a,s),M[0]&32&&d!==(d=rt(e[63].status))&&G(i,"title",d),M[0]&32&&c(i,"background-color",ze(e[63].status,e[63].date_service)),M[0]&32&&c(i,"color",Ue(ze(e[63].status))),M[0]&32&&p!==(p=e[63].title+"")&&Ae(b,p),M[0]&32&&(N=e[63].support_list&&e[63].support_list.length||e[21](e[63])),N?C||(C=bn(),C.c(),C.m(m,null)):C&&(C.d(1),C=null),I===(I=A(e))&&T?T.p(e,M):(T.d(1),T=I(e),T&&(T.c(),T.m(t,null)))},d(P){P&&u(t),C&&C.d(),T.d(),W=!1,R()}}}function En(l){let e,t,n,i="Iniciar ruta",o,s;return{c(){e=f("ion-footer"),t=f("ion-toolbar"),n=f("ion-button"),n.textContent=i,this.h()},l(a){e=h(a,"ION-FOOTER",{});var d=g(e);t=h(d,"ION-TOOLBAR",{});var E=g(t);n=h(E,"ION-BUTTON",{expand:!0,size:!0,color:!0,style:!0,"data-svelte-h":!0}),te(n)!=="svelte-xdhfrl"&&(n.textContent=i),E.forEach(u),d.forEach(u),this.h()},h(){k(n,"expand","block"),k(n,"size","large"),k(n,"color","primary"),c(n,"margin","8px")},m(a,d){q(a,e,d),r(e,t),r(t,n),o||(s=fe(n,"click",l[40]),o=!0)},p:Ce,d(a){a&&u(e),o=!1,s()}}}function Co(l){let e,t,n,i,o=`<ion-icon icon="${Qn}"></ion-icon>`,s,a,d,E=`<ion-icon icon="${Zn}"></ion-icon>`,v,_,m=`<ion-icon icon="${$n}"></ion-icon>`,p,b,y=(l[6].name?l[6].name.toUpperCase():"")+"",N,z,x,S='<ion-segment-button value="list"><ion-label>Paradas</ion-label></ion-segment-button> <ion-segment-button value="map"><ion-label>Mapa</ion-label></ion-segment-button>',B,W,R,C;function D(T,P){if(T[9]==="list")return vo;if(T[9]==="map")return mo}let A=D(l),I=A&&A(l);return{c(){e=f("ion-header"),t=f("ion-toolbar"),n=f("ion-buttons"),i=f("ion-button"),i.innerHTML=o,s=O(),a=f("ion-buttons"),d=f("ion-button"),d.innerHTML=E,v=O(),_=f("ion-button"),_.innerHTML=m,p=O(),b=f("ion-title"),N=Oe(y),z=O(),x=f("ion-segment"),x.innerHTML=S,B=O(),I&&I.c(),W=De(),this.h()},l(T){e=h(T,"ION-HEADER",{translucent:!0});var P=g(e);t=h(P,"ION-TOOLBAR",{});var M=g(t);n=h(M,"ION-BUTTONS",{slot:!0});var Y=g(n);i=h(Y,"ION-BUTTON",{title:!0,alt:!0,"data-svelte-h":!0}),te(i)!=="svelte-1a21unf"&&(i.innerHTML=o),Y.forEach(u),s=w(M),a=h(M,"ION-BUTTONS",{slot:!0});var ne=g(a);d=h(ne,"ION-BUTTON",{"data-svelte-h":!0}),te(d)!=="svelte-dy3728"&&(d.innerHTML=E),v=w(ne),_=h(ne,"ION-BUTTON",{"data-svelte-h":!0}),te(_)!=="svelte-1omw1hr"&&(_.innerHTML=m),ne.forEach(u),p=w(M),b=h(M,"ION-TITLE",{});var ie=g(b);N=we(ie,y),ie.forEach(u),M.forEach(u),z=w(P),x=h(P,"ION-SEGMENT",{value:!0,"data-svelte-h":!0}),te(x)!=="svelte-1rseadq"&&(x.innerHTML=S),P.forEach(u),B=w(T),I&&I.l(T),W=De(),this.h()},h(){k(i,"title","Atrás"),k(i,"alt","Atrás"),k(n,"slot","start"),k(a,"slot","end"),k(x,"value","list"),k(e,"translucent","")},m(T,P){q(T,e,P),r(e,t),r(t,n),r(n,i),r(t,s),r(t,a),r(a,d),r(a,v),r(a,_),r(t,p),r(t,b),r(b,N),r(e,z),r(e,x),q(T,B,P),I&&I.m(T,P),q(T,W,P),R||(C=[fe(i,"click",l[22]),fe(d,"click",l[25]),fe(_,"click",l[26]),fe(x,"ionChange",l[27])],R=!0)},p(T,P){P[0]&64&&y!==(y=(T[6].name?T[6].name.toUpperCase():"")+"")&&Ae(N,y),A===(A=D(T))&&I?I.p(T,P):(I&&I.d(1),I=A&&A(T),I&&(I.c(),I.m(W.parentNode,W)))},d(T){T&&(u(e),u(B),u(W)),I&&I.d(T),R=!1,He(C)}}}function In(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(n){e=h(n,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),te(e)!=="svelte-1aosxw0"&&(e.innerHTML=t),this.h()},h(){G(e,"class","overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(n,i){q(n,e,i)},d(n){n&&u(e)}}}function Lo(l){let e,t,n,i,o=l[2]&&hn(l),s=l[11]&&In();return{c(){e=O(),o&&o.c(),t=O(),s&&s.c(),n=De(),this.h()},l(a){Bn("svelte-kn0kph",cn.head).forEach(u),e=w(a),o&&o.l(a),t=w(a),s&&s.l(a),n=De(),this.h()},h(){cn.title="Rutaflow - Detalles de ruta"},m(a,d){q(a,e,d),o&&o.m(a,d),q(a,t,d),s&&s.m(a,d),q(a,n,d),i=!0},p(a,d){a[2]?o?(o.p(a,d),d[0]&4&&ct(o,1)):(o=hn(a),o.c(),ct(o,1),o.m(t.parentNode,t)):o&&(Hn(),_t(o,1,1,()=>{o=null}),zn()),a[11]?s||(s=In(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i(a){i||(ct(o),i=!0)},o(a){_t(o),i=!1},d(a){a&&(u(e),u(t),u(n)),o&&o.d(a),s&&s.d(a)}}}function ze(l,e=""){let t="#ffffff";return l==="pending"&&!e?t="#f2e300":l=="pending"&&e?t="#F6A833":l==="completed"&&(t="#44d900"),t}function rt(l){let e="";return l=="pending"?e="Pendiente":l=="completed"&&(e="Completado"),e}function Ue(l){if(!l)return"#414040";l.slice(0,1)==="#"&&(l=l.slice(1)),l.length===3&&(l=l.split("").map(function(o){return o+o}).join(""));const e=parseInt(l.substr(0,2),16),t=parseInt(l.substr(2,2),16),n=parseInt(l.substr(4,2),16);return(e*299+t*587+n*114)/1e3>=128?"#414040":"#fff"}function ht(l,e){for(let t=0;t<e.length;t++)if(e[t].alias===l)return e[t].val;return""}const Mo=l=>l.mandatory==="1",xo=l=>l.img;function So(l,e,t){let n;Un(l,ei,j=>t(24,n=j));var i=this&&this.__awaiter||function(j,ce,ee,he){function Ne(Se){return Se instanceof ee?Se:new ee(function(Te){Te(Se)})}return new(ee||(ee=Promise))(function(Se,Te){function Re(Fe){try{We(he.next(Fe))}catch(je){Te(je)}}function Ve(Fe){try{We(he.throw(Fe))}catch(je){Te(je)}}function We(Fe){Fe.done?Se(Fe.value):Ne(Fe.value).then(Re,Ve)}We((he=he.apply(j,ce||[])).next())})};let{routeId:o}=e,{driverId:s}=e,a=ft,d=new Object,E=!0,v=!1,_=[],m=[],p={},b=[],y=[],N,z=!1,x="list",S,B="",W="",R="",C="0",D=new Object,A="",I=!1,T=!1,P=!1;const M={car_accident:"/car-accident.svg",restaurant:"/restaurant.svg",parking:"/parking.svg",hospital:"/hospital.svg",wc:"/toilet.svg",traffic:"/traffic.svg"},Y=()=>i(void 0,void 0,void 0,function*(){yield oe(o),N.complete()});ot(()=>i(void 0,void 0,void 0,function*(){U(),yield oe(o)}));function ne(){const j=(b||[]).filter(ce=>ce.mandatory==="1");return j.length?!j.every(ce=>!!ce.img):!1}function ie(){const j=v||(p==null?void 0:p.km_inicial)==="0"||(p==null?void 0:p.gas_inicial)==="0",ce=ne();return j||ce}function re(){return!ie()}function pe(){return i(this,void 0,void 0,function*(){return P||!ie()?!0:new Promise(j=>i(this,void 0,void 0,function*(){yield(yield Qe.create({header:"Checklist",message:"Favor de completar checklist para iniciar viaje ✅",buttons:[{text:"Previsualizar",handler:()=>{P=!0,t(12,T=!0),j(!0)}},{text:"Completar",handler:()=>{P=!0,ye(b,s,o),j(!1)}}]})).present()}))})}function L(j){return i(this,void 0,void 0,function*(){if((yield pe())&&(t(9,x=j),x==="map")){yield Ot(),S=document.getElementById("g_map");const ee=new google.maps.Map(S,{zoom:8,center:{lat:20.6745683,lng:-103.3986104},mapId:"4504f8b37365c3d0"}),he=new google.maps.LatLngBounds,{AdvancedMarkerElement:Ne,PinElement:Se}=yield google.maps.importLibrary("marker");navigator.geolocation?navigator.geolocation.getCurrentPosition(function(Te){const Re=new google.maps.LatLng(Te.coords.latitude,Te.coords.longitude);new google.maps.Marker({position:Re,map:ee,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"#0062ff",fillOpacity:1,scale:6,strokeColor:"#ffffff",strokeWeight:2}}),new google.maps.Circle({strokeColor:"#00BFFF",strokeOpacity:.5,strokeWeight:1,fillColor:"#00BFFF",fillOpacity:.2,map:ee,center:Re,radius:Te.coords.accuracy}),he.extend(Re)},function(Te){console.error("Error retrieving location:",Te)}):console.error("Geolocation not supported by this browser."),p.lat1===p.lat2&&p.lon1===p.lon2?se(he,ee,{lat:p.lat2,lon:p.lon2,color:p.color,title:p.destination},{type:"icon",iconClass:"icon-home",title:"Origen/Destino",glyph:`0,${String(_.length+1)}`}):(se(he,ee,{lat:p.lat1,lon:p.lon1,color:p.color,title:p.origin},{type:"icon",iconClass:"icon-home",title:"Origen",glyph:"0"}),se(he,ee,{lat:p.lat2,lon:p.lon2,color:p.color,title:p.destination},{type:"icon",iconClass:"icon-flag",title:"Destino",glyph:String(_.length+1)})),_.forEach(Te=>{const Re=parseFloat(Te.lat),Ve=parseFloat(Te.lon),We=new google.maps.LatLng(Re,Ve),Fe=new google.maps.Marker({position:{lat:Re,lng:Ve},map:ee,title:Te.title}),je=new Se({background:ze(Te.status,Te.date_service),borderColor:"#000",glyphColor:"#000",glyph:(parseInt(Te.pos)+1).toString()});new Ne({map:ee,position:We,content:je.element,title:"Parada "+(parseInt(Te.pos)+1).toString()+": "+Te.title}).addListener("click",function(){_e(Te,!1)}),he.extend(Fe.getPosition())}),m.forEach(Te=>{const Re=+Te.lat,Ve=+Te.lng;if(isNaN(Re)||isNaN(Ve))return;const We=M[Te.type]||"alert-sharp",Fe=document.createElement("div");Fe.style.cssText="display:flex;align-items:center;justify-content:center;transform:scale(.85);";const je=document.createElement("ion-icon");We.startsWith("/")?je.setAttribute("src",We):je.setAttribute("icon",We),je.style.cssText="font-size:20px;color:#d13434;",Fe.appendChild(je);const it=new Se({background:"#fff",borderColor:"#000",glyph:Fe}),An=new Ne({map:ee,position:{lat:Re,lng:Ve},content:it.element,title:Te.motive||Te.type});he.extend(An.position)}),ee.fitBounds(he)}})}function se(j,ce,ee,he){return i(this,void 0,void 0,function*(){let Ne;const Se=parseFloat(ee.lat),Te=parseFloat(ee.lon),Re=new google.maps.LatLng(Se,Te),{AdvancedMarkerElement:Ve,PinElement:We}=yield google.maps.importLibrary("marker");he.type=="icon"?(Ne=document.createElement("i"),Ne.className=`${he.iconClass} icon`,Ne.style.fontSize="14px",Ne.style.color=Ue(ee.color),Ne.style.fontWeight="600"):he.type=="text";const Fe=new google.maps.Marker({position:{lat:Se,lng:Te},map:ce,title:`${he.title}. ${ee.title}`}),je=new We({background:ee.color,borderColor:"#000",glyphColor:Ue(ee.color),glyph:he.glyph});return new Ve({map:ce,position:Re,content:je.element,title:he.title+": "+ee.title}).addListener("click",function(){$(p,he.title=="Destino"||he.title=="Origen/Destino")}),Fe})}function oe(j){return i(this,void 0,void 0,function*(){let ce=new FormData;ce.append("id_route",j),ce=ge(ce),ce.append("id_enterprise",d.id_enterprise);try{const he=yield(yield fetch(`${a}api/admin/report/seguimiento_list.php`,{method:"POST",body:ce})).json();t(6,p=he.data.seguimiento_list[0]),t(5,_=he.data.event_list),t(7,b=he.data.checklist),y=he.data.expenses,m=he.data.incidence_list,p&&t(4,v=p.km_inicial=="0"&&p.gas_inicial=="0"),!P&&ie()&&(yield pe()),t(3,E=!1)}catch(ee){t(3,E=!1),console.error("Error fetching data:",ee)}})}const ve=j=>new Promise((ce,ee)=>{let he=new FormData;he.append("id_route",j.id_route),he.append("id_event",j.id_event),he=ge(he),fetch(`${a}api/admin/evidence/evidence_by_event.php`,{method:"POST",body:he}).then(Ne=>Ne.json()).then(Ne=>{ce(Ne.data.event_evidence[0])}).catch(Ne=>{console.error("Error fetching data:",Ne),ee(Ne)})});function _e(j,ce,ee){const he=typeof ee=="boolean"?ee:!re();return A||(A=i(this,void 0,void 0,function*(){let Ne=null;try{Ne=yield ve(j)}catch{}const Se=Object.assign(Object.assign(Object.assign({},j),{stopsApproval:B,smsActive:W,signatureActive:R}),Ne||{});try{yield Ye("modal-delivery-info",Gt,{delivery:Se,isLast:ce,readOnly:he})}finally{A=null,oe(o)}}),A)}const $=(j,ce)=>{let ee={};ce?ee={title:j.destination,line1:j.dest_address}:ee={title:j.origin,line1:j.origin_address},ee.enterprise_name=j.enterprise_name,ee.client_name=j.client_name,ee.client_phone=j.tel,ee.id_route=j.id_route,ee.stopsApproval=B,ee.smsActive=W,Ye("modal-delivery-info",Gt,{delivery:ee,isLast:ce,flag:!0,readOnly:!re()})},ye=(j,ce,ee)=>(t(11,I=!0),z||(z=!0,Ye("modal-checklist",Sn,{checklist:j,driverId:ce,routeId:ee,isLast:!1},{breakpoints:[.25,.5,.9],initialBreakpoint:.75,backdropBreakpoint:.25,handle:!0,handleBehavior:"cycle",canDismiss:!0,showBackdrop:!0}).then(()=>{t(11,I=!1),z=!1,oe(ee)})),""),be=j=>i(void 0,void 0,void 0,function*(){return t(11,I=!0),yield oe(j),y.length>0?Ye("modal-expense-detail",po,{routeId:j,expenses:y}).then(()=>{t(11,I=!1)}):Ye("modal-expense",Et,{routeId:j}).then(()=>{t(11,I=!1)}),""}),le=j=>i(void 0,void 0,void 0,function*(){return t(11,I=!0),yield oe(j),Ye("modal-incidence",co,{routeId:j}).then(()=>{t(11,I=!1)}),""}),ke=j=>{if(j.tracking_type=="subscription"){if(j.subscriber_info&&j.payment_type==="cash"&&new Date(j.subscriber_info.payment_next)<new Date)return!0}else if(j.tracking_type=="ecommerce"&&Number(j.payment_pending)>0)return!0;return!1},Ie=()=>{d.type=="super"||d.type=="admin"?at("/drivers/me"):d.id_driver&&at(`/drivers/${d.id_driver}`)},Ee=(j,ce)=>i(void 0,void 0,void 0,function*(){yield(yield Qe.create({header:j||"Error",message:ce||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()});function ge(j){return j.append("token",d.token),j.append("id_user_over",d.id_user),j}const U=()=>i(void 0,void 0,void 0,function*(){if(d.id_enterprise){let j=new FormData;j.append("id_enterprise",d.id_enterprise),j=ge(j);try{const ce=yield fetch(`${a}api/admin/enterprise/enterprise_settings.php`,{method:"POST",body:j});ce.ok?(D=(yield ce.json()).nodos,B=ht("stops_wait_approval",D),W=ht("sms_active",D),t(10,C=ht("stops_order_restriction",D)),R=ht("signature_active",D)):console.error("File upload failed:",ce.statusText)}catch(ce){console.error("Error during file upload:",ce)}}}),X=()=>le(o),V=()=>be(o),ae=j=>L(j.detail.value);function J(j){Be[j?"unshift":"push"](()=>{N=j,t(8,N)})}const de=()=>{$(p,!1)},Le=j=>{const ce=_.findIndex(Te=>Te.id_event===j.id_event),ee=ce===0,he=ce>0?_[ce-1]:null,Ne=ee||he&&he.img!==null,Se=j.img!==null&&j.img!=="";Ne||ee&&!Se||C=="1"?_e(j,!1):Ee("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},Pe=()=>{$(p,!0)};function xe(j){Be[j?"unshift":"push"](()=>{N=j,t(8,N)})}const Me=()=>{$(p,!1)},F=j=>{const ce=_.findIndex(Te=>Te.id_event===j.id_event),ee=ce===0,he=ce>0?_[ce-1]:null,Ne=ee||he&&he.img!==null,Se=j.img!==null&&j.img!=="";Ne||ee&&!Se||C=="1"?_e(j,!1):Ee("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},ue=()=>{$(p,!0)};function H(j){Be[j?"unshift":"push"](()=>{N=j,t(8,N)})}const K=()=>{$(p,!1)},Z=j=>{const ce=_.findIndex(Te=>Te.id_event===j.id_event),ee=ce===0,he=ce>0?_[ce-1]:null,Ne=ee||he&&he.img!==null,Se=j.img!==null&&j.img!=="";Ne||ee&&!Se||C=="1"?_e(j,!1):Ee("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},Q=()=>{$(p,!0)},me=()=>ye(b,s,o);return l.$$set=j=>{"routeId"in j&&t(0,o=j.routeId),"driverId"in j&&t(1,s=j.driverId)},l.$$.update=()=>{l.$$.dirty[0]&16777221&&(t(0,{routeId:o,driverId:s}=n.params,o,(t(1,s),t(24,n),t(2,d),t(0,o))),t(2,d=JSON.parse(localStorage.getItem("userSession"))),d?d.id_user&&(d.type=="admin"||d.type=="super")?(oe(o),at(`/drivers/me/routes/${o}`)):d.id_user&&d.id_driver&&(oe(o),at(`/drivers/${d.id_driver}/routes/${o}`)):at("/"))},[o,s,d,E,v,_,p,b,N,x,C,I,T,Y,ie,L,_e,$,ye,be,le,ke,Ie,Ee,n,X,V,ae,J,de,Le,Pe,xe,Me,F,ue,H,K,Z,Q,me]}class Ro extends tt{constructor(e){super(),nt(this,e,So,Lo,et,{routeId:0,driverId:1},null,[-1,-1,-1])}}export{Ro as component};
