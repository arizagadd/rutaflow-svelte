import{Z as vt,s as Ye,e as s,j as N,b as c,q as m,d as te,h as a,m as T,v as b,i as K,w as r,x as ce,n as Le,z as De,_ as cn,B as _,o as et,k as Se,$ as gt,t as pe,r as me,f as j,a0 as un,a1 as xe,A as He,y as ze,a2 as Zt,a3 as Ke,a4 as xt,a5 as $t,l as fn,p as dn,F as _n}from"../chunks/index.CdEBkEwf.js";import{S as Qe,i as Ze,t as ct,a as _t,c as hn,b as pn,d as mn,m as vn,e as gn,g as bn}from"../chunks/index.c2pjNB5R.js";import{e as Re,u as tt,d as nt,g as qe,a as $e,h as Be,b as kn,c as En,i as en,f as In,j as tn,k as On,m as Nn,n as ht,o as Tn,q as nn,r as on,s as bt,t as Ue,v as Cn,w as yn,x as ln,y as rn,z as wn,A as Ln,B as zn,C as An,p as Mn}from"../chunks/index.aopo_RoW.js";import"../chunks/index-48209844.IIRtDZyg.js";import{m as ot,D as ut,a as Ge,W as Sn,b as Dn,I as Hn}from"../chunks/IonPage.CBfnZD4Y.js";import{q as Pn,t as Bn}from"../chunks/ion-modal.CsJaVgKZ.js";import{g as We}from"../chunks/entry.Bc598OuY.js";const Rn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,Un=(i,e)=>{if(!customElements.get(i)){class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const n={};for(const o of this.attributes)n[o.name]=o.value;new e({target:this.shadowRoot,props:n})}}customElements.define(i,t)}},Vn=function(i){return document.createElement(i).constructor!==HTMLElement},qn=(i,e)=>{Vn(i)||Un(i,e)},Fe=async(i,e,t)=>{Pn(),Bn(),qn(i,e);const l=await ot.create({component:i,componentProps:t});return l.present(),await l.onWillDismiss()};let Xe=vt({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]}),an=vt({flag:[]});function Fn(i){let e,t,l,n,o="Cancelar",f,u,h="Captura de Km/Gas",O,k,p,d="Confirmar",g,E,C,y,B,H,V;return{c(){e=s("ion-header"),t=s("ion-toolbar"),l=s("ion-buttons"),n=s("ion-button"),n.textContent=o,f=N(),u=s("ion-title"),u.textContent=h,O=N(),k=s("ion-buttons"),p=s("ion-button"),p.textContent=d,g=N(),E=s("ion-content"),C=s("ion-item"),y=s("ion-input"),this.h()},l(U){e=c(U,"ION-HEADER",{translucent:!0});var W=m(e);t=c(W,"ION-TOOLBAR",{});var D=m(t);l=c(D,"ION-BUTTONS",{slot:!0});var L=m(l);n=c(L,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),te(n)!=="svelte-17pq4f4"&&(n.textContent=o),L.forEach(a),f=T(D),u=c(D,"ION-TITLE",{"data-svelte-h":!0}),te(u)!=="svelte-1yhkaq7"&&(u.textContent=h),O=T(D),k=c(D,"ION-BUTTONS",{slot:!0});var w=m(k);p=c(w,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),te(p)!=="svelte-cm6j4s"&&(p.textContent=d),w.forEach(a),D.forEach(a),W.forEach(a),g=T(U),E=c(U,"ION-CONTENT",{fullscreen:!0});var A=m(E);C=c(A,"ION-ITEM",{});var S=m(C);y=c(S,"ION-INPUT",{class:!0,inputmode:!0,pattern:!0,type:!0,placeholder:!0,value:!0,required:!0});var R=m(y);R.forEach(a),S.forEach(a),A.forEach(a),this.h()},h(){b(n,"color","medium"),b(l,"slot","start"),b(p,"strong",""),b(k,"slot","end"),b(e,"translucent",""),b(y,"class","fin-km"),b(y,"inputmode","numeric"),b(y,"pattern","[0-9]*"),b(y,"type","number"),b(y,"placeholder",B="Ingresa "+i[0]+" actual"),b(y,"value",i[1]),b(y,"required",""),b(E,"fullscreen","")},m(U,W){K(U,e,W),r(e,t),r(t,l),r(l,n),r(t,f),r(t,u),r(t,O),r(t,k),r(k,p),K(U,g,W),K(U,E,W),r(E,C),r(C,y),H||(V=[ce(n,"click",i[2]),ce(p,"click",i[3]),ce(y,"input",i[4])],H=!0)},p(U,[W]){W&1&&B!==(B="Ingresa "+U[0]+" actual")&&b(y,"placeholder",B),W&2&&b(y,"value",U[1])},i:Le,o:Le,d(U){U&&(a(e),a(g),a(E)),H=!1,De(V)}}}function jn(i,e,t){const l=cn();let o=document.querySelector("ion-modal").componentProps.data_type,f="";an.subscribe(p=>{o=p.flag[0],o=="km_final"||o=="km_inicial"?t(0,f="kilometraje"):t(0,f="litros de gasolina")});let u=0;function h(){ot.dismiss()}function O(){l("modalResult",{data:"Your data",role:"confirm"}),o=="km_inicial"?Xe.update(d=>({...d,km_inicial:[u]})):o=="gas_inicial"?Xe.update(d=>({...d,gas_inicial:[u]})):o=="km_final"?Xe.update(d=>({...d,km_final:[u]})):o=="gas_final"&&Xe.update(d=>({...d,gas_final:[u]})),h()}return[f,u,h,O,p=>t(1,u=p.target.value)]}class Gn extends Qe{constructor(e){super(),Ze(this,e,jn,Fn,Ye,{})}}const ft=vt({items:[],checkedIndices:[],mandatory:[]});function It(i,e,t){const l=i.slice();return l[56]=e[t],l[57]=e,l[58]=t,l}function Kn(i){let e,t,l,n,o,f="Kilometraje inicial",u,h,O=i[0]?i[0]+" km.":"Cargar km",k,p,d,g,E,C,y,B="Gasolina inicial (litros)",H,V,U=i[1]?i[1]+" litros":"Cargar gas",W,D,L,w;return D=gt(i[21][0]),{c(){e=s("ion-item"),t=s("ion-label"),l=s("input"),n=N(),o=s("p"),o.textContent=f,u=N(),h=s("ion-button"),k=pe(O),p=N(),d=s("ion-item"),g=s("ion-label"),E=s("input"),C=N(),y=s("p"),y.textContent=B,H=N(),V=s("ion-button"),W=pe(U),this.h()},l(A){e=c(A,"ION-ITEM",{});var S=m(e);t=c(S,"ION-LABEL",{style:!0});var R=m(t);l=c(R,"INPUT",{id:!0,style:!0,type:!0}),n=T(R),o=c(R,"P",{style:!0,"data-svelte-h":!0}),te(o)!=="svelte-88twxi"&&(o.textContent=f),R.forEach(a),u=T(S),h=c(S,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var q=m(h);k=me(q,O),q.forEach(a),S.forEach(a),p=T(A),d=c(A,"ION-ITEM",{});var M=m(d);g=c(M,"ION-LABEL",{style:!0});var X=m(g);E=c(X,"INPUT",{id:!0,style:!0,type:!0}),C=T(X),y=c(X,"P",{style:!0,"data-svelte-h":!0}),te(y)!=="svelte-1ux30eb"&&(y.textContent=B),X.forEach(a),H=T(M),V=c(M,"ION-BUTTON",{fill:!0,class:!0,size:!0,style:!0});var ie=m(V);W=me(ie,U),ie.forEach(a),M.forEach(a),this.h()},h(){j(l,"id","chkbox-km-ini"),_(l,"pointer-events","auto"),j(l,"type","checkbox"),l.required=!0,_(o,"margin-left","10px"),_(t,"display","flex"),b(h,"fill","outline"),b(h,"size","small"),b(h,"class","loadKmInicial"),b(h,"aria-selected",""),j(E,"id","chkbox-gas-ini"),_(E,"pointer-events","auto"),j(E,"type","checkbox"),E.required=!0,_(y,"margin-left","10px"),_(g,"display","flex"),b(V,"fill","outline"),b(V,"class","loadGasInicial"),b(V,"size","small"),_(V,"height","16px "),D.p(l,E)},m(A,S){K(A,e,S),r(e,t),r(t,l),l.checked=~(i[4]||[]).indexOf(l.__value),i[28](l),r(t,n),r(t,o),r(e,u),r(e,h),r(h,k),K(A,p,S),K(A,d,S),r(d,g),r(g,E),i[30](E),E.checked=~(i[4]||[]).indexOf(E.__value),r(g,C),r(g,y),r(d,H),r(d,V),r(V,W),L||(w=[ce(l,"change",i[27]),ce(h,"click",i[29]),ce(E,"change",i[31]),ce(V,"click",i[32])],L=!0)},p(A,S){S[0]&16&&(l.checked=~(A[4]||[]).indexOf(l.__value)),S[0]&1&&O!==(O=A[0]?A[0]+" km.":"Cargar km")&&ze(k,O),S[0]&16&&(E.checked=~(A[4]||[]).indexOf(E.__value)),S[0]&2&&U!==(U=A[1]?A[1]+" litros":"Cargar gas")&&ze(W,U)},d(A){A&&(a(e),a(p),a(d)),i[28](null),i[30](null),D.r(),L=!1,De(w)}}}function Wn(i){let e,t,l,n,o,f="Kilometraje final",u,h,O=i[2]?i[2]+" km.":"Cargar km",k,p,d,g,E,C,y,B="Gasolina final (litros)",H,V,U=i[3]?i[3]+" litros":"Cargar gas",W,D,L,w;return D=gt(i[21][0]),{c(){e=s("ion-item"),t=s("ion-label"),l=s("input"),n=N(),o=s("p"),o.textContent=f,u=N(),h=s("ion-button"),k=pe(O),p=N(),d=s("ion-item"),g=s("ion-label"),E=s("input"),C=N(),y=s("p"),y.textContent=B,H=N(),V=s("ion-button"),W=pe(U),this.h()},l(A){e=c(A,"ION-ITEM",{});var S=m(e);t=c(S,"ION-LABEL",{style:!0});var R=m(t);l=c(R,"INPUT",{id:!0,style:!0,type:!0}),n=T(R),o=c(R,"P",{style:!0,"data-svelte-h":!0}),te(o)!=="svelte-ccmu71"&&(o.textContent=f),R.forEach(a),u=T(S),h=c(S,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var q=m(h);k=me(q,O),q.forEach(a),S.forEach(a),p=T(A),d=c(A,"ION-ITEM",{});var M=m(d);g=c(M,"ION-LABEL",{style:!0});var X=m(g);E=c(X,"INPUT",{id:!0,style:!0,type:!0}),C=T(X),y=c(X,"P",{style:!0,"data-svelte-h":!0}),te(y)!=="svelte-wsoyd2"&&(y.textContent=B),X.forEach(a),H=T(M),V=c(M,"ION-BUTTON",{fill:!0,size:!0,class:!0});var ie=m(V);W=me(ie,U),ie.forEach(a),M.forEach(a),this.h()},h(){j(l,"id","chkbox-km-fin"),_(l,"pointer-events","auto"),j(l,"type","checkbox"),l.required=!0,_(o,"margin-left","10px"),_(t,"display","flex"),b(h,"fill","outline"),b(h,"size","small"),b(h,"class","loadKmInicial"),b(h,"aria-selected",""),j(E,"id","chkbox-gas-fin"),_(E,"pointer-events","auto"),j(E,"type","checkbox"),E.required=!0,_(y,"margin-left","10px"),_(g,"display","flex"),b(V,"fill","outline"),b(V,"size","small"),b(V,"class","loadGasInicial"),D.p(l,E)},m(A,S){K(A,e,S),r(e,t),r(t,l),l.checked=~(i[4]||[]).indexOf(l.__value),i[22](l),r(t,n),r(t,o),r(e,u),r(e,h),r(h,k),K(A,p,S),K(A,d,S),r(d,g),r(g,E),E.checked=~(i[4]||[]).indexOf(E.__value),i[25](E),r(g,C),r(g,y),r(d,H),r(d,V),r(V,W),L||(w=[ce(l,"change",i[20]),ce(h,"click",i[23]),ce(E,"change",i[24]),ce(V,"click",i[26])],L=!0)},p(A,S){S[0]&16&&(l.checked=~(A[4]||[]).indexOf(l.__value)),S[0]&4&&O!==(O=A[2]?A[2]+" km.":"Cargar km")&&ze(k,O),S[0]&16&&(E.checked=~(A[4]||[]).indexOf(E.__value)),S[0]&8&&U!==(U=A[3]?A[3]+" litros":"Cargar gas")&&ze(W,U)},d(A){A&&(a(e),a(p),a(d)),i[22](null),i[25](null),D.r(),L=!1,De(w)}}}function Xn(i){let e=[],t=new Map,l,n=Re(i[13]);const o=f=>f[56].id_checklist_event;for(let f=0;f<n.length;f+=1){let u=It(i,n,f),h=o(u);t.set(h,e[f]=Ot(h,u))}return{c(){for(let f=0;f<e.length;f+=1)e[f].c();l=Se()},l(f){for(let u=0;u<e.length;u+=1)e[u].l(f);l=Se()},m(f,u){for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(f,u);K(f,l,u)},p(f,u){u[0]&407664&&(n=Re(f[13]),e=tt(e,u,o,1,f,n,t,l.parentNode,nt,Ot,l,It))},d(f){f&&a(l);for(let u=0;u<e.length;u+=1)e[u].d(f)}}}function Jn(i){let e,t=(i[12][i[56].id_checklist_event]?i[12][i[56].id_checklist_event]:"Cargar evidencia")+"",l;return{c(){e=s("label"),l=pe(t),this.h()},l(n){e=c(n,"LABEL",{for:!0,class:!0});var o=m(e);l=me(o,t),o.forEach(a),this.h()},h(){j(e,"for","chklist-"+i[56].id_checklist_event),j(e,"class","button-label svelte-1ruehls")},m(n,o){K(n,e,o),r(e,l)},p(n,o){o[0]&4096&&t!==(t=(n[12][n[56].id_checklist_event]?n[12][n[56].id_checklist_event]:"Cargar evidencia")+"")&&ze(l,t)},d(n){n&&a(e)}}}function Yn(i){let e;return{c(){e=s("ion-spinner"),this.h()},l(t){e=c(t,"ION-SPINNER",{name:!0,class:!0}),m(e).forEach(a),this.h()},h(){b(e,"name","dots"),b(e,"class","button-spinner svelte-1ruehls")},m(t,l){K(t,e,l)},p:Le,d(t){t&&a(e)}}}function Ot(i,e){let t,l,n,o=e[56],f,u,h=e[56].item+"",O,k,p,d=e[56].mandatory=="1"?" * ":"",g,E,C,y,B,H,V,U,W,D;const L=()=>e[34](n,o),w=()=>e[34](null,o);function A(){return e[35](e[56])}function S(X,ie){return X[11][X[56].id_checklist_event]?Yn:Jn}let R=S(e),q=R(e);function M(...X){return e[37](e[56],...X)}return U=gt(e[21][0]),{key:i,first:null,c(){t=s("ion-item"),l=s("ion-label"),n=s("input"),f=N(),u=s("p"),O=pe(h),k=N(),p=s("b"),g=pe(d),E=N(),C=s("ion-button"),y=s("div"),q.c(),B=N(),H=s("input"),V=N(),this.h()},l(X){t=c(X,"ION-ITEM",{});var ie=m(t);l=c(ie,"ION-LABEL",{style:!0});var re=m(l);n=c(re,"INPUT",{id:!0,style:!0,type:!0}),f=T(re),u=c(re,"P",{style:!0});var ae=m(u);O=me(ae,h),k=T(ae),ae.forEach(a),p=c(re,"B",{style:!0});var Ie=m(p);g=me(Ie,d),Ie.forEach(a),re.forEach(a),E=T(ie),C=c(ie,"ION-BUTTON",{fill:!0,class:!0,size:!0});var Y=m(C);y=c(Y,"DIV",{class:!0});var se=m(y);q.l(se),B=T(se),H=c(se,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),se.forEach(a),Y.forEach(a),V=T(ie),ie.forEach(a),this.h()},h(){j(n,"id",`chkbox-${e[56].id_checklist_event}`),_(n,"pointer-events","auto"),j(n,"type","checkbox"),n.__value=e[56].id_checklist_event,un(n,n.__value),n.required=!0,_(u,"margin-left","10px"),_(p,"margin-left","5px"),_(l,"display","flex"),_(H,"display","none"),j(H,"id","chklist-"+e[56].id_checklist_event),j(H,"name","fileToUpload"),j(H,"type","file"),j(H,"accept","image/*"),j(H,"capture","environment"),j(y,"class","button-content svelte-1ruehls"),b(C,"fill","outline"),b(C,"class","loadEvidence svelte-1ruehls"),b(C,"size","small"),U.p(n),this.first=t},m(X,ie){K(X,t,ie),r(t,l),r(l,n),n.checked=~(e[4]||[]).indexOf(n.__value),L(),r(l,f),r(l,u),r(u,O),r(u,k),r(l,p),r(p,g),r(t,E),r(t,C),r(C,y),q.m(y,null),r(y,B),r(y,H),e[36](H),r(t,V),W||(D=[ce(n,"change",e[33]),ce(n,"change",A),ce(H,"change",M)],W=!0)},p(X,ie){e=X,ie[0]&16&&(n.checked=~(e[4]||[]).indexOf(n.__value)),o!==e[56]&&(w(),o=e[56],L()),R===(R=S(e))&&q?q.p(e,ie):(q.d(1),q=R(e),q&&(q.c(),q.m(y,B)))},d(X){X&&a(t),w(),q.d(),e[36](null),U.r(),W=!1,De(D)}}}function Qn(i){let e,t,l,n,o="Cancelar",f,u,h="REQUERIMIENTOS DE RUTA",O,k,p,d,g,E,C,y="Confirmar",B,H;function V(L,w){return L[14]?Wn:Kn}let W=V(i)(i),D=i[13]&&Xn(i);return{c(){e=s("ion-header"),t=s("ion-toolbar"),l=s("ion-buttons"),n=s("ion-button"),n.textContent=o,f=N(),u=s("ion-title"),u.textContent=h,O=N(),k=s("ion-content"),p=s("ion-list"),W.c(),d=N(),D&&D.c(),g=N(),E=s("ion-footer"),C=s("ion-button"),C.textContent=y,this.h()},l(L){e=c(L,"ION-HEADER",{translucent:!0});var w=m(e);t=c(w,"ION-TOOLBAR",{});var A=m(t);l=c(A,"ION-BUTTONS",{slot:!0});var S=m(l);n=c(S,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),te(n)!=="svelte-1dnmkxs"&&(n.textContent=o),S.forEach(a),f=T(A),u=c(A,"ION-TITLE",{"data-svelte-h":!0}),te(u)!=="svelte-19bar5p"&&(u.textContent=h),A.forEach(a),w.forEach(a),O=T(L),k=c(L,"ION-CONTENT",{fullscreen:!0});var R=m(k);p=c(R,"ION-LIST",{});var q=m(p);W.l(q),d=T(q),D&&D.l(q),q.forEach(a),R.forEach(a),g=T(L),E=c(L,"ION-FOOTER",{});var M=m(E);C=c(M,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),te(C)!=="svelte-g82qqw"&&(C.textContent=y),M.forEach(a),this.h()},h(){b(n,"color","medium"),b(l,"slot","start"),b(e,"translucent",""),b(k,"fullscreen",""),b(C,"fill","outline"),b(C,"color","tertiary"),b(C,"strong",""),_(C,"width","99%"),_(C,"height","auto")},m(L,w){K(L,e,w),r(e,t),r(t,l),r(l,n),r(t,f),r(t,u),K(L,O,w),K(L,k,w),r(k,p),W.m(p,null),r(p,d),D&&D.m(p,null),K(L,g,w),K(L,E,w),r(E,C),B||(H=[ce(n,"click",i[15]),ce(C,"click",i[16])],B=!0)},p(L,w){W.p(L,w),L[13]&&D.p(L,w)},i:Le,o:Le,d(L){L&&(a(e),a(O),a(k),a(g),a(E)),W.d(),D&&D.d(),B=!1,De(H)}}}function pt(i,e){if(typeof i=="object"&&i!==null||Array.isArray(i)){if(Array.isArray(i))return i.map(t=>pt(t,e)).flat();{const t=Object.keys(i);let l;return e=="id_checklist_event"?l=t.filter(o=>o.toLowerCase().includes("id_checklist_event")).map(o=>i[o]):e=="mandatory"?l=t.filter(o=>o.toLowerCase().includes("mandatory")).map(o=>i[o]):(console.error("Tipo de dato no reconocido."),l=!1),l}}else return console.error("Invalid input. Please provide a valid object or array."),[]}function Zn(i,e,t){let l=ut,n=document.querySelector("ion-modal");const o=n.componentProps.checklist,f=n.componentProps.driverId,u=n.componentProps.routeId,h=n.componentProps.isLast;let O,k,p,d,g=[],E=null,C={},y,B,H,V,U={},W=new Object,D={},L={};et(()=>{W=JSON.parse(localStorage.getItem("userSession")),h?console.log("Último checklist"):ft.update(I=>(I.mandatory=pt(o,"mandatory"),I.items=pt(o,"id_checklist_event"),I))});function w(I){t(11,U[I]=!0,U)}const A=async()=>{await(await Ge.create({header:"Datos o checklist incompletos",message:"Carga la evidencia requerida y marca todas las casillas para confirmar",buttons:[{text:"Cerrar"}]})).present()},S=async(I,Z)=>{await(await Ge.create({header:I||"Error",message:Z||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},R=async I=>{await(await Ge.create({header:"Datos inválidos",message:I=="km"?"Llena correctamente el campo de kilometraje inicial":"Llena correctamente el campo de gasolina inicial",buttons:[{text:"Cerrar"}]})).present()},q=()=>{ot.dismiss(),f?We(`/drivers/${f}`):We("/drivers/me")},M=()=>{if(h){var I=Ie(p,"km"),Z=Ie(d,"gas");let oe=new Object;oe.km_final=I,oe.gas_final=Z,oe.id_route=u,oe.id_user_over=W.id_user,oe.token=W.token,I&&Z?(q(),qe(`${l}api/admin/checklist/add_evidence.php`,function(ee){ee.success?S("Datos capturados","El kilometraje y gasolina final fueron registrados correctamente, espere aprobación para finalizar ruta"):S("Error","Vuelva a intentar capturar los datos solicitados")},oe)):A()}else{var $=Ie(O,"km"),ne=Ie(k,"gas");ft.update(oe=>{oe.items;const ee=oe.mandatory;if(oe.items.filter((Te,we)=>oe.mandatory[we]==="1").every(Te=>oe.checkedIndices.includes(Te))&&$&&ne){let Te=new FormData;Te=he(Te),Te.append("km_inicial",$),Te.append("gas_inicial",ne),Te.append("id_route",u);for(const we in D)if(D.hasOwnProperty(we)){const{img:Ve,img_id:Pe}=D[we];Te.append(`selectedImages[${we}][img]`,Ve),Te.append(`selectedImages[${we}][img_id]`,Pe)}fetch(`${l}api/admin/checklist/add_evidence.php`,{method:"POST",body:Te}).then(we=>we.json()).then(we=>{ee&&ee.some(Ve=>Ve==="1")?ae(u,"checklist-pending"):ae(u,"enroute")}).catch(we=>{console.error("Error fetching data:",we)}).finally(()=>{q()})}else if(!ee&&$&&ne){let Te=new FormData;Te.append("km_inicial",$),Te.append("gas_inicial",ne),Te=he(Te),fetch(`${l}api/admin/checklist/add_evidence.php`,{method:"POST",body:Te}).then(we=>we.json()).then(we=>{ae(u,"enroute")}).catch(we=>{console.error("Error fetching data:",we)})}else A();return oe})}ve()},X=async(I,Z)=>{w(Z);const ne=I.target.files[0],oe=await ie(ne);if(oe){let ee=new FormData;ee.append("fileToUpload",oe),ee=he(ee);try{const Ee=await fetch(`${l}api/admin/manager/upload_img_driver.php`,{method:"POST",body:ee});if(Ee.ok){const Ce=await Ee.json();D={...D,[Z]:{img:Ce.img,img_id:Ce.img_id}},t(12,L={...L,[Z]:Ce.filename}),re(Z),t(6,C[Z].checked=!0,C),t(11,U[Z]=!1,U)}else console.error("File upload failed:",Ee.statusText)}catch(Ee){console.error("Error during file upload:",Ee)}}},ie=async I=>new Promise(Z=>{const $=new Image;$.src=URL.createObjectURL(I),$.onload=()=>{const ne=document.createElement("canvas"),oe=ne.getContext("2d"),ee=800,Ee=600;let Ce=$.width,Te=$.height;Ce>ee&&(Te*=ee/Ce,Ce=ee),Te>Ee&&(Ce*=Ee/Te,Te=Ee),ne.width=Ce,ne.height=Te,oe.drawImage($,0,0,Ce,Te),ne.toBlob(we=>{Z(we),URL.revokeObjectURL($.src),oe.clearRect(0,0,ne.width,ne.height)},"image/jpeg",.7)}}),re=I=>{ft.update(Z=>(Z.checkedIndices.indexOf(I)===-1?Z.checkedIndices.push(I):console.error(`ID ${I} is already checked.`),Z.items.forEach(ne=>{ne.id_checklist_event===I&&(ne.checked=!0)}),Z))};function ae(I,Z){let $=new FormData;$.append("id_route",I),$.append("status",Z),$=he($),fetch(`${l}api/admin/route/change_status.php`,{method:"POST",body:$}).then(ne=>ne.json()).then(ne=>{}).catch(ne=>{console.error("Error fetching data:",ne)})}function Ie(I,Z){return/^\d+$/.test(I)?parseInt(I,10):(R(Z),null)}function Y(I,Z){se(Z),n.componentProps.data_type=Z,Fe("modal-gas-km",Gn,{r:Z}).then(()=>{Xe.subscribe($=>{_e($,Z)})})}function se(I){an.update(Z=>({...Z,flag:[I]}))}function _e(I,Z){t(0,O=I.km_inicial?I.km_inicial:null),t(1,k=I.gas_inicial?I.gas_inicial:null),t(2,p=I.km_final?I.km_final:null),t(3,d=I.gas_final?I.gas_final:null),Z=="km_inicial"&&y&&t(7,y.checked=!0,y),Z=="gas_inicial"&&B&&t(8,B.checked=!0,B),Z=="km_final"&&H&&t(9,H.checked=!0,H),Z=="gas_final"&&V&&t(10,V.checked=!0,V)}function ve(){Xe.set({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]})}function he(I){return I.append("token",W.token),I.append("id_user_over",W.id_user),I}const ue=[[]];function ge(){g=xe(ue[0],this.__value,this.checked),t(4,g)}function de(I){He[I?"unshift":"push"](()=>{H=I,t(9,H)})}const be=I=>Y(I,"km_final");function ke(){g=xe(ue[0],this.__value,this.checked),t(4,g)}function Oe(I){He[I?"unshift":"push"](()=>{V=I,t(10,V)})}const ye=I=>Y(I,"gas_final");function Ne(){g=xe(ue[0],this.__value,this.checked),t(4,g)}function fe(I){He[I?"unshift":"push"](()=>{y=I,t(7,y)})}const x=I=>Y(I,"km_inicial");function le(I){He[I?"unshift":"push"](()=>{B=I,t(8,B)})}function Q(){g=xe(ue[0],this.__value,this.checked),t(4,g)}const v=I=>Y(I,"gas_inicial");function z(){g=xe(ue[0],this.__value,this.checked),t(4,g)}function G(I,Z){He[I?"unshift":"push"](()=>{C[Z.id_checklist_event]=I,t(6,C)})}const P=I=>re(I.id_checklist_event);function J(I){He[I?"unshift":"push"](()=>{E=I,t(5,E)})}return[O,k,p,d,g,E,C,y,B,H,V,U,L,o,h,q,M,X,re,Y,ge,ue,de,be,ke,Oe,ye,Ne,fe,x,le,Q,v,z,G,P,J,(I,Z)=>X(Z,I.id_checklist_event)]}class sn extends Qe{constructor(e){super(),Ze(this,e,Zn,Qn,Ye,{},null,[-1,-1])}}function Nt(i,e,t){const l=i.slice();return l[52]=e[t],l[54]=t,l}function xn(i){let e,t,l="Confirmar",n,o;return{c(){e=s("ion-buttons"),t=s("ion-button"),t.textContent=l,this.h()},l(f){e=c(f,"ION-BUTTONS",{slot:!0});var u=m(e);t=c(u,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),te(t)!=="svelte-1qeh5vd"&&(t.textContent=l),u.forEach(a),this.h()},h(){b(t,"strong",""),b(e,"slot","end")},m(f,u){K(f,e,u),r(e,t),n||(o=ce(t,"click",i[22]),n=!0)},p:Le,d(f){f&&a(e),n=!1,o()}}}function $n(i){let e,t,l,n,o,f="Empresa",u,h,O=i[9].enterprise_name+"",k;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),h=s("h2"),k=pe(O),this.h()},l(p){e=c(p,"ION-ITEM",{});var d=m(e);t=c(d,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=T(d),n=c(d,"ION-LABEL",{});var g=m(n);o=c(g,"P",{"data-svelte-h":!0}),te(o)!=="svelte-6noid3"&&(o.textContent=f),u=T(g),h=c(g,"H2",{});var E=m(h);k=me(E,O),E.forEach(a),g.forEach(a),d.forEach(a),this.h()},h(){b(t,"icon",on),b(t,"slot","start")},m(p,d){K(p,e,d),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,h),r(h,k)},p:Le,d(p){p&&a(e)}}}function eo(i){let e,t,l,n,o,f="Negocio",u,h,O=i[9].client_name+"",k;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),h=s("h2"),k=pe(O),this.h()},l(p){e=c(p,"ION-ITEM",{});var d=m(e);t=c(d,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=T(d),n=c(d,"ION-LABEL",{});var g=m(n);o=c(g,"P",{"data-svelte-h":!0}),te(o)!=="svelte-57b1dg"&&(o.textContent=f),u=T(g),h=c(g,"H2",{});var E=m(h);k=me(E,O),E.forEach(a),g.forEach(a),d.forEach(a),this.h()},h(){b(t,"icon",on),b(t,"slot","start")},m(p,d){K(p,e,d),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,h),r(h,k)},p:Le,d(p){p&&a(e)}}}function to(i){let e,t,l,n,o,f="Teléfono de Negocio",u,h,O=i[9].client_phone+"",k;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),h=s("h2"),k=pe(O),this.h()},l(p){e=c(p,"ION-ITEM",{href:!0});var d=m(e);t=c(d,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=T(d),n=c(d,"ION-LABEL",{class:!0});var g=m(n);o=c(g,"P",{"data-svelte-h":!0}),te(o)!=="svelte-1u5l7fz"&&(o.textContent=f),u=T(g),h=c(g,"H2",{});var E=m(h);k=me(E,O),E.forEach(a),g.forEach(a),d.forEach(a),this.h()},h(){b(t,"icon",kn),b(t,"slot","start"),b(n,"class","ion-text-wrap"),b(e,"href","tel:"+i[9].client_phone)},m(p,d){K(p,e,d),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,h),r(h,k)},p:Le,d(p){p&&a(e)}}}function no(i){let e,t,l,n,o,f="Domicilio Alternativo",u,h,O=i[9].line2+"",k,p,d;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),h=s("h2"),k=pe(O),p=N(),d=s("ion-icon"),this.h()},l(g){e=c(g,"ION-ITEM",{href:!0});var E=m(e);t=c(E,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=T(E),n=c(E,"ION-LABEL",{class:!0});var C=m(n);o=c(C,"P",{"data-svelte-h":!0}),te(o)!=="svelte-1ub9uzw"&&(o.textContent=f),u=T(C),h=c(C,"H2",{});var y=m(h);k=me(y,O),y.forEach(a),C.forEach(a),p=T(E),d=c(E,"ION-ICON",{icon:!0,slot:!0}),m(d).forEach(a),E.forEach(a),this.h()},h(){b(t,"icon",bt),b(t,"slot","start"),b(n,"class","ion-text-wrap"),b(d,"icon",Ue),b(d,"slot","end"),b(e,"href","https://www.google.com/maps/searhc/?api=1&query="+i[9].line2)},m(g,E){K(g,e,E),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,h),r(h,k),r(e,p),r(e,d)},p:Le,d(g){g&&a(e)}}}function oo(i){let e,t,l,n,o,f="Domicilio",u,h,O=i[9].line1+"",k,p,d,g,E=i[9].line2&&i[9].line2.trim().length,C,y=E&&lo(i);return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),h=s("h2"),k=pe(O),p=N(),d=s("ion-icon"),g=N(),y&&y.c(),C=Se(),this.h()},l(B){e=c(B,"ION-ITEM",{href:!0});var H=m(e);t=c(H,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=T(H),n=c(H,"ION-LABEL",{class:!0});var V=m(n);o=c(V,"P",{"data-svelte-h":!0}),te(o)!=="svelte-cbm7q1"&&(o.textContent=f),u=T(V),h=c(V,"H2",{});var U=m(h);k=me(U,O),U.forEach(a),V.forEach(a),p=T(H),d=c(H,"ION-ICON",{icon:!0,slot:!0}),m(d).forEach(a),H.forEach(a),g=T(B),y&&y.l(B),C=Se(),this.h()},h(){b(t,"icon",bt),b(t,"slot","start"),b(n,"class","ion-text-wrap"),b(d,"icon",Ue),b(d,"slot","end"),b(e,"href","https://www.google.com/maps/search/?api=1&query="+i[9].line1)},m(B,H){K(B,e,H),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,h),r(h,k),r(e,p),r(e,d),K(B,g,H),y&&y.m(B,H),K(B,C,H)},p(B,H){E&&y.p(B,H)},d(B){B&&(a(e),a(g),a(C)),y&&y.d(B)}}}function lo(i){let e,t,l,n,o,f="Domicilio Alternativo",u,h,O=i[9].line2+"",k,p,d;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),h=s("h2"),k=pe(O),p=N(),d=s("ion-icon"),this.h()},l(g){e=c(g,"ION-ITEM",{href:!0});var E=m(e);t=c(E,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=T(E),n=c(E,"ION-LABEL",{class:!0});var C=m(n);o=c(C,"P",{"data-svelte-h":!0}),te(o)!=="svelte-1ub9uzw"&&(o.textContent=f),u=T(C),h=c(C,"H2",{});var y=m(h);k=me(y,O),y.forEach(a),C.forEach(a),p=T(E),d=c(E,"ION-ICON",{icon:!0,slot:!0}),m(d).forEach(a),E.forEach(a),this.h()},h(){b(t,"icon",bt),b(t,"slot","start"),b(n,"class","ion-text-wrap"),b(d,"icon",Ue),b(d,"slot","end"),b(e,"href","https://www.google.com/maps/search/?api=1&query="+i[9].line2)},m(g,E){K(g,e,E),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,h),r(h,k),r(e,p),r(e,d)},p:Le,d(g){g&&a(e)}}}function io(i){let e,t,l,n,o,f="Contacto del Cliente",u,h,O,k,p=i[13]&&i[13]==="1"&&ro(i);return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),h=s("h2"),O=pe(i[14]),k=N(),p&&p.c(),this.h()},l(d){e=c(d,"ION-ITEM",{});var g=m(e);t=c(g,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=T(g),n=c(g,"ION-LABEL",{class:!0});var E=m(n);o=c(E,"P",{"data-svelte-h":!0}),te(o)!=="svelte-1utsyb6"&&(o.textContent=f),u=T(E),h=c(E,"H2",{});var C=m(h);O=me(C,i[14]),C.forEach(a),E.forEach(a),k=T(g),p&&p.l(g),g.forEach(a),this.h()},h(){b(t,"icon",En),b(t,"slot","start"),b(n,"class","ion-text-wrap")},m(d,g){K(d,e,g),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,h),r(h,O),r(e,k),p&&p.m(e,null)},p(d,g){d[13]&&d[13]==="1"&&p.p(d,g)},d(d){d&&a(e),p&&p.d()}}}function ro(i){let e,t=`<ion-icon icon="${Cn}" slot="start"></ion-icon>
                        Notificar Cliente`,l,n;return{c(){e=s("ion-button"),e.innerHTML=t,this.h()},l(o){e=c(o,"ION-BUTTON",{fill:!0,style:!0,"data-svelte-h":!0}),te(e)!=="svelte-149vhpt"&&(e.innerHTML=t),this.h()},h(){b(e,"fill","outline"),_(e,"margin-left","16px")},m(o,f){K(o,e,f),l||(n=ce(e,"click",i[23]),l=!0)},p:Le,d(o){o&&a(e),l=!1,n()}}}function ao(i){let e,t,l,n,o,f="Notas de ubicación",u,h,O;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),h=s("h2"),O=pe(i[15]),this.h()},l(k){e=c(k,"ION-ITEM",{});var p=m(e);t=c(p,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=T(p),n=c(p,"ION-LABEL",{class:!0});var d=m(n);o=c(d,"P",{"data-svelte-h":!0}),te(o)!=="svelte-nhm2ft"&&(o.textContent=f),u=T(d),h=c(d,"H2",{});var g=m(h);O=me(g,i[15]),g.forEach(a),d.forEach(a),p.forEach(a),this.h()},h(){b(t,"icon",en),b(t,"slot","start"),b(n,"class","ion-text-wrap")},m(k,p){K(k,e,p),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,h),r(h,O)},p:Le,d(k){k&&a(e)}}}function so(i){let e,t,l,n,o,f="Horarios",u,h,O=i[9].schedule+"",k;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),h=s("h2"),k=pe(O),this.h()},l(p){e=c(p,"ION-ITEM",{});var d=m(e);t=c(d,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=T(d),n=c(d,"ION-LABEL",{});var g=m(n);o=c(g,"P",{"data-svelte-h":!0}),te(o)!=="svelte-11q7hm5"&&(o.textContent=f),u=T(g),h=c(g,"H2",{});var E=m(h);k=me(E,O),E.forEach(a),g.forEach(a),d.forEach(a),this.h()},h(){b(t,"icon",In),b(t,"slot","start")},m(p,d){K(p,e,d),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,h),r(h,k)},p:Le,d(p){p&&a(e)}}}function co(i){let e,t,l,n,o,f="Notas del operador",u,h,O=i[9].driver_comments+"",k;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),h=s("h2"),k=pe(O),this.h()},l(p){e=c(p,"ION-ITEM",{});var d=m(e);t=c(d,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=T(d),n=c(d,"ION-LABEL",{});var g=m(n);o=c(g,"P",{"data-svelte-h":!0}),te(o)!=="svelte-1yk9qp4"&&(o.textContent=f),u=T(g),h=c(g,"H2",{});var E=m(h);k=me(E,O),E.forEach(a),g.forEach(a),d.forEach(a),this.h()},h(){b(t,"icon",tn),b(t,"slot","start")},m(p,d){K(p,e,d),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,h),r(h,k)},p:Le,d(p){p&&a(e)}}}function uo(i){let e,t=i[9].logistic_comments!="<br>"&&fo(i);return{c(){t&&t.c(),e=Se()},l(l){t&&t.l(l),e=Se()},m(l,n){t&&t.m(l,n),K(l,e,n)},p(l,n){l[9].logistic_comments!="<br>"&&t.p(l,n)},d(l){l&&a(e),t&&t.d(l)}}}function fo(i){let e,t,l,n,o,f="Comentarios logísticos",u,h,O=i[9].logistic_comments+"",k;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),o=s("p"),o.textContent=f,u=N(),h=s("h2"),k=pe(O),this.h()},l(p){e=c(p,"ION-ITEM",{});var d=m(e);t=c(d,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=T(d),n=c(d,"ION-LABEL",{class:!0});var g=m(n);o=c(g,"P",{"data-svelte-h":!0}),te(o)!=="svelte-1iz85r6"&&(o.textContent=f),u=T(g),h=c(g,"H2",{});var E=m(h);k=me(E,O),E.forEach(a),g.forEach(a),d.forEach(a),this.h()},h(){b(t,"icon",en),b(t,"slot","start"),b(n,"class","ion-text-wrap")},m(p,d){K(p,e,d),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,h),r(h,k)},p:Le,d(p){p&&a(e)}}}function _o(i){let e,t,l,n,o="<p>Etiqueta</p>",f,u,h=(i[9].tag?i[9].tag:"")+"",O;return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-label"),n.innerHTML=o,f=N(),u=s("div"),O=pe(h),this.h()},l(k){e=c(k,"ION-ITEM",{});var p=m(e);t=c(p,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=T(p),n=c(p,"ION-LABEL",{class:!0,"data-svelte-h":!0}),te(n)!=="svelte-50rr6d"&&(n.innerHTML=o),f=T(p),u=c(p,"DIV",{class:!0,style:!0});var d=m(u);O=me(d,h),d.forEach(a),p.forEach(a),this.h()},h(){b(t,"icon",On),b(t,"slot","start"),b(n,"class","ion-text-wrap"),j(u,"class","stop-tag"),_(u,"background-color",i[16]),_(u,"border","1px solid "+i[17]),_(u,"color",i[9].tag_color),_(u,"font-size","14px"),_(u,"text-align","center"),_(u,"align-content","center"),_(u,"border-radius","20px"),_(u,"white-space","normal"),_(u,"padding","4px 8px"),_(u,"width","auto",1),_(u,"display","inline-block")},m(k,p){K(k,e,p),r(e,t),r(e,l),r(e,n),r(e,f),r(e,u),r(u,O)},p:Le,d(k){k&&a(e)}}}function ho(i){let e,t,l,n,o,f="Estado de entrega",u,h,O="Entregado",k,p,d="No Entregado",g,E,C="Entrega Parcial",y,B,H,V,U,W,D,L,w=i[4]===!0&&Tt(i),A=(i[5]===!0||i[5]===!1&&i[4]===!1)&&Ct(i);return{c(){e=s("ion-item"),t=s("ion-icon"),l=N(),n=s("ion-select"),o=s("div"),o.textContent=f,u=N(),h=s("ion-select-option"),h.textContent=O,k=N(),p=s("ion-select-option"),p.textContent=d,g=N(),E=s("ion-select-option"),E.textContent=C,y=N(),B=s("ion-item"),H=s("ion-icon"),V=N(),U=s("ion-textarea"),W=N(),D=s("section"),w&&w.c(),L=N(),A&&A.c(),this.h()},l(S){e=c(S,"ION-ITEM",{});var R=m(e);t=c(R,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=T(R),n=c(R,"ION-SELECT",{value:!0});var q=m(n);o=c(q,"DIV",{slot:!0,"data-svelte-h":!0}),te(o)!=="svelte-1635zca"&&(o.textContent=f),u=T(q),h=c(q,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),te(h)!=="svelte-1nhq8vd"&&(h.textContent=O),k=T(q),p=c(q,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),te(p)!=="svelte-dhd4r3"&&(p.textContent=d),g=T(q),E=c(q,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),te(E)!=="svelte-17taxwo"&&(E.textContent=C),q.forEach(a),R.forEach(a),y=T(S),B=c(S,"ION-ITEM",{});var M=m(B);H=c(M,"ION-ICON",{icon:!0,slot:!0}),m(H).forEach(a),V=T(M),U=c(M,"ION-TEXTAREA",{label:!0,placeholder:!0}),m(U).forEach(a),M.forEach(a),W=T(S),D=c(S,"SECTION",{style:!0});var X=m(D);w&&w.l(X),L=T(X),A&&A.l(X),X.forEach(a),this.h()},h(){b(t,"icon",Nn),b(t,"slot","start"),j(o,"slot","label"),b(h,"value","delivered"),b(p,"value","notdelivered"),b(E,"value","partialdeliver"),b(n,"value",i[12]?i[12]:"delivered"),b(H,"icon",ht),b(H,"slot","start"),b(U,"label","Notas"),b(U,"placeholder","Escribe aquí..."),_(D,"display","flex"),_(D,"gap","8px"),_(D,"padding","16px 16px 6px")},m(S,R){K(S,e,R),r(e,t),r(e,l),r(e,n),r(n,o),r(n,u),r(n,h),r(n,k),r(n,p),r(n,g),r(n,E),i[29](n),K(S,y,R),K(S,B,R),r(B,H),r(B,V),r(B,U),i[30](U),K(S,W,R),K(S,D,R),w&&w.m(D,null),r(D,L),A&&A.m(D,null)},p(S,R){S[4]===!0?w?w.p(S,R):(w=Tt(S),w.c(),w.m(D,L)):w&&(w.d(1),w=null),S[5]===!0||S[5]===!1&&S[4]===!1?A?A.p(S,R):(A=Ct(S),A.c(),A.m(D,null)):A&&(A.d(1),A=null)},d(S){S&&(a(e),a(y),a(B),a(W),a(D)),i[29](null),i[30](null),w&&w.d(),A&&A.d()}}}function Tt(i){let e,t=`<ion-icon icon="${yn}" slot="start"></ion-icon>
                        Ingreso`,l,n;return{c(){e=s("ion-button"),e.innerHTML=t,this.h()},l(o){e=c(o,"ION-BUTTON",{id:!0,style:!0,"data-svelte-h":!0}),te(e)!=="svelte-izs0s1"&&(e.innerHTML=t),this.h()},h(){b(e,"id","checkInBtn"),_(e,"flex","1")},m(o,f){K(o,e,f),l||(n=ce(e,"click",i[24]),l=!0)},p:Le,d(o){o&&a(e),l=!1,n()}}}function Ct(i){let e,t,l,n,o,f;return{c(){e=s("ion-button"),t=s("ion-icon"),l=pe(`
                        Salida`),this.h()},l(u){e=c(u,"ION-BUTTON",{id:!0,style:!0,disabled:!0});var h=m(e);t=c(h,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=me(h,`
                        Salida`),h.forEach(a),this.h()},h(){b(t,"icon",Tn),b(t,"slot","start"),b(e,"id","checkOutBtn"),_(e,"flex","1"),b(e,"disabled",n=i[5]===!1)},m(u,h){K(u,e,h),r(e,t),r(e,l),o||(f=ce(e,"click",i[25]),o=!0)},p(u,h){h[0]&32&&n!==(n=u[5]===!1)&&b(e,"disabled",n)},d(u){u&&a(e),o=!1,f()}}}function po(i){let e,t,l,n,o,f,u,h;return{c(){e=s("section"),t=s("ion-button"),l=s("label"),n=s("ion-icon"),o=pe(`
                        Subir Evidencia
                        `),f=s("input"),this.h()},l(O){e=c(O,"SECTION",{style:!0});var k=m(e);t=c(k,"ION-BUTTON",{fill:!0,class:!0,style:!0});var p=m(t);l=c(p,"LABEL",{for:!0,style:!0});var d=m(l);n=c(d,"ION-ICON",{icon:!0,slot:!0,style:!0}),m(n).forEach(a),o=me(d,`
                        Subir Evidencia
                        `),f=c(d,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),d.forEach(a),p.forEach(a),k.forEach(a),this.h()},h(){b(n,"icon",nn),b(n,"slot","start"),_(n,"vertical-align","middle"),_(f,"display","none"),j(f,"id","eventEvidence"),j(f,"name","fileToUpload"),j(f,"type","file"),f.multiple=!0,j(f,"accept","image/*"),j(f,"capture","environment"),j(l,"for","eventEvidence"),_(l,"width","100%"),_(l,"height","100%"),b(t,"fill","outline"),b(t,"class","loadEvidence"),_(t,"flex","1"),_(t,"display","flex"),_(t,"align-items","center"),_(t,"gap","8px"),_(e,"display","flex"),_(e,"gap","8px"),_(e,"padding","0px 16px")},m(O,k){K(O,e,k),r(e,t),r(t,l),r(l,n),r(l,o),r(l,f),u||(h=[ce(f,"change",i[18]),ce(f,"click",i[19])],u=!0)},p:Le,d(O){O&&a(e),u=!1,De(h)}}}function yt(i){let e,t,l=Re(i[2]),n=[];for(let o=0;o<l.length;o+=1)n[o]=wt(Nt(i,l,o));return{c(){e=s("section"),t=s("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=c(o,"SECTION",{});var f=m(e);t=c(f,"DIV",{class:!0,style:!0});var u=m(t);for(let h=0;h<n.length;h+=1)n[h].l(u);u.forEach(a),f.forEach(a),this.h()},h(){j(t,"class","image-grid"),_(t,"display","grid"),_(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),_(t,"gap","10px"),_(t,"padding","0px 10px")},m(o,f){K(o,e,f),r(e,t);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null)},p(o,f){if(f[0]&69206020){l=Re(o[2]);let u;for(u=0;u<l.length;u+=1){const h=Nt(o,l,u);n[u]?n[u].p(h,f):(n[u]=wt(h),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=l.length}},d(o){o&&a(e),Zt(n,o)}}}function wt(i){let e,t,l,n,o,f=`<ion-icon icon="${ln}"></ion-icon>`,u,h,O;function k(){return i[31](i[52])}function p(){return i[32](i[54])}return{c(){e=s("div"),t=s("ion-img"),n=N(),o=s("button"),o.innerHTML=f,u=N(),this.h()},l(d){e=c(d,"DIV",{class:!0,style:!0});var g=m(e);t=c(g,"ION-IMG",{src:!0,alt:!0,style:!0}),m(t).forEach(a),n=T(g),o=c(g,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),te(o)!=="svelte-n0vrsf"&&(o.innerHTML=f),u=T(g),g.forEach(a),this.h()},h(){Ke(t.src,l=i[52])||b(t,"src",l),b(t,"alt","Evidencia fotográfica"),_(t,"width","100%"),_(t,"height","100px"),_(t,"object-fit","cover"),_(t,"cursor","pointer"),_(t,"border","1px solid #ccc"),_(t,"border-radius","4px"),_(t,"margin-top","16px"),j(o,"class","remove-button"),_(o,"position","absolute"),_(o,"top","5px"),_(o,"right","5px"),_(o,"border","none"),_(o,"cursor","pointer"),_(o,"font-size","18px"),_(o,"background","white"),_(o,"border-radius","50%"),_(o,"padding","3px 4px 0px"),_(o,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),_(o,"color","#0000008f"),j(e,"class","image-container"),_(e,"position","relative")},m(d,g){K(d,e,g),r(e,t),r(e,n),r(e,o),r(e,u),h||(O=[ce(t,"click",k),ce(o,"click",p)],h=!0)},p(d,g){i=d,g[0]&4&&!Ke(t.src,l=i[52])&&b(t,"src",l)},d(d){d&&a(e),h=!1,De(O)}}}function Lt(i){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=s("div"),e.innerHTML=t,this.h()},l(l){e=c(l,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),te(e)!=="svelte-1aosxw0"&&(e.innerHTML=t),this.h()},h(){j(e,"class","overlay"),_(e,"position","fixed"),_(e,"top","0"),_(e,"left","0"),_(e,"width","100vw"),_(e,"height","100vh"),_(e,"background","rgba(0, 0, 0, 0.5)"),_(e,"display","flex"),_(e,"align-items","center"),_(e,"justify-content","center"),_(e,"z-index","9999")},m(l,n){K(l,e,n)},d(l){l&&a(e)}}}function zt(i){let e,t,l,n,o,f,u=`<ion-icon icon="${rn}"></ion-icon>`,h,O;return{c(){e=s("div"),t=s("div"),l=s("ion-img"),o=N(),f=s("button"),f.innerHTML=u,this.h()},l(k){e=c(k,"DIV",{class:!0,style:!0});var p=m(e);t=c(p,"DIV",{class:!0,style:!0});var d=m(t);l=c(d,"ION-IMG",{src:!0,alt:!0,style:!0}),m(l).forEach(a),o=T(d),f=c(d,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),te(f)!=="svelte-183t4ti"&&(f.innerHTML=u),d.forEach(a),p.forEach(a),this.h()},h(){Ke(l.src,n=i[7])||b(l,"src",n),b(l,"alt","Evidencia fotográfica"),_(l,"width","100%"),_(l,"height","auto"),j(f,"class","close-button"),_(f,"position","absolute"),_(f,"top","5px"),_(f,"right","5px"),_(f,"background","white"),_(f,"color","#444444d1"),_(f,"border","none"),_(f,"cursor","pointer"),_(f,"padding","2px 2px 0px 6px"),_(f,"border-radius","50%"),_(f,"font-size","20px"),j(t,"class","modal-content"),_(t,"position","relative"),_(t,"background","white"),_(t,"padding","20px"),_(t,"border-radius","8px"),_(t,"max-width","90vw"),_(t,"max-height","90vh"),_(t,"overflow","auto"),j(e,"class","modal-overlay"),_(e,"position","fixed"),_(e,"top","0"),_(e,"left","0"),_(e,"width","100vw"),_(e,"height","100vh"),_(e,"background","rgba(0, 0, 0, 0.8)"),_(e,"display","flex"),_(e,"justify-content","center"),_(e,"align-items","center"),_(e,"z-index","1000")},m(k,p){K(k,e,p),r(e,t),r(t,l),r(t,o),r(t,f),h||(O=[ce(f,"click",i[27]),ce(t,"click",xt(i[28])),ce(e,"click",i[27])],h=!0)},p(k,p){p[0]&128&&!Ke(l.src,n=k[7])&&b(l,"src",n)},d(k){k&&a(e),h=!1,De(O)}}}function mo(i){let e,t,l,n,o="Cerrar",f,u,h=i[9].title+"",O,k,p,d,g,E,C=i[9].client_phone&&i[9].client_phone.trim().length,y,B,H,V,U=i[9].schedule&&i[9].schedule.trim().length,W,D,L=i[9].logistic_comments&&i[9].logistic_comments.trim().length,w,A,S,R,q,M,X,ie,re,ae=(!i[10]&&!i[11]||i[10]&&i[11])&&xn(i);function Ie(v,z){return v[9].client_name!=null?eo:$n}let se=Ie(i)(i),_e=C&&to(i);function ve(v,z){if(v[9].line1&&v[9].line1.trim().length)return oo;if(v[9].line2&&v[9].line2.trim().length)return no}let he=ve(i),ue=he&&he(i),ge=i[14]&&io(i),de=i[15]&&i[15]!=="<br>"&&ao(i),be=U&&so(i),ke=i[9].driver_comments&&co(i),Oe=L&&uo(i),ye=i[9].tag&&i[9].tag_color&&_o(i),Ne=!i[11]&&ho(i),fe=(i[10]&&i[11]||!i[10]&&!i[11])&&po(i),x=i[1]&&yt(i),le=i[3]&&Lt(),Q=i[6]&&zt(i);return{c(){e=s("ion-header"),t=s("ion-toolbar"),l=s("ion-buttons"),n=s("ion-button"),n.textContent=o,f=N(),u=s("ion-title"),O=pe(h),k=N(),ae&&ae.c(),p=N(),d=s("ion-content"),g=s("ion-list"),se.c(),E=N(),_e&&_e.c(),y=N(),ue&&ue.c(),B=N(),ge&&ge.c(),H=N(),de&&de.c(),V=N(),be&&be.c(),W=N(),ke&&ke.c(),D=N(),Oe&&Oe.c(),w=N(),ye&&ye.c(),A=N(),Ne&&Ne.c(),S=N(),fe&&fe.c(),R=N(),x&&x.c(),q=N(),le&&le.c(),M=N(),Q&&Q.c(),X=Se(),this.h()},l(v){e=c(v,"ION-HEADER",{translucent:!0});var z=m(e);t=c(z,"ION-TOOLBAR",{});var G=m(t);l=c(G,"ION-BUTTONS",{slot:!0});var P=m(l);n=c(P,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),te(n)!=="svelte-2ks32x"&&(n.textContent=o),P.forEach(a),f=T(G),u=c(G,"ION-TITLE",{style:!0,title:!0});var J=m(u);O=me(J,h),J.forEach(a),k=T(G),ae&&ae.l(G),G.forEach(a),z.forEach(a),p=T(v),d=c(v,"ION-CONTENT",{fullscreen:!0});var F=m(d);g=c(F,"ION-LIST",{});var I=m(g);se.l(I),E=T(I),_e&&_e.l(I),y=T(I),ue&&ue.l(I),B=T(I),ge&&ge.l(I),H=T(I),de&&de.l(I),V=T(I),be&&be.l(I),W=T(I),ke&&ke.l(I),D=T(I),Oe&&Oe.l(I),w=T(I),ye&&ye.l(I),A=T(I),Ne&&Ne.l(I),S=T(I),fe&&fe.l(I),R=T(I),x&&x.l(I),I.forEach(a),F.forEach(a),q=T(v),le&&le.l(v),M=T(v),Q&&Q.l(v),X=Se(),this.h()},h(){b(n,"color","medium"),b(l,"slot","start"),_(u,"text-align","center"),b(u,"title",i[9].title),b(e,"translucent",""),b(d,"fullscreen","")},m(v,z){K(v,e,z),r(e,t),r(t,l),r(l,n),r(t,f),r(t,u),r(u,O),r(t,k),ae&&ae.m(t,null),K(v,p,z),K(v,d,z),r(d,g),se.m(g,null),r(g,E),_e&&_e.m(g,null),r(g,y),ue&&ue.m(g,null),r(g,B),ge&&ge.m(g,null),r(g,H),de&&de.m(g,null),r(g,V),be&&be.m(g,null),r(g,W),ke&&ke.m(g,null),r(g,D),Oe&&Oe.m(g,null),r(g,w),ye&&ye.m(g,null),r(g,A),Ne&&Ne.m(g,null),r(g,S),fe&&fe.m(g,null),r(g,R),x&&x.m(g,null),K(v,q,z),le&&le.m(v,z),K(v,M,z),Q&&Q.m(v,z),K(v,X,z),ie||(re=ce(n,"click",i[20]),ie=!0)},p(v,z){(!v[10]&&!v[11]||v[10]&&v[11])&&ae.p(v,z),se.p(v,z),C&&_e.p(v,z),ue&&ue.p(v,z),v[14]&&ge.p(v,z),v[15]&&v[15]!=="<br>"&&de.p(v,z),U&&be.p(v,z),v[9].driver_comments&&ke.p(v,z),L&&Oe.p(v,z),v[9].tag&&v[9].tag_color&&ye.p(v,z),v[11]||Ne.p(v,z),(v[10]&&v[11]||!v[10]&&!v[11])&&fe.p(v,z),v[1]?x?x.p(v,z):(x=yt(v),x.c(),x.m(g,null)):x&&(x.d(1),x=null),v[3]?le||(le=Lt(),le.c(),le.m(M.parentNode,M)):le&&(le.d(1),le=null),v[6]?Q?Q.p(v,z):(Q=zt(v),Q.c(),Q.m(X.parentNode,X)):Q&&(Q.d(1),Q=null)},i:Le,o:Le,d(v){v&&(a(e),a(p),a(d),a(q),a(M),a(X)),ae&&ae.d(),se.d(),_e&&_e.d(),ue&&ue.d(),ge&&ge.d(),de&&de.d(),be&&be.d(),ke&&ke.d(),Oe&&Oe.d(),ye&&ye.d(),Ne&&Ne.d(),fe&&fe.d(),x&&x.d(),le&&le.d(v),Q&&Q.d(v),ie=!1,re()}}}function vo(i,e,t){let l=ut,n=document.querySelector("ion-modal"),o=n.componentProps.delivery,f=n.componentProps.isLast||!1,u=n.componentProps.flag||!1,h=o.driver_comments?o.driver_comments:"",O=o.deliver_status?o.deliver_status:"",k=o.img?o.img:"",p=o.img_id?o.img_id:"",d=k?$e(k):new Array,g=p?$e(p):new Array,E={latitude:null,longitude:null},C=o.stopsApproval,y=o.smsActive,B=!1,H=!0,V=!1,U=o.phone_notification,W=o.comments_ext,D=!1,L="",w=new Object,A="",S=o.tag_color?Be(o.tag_color,.2):"",R=o.tag_color?Be(o.tag_color,.3):"";et(()=>{w=JSON.parse(localStorage.getItem("userSession")),q()});function q(){o.date_service?o.date_service&&!o.date_completed&&!o.service_time?(t(4,H=!1),t(5,V=!0)):o.date_service&&o.date_completed&&o.service_time&&(t(4,H=!1),t(5,V=!1)):(t(4,H=!0),t(5,V=!1))}const M=async(P,J)=>{await(await Ge.create({header:P||"Error",message:J||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},X=async(P="",J="",F="",I=function($={}){},Z={})=>{console.log(Z),await(await Ge.create({header:P||"Error",message:J||"Vuelva a intentar",buttons:[{text:"No",role:"cancel",handler:()=>{}},{text:"Sí",handler:()=>{t(3,B=!0),qe(F,function(ne={}){t(3,B=!1),I(ne)},Z)}}]})).present()};async function ie(P,J){await(await Ge.create({header:"¿Cómo quieres notificar?",message:`Elige el medio para enviar mensaje a ${P.title} (${J})`,buttons:[{text:"SMS",handler:()=>ge("sms",P,J)},{text:"WhatsApp",handler:()=>ge("whatsapp",P,J)}]})).present()}const re=async P=>{if(d.length>=5){M("Límite de evidencias","Solo se permite subir 5 fotos por parada");return}if(u&&f&&d.length>=1){M("Límite de evidencias","Para el final de la ruta solo se permite subir 1 foto");return}const F=P.target.files[0];if(F)try{t(3,B=!0);const I=await Y(F);I&&qe(`${l}api/admin/manager/upload_img_driver.php`,function(Z){Z.success?(t(1,k=k?`${k},${Z.img}`:Z.img),p=p?`${p},${Z.img_id}`:Z.img_id,t(2,d=$e(k)),g=$e(p)):M("Carga fallida","Actualiza la página y vuelve a intentar. Si el problema persiste, contacta a soporte.")},{fileToUpload:I})}catch(I){console.error("Compression error:",I)}finally{t(3,B=!1)}};function ae(P){var J=o.service_time;!J&&H&&!f&&!u&&(P.preventDefault(),M("Registrar Ingreso","Antes de subir la evidencia registra el ingreso a la actual parada."))}function Ie(){var P=u?o.date_completed:!1;if(!P&&!H&&V&&!f&&!u){var J=new Object;J.id_event=o.id_event,J.type="checkout",J.id_user_over=w.id_user,J.token=w.token,X("Registrar Salida","¿Completaste tu entrega?",l+"api/admin/route/record_check_date.php",function(F){F.minutes&&M("Tiempo por parada","Completaste la parada en "+F.minutes+" minutos.")},J)}}const Y=async P=>new Promise(J=>{const F=new Image;F.src=URL.createObjectURL(P),F.onload=()=>{const I=document.createElement("canvas"),Z=I.getContext("2d"),$=800,ne=600;let oe=F.width,ee=F.height;oe>$&&(ee*=$/oe,oe=$),ee>ne&&(oe*=ne/ee,ee=ne),I.width=oe,I.height=ee,Z.drawImage(F,0,0,oe,ee),I.toBlob(Ee=>{J(Ee),URL.revokeObjectURL(F.src),Z.clearRect(0,0,I.width,I.height)},"image/jpeg",.7)}}),se=()=>{n.dismiss({data:Date.now()})};function _e(P){t(2,d=d.filter((J,F)=>F!==P))}const ve=async()=>{try{if(t(3,B=!0),t(1,k=d.join(",")),p=g.join(","),Ie(),await ue())if(A.value=="delivered"||A.value!=="delivered"&&(h.value||o.driver_comments)||u&&f){const J={id_route:o.id_route,...!u&&!f&&{id_event:o.id_event},...!u&&!f&&{comments:h.value},...!u&&!f&&{deliver_status:A.value},img:k,img_id:p,lat:E.latitude,lon:E.longitude,...C==="0"&&{approve:"0"},...f&&{isLast:!0},...u&&f&&{destiny:!0},id_user_over:w.id_user,token:w.token};J.img&&J.img_id||k?(t(3,B=!0),qe(`${l}api/admin/evidence/send_evidence.php`,function(F){if(F.success==!0){const I=J.id_route;se(),f&&(he("","",I,f),C=="0"&&x(I,"completed")),t(3,B=!1)}else t(3,B=!1),M("Carga fallida","Actualiza la página y vuelve a intentar cargar la información!")},J)):M("Información incompleta","Cargar evidencia fotográfica faltante para completar parada.")}else M("Motivo de status de entrega","Favor de ingresar en notas el motivo por el que la entrega no fue entregada correctamente");else M("Ubicación faltante","Asegúrate darle permisos a Rutaflow para acceder a tu ubicación")}catch(P){console.error("Error fetching data:",P)}finally{t(3,B=!1)}},he=(P,J,F,I)=>{n.componentProps.routeId=F,n.componentProps.driverId=o.id_driver,Fe("modal-km-gas",sn,{checklist:P,driverId:J,routeId:F,isLast:I}).then(Z=>{})},ue=async()=>navigator.geolocation?new Promise((P,J)=>{navigator.geolocation.getCurrentPosition(F=>{E.latitude=F.coords.latitude,E.longitude=F.coords.longitude,P(!0)},F=>{console.error("Error getting location:",F),P(!1)})}):(console.error("Geolocation is not supported by your browser"),!1);async function ge(P,J,F){const I={};if(P==="sms"){I.id_user_over=w.id_user,I.token=w.token,I.client_phone=F,I.client_name=J.title,I.delivery_phone=J.client_phone,I.enterprise_name=J.enterprise_name,qe(`${l}api/admin/message_central/send_sms.php`,de("SMS",J.title,F),I);return}try{var Z=J.client_phone?`
Dudas contáctanos en https://wa.me/${J.client_phone}.`:".";I.text=`*Rutaflow*

El repartidor va en camino a tu domicilio ${J.title}${Z}

Enviado por _${J.enterprise_name}_`,I.phone=F;const ne=await(await fetch(`${Sn}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`${Dn}`},body:JSON.stringify(I)})).json();de("WHATSAPP",J.title,F)(ne)}catch($){console.error($),M("WHATSAPP no enviado","Ocurrió un error de red.")}}function de(P,J,F){return I=>{I.success?M(`${P} enviado`,`Se envió correctamente un ${P} a ${J} con número ${F}.`):M(`${P} no enviado`,`Hubo un error al enviar ${P} a ${J} (${F}).`)}}function be(P){P.stopPropagation(),ie(o,U)}function ke(){t(4,H=!1),t(5,V=!0),ye(o.id_event,"checkin")}function Oe(){t(5,V=!1),t(4,H=!1),ye(o.id_event,"checkout")}async function ye(P,J){if(J){let F=new Object;F.type=J,F.id_event=P,F.id_user_over=w.id_user,F.token=w.token;try{qe(`${l}api/admin/route/record_check_date.php`,function(I){I.minutes&&M("Tiempo por parada","Completaste la parada en "+I.minutes+" minutos.")},F)}catch(I){console.error("Error during file upload:",I)}finally{}}}const Ne=P=>{t(7,L=P),t(6,D=!0)},fe=()=>{t(6,D=!1),t(7,L="")};function x(P,J){let F=new Object;return F.id_route=P,F.status=J,F.id_user_over=w.id_user,F.token=w.token,qe(`${l}api/admin/route/change_status.php`,function(){},F),""}function le(P){$t.call(this,i,P)}function Q(P){He[P?"unshift":"push"](()=>{A=P,t(8,A)})}function v(P){He[P?"unshift":"push"](()=>{h=P,t(0,h)})}return[h,k,d,B,H,V,D,L,A,o,f,u,O,y,U,W,S,R,re,ae,se,_e,ve,be,ke,Oe,Ne,fe,le,Q,v,P=>Ne(P),P=>_e(P)]}class At extends Qe{constructor(e){super(),Ze(this,e,vo,mo,Ye,{},null,[-1,-1])}}function Mt(i,e,t){const l=i.slice();return l[32]=e[t],l[34]=t,l}function St(i){let e,t,l=Re(i[1]),n=[];for(let o=0;o<l.length;o+=1)n[o]=Dt(Mt(i,l,o));return{c(){e=s("section"),t=s("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=c(o,"SECTION",{});var f=m(e);t=c(f,"DIV",{class:!0,style:!0});var u=m(t);for(let h=0;h<n.length;h+=1)n[h].l(u);u.forEach(a),f.forEach(a),this.h()},h(){j(t,"class","image-grid"),_(t,"display","grid"),_(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),_(t,"gap","10px"),_(t,"padding","0px 10px")},m(o,f){K(o,e,f),r(e,t);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null)},p(o,f){if(f[0]&32770){l=Re(o[1]);let u;for(u=0;u<l.length;u+=1){const h=Mt(o,l,u);n[u]?n[u].p(h,f):(n[u]=Dt(h),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=l.length}},d(o){o&&a(e),Zt(n,o)}}}function Dt(i){let e,t,l,n,o,f=`<ion-icon icon="${ln}"></ion-icon>`,u,h,O;function k(){return i[22](i[32])}function p(){return i[23](i[34])}return{c(){e=s("div"),t=s("ion-img"),n=N(),o=s("button"),o.innerHTML=f,u=N(),this.h()},l(d){e=c(d,"DIV",{class:!0,style:!0});var g=m(e);t=c(g,"ION-IMG",{src:!0,alt:!0,style:!0}),m(t).forEach(a),n=T(g),o=c(g,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),te(o)!=="svelte-zguiov"&&(o.innerHTML=f),u=T(g),g.forEach(a),this.h()},h(){Ke(t.src,l=i[32])||b(t,"src",l),b(t,"alt","Evidencia fotográfica"),_(t,"width","100%"),_(t,"height","100px"),_(t,"object-fit","cover"),_(t,"cursor","pointer"),_(t,"border","1px solid #ccc"),_(t,"border-radius","4px"),_(t,"margin-top","16px"),j(o,"class","remove-button"),_(o,"position","absolute"),_(o,"top","5px"),_(o,"right","5px"),_(o,"border","none"),_(o,"cursor","pointer"),_(o,"font-size","18px"),_(o,"background","white"),_(o,"border-radius","50%"),_(o,"padding","3px 4px 0px"),_(o,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),_(o,"color","#0000008f"),j(e,"class","image-container"),_(e,"position","relative")},m(d,g){K(d,e,g),r(e,t),r(e,n),r(e,o),r(e,u),h||(O=[ce(t,"click",k),ce(o,"click",p)],h=!0)},p(d,g){i=d,g[0]&2&&!Ke(t.src,l=i[32])&&b(t,"src",l)},d(d){d&&a(e),h=!1,De(O)}}}function Ht(i){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=s("div"),e.innerHTML=t,this.h()},l(l){e=c(l,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),te(e)!=="svelte-h8s7r2"&&(e.innerHTML=t),this.h()},h(){j(e,"class","overlay"),_(e,"position","fixed"),_(e,"top","0"),_(e,"left","0"),_(e,"width","100vw"),_(e,"height","100vh"),_(e,"background","rgba(0, 0, 0, 0.5)"),_(e,"display","flex"),_(e,"align-items","center"),_(e,"justify-content","center"),_(e,"z-index","9999")},m(l,n){K(l,e,n)},d(l){l&&a(e)}}}function Pt(i){let e,t,l,n,o,f,u=`<ion-icon icon="${rn}"></ion-icon>`,h,O;return{c(){e=s("div"),t=s("div"),l=s("ion-img"),o=N(),f=s("button"),f.innerHTML=u,this.h()},l(k){e=c(k,"DIV",{class:!0,style:!0});var p=m(e);t=c(p,"DIV",{class:!0,style:!0});var d=m(t);l=c(d,"ION-IMG",{src:!0,alt:!0,style:!0}),m(l).forEach(a),o=T(d),f=c(d,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),te(f)!=="svelte-g0qr0o"&&(f.innerHTML=u),d.forEach(a),p.forEach(a),this.h()},h(){Ke(l.src,n=i[8])||b(l,"src",n),b(l,"alt","Evidencia fotográfica"),_(l,"width","100%"),_(l,"height","auto"),j(f,"class","close-button"),_(f,"position","absolute"),_(f,"top","5px"),_(f,"right","5px"),_(f,"background","white"),_(f,"color","#444444d1"),_(f,"border","none"),_(f,"cursor","pointer"),_(f,"padding","2px 2px 0px 6px"),_(f,"border-radius","50%"),_(f,"font-size","20px"),j(t,"class","modal-content"),_(t,"position","relative"),_(t,"background","white"),_(t,"padding","20px"),_(t,"border-radius","8px"),_(t,"max-width","90vw"),_(t,"max-height","90vh"),_(t,"overflow","auto"),j(e,"class","modal-overlay"),_(e,"position","fixed"),_(e,"top","0"),_(e,"left","0"),_(e,"width","100vw"),_(e,"height","100vh"),_(e,"background","rgba(0, 0, 0, 0.8)"),_(e,"display","flex"),_(e,"justify-content","center"),_(e,"align-items","center"),_(e,"z-index","1000")},m(k,p){K(k,e,p),r(e,t),r(t,l),r(t,o),r(t,f),h||(O=[ce(f,"click",i[16]),ce(t,"click",xt(i[17])),ce(e,"click",i[16])],h=!0)},p(k,p){p[0]&256&&!Ke(l.src,n=k[8])&&b(l,"src",n)},d(k){k&&a(e),h=!1,De(O)}}}function go(i){let e,t,l,n,o="Cancelar",f,u,h="AGREGAR GASTO",O,k,p,d="Confirmar",g,E,C,y,B,H,V,U,W,D,L,w,A,S,R,q,M,X,ie='Tipo de pago <ion-text color="danger">(Obligatorio)</ion-text>',re,ae,Ie="Efectivo",Y,se,_e="Tarjeta",ve,he,ue="Transferencia",ge,de,be,ke,Oe,ye,Ne,fe,x,le,Q=`<ion-icon icon="${nn}" slot="start"></ion-icon>
                        Subir Evidencia`,v,z,G,P,J,F,I,Z,$=i[0]&&St(i),ne=i[6]&&Ht(),oe=i[7]&&Pt(i);return{c(){e=s("ion-header"),t=s("ion-toolbar"),l=s("ion-buttons"),n=s("ion-button"),n.textContent=o,f=N(),u=s("ion-title"),u.textContent=h,O=N(),k=s("ion-buttons"),p=s("ion-button"),p.textContent=d,g=N(),E=s("ion-content"),C=s("ion-list"),y=s("ion-item"),B=s("ion-icon"),H=N(),V=s("ion-input"),U=N(),W=s("ion-item"),D=s("ion-icon"),L=N(),w=s("ion-input"),A=N(),S=s("ion-item"),R=s("ion-icon"),q=N(),M=s("ion-select"),X=s("div"),X.innerHTML=ie,re=N(),ae=s("ion-select-option"),ae.textContent=Ie,Y=N(),se=s("ion-select-option"),se.textContent=_e,ve=N(),he=s("ion-select-option"),he.textContent=ue,ge=N(),de=s("ion-item"),be=s("ion-icon"),ke=N(),Oe=s("ion-textarea"),ye=N(),Ne=s("section"),fe=s("label"),x=s("ion-button"),le=s("label"),le.innerHTML=Q,v=N(),z=s("input"),G=N(),$&&$.c(),P=N(),ne&&ne.c(),J=N(),oe&&oe.c(),F=Se(),this.h()},l(ee){e=c(ee,"ION-HEADER",{translucent:!0});var Ee=m(e);t=c(Ee,"ION-TOOLBAR",{});var Ce=m(t);l=c(Ce,"ION-BUTTONS",{slot:!0});var Te=m(l);n=c(Te,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),te(n)!=="svelte-1f8rjcf"&&(n.textContent=o),Te.forEach(a),f=T(Ce),u=c(Ce,"ION-TITLE",{title:!0,"data-svelte-h":!0}),te(u)!=="svelte-efps2s"&&(u.textContent=h),O=T(Ce),k=c(Ce,"ION-BUTTONS",{slot:!0});var we=m(k);p=c(we,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),te(p)!=="svelte-k5zoz0"&&(p.textContent=d),we.forEach(a),Ce.forEach(a),Ee.forEach(a),g=T(ee),E=c(ee,"ION-CONTENT",{fullscreen:!0});var Ve=m(E);C=c(Ve,"ION-LIST",{});var Pe=m(C);y=c(Pe,"ION-ITEM",{});var lt=m(y);B=c(lt,"ION-ICON",{icon:!0,slot:!0}),m(B).forEach(a),H=T(lt),V=c(lt,"ION-INPUT",{label:!0,type:!0,placeholder:!0,value:!0}),m(V).forEach(a),lt.forEach(a),U=T(Pe),W=c(Pe,"ION-ITEM",{});var it=m(W);D=c(it,"ION-ICON",{icon:!0,slot:!0}),m(D).forEach(a),L=T(it),w=c(it,"ION-INPUT",{label:!0,type:!0,value:!0}),m(w).forEach(a),it.forEach(a),A=T(Pe),S=c(Pe,"ION-ITEM",{});var rt=m(S);R=c(rt,"ION-ICON",{icon:!0,slot:!0}),m(R).forEach(a),q=T(rt),M=c(rt,"ION-SELECT",{placeholder:!0,value:!0});var je=m(M);X=c(je,"DIV",{slot:!0,"data-svelte-h":!0}),te(X)!=="svelte-wl764p"&&(X.innerHTML=ie),re=T(je),ae=c(je,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),te(ae)!=="svelte-i9crym"&&(ae.textContent=Ie),Y=T(je),se=c(je,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),te(se)!=="svelte-fx0z11"&&(se.textContent=_e),ve=T(je),he=c(je,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),te(he)!=="svelte-1c24jf2"&&(he.textContent=ue),je.forEach(a),rt.forEach(a),ge=T(Pe),de=c(Pe,"ION-ITEM",{});var at=m(de);be=c(at,"ION-ICON",{icon:!0,slot:!0}),m(be).forEach(a),ke=T(at),Oe=c(at,"ION-TEXTAREA",{label:!0,placeholder:!0}),m(Oe).forEach(a),at.forEach(a),ye=T(Pe),Ne=c(Pe,"SECTION",{});var kt=m(Ne);fe=c(kt,"LABEL",{for:!0,style:!0});var Et=m(fe);x=c(Et,"ION-BUTTON",{fill:!0,size:!0,class:!0,expand:!0});var st=m(x);le=c(st,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),te(le)!=="svelte-1m9yw22"&&(le.innerHTML=Q),v=T(st),z=c(st,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),st.forEach(a),Et.forEach(a),kt.forEach(a),G=T(Pe),$&&$.l(Pe),Pe.forEach(a),Ve.forEach(a),P=T(ee),ne&&ne.l(ee),J=T(ee),oe&&oe.l(ee),F=Se(),this.h()},h(){b(n,"color","medium"),b(l,"slot","start"),b(u,"title",""),b(p,"strong",""),b(k,"slot","end"),b(e,"translucent",""),b(B,"icon",tn),b(B,"slot","start"),b(V,"label","Concepto"),b(V,"type","text"),b(V,"placeholder","Escribe aquí..."),b(V,"value",i[9]?i[9]:""),b(D,"icon",ht),b(D,"slot","start"),b(w,"label","Monto $"),b(w,"type","number"),b(w,"value",i[10]?i[10]:""),b(R,"icon",wn),b(R,"slot","start"),j(X,"slot","label"),b(ae,"value","cash"),b(se,"value","card"),b(he,"value","transfer"),b(M,"placeholder","Tipo de pago"),b(M,"value",i[11]?i[11]:""),b(be,"icon",ht),b(be,"slot","start"),b(Oe,"label","Comentarios"),b(Oe,"placeholder","Escribe aquí..."),j(le,"for","eventEvidence"),_(le,"width","100%"),_(le,"padding","8px"),_(z,"display","none"),j(z,"id","eventEvidence"),j(z,"name","fileToUpload"),j(z,"type","file"),j(z,"accept","image/*"),j(z,"capture","environment"),b(x,"fill","outline"),b(x,"size","small"),b(x,"class","loadEvidence"),b(x,"expand","block"),j(fe,"for","eventEvidence"),_(fe,"display","block"),_(fe,"width","100%"),b(E,"fullscreen","")},m(ee,Ee){K(ee,e,Ee),r(e,t),r(t,l),r(l,n),r(t,f),r(t,u),r(t,O),r(t,k),r(k,p),K(ee,g,Ee),K(ee,E,Ee),r(E,C),r(C,y),r(y,B),r(y,H),r(y,V),i[18](V),r(C,U),r(C,W),r(W,D),r(W,L),r(W,w),i[19](w),r(C,A),r(C,S),r(S,R),r(S,q),r(S,M),r(M,X),r(M,re),r(M,ae),r(M,Y),r(M,se),r(M,ve),r(M,he),i[20](M),r(C,ge),r(C,de),r(de,be),r(de,ke),r(de,Oe),i[21](Oe),r(C,ye),r(C,Ne),r(Ne,fe),r(fe,x),r(x,le),r(x,v),r(x,z),r(C,G),$&&$.m(C,null),K(ee,P,Ee),ne&&ne.m(ee,Ee),K(ee,J,Ee),oe&&oe.m(ee,Ee),K(ee,F,Ee),I||(Z=[ce(n,"click",i[13]),ce(p,"click",i[14]),ce(z,"change",i[12])],I=!0)},p(ee,Ee){ee[0]?$?$.p(ee,Ee):($=St(ee),$.c(),$.m(C,null)):$&&($.d(1),$=null),ee[6]?ne||(ne=Ht(),ne.c(),ne.m(J.parentNode,J)):ne&&(ne.d(1),ne=null),ee[7]?oe?oe.p(ee,Ee):(oe=Pt(ee),oe.c(),oe.m(F.parentNode,F)):oe&&(oe.d(1),oe=null)},i:Le,o:Le,d(ee){ee&&(a(e),a(g),a(E),a(P),a(J),a(F)),i[18](null),i[19](null),i[20](null),i[21](null),$&&$.d(),ne&&ne.d(ee),oe&&oe.d(ee),I=!1,De(Z)}}}function bo(i,e,t){let l=ut,n=document.querySelector("ion-modal"),o=n.componentProps.routeId,f=n.componentProps.ex_concept,u=n.componentProps.ex_amount,h=n.componentProps.ex_type,O=n.componentProps.id_expense,k="",p=new Array,d="",g="",E=0,C="",y="",B=!1,H=new Object,V=!1,U="";et(()=>{H=JSON.parse(localStorage.getItem("userSession"))});const W=async(Y,se)=>{await(await Ge.create({header:Y||"Error",message:se||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},D=async Y=>{t(6,B=!0);const _e=Y.target.files[0],ve=await L(_e);if(ve){var he=new Object;he.fileToUpload=ve,he.id_user_over=H.id_user,he.token=H.token;try{qe(`${l}api/admin/manager/upload_img_driver.php`,function(ue){ue.success?(t(0,k=ue.img),t(1,p=$e(k)),d=ue.img_id):W("Error","No se pudo subir la imagen"),t(6,B=!1)},he)}catch(ue){console.error("Error during file upload:",ue)}finally{t(6,B=!1)}}},L=async Y=>new Promise(se=>{const _e=new Image;_e.src=URL.createObjectURL(Y),_e.onload=()=>{const ve=document.createElement("canvas"),he=ve.getContext("2d"),ue=800,ge=600;let de=_e.width,be=_e.height;de>ue&&(be*=ue/de,de=ue),be>ge&&(de*=ge/be,be=ge),ve.width=de,ve.height=be,he.drawImage(_e,0,0,de,be),ve.toBlob(ke=>{se(ke),URL.revokeObjectURL(_e.src),he.clearRect(0,0,ve.width,ve.height)},"image/jpeg",.7)}}),w=()=>{ot.dismiss()},A=()=>{var Y=new Object;Y.id_route=o,Y.comments=C.value,Y.type=g.value,Y.img=k,Y.img_id=d,Y.amount=E.value,Y.concept=y.value,Y.status="done",Y.id_expense=O||"null",Y.id_user_over=H.id_user,Y.token=H.token,!d||!k||!E.value||!y.value?W("Datos incompletos","Llena los datos requeridos para completar el registro"):qe(`${l}api/admin/expenses/add_expense.php`,function(se){w()},Y)},S=Y=>{t(8,U=Y),t(7,V=!0)},R=()=>{t(7,V=!1),t(8,U="")};function q(Y){$t.call(this,i,Y)}function M(Y){He[Y?"unshift":"push"](()=>{y=Y,t(5,y)})}function X(Y){He[Y?"unshift":"push"](()=>{E=Y,t(3,E)})}function ie(Y){He[Y?"unshift":"push"](()=>{g=Y,t(2,g)})}function re(Y){He[Y?"unshift":"push"](()=>{C=Y,t(4,C)})}return[k,p,g,E,C,y,B,V,U,f,u,h,D,w,A,S,R,q,M,X,ie,re,Y=>S(Y),Y=>removeFile(Y)]}class mt extends Qe{constructor(e){super(),Ze(this,e,bo,go,Ye,{},null,[-1,-1])}}function Bt(i,e,t){const l=i.slice();return l[7]=e[t],l}function ko(i){let e,t="Cargar gasto",l,n;function o(...f){return i[4](i[7],...f)}return{c(){e=s("ion-button"),e.textContent=t,this.h()},l(f){e=c(f,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),te(e)!=="svelte-175aelj"&&(e.textContent=t),this.h()},h(){b(e,"fill","outline"),b(e,"size","small"),b(e,"aria-selected","")},m(f,u){K(f,e,u),l||(n=ce(e,"click",o),l=!0)},p(f,u){i=f},d(f){f&&a(e),l=!1,n()}}}function Eo(i){let e,t="Gasto completado";return{c(){e=s("ion-button"),e.textContent=t,this.h()},l(l){e=c(l,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),te(e)!=="svelte-tlger7"&&(e.textContent=t),this.h()},h(){b(e,"fill","solid"),b(e,"size","small"),b(e,"aria-selected","")},m(l,n){K(l,e,n)},p:Le,d(l){l&&a(e)}}}function Rt(i,e){let t,l,n,o=e[7].concept+"",f,u,h;function O(d,g){return d[7].status=="done"?Eo:ko}let p=O(e)(e);return{key:i,first:null,c(){t=s("ion-item"),l=s("ion-label"),n=s("p"),f=pe(o),u=N(),p.c(),h=N(),this.h()},l(d){t=c(d,"ION-ITEM",{});var g=m(t);l=c(g,"ION-LABEL",{style:!0});var E=m(l);n=c(E,"P",{style:!0});var C=m(n);f=me(C,o),C.forEach(a),E.forEach(a),u=T(g),p.l(g),h=T(g),g.forEach(a),this.h()},h(){_(n,"margin-left","10px"),_(l,"display","flex"),this.first=t},m(d,g){K(d,t,g),r(t,l),r(l,n),r(n,f),r(t,u),p.m(t,null),r(t,h)},p(d,g){e=d,p.p(e,g)},d(d){d&&a(t),p.d()}}}function Io(i){let e,t,l,n,o=`<ion-icon style="font-size: 25px!important;" icon="${Ln}"></ion-icon>`,f,u,h="LISTA DE GASTOS",O,k,p,d=[],g=new Map,E,C,y,B="Cerrar",H,V,U=Re(i[0]);const W=D=>D[7].id_expenses;for(let D=0;D<U.length;D+=1){let L=Bt(i,U,D),w=W(L);g.set(w,d[D]=Rt(w,L))}return{c(){e=s("ion-header"),t=s("ion-toolbar"),l=s("ion-buttons"),n=s("ion-button"),n.innerHTML=o,f=N(),u=s("ion-title"),u.textContent=h,O=N(),k=s("ion-content"),p=s("ion-list");for(let D=0;D<d.length;D+=1)d[D].c();E=N(),C=s("ion-footer"),y=s("ion-button"),y.textContent=B,this.h()},l(D){e=c(D,"ION-HEADER",{translucent:!0});var L=m(e);t=c(L,"ION-TOOLBAR",{});var w=m(t);l=c(w,"ION-BUTTONS",{slot:!0});var A=m(l);n=c(A,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),te(n)!=="svelte-160xz3i"&&(n.innerHTML=o),A.forEach(a),f=T(w),u=c(w,"ION-TITLE",{"data-svelte-h":!0}),te(u)!=="svelte-1phn90x"&&(u.textContent=h),w.forEach(a),L.forEach(a),O=T(D),k=c(D,"ION-CONTENT",{fullscreen:!0});var S=m(k);p=c(S,"ION-LIST",{});var R=m(p);for(let M=0;M<d.length;M+=1)d[M].l(R);R.forEach(a),S.forEach(a),E=T(D),C=c(D,"ION-FOOTER",{});var q=m(C);y=c(q,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),te(y)!=="svelte-zv7v83"&&(y.textContent=B),q.forEach(a),this.h()},h(){b(n,"color","medium"),b(l,"slot","end"),b(e,"translucent",""),b(k,"fullscreen",""),b(y,"fill","outline"),b(y,"color","tertiary"),b(y,"strong",""),_(y,"width","99%"),_(y,"height","auto")},m(D,L){K(D,e,L),r(e,t),r(t,l),r(l,n),r(t,f),r(t,u),K(D,O,L),K(D,k,L),r(k,p);for(let w=0;w<d.length;w+=1)d[w]&&d[w].m(p,null);K(D,E,L),K(D,C,L),r(C,y),H||(V=[ce(n,"click",i[3]),ce(y,"click",i[1])],H=!0)},p(D,[L]){L&5&&(U=Re(D[0]),d=tt(d,L,W,1,D,U,g,p,nt,Rt,null,Bt))},i:Le,o:Le,d(D){D&&(a(e),a(O),a(k),a(E),a(C));for(let L=0;L<d.length;L+=1)d[L].d();H=!1,De(V)}}}function Oo(i){let e=document.querySelector("ion-modal");e.componentProps.routeId;let t=e.componentProps.expenses;et(()=>{});const l=()=>{ot.dismiss()};function n(u,h,O,k,p){e.componentProps.ex_amount=O,e.componentProps.ex_concept=h,e.componentProps.ex_type=k,e.componentProps.id_expense=p,Fe("modal-expense",mt,{amount:O,concept:h,type:k,id_expense:p}).then(()=>{}),l()}return[t,l,n,u=>{Fe("modal-expense",mt,{routeId:u}).then(h=>{}),l()},(u,h)=>n(h,u.concept,u.amount,u.type,u.id_expenses)]}class No extends Qe{constructor(e){super(),Ze(this,e,Oo,Io,Ye,{})}}const{document:Ut}=Rn;function Vt(i,e,t){const l=i.slice();return l[49]=e[t],l[51]=t,l}function qt(i,e,t){const l=i.slice();return l[49]=e[t],l[51]=t,l}function Ft(i,e,t){const l=i.slice();return l[49]=e[t],l[51]=t,l}function jt(i){let e,t;return e=new Hn({props:{$$slots:{default:[Bo]},$$scope:{ctx:i}}}),{c(){pn(e.$$.fragment)},l(l){mn(e.$$.fragment,l)},m(l,n){vn(e,l,n),t=!0},p(l,n){const o={};n[0]&2043|n[1]&8388608&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(ct(e.$$.fragment,l),t=!0)},o(l){_t(e.$$.fragment,l),t=!1},d(l){gn(e,l)}}}function To(i){let e,t='<div id="g_map" style="width: 100%; height: 100vh;"></div>';return{c(){e=s("ion-content"),e.innerHTML=t},l(l){e=c(l,"ION-CONTENT",{"data-svelte-h":!0}),te(e)!=="svelte-1ydw6i9"&&(e.innerHTML=t)},m(l,n){K(l,e,n)},p:Le,d(l){l&&a(e)}}}function Co(i){let e;function t(o,f){if(o[7].length>0)return wo;if(!o[3])return yo}let l=t(i),n=l&&l(i);return{c(){n&&n.c(),e=Se()},l(o){n&&n.l(o),e=Se()},m(o,f){n&&n.m(o,f),K(o,e,f)},p(o,f){l===(l=t(o))&&n?n.p(o,f):(n&&n.d(1),n=l&&l(o),n&&(n.c(),n.m(e.parentNode,e)))},d(o){o&&a(e),n&&n.d(o)}}}function yo(i){let e,t,l,n='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jala para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',o,f,u,h,O,k,p="0",d,g,E,C,y,B=i[6].origin+"",H,V,U,W="",D,L,w,A=[],S=new Map,R,q,M,X,ie,re=i[5].length+1+"",ae,Ie,Y,se,_e,ve,he=i[6].destination+"",ue,ge,de,be="",ke,Oe,ye,Ne,fe=i[4]&&Gt(i),x=Re(i[5]);const le=Q=>Q[49].id_event;for(let Q=0;Q<x.length;Q+=1){let v=Vt(i,x,Q),z=le(v);S.set(z,A[Q]=Wt(z,v))}return{c(){fe&&fe.c(),e=N(),t=s("ion-content"),l=s("ion-refresher"),l.innerHTML=n,o=N(),f=s("ion-list"),u=s("ion-item"),h=s("ion-avatar"),O=s("div"),k=s("div"),k.textContent=p,g=N(),E=s("ion-label"),C=s("ion-text"),y=s("h3"),H=pe(B),V=N(),U=s("div"),U.innerHTML=W,D=N(),L=s("ion-icon"),w=N();for(let Q=0;Q<A.length;Q+=1)A[Q].c();R=N(),q=s("ion-item"),M=s("ion-avatar"),X=s("div"),ie=s("div"),ae=pe(re),Y=N(),se=s("ion-label"),_e=s("ion-text"),ve=s("h3"),ue=pe(he),ge=N(),de=s("div"),de.innerHTML=be,ke=N(),Oe=s("ion-icon"),this.h()},l(Q){fe&&fe.l(Q),e=T(Q),t=c(Q,"ION-CONTENT",{});var v=m(t);l=c(v,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),te(l)!=="svelte-1srnbs3"&&(l.innerHTML=n),o=T(v),f=c(v,"ION-LIST",{});var z=m(f);u=c(z,"ION-ITEM",{});var G=m(u);h=c(G,"ION-AVATAR",{slot:!0});var P=m(h);O=c(P,"DIV",{class:!0,title:!0,style:!0});var J=m(O);k=c(J,"DIV",{class:!0,"data-svelte-h":!0}),te(k)!=="svelte-3lvlrb"&&(k.textContent=p),J.forEach(a),P.forEach(a),g=T(G),E=c(G,"ION-LABEL",{button:!0});var F=m(E);C=c(F,"ION-TEXT",{color:!0});var I=m(C);y=c(I,"H3",{});var Z=m(y);H=me(Z,B),Z.forEach(a),I.forEach(a),V=T(F),U=c(F,"DIV",{class:!0,"data-svelte-h":!0}),te(U)!=="svelte-gz9kb"&&(U.innerHTML=W),F.forEach(a),D=T(G),L=c(G,"ION-ICON",{icon:!0,slot:!0}),m(L).forEach(a),G.forEach(a),w=T(z);for(let we=0;we<A.length;we+=1)A[we].l(z);R=T(z),q=c(z,"ION-ITEM",{});var $=m(q);M=c($,"ION-AVATAR",{slot:!0});var ne=m(M);X=c(ne,"DIV",{class:!0,title:!0,style:!0});var oe=m(X);ie=c(oe,"DIV",{class:!0});var ee=m(ie);ae=me(ee,re),ee.forEach(a),oe.forEach(a),ne.forEach(a),Y=T($),se=c($,"ION-LABEL",{button:!0});var Ee=m(se);_e=c(Ee,"ION-TEXT",{color:!0});var Ce=m(_e);ve=c(Ce,"H3",{});var Te=m(ve);ue=me(Te,he),Te.forEach(a),Ce.forEach(a),ge=T(Ee),de=c(Ee,"DIV",{class:!0,"data-svelte-h":!0}),te(de)!=="svelte-130ohbs"&&(de.innerHTML=be),Ee.forEach(a),ke=T($),Oe=c($,"ION-ICON",{icon:!0,slot:!0}),m(Oe).forEach(a),$.forEach(a),z.forEach(a),v.forEach(a),this.h()},h(){b(l,"slot","fixed"),j(k,"class","order svelte-egzizz"),j(O,"class","order-wrapper svelte-egzizz"),j(O,"title",d="$"+i[6].origin),_(O,"background-color",i[6].color),_(O,"color",Ae(i[6].color)),b(h,"slot","start"),b(C,"color","#2e2e2e"),j(U,"class","sub svelte-egzizz"),b(E,"button",""),b(L,"icon",Ue),b(L,"slot","end"),j(ie,"class","order svelte-egzizz"),j(X,"class","order-wrapper svelte-egzizz"),j(X,"title",Ie="$"+i[6].destination),_(X,"background-color",i[6].color),_(X,"color",Ae(i[6].color)),b(M,"slot","start"),b(_e,"color","#2e2e2e"),j(de,"class","sub svelte-egzizz"),b(se,"button",""),b(Oe,"icon",Ue),b(Oe,"slot","end")},m(Q,v){fe&&fe.m(Q,v),K(Q,e,v),K(Q,t,v),r(t,l),i[31](l),r(t,o),r(t,f),r(f,u),r(u,h),r(h,O),r(O,k),r(u,g),r(u,E),r(E,C),r(C,y),r(y,H),r(E,V),r(E,U),r(u,D),r(u,L),r(f,w);for(let z=0;z<A.length;z+=1)A[z]&&A[z].m(f,null);r(f,R),r(f,q),r(q,M),r(M,X),r(X,ie),r(ie,ae),r(q,Y),r(q,se),r(se,_e),r(_e,ve),r(ve,ue),r(se,ge),r(se,de),r(q,ke),r(q,Oe),ye||(Ne=[ce(l,"ionRefresh",i[11]),ce(E,"click",i[32]),ce(se,"click",i[34])],ye=!0)},p(Q,v){Q[4]?fe?fe.p(Q,v):(fe=Gt(Q),fe.c(),fe.m(e.parentNode,e)):fe&&(fe.d(1),fe=null),v[0]&64&&d!==(d="$"+Q[6].origin)&&j(O,"title",d),v[0]&64&&_(O,"background-color",Q[6].color),v[0]&64&&_(O,"color",Ae(Q[6].color)),v[0]&64&&B!==(B=Q[6].origin+"")&&ze(H,B),v[0]&664608&&(x=Re(Q[5]),A=tt(A,v,le,1,Q,x,S,f,nt,Wt,R,Vt)),v[0]&32&&re!==(re=Q[5].length+1+"")&&ze(ae,re),v[0]&64&&Ie!==(Ie="$"+Q[6].destination)&&j(X,"title",Ie),v[0]&64&&_(X,"background-color",Q[6].color),v[0]&64&&_(X,"color",Ae(Q[6].color)),v[0]&64&&he!==(he=Q[6].destination+"")&&ze(ue,he)},d(Q){Q&&(a(e),a(t)),fe&&fe.d(Q),i[31](null);for(let v=0;v<A.length;v+=1)A[v].d();ye=!1,De(Ne)}}}function wo(i){let e,t;function l(f,u){return u[0]&144&&(e=null),e==null&&(e=!!(f[7].filter(Uo).every(Vo)&&!f[4])),e?Mo:Ao}let n=l(i,[-1,-1]),o=n(i);return{c(){o.c(),t=Se()},l(f){o.l(f),t=Se()},m(f,u){o.m(f,u),K(f,t,u)},p(f,u){n===(n=l(f,u))&&o?o.p(f,u):(o.d(1),o=n(f),o&&(o.c(),o.m(t.parentNode,t)))},d(f){f&&a(t),o.d(f)}}}function Gt(i){let e=i[15]("",i[1],i[0])+"",t;return{c(){t=pe(e)},l(l){t=me(l,e)},m(l,n){K(l,t,n)},p(l,n){n[0]&3&&e!==(e=l[15]("",l[1],l[0])+"")&&ze(t,e)},d(l){l&&a(t)}}}function Kt(i){let e;return{c(){e=s("span"),this.h()},l(t){e=c(t,"SPAN",{class:!0}),m(e).forEach(a),this.h()},h(){j(e,"class","notes svelte-egzizz")},m(t,l){K(t,e,l)},d(t){t&&a(e)}}}function Lo(i){let e;return{c(){e=s("ion-icon"),this.h()},l(t){e=c(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),m(e).forEach(a),this.h()},h(){b(e,"icon",Ue),b(e,"slot","end"),_(e,"color",Me(i[49].status,i[49].date_service))},m(t,l){K(t,e,l)},p(t,l){l[0]&32&&_(e,"color",Me(t[49].status,t[49].date_service))},d(t){t&&a(e)}}}function zo(i){let e,t=(i[49].tag?i[49].tag:"")+"",l;return{c(){e=s("div"),l=pe(t),this.h()},l(n){e=c(n,"DIV",{class:!0,slot:!0,style:!0});var o=m(e);l=me(o,t),o.forEach(a),this.h()},h(){j(e,"class","stop-tag"),j(e,"slot","end"),_(e,"background-color",Be(i[49].tag_color,.3)),_(e,"border","1px solid "+Be(i[49].tag_color,.4)),_(e,"color",i[49].tag_color),_(e,"font-size","10px"),_(e,"text-align","center"),_(e,"align-content","center"),_(e,"border-radius","20px"),_(e,"white-space","normal"),_(e,"padding","3px 6px"),_(e,"width","auto",1),_(e,"display","inline-block"),_(e,"font-weight","500")},m(n,o){K(n,e,o),r(e,l)},p(n,o){o[0]&32&&t!==(t=(n[49].tag?n[49].tag:"")+"")&&ze(l,t),o[0]&32&&_(e,"background-color",Be(n[49].tag_color,.3)),o[0]&32&&_(e,"border","1px solid "+Be(n[49].tag_color,.4)),o[0]&32&&_(e,"color",n[49].tag_color)},d(n){n&&a(e)}}}function Wt(i,e){let t,l,n,o,f=parseInt(e[49].pos)+1+"",u,h,O,k,p,d,g=e[49].title+"",E,C,y=e[49].support_list&&e[49].support_list.length||e[17](e[49]),B,H,V,U=y&&Kt();function W(){return e[33](e[49])}function D(A,S){return A[49].tag_color&&A[49].tag?zo:Lo}let L=D(e),w=L(e);return{key:i,first:null,c(){t=s("ion-item"),l=s("ion-avatar"),n=s("div"),o=s("div"),u=pe(f),O=N(),k=s("ion-label"),p=s("ion-text"),d=s("h3"),E=pe(g),C=N(),U&&U.c(),B=N(),w.c(),this.h()},l(A){t=c(A,"ION-ITEM",{});var S=m(t);l=c(S,"ION-AVATAR",{slot:!0});var R=m(l);n=c(R,"DIV",{class:!0,title:!0,style:!0});var q=m(n);o=c(q,"DIV",{class:!0});var M=m(o);u=me(M,f),M.forEach(a),q.forEach(a),R.forEach(a),O=T(S),k=c(S,"ION-LABEL",{button:!0});var X=m(k);p=c(X,"ION-TEXT",{color:!0});var ie=m(p);d=c(ie,"H3",{});var re=m(d);E=me(re,g),C=T(re),U&&U.l(re),re.forEach(a),ie.forEach(a),X.forEach(a),B=T(S),w.l(S),S.forEach(a),this.h()},h(){j(o,"class","order svelte-egzizz"),j(n,"class","order-wrapper svelte-egzizz"),j(n,"title",h=Je(e[49].status)),_(n,"background-color",Me(e[49].status,e[49].date_service)),_(n,"color",Ae(Me(e[49].status))),b(l,"slot","start"),b(p,"color","#2e2e2e"),b(k,"button",""),this.first=t},m(A,S){K(A,t,S),r(t,l),r(l,n),r(n,o),r(o,u),r(t,O),r(t,k),r(k,p),r(p,d),r(d,E),r(d,C),U&&U.m(d,null),r(t,B),w.m(t,null),H||(V=ce(k,"click",W),H=!0)},p(A,S){e=A,S[0]&32&&f!==(f=parseInt(e[49].pos)+1+"")&&ze(u,f),S[0]&32&&h!==(h=Je(e[49].status))&&j(n,"title",h),S[0]&32&&_(n,"background-color",Me(e[49].status,e[49].date_service)),S[0]&32&&_(n,"color",Ae(Me(e[49].status))),S[0]&32&&g!==(g=e[49].title+"")&&ze(E,g),S[0]&32&&(y=e[49].support_list&&e[49].support_list.length||e[17](e[49])),y?U||(U=Kt(),U.c(),U.m(d,null)):U&&(U.d(1),U=null),L===(L=D(e))&&w?w.p(e,S):(w.d(1),w=L(e),w&&(w.c(),w.m(t,null)))},d(A){A&&a(t),U&&U.d(),w.d(),H=!1,V()}}}function Ao(i){let e=i[15](i[7],i[1],i[0])+"",t,l,n,o,f='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Pull to refresh" refreshing-spinner="circles" refreshing-text="Refreshing..."></ion-refresher-content>',u,h,O,k,p,d,g="0",E,C,y,B,H,V=i[6].origin+"",U,W,D,L="",w,A,S,R=[],q=new Map,M,X,ie,re,ae,Ie=i[5].length+1+"",Y,se,_e,ve,he,ue,ge=i[6].destination+"",de,be,ke,Oe="",ye,Ne,fe,x,le=Re(i[5]);const Q=v=>v[49].id_event;for(let v=0;v<le.length;v+=1){let z=qt(i,le,v),G=Q(z);q.set(G,R[v]=Jt(G,z))}return{c(){t=pe(e),l=N(),n=s("ion-content"),o=s("ion-refresher"),o.innerHTML=f,u=N(),h=s("ion-list"),O=s("ion-item"),k=s("ion-avatar"),p=s("div"),d=s("div"),d.textContent=g,C=N(),y=s("ion-label"),B=s("ion-text"),H=s("h3"),U=pe(V),W=N(),D=s("div"),D.innerHTML=L,w=N(),A=s("ion-icon"),S=N();for(let v=0;v<R.length;v+=1)R[v].c();M=N(),X=s("ion-item"),ie=s("ion-avatar"),re=s("div"),ae=s("div"),Y=pe(Ie),_e=N(),ve=s("ion-label"),he=s("ion-text"),ue=s("h3"),de=pe(ge),be=N(),ke=s("div"),ke.innerHTML=Oe,ye=N(),Ne=s("ion-icon"),this.h()},l(v){t=me(v,e),l=T(v),n=c(v,"ION-CONTENT",{});var z=m(n);o=c(z,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),te(o)!=="svelte-dvt1s"&&(o.innerHTML=f),u=T(z),h=c(z,"ION-LIST",{});var G=m(h);O=c(G,"ION-ITEM",{});var P=m(O);k=c(P,"ION-AVATAR",{slot:!0});var J=m(k);p=c(J,"DIV",{class:!0,title:!0,style:!0});var F=m(p);d=c(F,"DIV",{class:!0,"data-svelte-h":!0}),te(d)!=="svelte-3lvlrb"&&(d.textContent=g),F.forEach(a),J.forEach(a),C=T(P),y=c(P,"ION-LABEL",{button:!0});var I=m(y);B=c(I,"ION-TEXT",{color:!0});var Z=m(B);H=c(Z,"H3",{});var $=m(H);U=me($,V),$.forEach(a),Z.forEach(a),W=T(I),D=c(I,"DIV",{class:!0,"data-svelte-h":!0}),te(D)!=="svelte-gz9kb"&&(D.innerHTML=L),I.forEach(a),w=T(P),A=c(P,"ION-ICON",{icon:!0,slot:!0}),m(A).forEach(a),P.forEach(a),S=T(G);for(let Ve=0;Ve<R.length;Ve+=1)R[Ve].l(G);M=T(G),X=c(G,"ION-ITEM",{});var ne=m(X);ie=c(ne,"ION-AVATAR",{slot:!0});var oe=m(ie);re=c(oe,"DIV",{class:!0,title:!0,style:!0});var ee=m(re);ae=c(ee,"DIV",{class:!0});var Ee=m(ae);Y=me(Ee,Ie),Ee.forEach(a),ee.forEach(a),oe.forEach(a),_e=T(ne),ve=c(ne,"ION-LABEL",{button:!0});var Ce=m(ve);he=c(Ce,"ION-TEXT",{color:!0});var Te=m(he);ue=c(Te,"H3",{});var we=m(ue);de=me(we,ge),we.forEach(a),Te.forEach(a),be=T(Ce),ke=c(Ce,"DIV",{class:!0,"data-svelte-h":!0}),te(ke)!=="svelte-130ohbs"&&(ke.innerHTML=Oe),Ce.forEach(a),ye=T(ne),Ne=c(ne,"ION-ICON",{icon:!0,slot:!0}),m(Ne).forEach(a),ne.forEach(a),G.forEach(a),z.forEach(a),this.h()},h(){b(o,"slot","fixed"),j(d,"class","order svelte-egzizz"),j(p,"class","order-wrapper svelte-egzizz"),j(p,"title",E="$"+i[6].origin),_(p,"background-color",i[6].color),_(p,"color",Ae(i[6].color)),b(k,"slot","start"),b(B,"color","#2e2e2e"),j(D,"class","sub svelte-egzizz"),b(y,"button",""),b(A,"icon",Ue),b(A,"slot","end"),j(ae,"class","order svelte-egzizz"),j(re,"class","order-wrapper svelte-egzizz"),j(re,"title",se="$"+i[6].destination),_(re,"background-color",i[6].color),_(re,"color",Ae(i[6].color)),b(ie,"slot","start"),b(he,"color","#2e2e2e"),j(ke,"class","sub svelte-egzizz"),b(ve,"button",""),b(Ne,"icon",Ue),b(Ne,"slot","end")},m(v,z){K(v,t,z),K(v,l,z),K(v,n,z),r(n,o),i[27](o),r(n,u),r(n,h),r(h,O),r(O,k),r(k,p),r(p,d),r(O,C),r(O,y),r(y,B),r(B,H),r(H,U),r(y,W),r(y,D),r(O,w),r(O,A),r(h,S);for(let G=0;G<R.length;G+=1)R[G]&&R[G].m(h,null);r(h,M),r(h,X),r(X,ie),r(ie,re),r(re,ae),r(ae,Y),r(X,_e),r(X,ve),r(ve,he),r(he,ue),r(ue,de),r(ve,be),r(ve,ke),r(X,ye),r(X,Ne),fe||(x=[ce(o,"ionRefresh",i[11]),ce(y,"click",i[28]),ce(ve,"click",i[30])],fe=!0)},p(v,z){z[0]&131&&e!==(e=v[15](v[7],v[1],v[0])+"")&&ze(t,e),z[0]&64&&E!==(E="$"+v[6].origin)&&j(p,"title",E),z[0]&64&&_(p,"background-color",v[6].color),z[0]&64&&_(p,"color",Ae(v[6].color)),z[0]&64&&V!==(V=v[6].origin+"")&&ze(U,V),z[0]&664608&&(le=Re(v[5]),R=tt(R,z,Q,1,v,le,q,h,nt,Jt,M,qt)),z[0]&32&&Ie!==(Ie=v[5].length+1+"")&&ze(Y,Ie),z[0]&64&&se!==(se="$"+v[6].destination)&&j(re,"title",se),z[0]&64&&_(re,"background-color",v[6].color),z[0]&64&&_(re,"color",Ae(v[6].color)),z[0]&64&&ge!==(ge=v[6].destination+"")&&ze(de,ge)},d(v){v&&(a(t),a(l),a(n)),i[27](null);for(let z=0;z<R.length;z+=1)R[z].d();fe=!1,De(x)}}}function Mo(i){let e,t,l='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jale para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',n,o,f,u,h,O,k="0",p,d,g,E,C,y=i[6].origin+"",B,H,V,U="",W,D,L,w=[],A=new Map,S,R,q,M,X,ie=i[5].length+1+"",re,ae,Ie,Y,se,_e,ve=i[6].destination+"",he,ue,ge,de="",be,ke,Oe,ye,Ne=Re(i[5]);const fe=x=>x[49].id_event;for(let x=0;x<Ne.length;x+=1){let le=Ft(i,Ne,x),Q=fe(le);A.set(Q,w[x]=Qt(Q,le))}return{c(){e=s("ion-content"),t=s("ion-refresher"),t.innerHTML=l,n=N(),o=s("ion-list"),f=s("ion-item"),u=s("ion-avatar"),h=s("div"),O=s("div"),O.textContent=k,d=N(),g=s("ion-label"),E=s("ion-text"),C=s("h3"),B=pe(y),H=N(),V=s("div"),V.innerHTML=U,W=N(),D=s("ion-icon"),L=N();for(let x=0;x<w.length;x+=1)w[x].c();S=N(),R=s("ion-item"),q=s("ion-avatar"),M=s("div"),X=s("div"),re=pe(ie),Ie=N(),Y=s("ion-label"),se=s("ion-text"),_e=s("h3"),he=pe(ve),ue=N(),ge=s("div"),ge.innerHTML=de,be=N(),ke=s("ion-icon"),this.h()},l(x){e=c(x,"ION-CONTENT",{});var le=m(e);t=c(le,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),te(t)!=="svelte-15ukrgn"&&(t.innerHTML=l),n=T(le),o=c(le,"ION-LIST",{});var Q=m(o);f=c(Q,"ION-ITEM",{});var v=m(f);u=c(v,"ION-AVATAR",{slot:!0});var z=m(u);h=c(z,"DIV",{class:!0,title:!0,style:!0});var G=m(h);O=c(G,"DIV",{class:!0,"data-svelte-h":!0}),te(O)!=="svelte-3lvlrb"&&(O.textContent=k),G.forEach(a),z.forEach(a),d=T(v),g=c(v,"ION-LABEL",{button:!0});var P=m(g);E=c(P,"ION-TEXT",{color:!0});var J=m(E);C=c(J,"H3",{});var F=m(C);B=me(F,y),F.forEach(a),J.forEach(a),H=T(P),V=c(P,"DIV",{class:!0,"data-svelte-h":!0}),te(V)!=="svelte-gz9kb"&&(V.innerHTML=U),P.forEach(a),W=T(v),D=c(v,"ION-ICON",{icon:!0,slot:!0}),m(D).forEach(a),v.forEach(a),L=T(Q);for(let Ce=0;Ce<w.length;Ce+=1)w[Ce].l(Q);S=T(Q),R=c(Q,"ION-ITEM",{});var I=m(R);q=c(I,"ION-AVATAR",{slot:!0});var Z=m(q);M=c(Z,"DIV",{class:!0,title:!0,style:!0});var $=m(M);X=c($,"DIV",{class:!0});var ne=m(X);re=me(ne,ie),ne.forEach(a),$.forEach(a),Z.forEach(a),Ie=T(I),Y=c(I,"ION-LABEL",{button:!0});var oe=m(Y);se=c(oe,"ION-TEXT",{color:!0});var ee=m(se);_e=c(ee,"H3",{});var Ee=m(_e);he=me(Ee,ve),Ee.forEach(a),ee.forEach(a),ue=T(oe),ge=c(oe,"DIV",{class:!0,"data-svelte-h":!0}),te(ge)!=="svelte-130ohbs"&&(ge.innerHTML=de),oe.forEach(a),be=T(I),ke=c(I,"ION-ICON",{icon:!0,slot:!0}),m(ke).forEach(a),I.forEach(a),Q.forEach(a),le.forEach(a),this.h()},h(){b(t,"slot","fixed"),j(O,"class","order svelte-egzizz"),j(h,"class","order-wrapper svelte-egzizz"),j(h,"title",p="$"+i[6].origin),_(h,"background-color",i[6].color),_(h,"color",Ae(i[6].color)),b(u,"slot","start"),b(E,"color","#2e2e2e"),j(V,"class","sub svelte-egzizz"),b(g,"button",""),b(D,"icon",Ue),b(D,"slot","end"),j(X,"class","order svelte-egzizz"),j(M,"class","order-wrapper svelte-egzizz"),j(M,"title",ae="$"+i[6].destination),_(M,"background-color",i[6].color),_(M,"color",Ae(i[6].color)),b(q,"slot","start"),b(se,"color","#2e2e2e"),j(ge,"class","sub svelte-egzizz"),b(Y,"button",""),b(ke,"icon",Ue),b(ke,"slot","end")},m(x,le){K(x,e,le),r(e,t),i[23](t),r(e,n),r(e,o),r(o,f),r(f,u),r(u,h),r(h,O),r(f,d),r(f,g),r(g,E),r(E,C),r(C,B),r(g,H),r(g,V),r(f,W),r(f,D),r(o,L);for(let Q=0;Q<w.length;Q+=1)w[Q]&&w[Q].m(o,null);r(o,S),r(o,R),r(R,q),r(q,M),r(M,X),r(X,re),r(R,Ie),r(R,Y),r(Y,se),r(se,_e),r(_e,he),r(Y,ue),r(Y,ge),r(R,be),r(R,ke),Oe||(ye=[ce(t,"ionRefresh",i[11]),ce(g,"click",i[24]),ce(Y,"click",i[26])],Oe=!0)},p(x,le){le[0]&64&&p!==(p="$"+x[6].origin)&&j(h,"title",p),le[0]&64&&_(h,"background-color",x[6].color),le[0]&64&&_(h,"color",Ae(x[6].color)),le[0]&64&&y!==(y=x[6].origin+"")&&ze(B,y),le[0]&664608&&(Ne=Re(x[5]),w=tt(w,le,fe,1,x,Ne,A,o,nt,Qt,S,Ft)),le[0]&32&&ie!==(ie=x[5].length+1+"")&&ze(re,ie),le[0]&64&&ae!==(ae="$"+x[6].destination)&&j(M,"title",ae),le[0]&64&&_(M,"background-color",x[6].color),le[0]&64&&_(M,"color",Ae(x[6].color)),le[0]&64&&ve!==(ve=x[6].destination+"")&&ze(he,ve)},d(x){x&&a(e),i[23](null);for(let le=0;le<w.length;le+=1)w[le].d();Oe=!1,De(ye)}}}function Xt(i){let e;return{c(){e=s("span"),this.h()},l(t){e=c(t,"SPAN",{class:!0}),m(e).forEach(a),this.h()},h(){j(e,"class","notes svelte-egzizz")},m(t,l){K(t,e,l)},d(t){t&&a(e)}}}function So(i){let e;return{c(){e=s("ion-icon"),this.h()},l(t){e=c(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),m(e).forEach(a),this.h()},h(){b(e,"icon",Ue),b(e,"slot","end"),_(e,"color",Me(i[49].status,i[49].date_service))},m(t,l){K(t,e,l)},p(t,l){l[0]&32&&_(e,"color",Me(t[49].status,t[49].date_service))},d(t){t&&a(e)}}}function Do(i){let e,t=(i[49].tag?i[49].tag:"")+"",l;return{c(){e=s("div"),l=pe(t),this.h()},l(n){e=c(n,"DIV",{class:!0,slot:!0,style:!0});var o=m(e);l=me(o,t),o.forEach(a),this.h()},h(){j(e,"class","stop-tag"),j(e,"slot","end"),_(e,"background-color",Be(i[49].tag_color,.3)),_(e,"border","1px solid "+Be(i[49].tag_color,.4)),_(e,"color",i[49].tag_color),_(e,"font-size","10px"),_(e,"text-align","center"),_(e,"align-content","center"),_(e,"border-radius","20px"),_(e,"white-space","normal"),_(e,"padding","3px 6px"),_(e,"width","auto",1),_(e,"display","inline-block"),_(e,"font-weight","500")},m(n,o){K(n,e,o),r(e,l)},p(n,o){o[0]&32&&t!==(t=(n[49].tag?n[49].tag:"")+"")&&ze(l,t),o[0]&32&&_(e,"background-color",Be(n[49].tag_color,.3)),o[0]&32&&_(e,"border","1px solid "+Be(n[49].tag_color,.4)),o[0]&32&&_(e,"color",n[49].tag_color)},d(n){n&&a(e)}}}function Jt(i,e){let t,l,n,o,f=parseInt(e[49].pos)+1+"",u,h,O,k,p,d,g=e[49].title+"",E,C,y=e[49].support_list&&e[49].support_list.length||e[17](e[49]),B,H,V="",U,W,D,L=y&&Xt();function w(){return e[29](e[49])}function A(q,M){return q[49].tag_color&&q[49].tag?Do:So}let S=A(e),R=S(e);return{key:i,first:null,c(){t=s("ion-item"),l=s("ion-avatar"),n=s("div"),o=s("div"),u=pe(f),O=N(),k=s("ion-label"),p=s("ion-text"),d=s("h3"),E=pe(g),C=N(),L&&L.c(),B=N(),H=s("div"),H.innerHTML=V,U=N(),R.c(),this.h()},l(q){t=c(q,"ION-ITEM",{});var M=m(t);l=c(M,"ION-AVATAR",{slot:!0});var X=m(l);n=c(X,"DIV",{class:!0,title:!0,style:!0});var ie=m(n);o=c(ie,"DIV",{class:!0});var re=m(o);u=me(re,f),re.forEach(a),ie.forEach(a),X.forEach(a),O=T(M),k=c(M,"ION-LABEL",{button:!0});var ae=m(k);p=c(ae,"ION-TEXT",{color:!0});var Ie=m(p);d=c(Ie,"H3",{});var Y=m(d);E=me(Y,g),C=T(Y),L&&L.l(Y),Y.forEach(a),Ie.forEach(a),B=T(ae),H=c(ae,"DIV",{class:!0,"data-svelte-h":!0}),te(H)!=="svelte-qaecoo"&&(H.innerHTML=V),ae.forEach(a),U=T(M),R.l(M),M.forEach(a),this.h()},h(){j(o,"class","order svelte-egzizz"),j(n,"class","order-wrapper svelte-egzizz"),j(n,"title",h=Je(e[49].status)),_(n,"background-color",Me(e[49].status,e[49].date_service)),_(n,"color",Ae(Me(e[49].status))),b(l,"slot","start"),b(p,"color","#2e2e2e"),j(H,"class","sub svelte-egzizz"),b(k,"button",""),this.first=t},m(q,M){K(q,t,M),r(t,l),r(l,n),r(n,o),r(o,u),r(t,O),r(t,k),r(k,p),r(p,d),r(d,E),r(d,C),L&&L.m(d,null),r(k,B),r(k,H),r(t,U),R.m(t,null),W||(D=ce(k,"click",w),W=!0)},p(q,M){e=q,M[0]&32&&f!==(f=parseInt(e[49].pos)+1+"")&&ze(u,f),M[0]&32&&h!==(h=Je(e[49].status))&&j(n,"title",h),M[0]&32&&_(n,"background-color",Me(e[49].status,e[49].date_service)),M[0]&32&&_(n,"color",Ae(Me(e[49].status))),M[0]&32&&g!==(g=e[49].title+"")&&ze(E,g),M[0]&32&&(y=e[49].support_list&&e[49].support_list.length||e[17](e[49])),y?L||(L=Xt(),L.c(),L.m(d,null)):L&&(L.d(1),L=null),S===(S=A(e))&&R?R.p(e,M):(R.d(1),R=S(e),R&&(R.c(),R.m(t,null)))},d(q){q&&a(t),L&&L.d(),R.d(),W=!1,D()}}}function Yt(i){let e;return{c(){e=s("span"),this.h()},l(t){e=c(t,"SPAN",{class:!0}),m(e).forEach(a),this.h()},h(){j(e,"class","notes svelte-egzizz")},m(t,l){K(t,e,l)},d(t){t&&a(e)}}}function Ho(i){let e;return{c(){e=s("ion-icon"),this.h()},l(t){e=c(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),m(e).forEach(a),this.h()},h(){b(e,"icon",Ue),b(e,"slot","end"),_(e,"color",Me(i[49].status,i[49].date_service))},m(t,l){K(t,e,l)},p(t,l){l[0]&32&&_(e,"color",Me(t[49].status,t[49].date_service))},d(t){t&&a(e)}}}function Po(i){let e,t=(i[49].tag?i[49].tag:"")+"",l;return{c(){e=s("div"),l=pe(t),this.h()},l(n){e=c(n,"DIV",{class:!0,slot:!0,style:!0});var o=m(e);l=me(o,t),o.forEach(a),this.h()},h(){j(e,"class","stop-tag"),j(e,"slot","end"),_(e,"background-color",Be(i[49].tag_color,.3)),_(e,"border","1px solid "+Be(i[49].tag_color,.4)),_(e,"color",i[49].tag_color),_(e,"font-size","10px"),_(e,"text-align","center"),_(e,"align-content","center"),_(e,"border-radius","20px"),_(e,"white-space","normal"),_(e,"padding","3px 6px"),_(e,"width","auto",1),_(e,"display","inline-block"),_(e,"font-weight","500")},m(n,o){K(n,e,o),r(e,l)},p(n,o){o[0]&32&&t!==(t=(n[49].tag?n[49].tag:"")+"")&&ze(l,t),o[0]&32&&_(e,"background-color",Be(n[49].tag_color,.3)),o[0]&32&&_(e,"border","1px solid "+Be(n[49].tag_color,.4)),o[0]&32&&_(e,"color",n[49].tag_color)},d(n){n&&a(e)}}}function Qt(i,e){let t,l,n,o,f=parseInt(e[49].pos)+1+"",u,h,O,k,p,d,g=e[49].title+"",E,C,y=e[49].support_list&&e[49].support_list.length||e[17](e[49]),B,H,V="",U,W,D,L=y&&Yt();function w(){return e[25](e[49])}function A(q,M){return q[49].tag_color&&q[49].tag?Po:Ho}let S=A(e),R=S(e);return{key:i,first:null,c(){t=s("ion-item"),l=s("ion-avatar"),n=s("div"),o=s("div"),u=pe(f),O=N(),k=s("ion-label"),p=s("ion-text"),d=s("h3"),E=pe(g),C=N(),L&&L.c(),B=N(),H=s("div"),H.innerHTML=V,U=N(),R.c(),this.h()},l(q){t=c(q,"ION-ITEM",{});var M=m(t);l=c(M,"ION-AVATAR",{slot:!0});var X=m(l);n=c(X,"DIV",{class:!0,title:!0,style:!0});var ie=m(n);o=c(ie,"DIV",{class:!0});var re=m(o);u=me(re,f),re.forEach(a),ie.forEach(a),X.forEach(a),O=T(M),k=c(M,"ION-LABEL",{button:!0});var ae=m(k);p=c(ae,"ION-TEXT",{color:!0});var Ie=m(p);d=c(Ie,"H3",{});var Y=m(d);E=me(Y,g),C=T(Y),L&&L.l(Y),Y.forEach(a),Ie.forEach(a),B=T(ae),H=c(ae,"DIV",{class:!0,"data-svelte-h":!0}),te(H)!=="svelte-qaecoo"&&(H.innerHTML=V),ae.forEach(a),U=T(M),R.l(M),M.forEach(a),this.h()},h(){j(o,"class","order svelte-egzizz"),j(n,"class","order-wrapper svelte-egzizz"),j(n,"title",h=Je(e[49].status)),_(n,"background-color",Me(e[49].status,e[49].date_service)),_(n,"color",Ae(Me(e[49].status))),b(l,"slot","start"),b(p,"color","#2e2e2e"),j(H,"class","sub svelte-egzizz"),b(k,"button",""),this.first=t},m(q,M){K(q,t,M),r(t,l),r(l,n),r(n,o),r(o,u),r(t,O),r(t,k),r(k,p),r(p,d),r(d,E),r(d,C),L&&L.m(d,null),r(k,B),r(k,H),r(t,U),R.m(t,null),W||(D=ce(k,"click",w),W=!0)},p(q,M){e=q,M[0]&32&&f!==(f=parseInt(e[49].pos)+1+"")&&ze(u,f),M[0]&32&&h!==(h=Je(e[49].status))&&j(n,"title",h),M[0]&32&&_(n,"background-color",Me(e[49].status,e[49].date_service)),M[0]&32&&_(n,"color",Ae(Me(e[49].status))),M[0]&32&&g!==(g=e[49].title+"")&&ze(E,g),M[0]&32&&(y=e[49].support_list&&e[49].support_list.length||e[17](e[49])),y?L||(L=Yt(),L.c(),L.m(d,null)):L&&(L.d(1),L=null),S===(S=A(e))&&R?R.p(e,M):(R.d(1),R=S(e),R&&(R.c(),R.m(t,null)))},d(q){q&&a(t),L&&L.d(),R.d(),W=!1,D()}}}function Bo(i){let e,t,l,n,o=`<ion-icon icon="${zn}"></ion-icon>`,f,u,h,O=`<ion-icon icon="${An}"></ion-icon>`,k,p,d=(i[6].name?i[6].name.toUpperCase():"")+"",g,E,C,y='<ion-segment-button value="list"><ion-label>Paradas</ion-label></ion-segment-button> <ion-segment-button value="map"><ion-label>Mapa</ion-label></ion-segment-button>',B,H,V,U;function W(w,A){if(w[9]==="list")return Co;if(w[9]==="map")return To}let D=W(i),L=D&&D(i);return{c(){e=s("ion-header"),t=s("ion-toolbar"),l=s("ion-buttons"),n=s("ion-button"),n.innerHTML=o,f=N(),u=s("ion-buttons"),h=s("ion-button"),h.innerHTML=O,k=N(),p=s("ion-title"),g=pe(d),E=N(),C=s("ion-segment"),C.innerHTML=y,B=N(),L&&L.c(),H=Se(),this.h()},l(w){e=c(w,"ION-HEADER",{translucent:!0});var A=m(e);t=c(A,"ION-TOOLBAR",{});var S=m(t);l=c(S,"ION-BUTTONS",{slot:!0});var R=m(l);n=c(R,"ION-BUTTON",{title:!0,alt:!0,"data-svelte-h":!0}),te(n)!=="svelte-7ppz3r"&&(n.innerHTML=o),R.forEach(a),f=T(S),u=c(S,"ION-BUTTONS",{slot:!0});var q=m(u);h=c(q,"ION-BUTTON",{"data-svelte-h":!0}),te(h)!=="svelte-nf50hj"&&(h.innerHTML=O),q.forEach(a),k=T(S),p=c(S,"ION-TITLE",{});var M=m(p);g=me(M,d),M.forEach(a),S.forEach(a),E=T(A),C=c(A,"ION-SEGMENT",{value:!0,"data-svelte-h":!0}),te(C)!=="svelte-lue4c9"&&(C.innerHTML=y),A.forEach(a),B=T(w),L&&L.l(w),H=Se(),this.h()},h(){b(n,"title","Atrás"),b(n,"alt","Atrás"),b(l,"slot","start"),b(u,"slot","end"),b(C,"value","list"),b(e,"translucent","")},m(w,A){K(w,e,A),r(e,t),r(t,l),r(l,n),r(t,f),r(t,u),r(u,h),r(t,k),r(t,p),r(p,g),r(e,E),r(e,C),K(w,B,A),L&&L.m(w,A),K(w,H,A),V||(U=[ce(n,"click",i[18]),ce(h,"click",i[21]),ce(C,"ionChange",i[22])],V=!0)},p(w,A){A[0]&64&&d!==(d=(w[6].name?w[6].name.toUpperCase():"")+"")&&ze(g,d),D===(D=W(w))&&L?L.p(w,A):(L&&L.d(1),L=D&&D(w),L&&(L.c(),L.m(H.parentNode,H)))},d(w){w&&(a(e),a(B),a(H)),L&&L.d(w),V=!1,De(U)}}}function Ro(i){let e,t,l,n=i[2]&&jt(i);return{c(){e=N(),n&&n.c(),t=Se(),this.h()},l(o){fn("svelte-kn0kph",Ut.head).forEach(a),e=T(o),n&&n.l(o),t=Se(),this.h()},h(){Ut.title="Rutaflow - Detalles de ruta"},m(o,f){K(o,e,f),n&&n.m(o,f),K(o,t,f),l=!0},p(o,f){o[2]?n?(n.p(o,f),f[0]&4&&ct(n,1)):(n=jt(o),n.c(),ct(n,1),n.m(t.parentNode,t)):n&&(bn(),_t(n,1,1,()=>{n=null}),hn())},i(o){l||(ct(n),l=!0)},o(o){_t(n),l=!1},d(o){o&&(a(e),a(t)),n&&n.d(o)}}}function Me(i,e=""){let t="#ffffff";return i==="pending"&&!e?t="#f2e300":i=="pending"&&e?t="#F6A833":i==="completed"&&(t="#44d900"),t}function Je(i){let e="";return i=="pending"?e="Pendiente":i=="completed"&&(e="Completado"),e}function Ae(i){i.slice(0,1)==="#"&&(i=i.slice(1)),i.length===3&&(i=i.split("").map(function(o){return o+o}).join(""));const e=parseInt(i.substr(0,2),16),t=parseInt(i.substr(2,2),16),l=parseInt(i.substr(4,2),16);return(e*299+t*587+l*114)/1e3>=128?"#414040":"#fff"}function dt(i,e){for(let t=0;t<e.length;t++)if(e[t].alias===i)return e[t].val;return""}const Uo=i=>i.mandatory==="1",Vo=i=>i.img;function qo(i,e,t){let l;dn(i,Mn,v=>t(20,l=v));var n=this&&this.__awaiter||function(v,z,G,P){function J(F){return F instanceof G?F:new G(function(I){I(F)})}return new(G||(G=Promise))(function(F,I){function Z(oe){try{ne(P.next(oe))}catch(ee){I(ee)}}function $(oe){try{ne(P.throw(oe))}catch(ee){I(ee)}}function ne(oe){oe.done?F(oe.value):J(oe.value).then(Z,$)}ne((P=P.apply(v,z||[])).next())})};let{routeId:o}=e,{driverId:f}=e,u=ut,h=new Object,O=!0,k=!1,p=[],d={},g=[],E=[],C,y=!1,B="list",H,V="",U="",W="0",D=new Object;const L=()=>n(void 0,void 0,void 0,function*(){yield S(o),C.complete()});et(()=>n(void 0,void 0,void 0,function*(){_e(),yield S(o)}));function w(v){return n(this,void 0,void 0,function*(){if(t(9,B=v),B==="map"){yield _n(),H=document.getElementById("g_map");const z=new google.maps.Map(H,{zoom:8,center:{lat:20.6745683,lng:-103.3986104},mapId:"4504f8b37365c3d0"}),G=new google.maps.LatLngBounds,{AdvancedMarkerElement:P,PinElement:J}=yield google.maps.importLibrary("marker");navigator.geolocation?navigator.geolocation.getCurrentPosition(function(F){const I=new google.maps.LatLng(F.coords.latitude,F.coords.longitude);new google.maps.Marker({position:I,map:z,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"#0062ff",fillOpacity:1,scale:6,strokeColor:"#ffffff",strokeWeight:2}}),new google.maps.Circle({strokeColor:"#00BFFF",strokeOpacity:.5,strokeWeight:1,fillColor:"#00BFFF",fillOpacity:.2,map:z,center:I,radius:F.coords.accuracy}),G.extend(I)},function(F){console.error("Error retrieving location:",F)}):console.error("Geolocation not supported by this browser."),d.lat1===d.lat2&&d.lon1===d.lon2?A(G,z,{lat:d.lat2,lon:d.lon2,color:d.color,title:d.destination},{type:"icon",iconClass:"icon-home",title:"Origen/Destino",glyph:`0,${String(p.length+1)}`}):(A(G,z,{lat:d.lat1,lon:d.lon1,color:d.color,title:d.origin},{type:"icon",iconClass:"icon-home",title:"Origen",glyph:"0"}),A(G,z,{lat:d.lat2,lon:d.lon2,color:d.color,title:d.destination},{type:"icon",iconClass:"icon-flag",title:"Destino",glyph:String(p.length+1)})),p.forEach((F,I)=>{const Z=parseFloat(F.lat),$=parseFloat(F.lon),ne=new google.maps.LatLng(Z,$),oe=new google.maps.Marker({position:{lat:Z,lng:$},map:z,title:F.title}),ee=new J({background:Me(F.status,F.date_service),borderColor:"#000",glyphColor:"#000",glyph:(parseInt(F.pos)+1).toString()});new P({map:z,position:ne,content:ee.element,title:"Parada "+(parseInt(F.pos)+1).toString()+": "+F.title}).addListener("click",function(Ce){q(F,!1)}),G.extend(oe.getPosition())}),z.fitBounds(G)}})}function A(v,z,G,P){return n(this,void 0,void 0,function*(){let J;const F=parseFloat(G.lat),I=parseFloat(G.lon),Z=new google.maps.LatLng(F,I),{AdvancedMarkerElement:$,PinElement:ne}=yield google.maps.importLibrary("marker");P.type=="icon"?(J=document.createElement("i"),J.className=`${P.iconClass} icon`,J.style.fontSize="14px",J.style.color=Ae(G.color),J.style.fontWeight="600"):P.type=="text";const oe=new google.maps.Marker({position:{lat:F,lng:I},map:z,title:`${P.title}. ${G.title}`}),ee=new ne({background:G.color,borderColor:"#000",glyphColor:Ae(G.color),glyph:P.glyph});return new $({map:z,position:Z,content:ee.element,title:P.title+": "+G.title}).addListener("click",function(Ce){M(d,P.title=="Destino"||P.title=="Origen/Destino")}),oe})}function S(v){return n(this,void 0,void 0,function*(){let z=new FormData;z.append("id_route",v),z=se(z),z.append("id_enterprise",h.id_enterprise);try{const P=yield(yield fetch(`${u}api/admin/report/seguimiento_list.php`,{method:"POST",body:z})).json();t(6,d=P.data.seguimiento_list[0]),t(5,p=P.data.event_list),t(7,g=P.data.checklist),E=P.data.expenses,d&&t(4,k=d.km_inicial=="0"&&d.gas_inicial=="0"),t(3,O=!1)}catch(G){t(3,O=!1),console.error("Error fetching data:",G)}})}const R=v=>new Promise((z,G)=>{let P=new FormData;P.append("id_route",v.id_route),P.append("id_event",v.id_event),P=se(P),fetch(`${u}api/admin/evidence/evidence_by_event.php`,{method:"POST",body:P}).then(J=>J.json()).then(J=>{z(J.data.event_evidence[0])}).catch(J=>{console.error("Error fetching data:",J),G(J)})}),q=(v,z)=>{R(v).then(G=>{v.stopsApproval=V,v.smsActive=U,G&&(v.img=G.img,v.driver_comments=G.driver_comments,v.comments=G.comments),Fe("modal-delivery-info",At,{delivery:v,isLast:z}).then(P=>{}).finally(()=>{S(o)})})},M=(v,z)=>{var G=new Object;z?G={title:v.destination,line1:v.dest_address}:G={title:v.origin,line1:v.origin_address},G.enterprise_name=v.enterprise_name,G.client_name=v.client_name,G.client_phone=v.tel,G.id_route=v.id_route,G.stopsApproval=V,G.smsActive=U;var P=!0;Fe("modal-delivery-info",At,{delivery:G,isLast:z,flag:P})},X=(v,z,G)=>{var P=!1;return y||(y=!0,Fe("modal-checklist",sn,{checklist:v,driverId:z,routeId:G,isLast:P}).then(J=>{y=!1}),ae(G,"checklist")),""},ie=v=>n(void 0,void 0,void 0,function*(){return yield S(v),E.length>0?Fe("modal-expense-detail",No,{routeId:v,expenses:E}).then(z=>{}):Fe("modal-expense",mt,{routeId:v}).then(z=>{}),""}),re=v=>{if(v.tracking_type=="subscription"){if(v.subscriber_info&&v.payment_type==="cash"&&new Date(v.subscriber_info.payment_next)<new Date)return!0}else if(v.tracking_type=="ecommerce"&&Number(v.payment_pending)>0)return!0;return!1};function ae(v,z){let G=new FormData;return G.append("id_route",v),G.append("status",z),G=se(G),fetch(`${u}api/admin/route/change_status.php`,{method:"POST",body:G}).then(P=>P.json()).then(P=>{}).catch(P=>{console.error("Error fetching data:",P)}),""}const Ie=()=>{h.type=="super"||h.type=="admin"?We("/drivers/me"):h.id_driver&&We(`/drivers/${h.id_driver}`)},Y=(v,z)=>n(void 0,void 0,void 0,function*(){yield(yield Ge.create({header:v||"Error",message:z||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()});function se(v){return v.append("token",h.token),v.append("id_user_over",h.id_user),v}const _e=()=>n(void 0,void 0,void 0,function*(){if(h.id_enterprise){let v=new FormData;v.append("id_enterprise",h.id_enterprise),v=se(v);try{const z=yield fetch(`${u}api/admin/enterprise/enterprise_settings.php`,{method:"POST",body:v});z.ok?(D=(yield z.json()).nodos,V=dt("stops_wait_approval",D),U=dt("sms_active",D),t(10,W=dt("stops_order_restriction",D))):console.error("File upload failed:",z.statusText)}catch(z){console.error("Error during file upload:",z)}}}),ve=()=>ie(o),he=v=>w(v.detail.value);function ue(v){He[v?"unshift":"push"](()=>{C=v,t(8,C)})}const ge=()=>{M(d,!1)},de=v=>{const z=p.findIndex(I=>I.id_event===v.id_event),G=z===0,P=z>0?p[z-1]:null,J=G||P&&P.img!==null,F=v.img!==null&&v.img!=="";J||G&&!F||W=="1"?q(v,!1):Y("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},be=()=>{M(d,!0)};function ke(v){He[v?"unshift":"push"](()=>{C=v,t(8,C)})}const Oe=()=>{M(d,!1)},ye=v=>{const z=p.findIndex(I=>I.id_event===v.id_event),G=z===0,P=z>0?p[z-1]:null,J=G||P&&P.img!==null,F=v.img!==null&&v.img!=="";J||G&&!F||W=="1"?q(v,!1):Y("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},Ne=()=>{M(d,!0)};function fe(v){He[v?"unshift":"push"](()=>{C=v,t(8,C)})}const x=()=>{M(d,!1)},le=v=>{const z=p.findIndex(I=>I.id_event===v.id_event),G=z===0,P=z>0?p[z-1]:null,J=G||P&&P.img!==null,F=v.img!==null&&v.img!=="";J||G&&!F||W=="1"?q(v,!1):Y("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},Q=()=>{M(d,!0)};return i.$$set=v=>{"routeId"in v&&t(0,o=v.routeId),"driverId"in v&&t(1,f=v.driverId)},i.$$.update=()=>{i.$$.dirty[0]&1048581&&(t(0,{routeId:o,driverId:f}=l.params,o,(t(1,f),t(20,l),t(2,h),t(0,o))),t(2,h=JSON.parse(localStorage.getItem("userSession"))),h?h.id_user&&(h.type=="admin"||h.type=="super")?(S(o),We(`/drivers/me/routes/${o}`)):h.id_user&&h.id_driver&&(S(o),We(`/drivers/${h.id_driver}/routes/${o}`)):We("/"))},[o,f,h,O,k,p,d,g,C,B,W,L,w,q,M,X,ie,re,Ie,Y,l,ve,he,ue,ge,de,be,ke,Oe,ye,Ne,fe,x,le,Q]}class Yo extends Qe{constructor(e){super(),Ze(this,e,qo,Ro,Ye,{routeId:0,driverId:1},null,[-1,-1])}}export{Yo as component};
