import{s as Ue,n as _e,r as Fe,b as pt,l as et,d as Ne,w as Et,o as It}from"../chunks/index.CP94t5tW.js";import{S as ze,i as Ve,e as f,s as D,q as X,c as _,r as b,g as K,f as s,k as A,u as G,v as N,b as U,A as z,d as P,w as i,x as Z,h as se,F as kt,G as Ot,y as ie,H as Nt,j as Tt,t as Ce,a as Re,l as wt,m as yt,n as Ct,o as Lt,p as Dt,z as At}from"../chunks/index.BB8175xn.js";import{a as St,c as Mt,b as Ht,p as mt,i as Bt,f as Pt,g as Rt,s as je,h as ke,e as pe,u as Le,d as De,j as qt}from"../chunks/index.Bw90U4S3.js";import{g as ge}from"../chunks/entry.P3y4B2kX.js";import{a as vt,m as Ut,I as Ft}from"../chunks/IonPage.bGG8reFV.js";import"../chunks/index-48209844.IIRtDZyg.js";import{q as zt,t as Vt}from"../chunks/ion-modal.CsJaVgKZ.js";function jt(r){let e,t,o,n,l,d="Domicilio 2",p,g,k=r[2].line2+"",v,m,c;return{c(){e=f("ion-item"),t=f("ion-icon"),o=D(),n=f("ion-label"),l=f("p"),l.textContent=d,p=D(),g=f("h2"),v=X(k),m=D(),c=f("ion-icon"),this.h()},l(h){e=_(h,"ION-ITEM",{href:!0});var I=b(e);t=_(I,"ION-ICON",{icon:!0,slot:!0}),b(t).forEach(s),o=A(I),n=_(I,"ION-LABEL",{class:!0});var a=b(n);l=_(a,"P",{"data-svelte-h":!0}),K(l)!=="svelte-1qy148r"&&(l.textContent=d),p=A(a),g=_(a,"H2",{});var u=b(g);v=G(u,k),u.forEach(s),a.forEach(s),m=A(I),c=_(I,"ION-ICON",{icon:!0,slot:!0}),b(c).forEach(s),I.forEach(s),this.h()},h(){N(t,"icon",je),N(t,"slot","start"),N(n,"class","ion-text-wrap"),N(c,"icon",ke),N(c,"slot","end"),N(e,"href","https://www.google.com/maps/searhc/?api=1&query="+r[2].line2)},m(h,I){P(h,e,I),i(e,t),i(e,o),i(e,n),i(n,l),i(n,p),i(n,g),i(g,v),i(e,m),i(e,c)},p:_e,d(h){h&&s(e)}}}function Xt(r){let e,t,o,n,l,d="Domicilio 1",p,g,k=r[2].line1+"",v,m,c,h,I=r[2].line2&&r[2].line2.trim().length,a,u=I&&Gt(r);return{c(){e=f("ion-item"),t=f("ion-icon"),o=D(),n=f("ion-label"),l=f("p"),l.textContent=d,p=D(),g=f("h2"),v=X(k),m=D(),c=f("ion-icon"),h=D(),u&&u.c(),a=se(),this.h()},l(T){e=_(T,"ION-ITEM",{href:!0});var y=b(e);t=_(y,"ION-ICON",{icon:!0,slot:!0}),b(t).forEach(s),o=A(y),n=_(y,"ION-LABEL",{class:!0});var q=b(n);l=_(q,"P",{"data-svelte-h":!0}),K(l)!=="svelte-1ehcrdm"&&(l.textContent=d),p=A(q),g=_(q,"H2",{});var B=b(g);v=G(B,k),B.forEach(s),q.forEach(s),m=A(y),c=_(y,"ION-ICON",{icon:!0,slot:!0}),b(c).forEach(s),y.forEach(s),h=A(T),u&&u.l(T),a=se(),this.h()},h(){N(t,"icon",je),N(t,"slot","start"),N(n,"class","ion-text-wrap"),N(c,"icon",ke),N(c,"slot","end"),N(e,"href","https://www.google.com/maps/search/?api=1&query="+r[2].line1)},m(T,y){P(T,e,y),i(e,t),i(e,o),i(e,n),i(n,l),i(n,p),i(n,g),i(g,v),i(e,m),i(e,c),P(T,h,y),u&&u.m(T,y),P(T,a,y)},p(T,y){I&&u.p(T,y)},d(T){T&&(s(e),s(h),s(a)),u&&u.d(T)}}}function Gt(r){let e,t,o,n,l,d="Domicilio 2",p,g,k=r[2].line2+"",v,m,c;return{c(){e=f("ion-item"),t=f("ion-icon"),o=D(),n=f("ion-label"),l=f("p"),l.textContent=d,p=D(),g=f("h2"),v=X(k),m=D(),c=f("ion-icon"),this.h()},l(h){e=_(h,"ION-ITEM",{href:!0});var I=b(e);t=_(I,"ION-ICON",{icon:!0,slot:!0}),b(t).forEach(s),o=A(I),n=_(I,"ION-LABEL",{class:!0});var a=b(n);l=_(a,"P",{"data-svelte-h":!0}),K(l)!=="svelte-1qy148r"&&(l.textContent=d),p=A(a),g=_(a,"H2",{});var u=b(g);v=G(u,k),u.forEach(s),a.forEach(s),m=A(I),c=_(I,"ION-ICON",{icon:!0,slot:!0}),b(c).forEach(s),I.forEach(s),this.h()},h(){N(t,"icon",je),N(t,"slot","start"),N(n,"class","ion-text-wrap"),N(c,"icon",ke),N(c,"slot","end"),N(e,"href","https://www.google.com/maps/search/?api=1&query="+r[2].line2)},m(h,I){P(h,e,I),i(e,t),i(e,o),i(e,n),i(n,l),i(n,p),i(n,g),i(g,v),i(e,m),i(e,c)},p:_e,d(h){h&&s(e)}}}function Jt(r){let e,t=r[2].comments!="<br>"&&Kt(r);return{c(){t&&t.c(),e=se()},l(o){t&&t.l(o),e=se()},m(o,n){t&&t.m(o,n),P(o,e,n)},p(o,n){o[2].comments!="<br>"&&t.p(o,n)},d(o){o&&s(e),t&&t.d(o)}}}function Kt(r){let e,t,o,n,l,d="Notas de ubicación",p,g,k=r[2].comments+"",v;return{c(){e=f("ion-item"),t=f("ion-icon"),o=D(),n=f("ion-label"),l=f("p"),l.textContent=d,p=D(),g=f("h2"),v=X(k),this.h()},l(m){e=_(m,"ION-ITEM",{});var c=b(e);t=_(c,"ION-ICON",{icon:!0,slot:!0}),b(t).forEach(s),o=A(c),n=_(c,"ION-LABEL",{class:!0});var h=b(n);l=_(h,"P",{"data-svelte-h":!0}),K(l)!=="svelte-nhm2ft"&&(l.textContent=d),p=A(h),g=_(h,"H2",{});var I=b(g);v=G(I,k),I.forEach(s),h.forEach(s),c.forEach(s),this.h()},h(){N(t,"icon",Bt),N(t,"slot","start"),N(n,"class","ion-text-wrap")},m(m,c){P(m,e,c),i(e,t),i(e,o),i(e,n),i(n,l),i(n,p),i(n,g),i(g,v)},p:_e,d(m){m&&s(e)}}}function Wt(r){let e,t,o,n,l,d="Horarios",p,g,k=r[2].schedule+"",v;return{c(){e=f("ion-item"),t=f("ion-icon"),o=D(),n=f("ion-label"),l=f("p"),l.textContent=d,p=D(),g=f("h2"),v=X(k),this.h()},l(m){e=_(m,"ION-ITEM",{});var c=b(e);t=_(c,"ION-ICON",{icon:!0,slot:!0}),b(t).forEach(s),o=A(c),n=_(c,"ION-LABEL",{});var h=b(n);l=_(h,"P",{"data-svelte-h":!0}),K(l)!=="svelte-11q7hm5"&&(l.textContent=d),p=A(h),g=_(h,"H2",{});var I=b(g);v=G(I,k),I.forEach(s),h.forEach(s),c.forEach(s),this.h()},h(){N(t,"icon",Pt),N(t,"slot","start")},m(m,c){P(m,e,c),i(e,t),i(e,o),i(e,n),i(n,l),i(n,p),i(n,g),i(g,v)},p:_e,d(m){m&&s(e)}}}function Qt(r){let e,t,o,n,l,d="Notas del operador",p,g,k=r[2].driver_comments+"",v;return{c(){e=f("ion-item"),t=f("ion-icon"),o=D(),n=f("ion-label"),l=f("p"),l.textContent=d,p=D(),g=f("h2"),v=X(k),this.h()},l(m){e=_(m,"ION-ITEM",{});var c=b(e);t=_(c,"ION-ICON",{icon:!0,slot:!0}),b(t).forEach(s),o=A(c),n=_(c,"ION-LABEL",{});var h=b(n);l=_(h,"P",{"data-svelte-h":!0}),K(l)!=="svelte-1yk9qp4"&&(l.textContent=d),p=A(h),g=_(h,"H2",{});var I=b(g);v=G(I,k),I.forEach(s),h.forEach(s),c.forEach(s),this.h()},h(){N(t,"icon",Rt),N(t,"slot","start")},m(m,c){P(m,e,c),i(e,t),i(e,o),i(e,n),i(n,l),i(n,p),i(n,g),i(g,v)},p:_e,d(m){m&&s(e)}}}function tt(r){let e,t,o;return{c(){e=f("section"),t=f("ion-img"),this.h()},l(n){e=_(n,"SECTION",{});var l=b(e);t=_(l,"ION-IMG",{src:!0,alt:!0,style:!0}),b(t).forEach(s),l.forEach(s),this.h()},h(){et(t.src,o=r[1])||N(t,"src",o),N(t,"alt","Evidencia fotográfica"),z(t,"max-width","100%"),z(t,"margin-top","16px")},m(n,l){P(n,e,l),i(e,t)},p(n,l){l&2&&!et(t.src,o=n[1])&&N(t,"src",o)},d(n){n&&s(e)}}}function Yt(r){let e,t,o,n,l="Cancelar",d,p,g=r[2].title+"",k,v,m,c,h="Confirmar",I,a,u,T,y,q,B,L,E="Cliente",M,S,w=r[2].client_name+"",O,H,C,R=r[2].comments&&r[2].comments.trim().length,F,j=r[2].schedule&&r[2].schedule.trim().length,W,te,J,le,ne,oe,Ae,Oe,he,ee,me,Se,de,Xe="Subir Evidencia",Me,ae,He,Be,Ge;function gt(V,x){if(V[2].line1&&V[2].line1.trim().length)return Xt;if(V[2].line2&&V[2].line2.trim().length)return jt}let Je=gt(r),re=Je&&Je(r),ce=R&&Jt(r),ue=j&&Wt(r),fe=r[2].driver_comments&&Qt(r),Q=r[1]&&tt(r);return{c(){e=f("ion-header"),t=f("ion-toolbar"),o=f("ion-buttons"),n=f("ion-button"),n.textContent=l,d=D(),p=f("ion-title"),k=X(g),v=D(),m=f("ion-buttons"),c=f("ion-button"),c.textContent=h,I=D(),a=f("ion-content"),u=f("ion-list"),T=f("ion-item"),y=f("ion-icon"),q=D(),B=f("ion-label"),L=f("p"),L.textContent=E,M=D(),S=f("h2"),O=X(w),H=D(),re&&re.c(),C=D(),ce&&ce.c(),F=D(),ue&&ue.c(),W=D(),fe&&fe.c(),te=D(),J=f("ion-item"),le=f("ion-icon"),ne=D(),oe=f("ion-textarea"),Ae=D(),Oe=f("section"),he=f("label"),ee=f("ion-button"),me=f("ion-icon"),Se=D(),de=f("label"),de.textContent=Xe,Me=D(),ae=f("input"),He=D(),Q&&Q.c(),this.h()},l(V){e=_(V,"ION-HEADER",{translucent:!0});var x=b(e);t=_(x,"ION-TOOLBAR",{});var ve=b(t);o=_(ve,"ION-BUTTONS",{slot:!0});var Ke=b(o);n=_(Ke,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),K(n)!=="svelte-1dnmkxs"&&(n.textContent=l),Ke.forEach(s),d=A(ve),p=_(ve,"ION-TITLE",{title:!0});var We=b(p);k=G(We,g),We.forEach(s),v=A(ve),m=_(ve,"ION-BUTTONS",{slot:!0});var Qe=b(m);c=_(Qe,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),K(c)!=="svelte-1ida0il"&&(c.textContent=h),Qe.forEach(s),ve.forEach(s),x.forEach(s),I=A(V),a=_(V,"ION-CONTENT",{fullscreen:!0});var Ye=b(a);u=_(Ye,"ION-LIST",{});var Y=b(u);T=_(Y,"ION-ITEM",{});var Te=b(T);y=_(Te,"ION-ICON",{icon:!0,slot:!0}),b(y).forEach(s),q=A(Te),B=_(Te,"ION-LABEL",{});var we=b(B);L=_(we,"P",{"data-svelte-h":!0}),K(L)!=="svelte-jrq7ei"&&(L.textContent=E),M=A(we),S=_(we,"H2",{});var Ze=b(S);O=G(Ze,w),Ze.forEach(s),we.forEach(s),Te.forEach(s),H=A(Y),re&&re.l(Y),C=A(Y),ce&&ce.l(Y),F=A(Y),ue&&ue.l(Y),W=A(Y),fe&&fe.l(Y),te=A(Y),J=_(Y,"ION-ITEM",{});var ye=b(J);le=_(ye,"ION-ICON",{icon:!0,slot:!0}),b(le).forEach(s),ne=A(ye),oe=_(ye,"ION-TEXTAREA",{label:!0,placeholder:!0}),b(oe).forEach(s),ye.forEach(s),Ae=A(Y),Oe=_(Y,"SECTION",{});var $e=b(Oe);he=_($e,"LABEL",{for:!0,style:!0});var xe=b(he);ee=_(xe,"ION-BUTTON",{fill:!0,class:!0,expand:!0});var be=b(ee);me=_(be,"ION-ICON",{icon:!0,slot:!0}),b(me).forEach(s),Se=A(be),de=_(be,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),K(de)!=="svelte-1as0od8"&&(de.textContent=Xe),Me=A(be),ae=_(be,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0}),be.forEach(s),xe.forEach(s),$e.forEach(s),He=A(Y),Q&&Q.l(Y),Y.forEach(s),Ye.forEach(s),this.h()},h(){N(n,"color","medium"),N(o,"slot","start"),N(p,"title",r[2].title),N(c,"strong",""),N(m,"slot","end"),N(e,"translucent",""),N(y,"icon",St),N(y,"slot","start"),N(le,"icon",Mt),N(le,"slot","start"),N(oe,"label","Notas"),N(oe,"placeholder","Escribe aquí..."),N(me,"icon",Ht),N(me,"slot","start"),U(de,"for","eventEvidence"),z(de,"padding","8px 10px"),z(ae,"display","none"),U(ae,"id","eventEvidence"),U(ae,"name","fileToUpload"),U(ae,"type","file"),U(ae,"accept","image/*"),N(ee,"fill","outline"),N(ee,"class","loadEvidence"),N(ee,"expand","block"),U(he,"for","eventEvidence"),z(he,"display","block"),z(he,"width","100%"),N(a,"fullscreen","")},m(V,x){P(V,e,x),i(e,t),i(t,o),i(o,n),i(t,d),i(t,p),i(p,k),i(t,v),i(t,m),i(m,c),P(V,I,x),P(V,a,x),i(a,u),i(u,T),i(T,y),i(T,q),i(T,B),i(B,L),i(B,M),i(B,S),i(S,O),i(u,H),re&&re.m(u,null),i(u,C),ce&&ce.m(u,null),i(u,F),ue&&ue.m(u,null),i(u,W),fe&&fe.m(u,null),i(u,te),i(u,J),i(J,le),i(J,ne),i(J,oe),r[7](oe),i(u,Ae),i(u,Oe),i(Oe,he),i(he,ee),i(ee,me),i(ee,Se),i(ee,de),i(ee,Me),i(ee,ae),i(u,He),Q&&Q.m(u,null),Be||(Ge=[Z(n,"click",r[4]),Z(c,"click",r[5]),Z(ae,"change",r[3])],Be=!0)},p(V,[x]){re&&re.p(V,x),R&&ce.p(V,x),j&&ue.p(V,x),V[2].driver_comments&&fe.p(V,x),V[1]?Q?Q.p(V,x):(Q=tt(V),Q.c(),Q.m(u,null)):Q&&(Q.d(1),Q=null)},i:_e,o:_e,d(V){V&&(s(e),s(I),s(a)),re&&re.d(),ce&&ce.d(),ue&&ue.d(),fe&&fe.d(),r[7](null),Q&&Q.d(),Be=!1,Fe(Ge)}}}function Zt(r,e,t){let o;pt(r,mt,h=>t(6,o=h));let n=document.querySelector("ion-modal"),l=n.componentProps.delivery,d=l.driver_comments?l.driver_comments:"",p=l.img?l.img:"",g="";const k=async h=>{const a=h.target.files[0];if(a){const u=new FormData;u.append("fileToUpload",a);try{const T=await fetch("https://rutaflow-app-production.up.railway.app/api/admin/manager/upload_img_driver.php",{method:"POST",body:u});if(T.ok){const y=await T.json();t(1,p=y.img),g=y.img_id,console.log(y)}else console.error("File upload failed:",T.statusText)}catch(T){console.error("Error during file upload:",T)}}},v=()=>{n.dismiss({data:Date.now()})},m=()=>{var h=new Object;h.id_route=l.id_route,h.id_event=l.id_event,h.comments=d.value,h.img=p,h.img_id=g;const I=new FormData;for(const a in h)I.append(a,h[a]);fetch("https://rutaflow-app-production.up.railway.app/api/admin/evidence/send_evidence.php",{method:"POST",body:I}).then(a=>a.json()).then(a=>{v()}).catch(a=>{console.error("Error fetching data:",a)})};function c(h){Ne[h?"unshift":"push"](()=>{d=h,t(0,d)})}return r.$$.update=()=>{r.$$.dirty&64&&o.params},[d,p,l,k,v,m,o,c]}class $t extends ze{constructor(e){super(),Ve(this,e,Zt,Yt,Ue,{})}}const Pe=Et({items:[],checkedIndices:[]});function nt(r,e,t){const o=r.slice();return o[19]=e[t],o}function ot(r,e){let t,o,n,l,d,p=e[19].item+"",g,k,v,m,c=(e[2][e[19].id_checklist_event]?e[2][e[19].id_checklist_event]:"Cargar evidencia")+"",h,I,a,u,T,y,q;function B(){return e[10](e[19])}function L(...E){return e[12](e[19],...E)}return T=kt(e[9][0]),{key:r,first:null,c(){t=f("ion-item"),o=f("ion-label"),n=f("input"),l=D(),d=f("p"),g=X(p),k=D(),v=f("ion-button"),m=f("label"),h=X(c),I=D(),a=f("input"),u=D(),this.h()},l(E){t=_(E,"ION-ITEM",{});var M=b(t);o=_(M,"ION-LABEL",{style:!0});var S=b(o);n=_(S,"INPUT",{id:!0,style:!0,type:!0}),l=A(S),d=_(S,"P",{style:!0});var w=b(d);g=G(w,p),w.forEach(s),S.forEach(s),k=A(M),v=_(M,"ION-BUTTON",{fill:!0,class:!0});var O=b(v);m=_(O,"LABEL",{for:!0,style:!0});var H=b(m);h=G(H,c),H.forEach(s),I=A(O),a=_(O,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0}),O.forEach(s),u=A(M),M.forEach(s),this.h()},h(){U(n,"id",`chkbox-${e[19].id_checklist_event}`),z(n,"pointer-events","auto"),U(n,"type","checkbox"),n.__value=e[19].id_checklist_event,Ot(n,n.__value),n.required=!0,z(d,"margin-left","10px"),z(o,"display","flex"),U(m,"for","chklist-"+e[19].id_checklist_event),z(m,"padding","8px 10px"),z(a,"display","none"),U(a,"id","chklist-"+e[19].id_checklist_event),U(a,"name","fileToUpload"),U(a,"type","file"),U(a,"accept","image/*"),N(v,"fill","outline"),N(v,"class","loadEvidence svelte-4jkdim"),T.p(n),this.first=t},m(E,M){P(E,t,M),i(t,o),i(o,n),n.checked=~(e[0]||[]).indexOf(n.__value),i(o,l),i(o,d),i(d,g),i(t,k),i(t,v),i(v,m),i(m,h),i(v,I),i(v,a),e[11](a),i(t,u),y||(q=[Z(n,"change",e[8]),Z(n,"change",B),Z(a,"change",L)],y=!0)},p(E,M){e=E,M&1&&(n.checked=~(e[0]||[]).indexOf(n.__value)),M&4&&c!==(c=(e[2][e[19].id_checklist_event]?e[2][e[19].id_checklist_event]:"Cargar evidencia")+"")&&ie(h,c)},d(E){E&&s(t),e[11](null),T.r(),y=!1,Fe(q)}}}function xt(r){let e,t,o,n,l="Cancelar",d,p,g="Requerimientos de ruta",k,v,m,c="Confirmar",h,I,a,u=[],T=new Map,y,q,B=pe(r[3]);const L=E=>E[19].id_checklist_event;for(let E=0;E<B.length;E+=1){let M=nt(r,B,E),S=L(M);T.set(S,u[E]=ot(S,M))}return{c(){e=f("ion-header"),t=f("ion-toolbar"),o=f("ion-buttons"),n=f("ion-button"),n.textContent=l,d=D(),p=f("ion-title"),p.textContent=g,k=D(),v=f("ion-buttons"),m=f("ion-button"),m.textContent=c,h=D(),I=f("ion-content"),a=f("ion-list");for(let E=0;E<u.length;E+=1)u[E].c();this.h()},l(E){e=_(E,"ION-HEADER",{translucent:!0});var M=b(e);t=_(M,"ION-TOOLBAR",{});var S=b(t);o=_(S,"ION-BUTTONS",{slot:!0});var w=b(o);n=_(w,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),K(n)!=="svelte-1dnmkxs"&&(n.textContent=l),w.forEach(s),d=A(S),p=_(S,"ION-TITLE",{"data-svelte-h":!0}),K(p)!=="svelte-ucox25"&&(p.textContent=g),k=A(S),v=_(S,"ION-BUTTONS",{slot:!0});var O=b(v);m=_(O,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),K(m)!=="svelte-1ida0il"&&(m.textContent=c),O.forEach(s),S.forEach(s),M.forEach(s),h=A(E),I=_(E,"ION-CONTENT",{fullscreen:!0});var H=b(I);a=_(H,"ION-LIST",{});var C=b(a);for(let R=0;R<u.length;R+=1)u[R].l(C);C.forEach(s),H.forEach(s),this.h()},h(){N(n,"color","medium"),N(o,"slot","start"),N(m,"strong",""),N(v,"slot","end"),N(e,"translucent",""),N(I,"fullscreen","")},m(E,M){P(E,e,M),i(e,t),i(t,o),i(o,n),i(t,d),i(t,p),i(t,k),i(t,v),i(v,m),P(E,h,M),P(E,I,M),i(I,a);for(let S=0;S<u.length;S+=1)u[S]&&u[S].m(a,null);y||(q=[Z(n,"click",r[4]),Z(m,"click",r[5])],y=!0)},p(E,[M]){M&207&&(B=pe(E[3]),u=Le(u,M,L,1,E,B,T,a,De,ot,null,nt))},i:_e,o:_e,d(E){E&&(s(e),s(h),s(I));for(let M=0;M<u.length;M+=1)u[M].d();y=!1,Fe(q)}}}function bt(r){return typeof r=="object"&&r!==null||Array.isArray(r)?Array.isArray(r)?r.map(e=>bt(e)).flat():Object.keys(r).filter(n=>n.toLowerCase().includes("id_checklist_event")).map(n=>r[n]):(console.error("Invalid input. Please provide a valid object or array."),[])}function en(r,e){let t=new FormData;t.append("id_route",r),t.append("status",e),fetch("https://rutaflow-app-production.up.railway.app/api/admin/route/change_status.php",{method:"POST",body:t}).then(o=>o.json()).then(o=>{}).catch(o=>{console.error("Error fetching data:",o)})}function tn(r,e,t){let o=document.querySelector("ion-modal");const n=o.componentProps.checklist,l=o.componentProps.driverId,d=o.componentProps.routeId;let p=[],g=null,k={},v={};It(()=>{Pe.update(L=>(L.items=bt(n),L))});const m=async()=>{await(await vt.create({header:"Datos o checklist incompletos",message:"Carga la evidencia requerida y marca todas las casillas para confirmar",buttons:[{text:"Cerrar"}]})).present()},c=()=>{o.dismiss({data:Date.now()}),ge(`/drivers/${l}`)},h=()=>{Pe.update(L=>{if(L.items.every(S=>L.checkedIndices.includes(S))){c();const S=new FormData;for(const w in k)if(k.hasOwnProperty(w)){const{img:O,img_id:H}=k[w];S.append(`selectedImages[${w}][img]`,O),S.append(`selectedImages[${w}][img_id]`,H)}fetch("https://rutaflow-app-production.up.railway.app/api/admin/checklist/add_evidence.php",{method:"POST",body:S}).then(w=>w.json()).then(w=>{en(d,"enroute")}).catch(w=>{console.error("Error fetching data:",w)})}else m();return L})},I=async(L,E)=>{const S=L.target.files[0];if(S){const w=new FormData;w.append("fileToUpload",S);try{const O=await fetch("https://rutaflow-app-production.up.railway.app/api/admin/manager/upload_img_driver.php",{method:"POST",body:w});if(O.ok){const H=await O.json();k={...k,[E]:{img:H.img,img_id:H.img_id}},t(2,v={...v,[E]:H.filename}),console.log(k)}else console.error("File upload failed:",O.statusText)}catch(O){console.error("Error during file upload:",O)}}},a=L=>{Pe.update(E=>(E.checkedIndices.indexOf(L)===-1?E.checkedIndices.push(L):console.error(`ID ${L} is already checked.`),E.items.forEach(S=>{S.id_checklist_event===L&&(S.checked=!0)}),E))},u=[[]];function T(){p=Nt(u[0],this.__value,this.checked),t(0,p)}const y=L=>a(L.id_checklist_event);function q(L){Ne[L?"unshift":"push"](()=>{g=L,t(1,g)})}return[p,g,v,n,c,h,I,a,T,u,y,q,(L,E)=>I(E,L.id_checklist_event)]}class nn extends ze{constructor(e){super(),Ve(this,e,tn,xt,Ue,{})}}const on=(r,e)=>{if(!customElements.get(r)){class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const n={};for(const l of this.attributes)n[l.name]=l.value;new e({target:this.shadowRoot,props:n})}}customElements.define(r,t)}},ln=function(r){return document.createElement(r).constructor!==HTMLElement},rn=(r,e)=>{ln(r)||on(r,e)},it=async(r,e,t)=>{zt(),Vt(),rn(r,e);const o=await Ut.create({component:r,componentProps:t});return o.present(),await o.onWillDismiss()};function lt(r,e,t){const o=r.slice();return o[25]=e[t],o}function rt(r,e,t){const o=r.slice();return o[25]=e[t],o}function st(r,e,t){const o=r.slice();return o[25]=e[t],o}function at(r){let e,t;return e=new Ft({props:{$$slots:{default:[fn]},$$scope:{ctx:r}}}),{c(){yt(e.$$.fragment)},l(o){Ct(e.$$.fragment,o)},m(o,n){Lt(e,o,n),t=!0},p(o,n){const l={};n[0]&127|n[1]&2&&(l.$$scope={dirty:n,ctx:o}),e.$set(l)},i(o){t||(Ce(e.$$.fragment,o),t=!0)},o(o){Re(e.$$.fragment,o),t=!1},d(o){Dt(e,o)}}}function sn(r){let e=qe(r[0],"enroute")+"",t,o,n,l,d='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jala para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',p,g,k=[],v=new Map,m,c,h=pe(r[3]);const I=a=>a[25].id_event;for(let a=0;a<h.length;a+=1){let u=lt(r,h,a),T=I(u);v.set(T,k[a]=ut(T,u))}return{c(){t=X(e),o=D(),n=f("ion-content"),l=f("ion-refresher"),l.innerHTML=d,p=D(),g=f("ion-list");for(let a=0;a<k.length;a+=1)k[a].c();this.h()},l(a){t=G(a,e),o=A(a),n=_(a,"ION-CONTENT",{});var u=b(n);l=_(u,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),K(l)!=="svelte-1jkndk3"&&(l.innerHTML=d),p=A(u),g=_(u,"ION-LIST",{});var T=b(g);for(let y=0;y<k.length;y+=1)k[y].l(T);T.forEach(s),u.forEach(s),this.h()},h(){N(l,"slot","fixed")},m(a,u){P(a,t,u),P(a,o,u),P(a,n,u),i(n,l),r[18](l),i(n,p),i(n,g);for(let T=0;T<k.length;T+=1)k[T]&&k[T].m(g,null);m||(c=Z(l,"ionRefresh",r[7]),m=!0)},p(a,u){u[0]&1&&e!==(e=qe(a[0],"enroute")+"")&&ie(t,e),u[0]&5384&&(h=pe(a[3]),k=Le(k,u,I,1,a,h,v,g,De,ut,null,lt))},d(a){a&&(s(t),s(o),s(n)),r[18](null);for(let u=0;u<k.length;u+=1)k[u].d();m=!1,c()}}}function an(r){let e,t;function o(d,p){return p[0]&32&&(e=null),e==null&&(e=!!d[5].every(hn)),e?un:cn}let n=o(r,[-1,-1]),l=n(r);return{c(){l.c(),t=se()},l(d){l.l(d),t=se()},m(d,p){l.m(d,p),P(d,t,p)},p(d,p){n===(n=o(d,p))&&l?l.p(d,p):(l.d(1),l=n(d),l&&(l.c(),l.m(t.parentNode,t)))},d(d){d&&s(t),l.d(d)}}}function ct(r){let e;return{c(){e=f("span"),this.h()},l(t){e=_(t,"SPAN",{class:!0}),b(e).forEach(s),this.h()},h(){U(e,"class","notes svelte-ziybgw")},m(t,o){P(t,e,o)},d(t){t&&s(e)}}}function ut(r,e){let t,o,n,l,d=parseInt(e[25].pos)+1+"",p,g,k,v,m,c,h=e[25].title+"",I,a,u=e[25].support_list&&e[25].support_list.length||e[10](e[25]),T,y,q,B,L,E=u&&ct();function M(){return e[19](e[25])}return{key:r,first:null,c(){t=f("ion-item"),o=f("ion-avatar"),n=f("div"),l=f("div"),p=X(d),k=D(),v=f("ion-label"),m=f("ion-text"),c=f("h3"),I=X(h),a=D(),E&&E.c(),T=D(),y=f("ion-icon"),q=D(),this.h()},l(S){t=_(S,"ION-ITEM",{});var w=b(t);o=_(w,"ION-AVATAR",{slot:!0});var O=b(o);n=_(O,"DIV",{class:!0,title:!0,style:!0});var H=b(n);l=_(H,"DIV",{class:!0});var C=b(l);p=G(C,d),C.forEach(s),H.forEach(s),O.forEach(s),k=A(w),v=_(w,"ION-LABEL",{button:!0});var R=b(v);m=_(R,"ION-TEXT",{color:!0});var F=b(m);c=_(F,"H3",{});var j=b(c);I=G(j,h),a=A(j),E&&E.l(j),j.forEach(s),F.forEach(s),R.forEach(s),T=A(w),y=_(w,"ION-ICON",{icon:!0,slot:!0,style:!0}),b(y).forEach(s),q=A(w),w.forEach(s),this.h()},h(){U(l,"class","order svelte-ziybgw"),U(n,"class","order-wrapper svelte-ziybgw"),U(n,"title",g=Ee(e[25].status)),z(n,"background-color",$(e[25])),z(n,"color",Ie($(e[25]))),N(o,"slot","start"),N(m,"color","#2e2e2e"),N(v,"button",""),N(y,"icon",ke),N(y,"slot","end"),z(y,"color",$(e[25])),this.first=t},m(S,w){P(S,t,w),i(t,o),i(o,n),i(n,l),i(l,p),i(t,k),i(t,v),i(v,m),i(m,c),i(c,I),i(c,a),E&&E.m(c,null),i(t,T),i(t,y),i(t,q),B||(L=Z(v,"click",M),B=!0)},p(S,w){e=S,w[0]&8&&d!==(d=parseInt(e[25].pos)+1+"")&&ie(p,d),w[0]&8&&g!==(g=Ee(e[25].status))&&U(n,"title",g),w[0]&8&&z(n,"background-color",$(e[25])),w[0]&8&&z(n,"color",Ie($(e[25]))),w[0]&8&&h!==(h=e[25].title+"")&&ie(I,h),w[0]&8&&(u=e[25].support_list&&e[25].support_list.length||e[10](e[25])),u?E||(E=ct(),E.c(),E.m(c,null)):E&&(E.d(1),E=null),w[0]&8&&z(y,"color",$(e[25]))},d(S){S&&s(t),E&&E.d(),B=!1,L()}}}function cn(r){let e=r[9](r[5],r[1],r[0])+"",t,o,n,l,d='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Pull to refresh" refreshing-spinner="circles" refreshing-text="Refreshing..."></ion-refresher-content>',p,g,k=[],v=new Map,m,c,h=pe(r[3]);const I=a=>a[25].id_event;for(let a=0;a<h.length;a+=1){let u=rt(r,h,a),T=I(u);v.set(T,k[a]=_t(T,u))}return{c(){t=X(e),o=D(),n=f("ion-content"),l=f("ion-refresher"),l.innerHTML=d,p=D(),g=f("ion-list");for(let a=0;a<k.length;a+=1)k[a].c();this.h()},l(a){t=G(a,e),o=A(a),n=_(a,"ION-CONTENT",{});var u=b(n);l=_(u,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),K(l)!=="svelte-1poui8g"&&(l.innerHTML=d),p=A(u),g=_(u,"ION-LIST",{});var T=b(g);for(let y=0;y<k.length;y+=1)k[y].l(T);T.forEach(s),u.forEach(s),this.h()},h(){N(l,"slot","fixed")},m(a,u){P(a,t,u),P(a,o,u),P(a,n,u),i(n,l),r[16](l),i(n,p),i(n,g);for(let T=0;T<k.length;T+=1)k[T]&&k[T].m(g,null);m||(c=Z(l,"ionRefresh",r[7]),m=!0)},p(a,u){u[0]&35&&e!==(e=a[9](a[5],a[1],a[0])+"")&&ie(t,e),u[0]&1288&&(h=pe(a[3]),k=Le(k,u,I,1,a,h,v,g,De,_t,null,rt))},d(a){a&&(s(t),s(o),s(n)),r[16](null);for(let u=0;u<k.length;u+=1)k[u].d();m=!1,c()}}}function un(r){let e,t,o='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Pull to refresh" refreshing-spinner="circles" refreshing-text="Refreshing..."></ion-refresher-content>',n,l,d=[],p=new Map,g,k,v=pe(r[3]);const m=c=>c[25].id_event;for(let c=0;c<v.length;c+=1){let h=st(r,v,c),I=m(h);p.set(I,d[c]=dt(I,h))}return{c(){e=f("ion-content"),t=f("ion-refresher"),t.innerHTML=o,n=D(),l=f("ion-list");for(let c=0;c<d.length;c+=1)d[c].c();this.h()},l(c){e=_(c,"ION-CONTENT",{});var h=b(e);t=_(h,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),K(t)!=="svelte-1poui8g"&&(t.innerHTML=o),n=A(h),l=_(h,"ION-LIST",{});var I=b(l);for(let a=0;a<d.length;a+=1)d[a].l(I);I.forEach(s),h.forEach(s),this.h()},h(){N(t,"slot","fixed")},m(c,h){P(c,e,h),i(e,t),r[14](t),i(e,n),i(e,l);for(let I=0;I<d.length;I+=1)d[I]&&d[I].m(l,null);g||(k=Z(t,"ionRefresh",r[7]),g=!0)},p(c,h){h[0]&1288&&(v=pe(c[3]),d=Le(d,h,m,1,c,v,p,l,De,dt,null,st))},d(c){c&&s(e),r[14](null);for(let h=0;h<d.length;h+=1)d[h].d();g=!1,k()}}}function ft(r){let e;return{c(){e=f("span"),this.h()},l(t){e=_(t,"SPAN",{class:!0}),b(e).forEach(s),this.h()},h(){U(e,"class","notes svelte-ziybgw")},m(t,o){P(t,e,o)},d(t){t&&s(e)}}}function _t(r,e){let t,o,n,l,d=parseInt(e[25].pos)+1+"",p,g,k,v,m,c,h=e[25].title+"",I,a,u=e[25].support_list&&e[25].support_list.length||e[10](e[25]),T,y,q="",B,L,E,M,S,w=u&&ft();function O(){return e[17](e[25])}return{key:r,first:null,c(){t=f("ion-item"),o=f("ion-avatar"),n=f("div"),l=f("div"),p=X(d),k=D(),v=f("ion-label"),m=f("ion-text"),c=f("h3"),I=X(h),a=D(),w&&w.c(),T=D(),y=f("div"),y.innerHTML=q,B=D(),L=f("ion-icon"),E=D(),this.h()},l(H){t=_(H,"ION-ITEM",{});var C=b(t);o=_(C,"ION-AVATAR",{slot:!0});var R=b(o);n=_(R,"DIV",{class:!0,title:!0,style:!0});var F=b(n);l=_(F,"DIV",{class:!0});var j=b(l);p=G(j,d),j.forEach(s),F.forEach(s),R.forEach(s),k=A(C),v=_(C,"ION-LABEL",{button:!0});var W=b(v);m=_(W,"ION-TEXT",{color:!0});var te=b(m);c=_(te,"H3",{});var J=b(c);I=G(J,h),a=A(J),w&&w.l(J),J.forEach(s),te.forEach(s),T=A(W),y=_(W,"DIV",{class:!0,"data-svelte-h":!0}),K(y)!=="svelte-130ohbs"&&(y.innerHTML=q),W.forEach(s),B=A(C),L=_(C,"ION-ICON",{icon:!0,slot:!0}),b(L).forEach(s),E=A(C),C.forEach(s),this.h()},h(){U(l,"class","order svelte-ziybgw"),U(n,"class","order-wrapper svelte-ziybgw"),U(n,"title",g=Ee(e[25].status)),z(n,"background-color",$(e[25])),z(n,"color",Ie($(e[25]))),N(o,"slot","start"),N(m,"color","#2e2e2e"),U(y,"class","sub svelte-ziybgw"),N(v,"button",""),N(L,"icon",ke),N(L,"slot","end"),this.first=t},m(H,C){P(H,t,C),i(t,o),i(o,n),i(n,l),i(l,p),i(t,k),i(t,v),i(v,m),i(m,c),i(c,I),i(c,a),w&&w.m(c,null),i(v,T),i(v,y),i(t,B),i(t,L),i(t,E),M||(S=Z(v,"click",O),M=!0)},p(H,C){e=H,C[0]&8&&d!==(d=parseInt(e[25].pos)+1+"")&&ie(p,d),C[0]&8&&g!==(g=Ee(e[25].status))&&U(n,"title",g),C[0]&8&&z(n,"background-color",$(e[25])),C[0]&8&&z(n,"color",Ie($(e[25]))),C[0]&8&&h!==(h=e[25].title+"")&&ie(I,h),C[0]&8&&(u=e[25].support_list&&e[25].support_list.length||e[10](e[25])),u?w||(w=ft(),w.c(),w.m(c,null)):w&&(w.d(1),w=null)},d(H){H&&s(t),w&&w.d(),M=!1,S()}}}function ht(r){let e;return{c(){e=f("span"),this.h()},l(t){e=_(t,"SPAN",{class:!0}),b(e).forEach(s),this.h()},h(){U(e,"class","notes svelte-ziybgw")},m(t,o){P(t,e,o)},d(t){t&&s(e)}}}function dt(r,e){let t,o,n,l,d=parseInt(e[25].pos)+1+"",p,g,k,v,m,c,h=e[25].title+"",I,a,u=e[25].support_list&&e[25].support_list.length||e[10](e[25]),T,y,q="",B,L,E,M,S,w=u&&ht();function O(){return e[15](e[25])}return{key:r,first:null,c(){t=f("ion-item"),o=f("ion-avatar"),n=f("div"),l=f("div"),p=X(d),k=D(),v=f("ion-label"),m=f("ion-text"),c=f("h3"),I=X(h),a=D(),w&&w.c(),T=D(),y=f("div"),y.innerHTML=q,B=D(),L=f("ion-icon"),E=D(),this.h()},l(H){t=_(H,"ION-ITEM",{});var C=b(t);o=_(C,"ION-AVATAR",{slot:!0});var R=b(o);n=_(R,"DIV",{class:!0,title:!0,style:!0});var F=b(n);l=_(F,"DIV",{class:!0});var j=b(l);p=G(j,d),j.forEach(s),F.forEach(s),R.forEach(s),k=A(C),v=_(C,"ION-LABEL",{button:!0});var W=b(v);m=_(W,"ION-TEXT",{color:!0});var te=b(m);c=_(te,"H3",{});var J=b(c);I=G(J,h),a=A(J),w&&w.l(J),J.forEach(s),te.forEach(s),T=A(W),y=_(W,"DIV",{class:!0,"data-svelte-h":!0}),K(y)!=="svelte-130ohbs"&&(y.innerHTML=q),W.forEach(s),B=A(C),L=_(C,"ION-ICON",{icon:!0,slot:!0}),b(L).forEach(s),E=A(C),C.forEach(s),this.h()},h(){U(l,"class","order svelte-ziybgw"),U(n,"class","order-wrapper svelte-ziybgw"),U(n,"title",g=Ee(e[25].status)),z(n,"background-color",$(e[25])),z(n,"color",Ie($(e[25]))),N(o,"slot","start"),N(m,"color","#2e2e2e"),U(y,"class","sub svelte-ziybgw"),N(v,"button",""),N(L,"icon",ke),N(L,"slot","end"),this.first=t},m(H,C){P(H,t,C),i(t,o),i(o,n),i(n,l),i(l,p),i(t,k),i(t,v),i(v,m),i(m,c),i(c,I),i(c,a),w&&w.m(c,null),i(v,T),i(v,y),i(t,B),i(t,L),i(t,E),M||(S=Z(v,"click",O),M=!0)},p(H,C){e=H,C[0]&8&&d!==(d=parseInt(e[25].pos)+1+"")&&ie(p,d),C[0]&8&&g!==(g=Ee(e[25].status))&&U(n,"title",g),C[0]&8&&z(n,"background-color",$(e[25])),C[0]&8&&z(n,"color",Ie($(e[25]))),C[0]&8&&h!==(h=e[25].title+"")&&ie(I,h),C[0]&8&&(u=e[25].support_list&&e[25].support_list.length||e[10](e[25])),u?w||(w=ht(),w.c(),w.m(c,null)):w&&(w.d(1),w=null)},d(H){H&&s(t),w&&w.d(),M=!1,S()}}}function fn(r){let e,t,o,n,l=`<ion-icon icon="${qt}"></ion-icon>`,d,p,g,k=r[2].name+"",v,m,c,h=r[4].name+"",I,a,u,T,y;function q(E,M){return E[5].length>0?an:sn}let B=q(r),L=B(r);return{c(){e=f("ion-header"),t=f("ion-toolbar"),o=f("ion-buttons"),n=f("ion-button"),n.innerHTML=l,d=D(),p=f("ion-buttons"),g=f("ion-button"),v=X(k),m=D(),c=f("ion-title"),I=X(h),a=D(),L.c(),u=se(),this.h()},l(E){e=_(E,"ION-HEADER",{translucent:!0});var M=b(e);t=_(M,"ION-TOOLBAR",{});var S=b(t);o=_(S,"ION-BUTTONS",{slot:!0});var w=b(o);n=_(w,"ION-BUTTON",{title:!0,alt:!0,"data-svelte-h":!0}),K(n)!=="svelte-7ppz3r"&&(n.innerHTML=l),w.forEach(s),d=A(S),p=_(S,"ION-BUTTONS",{slot:!0});var O=b(p);g=_(O,"ION-BUTTON",{});var H=b(g);v=G(H,k),H.forEach(s),O.forEach(s),m=A(S),c=_(S,"ION-TITLE",{});var C=b(c);I=G(C,h),C.forEach(s),S.forEach(s),M.forEach(s),a=A(E),L.l(E),u=se(),this.h()},h(){N(n,"title","Atrás"),N(n,"alt","Atrás"),N(o,"slot","start"),N(p,"slot","secondary"),N(e,"translucent","")},m(E,M){P(E,e,M),i(e,t),i(t,o),i(o,n),i(t,d),i(t,p),i(p,g),i(g,v),i(t,m),i(t,c),i(c,I),P(E,a,M),L.m(E,M),P(E,u,M),T||(y=Z(n,"click",r[11]),T=!0)},p(E,M){M[0]&4&&k!==(k=E[2].name+"")&&ie(v,k),M[0]&16&&h!==(h=E[4].name+"")&&ie(I,h),B===(B=q(E))&&L?L.p(E,M):(L.d(1),L=B(E),L&&(L.c(),L.m(u.parentNode,u)))},d(E){E&&(s(e),s(a),s(u)),L.d(E),T=!1,y()}}}function _n(r){let e,t,o,n=r[2]&&at(r);return{c(){e=D(),n&&n.c(),t=se(),this.h()},l(l){Tt("svelte-kn0kph",document.head).forEach(s),e=A(l),n&&n.l(l),t=se(),this.h()},h(){document.title="Rutaflow - Detalles de ruta"},m(l,d){P(l,e,d),n&&n.m(l,d),P(l,t,d),o=!0},p(l,d){l[2]?n?(n.p(l,d),d[0]&4&&Ce(n,1)):(n=at(l),n.c(),Ce(n,1),n.m(t.parentNode,t)):n&&(At(),Re(n,1,1,()=>{n=null}),wt())},i(l){o||(Ce(n),o=!0)},o(l){Re(n),o=!1},d(l){l&&(s(e),s(t)),n&&n.d(l)}}}function $(r){let e="#ffffff";return r.status==="pending"?e="#f2e300":r.status==="completed"&&(e="#44d900"),e}function Ee(r){let e="";return r=="pending"?e="Pendiente":r=="completed"&&(e="Completado"),e}function Ie(r){r.slice(0,1)==="#"&&(r=r.slice(1)),r.length===3&&(r=r.split("").map(function(l){return l+l}).join(""));const e=parseInt(r.substr(0,2),16),t=parseInt(r.substr(2,2),16),o=parseInt(r.substr(4,2),16);return(e*299+t*587+o*114)/1e3>=128?"#414040":"#fff"}function qe(r,e){let t=new FormData;return t.append("id_route",r),t.append("status",e),fetch("https://rutaflow-app-production.up.railway.app/api/admin/route/change_status.php",{method:"POST",body:t}).then(o=>o.json()).then(o=>{}).catch(o=>{console.error("Error fetching data:",o)}),""}const hn=r=>r.img;function dn(r,e,t){let o;pt(r,mt,O=>t(13,o=O));var n=this&&this.__awaiter||function(O,H,C,R){function F(j){return j instanceof C?j:new C(function(W){W(j)})}return new(C||(C=Promise))(function(j,W){function te(ne){try{le(R.next(ne))}catch(oe){W(oe)}}function J(ne){try{le(R.throw(ne))}catch(oe){W(oe)}}function le(ne){ne.done?j(ne.value):F(ne.value).then(te,J)}le((R=R.apply(O,H||[])).next())})};let{routeId:l}=e,{driverId:d}=e,p=new Object,g=[],k={},v={},m;const c=()=>n(void 0,void 0,void 0,function*(){yield h(l),m.complete()});function h(O){const H=new FormData;H.append("id_route",O),fetch("https://rutaflow-app-production.up.railway.app/api/admin/report/seguimiento_list.php",{method:"POST",body:H}).then(C=>C.json()).then(C=>{t(4,k=C.data.seguimiento_list[0]),t(3,g=C.data.event_list),t(5,v=C.data.checklist)}).catch(C=>{console.error("Error fetching data:",C)})}const I=O=>new Promise((H,C)=>{const R=new FormData;R.append("id_route",O.id_route),R.append("id_event",O.id_event),fetch("https://rutaflow-app-production.up.railway.app/api/admin/evidence/evidence_by_event.php",{method:"POST",body:R}).then(F=>F.json()).then(F=>{H(F.data.event_evidence[0])}).catch(F=>{console.error("Error fetching data:",F),C(F)})}),a=(O,H,C)=>{I(O).then(R=>{O.client_name=k.client_name,R&&(O.img=R.img,O.driver_comments=R.driver_comments,O.comments=R.comments),it("modal-delivery-info",$t,{delivery:O}).then(F=>{})})},u=(O,H,C)=>(it("modal-checklist",nn,{checklist:O,driverId:H,routeId:C}).then(R=>{}),qe(C,"checklist"),""),T=O=>{if(O.tracking_type=="subscription"){if(O.subscriber_info&&O.payment_type==="cash"&&new Date(O.subscriber_info.payment_next)<new Date)return!0}else if(O.tracking_type=="ecommerce"&&Number(O.payment_pending)>0)return!0;return!1},y=()=>{p.id_driver?ge(`/drivers/${p.id_driver}`):ge("/drivers/me")},q=(O,H)=>n(void 0,void 0,void 0,function*(){yield(yield vt.create({header:O||"Error",message:H||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()});function B(O){Ne[O?"unshift":"push"](()=>{m=O,t(6,m)})}const L=O=>a(O);function E(O){Ne[O?"unshift":"push"](()=>{m=O,t(6,m)})}const M=O=>a(O);function S(O){Ne[O?"unshift":"push"](()=>{m=O,t(6,m)})}const w=O=>{const H=g.findIndex(j=>j.id_event===O.id_event),C=H===0,R=H>0?g[H-1]:null;C||R&&R.img;const F=O.img!==null&&O.img!=="";F||C&&!F?a(O):q("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")};return r.$$set=O=>{"routeId"in O&&t(0,l=O.routeId),"driverId"in O&&t(1,d=O.driverId)},r.$$.update=()=>{r.$$.dirty[0]&8197&&(t(0,{routeId:l,driverId:d}=o.params,l,(t(1,d),t(13,o),t(2,p),t(0,l))),t(2,p=JSON.parse(localStorage.getItem("userSession"))),p?p.id_user&&(p.type=="admin"||p.type=="super")?(ge(`/drivers/me/routes/${l}`),h(l)):p.id_user&&p.id_driver&&(h(l),ge(`/drivers/${p.id_driver}/routes/${l}`)):ge("/"))},[l,d,p,g,k,v,m,c,a,u,T,y,q,o,B,L,E,M,S,w]}class kn extends ze{constructor(e){super(),Ve(this,e,dn,_n,Ue,{routeId:0,driverId:1},null,[-1,-1])}}export{kn as component};
