import{Z as gt,s as Je,e as f,j as N,b as d,q as v,d as se,h as a,m as T,v as g,i as G,w as r,x as he,n as Ae,z as Pe,_ as kn,k as De,B as s,o as tt,$ as bt,t as Oe,r as Ne,f as F,a0 as En,a1 as ot,A as Re,y as Me,a2 as dt,a3 as ze,a4 as kt,a5 as Et,F as _n,l as In,p as On}from"../chunks/index.CdEBkEwf.js";import{S as Ye,i as Qe,t as ut,a as pt,c as Nn,b as Tn,d as yn,m as Cn,e as wn,g as Ln}from"../chunks/index.Dw8w8a4z.js";import{e as Ue,u as it,d as lt,g as qe,a as Xe,h as Ve,b as An,c as Mn,i as hn,f as Sn,j as pn,k as Dn,m as Bn,n as ft,o as Hn,q as It,r as mn,s as vn,t as Ot,v as je,w as Pn,x as Un,y as Nt,z as Tt,A as Rn,B as Vn,C as zn,D as jn,E as qn,p as Fn}from"../chunks/index.93-JKGM8.js";import"../chunks/index-6e05b96e.C_9q9BoX.js";import{m as nt,D as rt,a as xe,W as xn,b as Gn,I as Kn}from"../chunks/IonPage.D-I3Lcf1.js";import{q as Wn,t as Xn}from"../chunks/ion-modal.BYMRzj9z.js";import{g as We}from"../chunks/entry.CHxi3ese.js";const Jn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,Yn=(l,e)=>{if(!customElements.get(l)){class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const n={};for(const i of this.attributes)n[i.name]=i.value;new e({target:this.shadowRoot,props:n})}}customElements.define(l,t)}},Qn=function(l){return document.createElement(l).constructor!==HTMLElement},Zn=(l,e)=>{Qn(l)||Yn(l,e)},Fe=async(l,e,t)=>{Wn(),Xn(),Zn(l,e);const o=await nt.create({component:l,componentProps:t});return o.present(),await o.onWillDismiss()};let $e=gt({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]}),gn=gt({flag:[]});function $n(l){let e,t,o,n,i="Cancelar",c,u,_="Captura de Km/Gas",I,b,p,m="Confirmar",h,k,C,O,P,M,x;return{c(){e=f("ion-header"),t=f("ion-toolbar"),o=f("ion-buttons"),n=f("ion-button"),n.textContent=i,c=N(),u=f("ion-title"),u.textContent=_,I=N(),b=f("ion-buttons"),p=f("ion-button"),p.textContent=m,h=N(),k=f("ion-content"),C=f("ion-item"),O=f("ion-input"),this.h()},l(j){e=d(j,"ION-HEADER",{translucent:!0});var W=v(e);t=d(W,"ION-TOOLBAR",{});var z=v(t);o=d(z,"ION-BUTTONS",{slot:!0});var D=v(o);n=d(D,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),se(n)!=="svelte-17pq4f4"&&(n.textContent=i),D.forEach(a),c=T(z),u=d(z,"ION-TITLE",{"data-svelte-h":!0}),se(u)!=="svelte-1yhkaq7"&&(u.textContent=_),I=T(z),b=d(z,"ION-BUTTONS",{slot:!0});var U=v(b);p=d(U,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),se(p)!=="svelte-cm6j4s"&&(p.textContent=m),U.forEach(a),z.forEach(a),W.forEach(a),h=T(j),k=d(j,"ION-CONTENT",{fullscreen:!0});var S=v(k);C=d(S,"ION-ITEM",{});var E=v(C);O=d(E,"ION-INPUT",{class:!0,inputmode:!0,pattern:!0,type:!0,placeholder:!0,value:!0,required:!0});var w=v(O);w.forEach(a),E.forEach(a),S.forEach(a),this.h()},h(){g(n,"color","medium"),g(o,"slot","start"),g(p,"strong",""),g(b,"slot","end"),g(e,"translucent",""),g(O,"class","fin-km"),g(O,"inputmode","numeric"),g(O,"pattern","[0-9]*"),g(O,"type","number"),g(O,"placeholder",P="Ingresa "+l[0]+" actual"),g(O,"value",l[1]),g(O,"required",""),g(k,"fullscreen","")},m(j,W){G(j,e,W),r(e,t),r(t,o),r(o,n),r(t,c),r(t,u),r(t,I),r(t,b),r(b,p),G(j,h,W),G(j,k,W),r(k,C),r(C,O),M||(x=[he(n,"click",l[2]),he(p,"click",l[3]),he(O,"input",l[4])],M=!0)},p(j,[W]){W&1&&P!==(P="Ingresa "+j[0]+" actual")&&g(O,"placeholder",P),W&2&&g(O,"value",j[1])},i:Ae,o:Ae,d(j){j&&(a(e),a(h),a(k)),M=!1,Pe(x)}}}function eo(l,e,t){const o=kn();let i=document.querySelector("ion-modal").componentProps.data_type,c="";gn.subscribe(p=>{i=p.flag[0],i=="km_final"||i=="km_inicial"?t(0,c="kilometraje"):t(0,c="litros de gasolina")});let u=0;function _(){nt.dismiss()}function I(){o("modalResult",{data:"Your data",role:"confirm"}),i=="km_inicial"?$e.update(m=>({...m,km_inicial:[u]})):i=="gas_inicial"?$e.update(m=>({...m,gas_inicial:[u]})):i=="km_final"?$e.update(m=>({...m,km_final:[u]})):i=="gas_final"&&$e.update(m=>({...m,gas_final:[u]})),_()}return[c,u,_,I,p=>t(1,u=p.target.value)]}class to extends Ye{constructor(e){super(),Qe(this,e,eo,$n,Je,{})}}const _t=gt({items:[],checkedIndices:[],mandatory:[]});function wt(l,e,t){const o=l.slice();return o[56]=e[t],o[57]=e,o[58]=t,o}function no(l){let e,t,o,n,i,c="Kilometraje inicial",u,_,I=l[0]?l[0]+" km.":"Cargar km",b,p,m,h,k,C,O,P="Gasolina inicial (litros)",M,x,j=l[1]?l[1]+" litros":"Cargar gas",W,z,D,U;return z=bt(l[22][0]),{c(){e=f("ion-item"),t=f("ion-label"),o=f("input"),n=N(),i=f("p"),i.textContent=c,u=N(),_=f("ion-button"),b=Oe(I),p=N(),m=f("ion-item"),h=f("ion-label"),k=f("input"),C=N(),O=f("p"),O.textContent=P,M=N(),x=f("ion-button"),W=Oe(j),this.h()},l(S){e=d(S,"ION-ITEM",{});var E=v(e);t=d(E,"ION-LABEL",{style:!0});var w=v(t);o=d(w,"INPUT",{id:!0,style:!0,type:!0}),n=T(w),i=d(w,"P",{style:!0,"data-svelte-h":!0}),se(i)!=="svelte-88twxi"&&(i.textContent=c),w.forEach(a),u=T(E),_=d(E,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var R=v(_);b=Ne(R,I),R.forEach(a),E.forEach(a),p=T(S),m=d(S,"ION-ITEM",{});var A=v(m);h=d(A,"ION-LABEL",{style:!0});var Q=v(h);k=d(Q,"INPUT",{id:!0,style:!0,type:!0}),C=T(Q),O=d(Q,"P",{style:!0,"data-svelte-h":!0}),se(O)!=="svelte-1ux30eb"&&(O.textContent=P),Q.forEach(a),M=T(A),x=d(A,"ION-BUTTON",{fill:!0,class:!0,size:!0,style:!0});var Y=v(x);W=Ne(Y,j),Y.forEach(a),A.forEach(a),this.h()},h(){F(o,"id","chkbox-km-ini"),s(o,"pointer-events","auto"),F(o,"type","checkbox"),o.required=!0,s(i,"margin-left","10px"),s(t,"display","flex"),g(_,"fill","outline"),g(_,"size","small"),g(_,"class","loadKmInicial"),g(_,"aria-selected",""),F(k,"id","chkbox-gas-ini"),s(k,"pointer-events","auto"),F(k,"type","checkbox"),k.required=!0,s(O,"margin-left","10px"),s(h,"display","flex"),g(x,"fill","outline"),g(x,"class","loadGasInicial"),g(x,"size","small"),s(x,"height","16px "),z.p(o,k)},m(S,E){G(S,e,E),r(e,t),r(t,o),o.checked=~(l[4]||[]).indexOf(o.__value),l[29](o),r(t,n),r(t,i),r(e,u),r(e,_),r(_,b),G(S,p,E),G(S,m,E),r(m,h),r(h,k),l[31](k),k.checked=~(l[4]||[]).indexOf(k.__value),r(h,C),r(h,O),r(m,M),r(m,x),r(x,W),D||(U=[he(o,"change",l[28]),he(_,"click",l[30]),he(k,"change",l[32]),he(x,"click",l[33])],D=!0)},p(S,E){E[0]&16&&(o.checked=~(S[4]||[]).indexOf(o.__value)),E[0]&1&&I!==(I=S[0]?S[0]+" km.":"Cargar km")&&Me(b,I),E[0]&16&&(k.checked=~(S[4]||[]).indexOf(k.__value)),E[0]&2&&j!==(j=S[1]?S[1]+" litros":"Cargar gas")&&Me(W,j)},d(S){S&&(a(e),a(p),a(m)),l[29](null),l[31](null),z.r(),D=!1,Pe(U)}}}function oo(l){let e,t,o,n,i,c="Kilometraje final",u,_,I=l[2]?l[2]+" km.":"Cargar km",b,p,m,h,k,C,O,P="Gasolina final (litros)",M,x,j=l[3]?l[3]+" litros":"Cargar gas",W,z,D,U;return z=bt(l[22][0]),{c(){e=f("ion-item"),t=f("ion-label"),o=f("input"),n=N(),i=f("p"),i.textContent=c,u=N(),_=f("ion-button"),b=Oe(I),p=N(),m=f("ion-item"),h=f("ion-label"),k=f("input"),C=N(),O=f("p"),O.textContent=P,M=N(),x=f("ion-button"),W=Oe(j),this.h()},l(S){e=d(S,"ION-ITEM",{});var E=v(e);t=d(E,"ION-LABEL",{style:!0});var w=v(t);o=d(w,"INPUT",{id:!0,style:!0,type:!0}),n=T(w),i=d(w,"P",{style:!0,"data-svelte-h":!0}),se(i)!=="svelte-ccmu71"&&(i.textContent=c),w.forEach(a),u=T(E),_=d(E,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var R=v(_);b=Ne(R,I),R.forEach(a),E.forEach(a),p=T(S),m=d(S,"ION-ITEM",{});var A=v(m);h=d(A,"ION-LABEL",{style:!0});var Q=v(h);k=d(Q,"INPUT",{id:!0,style:!0,type:!0}),C=T(Q),O=d(Q,"P",{style:!0,"data-svelte-h":!0}),se(O)!=="svelte-wsoyd2"&&(O.textContent=P),Q.forEach(a),M=T(A),x=d(A,"ION-BUTTON",{fill:!0,size:!0,class:!0});var Y=v(x);W=Ne(Y,j),Y.forEach(a),A.forEach(a),this.h()},h(){F(o,"id","chkbox-km-fin"),s(o,"pointer-events","auto"),F(o,"type","checkbox"),o.required=!0,s(i,"margin-left","10px"),s(t,"display","flex"),g(_,"fill","outline"),g(_,"size","small"),g(_,"class","loadKmInicial"),g(_,"aria-selected",""),F(k,"id","chkbox-gas-fin"),s(k,"pointer-events","auto"),F(k,"type","checkbox"),k.required=!0,s(O,"margin-left","10px"),s(h,"display","flex"),g(x,"fill","outline"),g(x,"size","small"),g(x,"class","loadGasInicial"),z.p(o,k)},m(S,E){G(S,e,E),r(e,t),r(t,o),o.checked=~(l[4]||[]).indexOf(o.__value),l[23](o),r(t,n),r(t,i),r(e,u),r(e,_),r(_,b),G(S,p,E),G(S,m,E),r(m,h),r(h,k),k.checked=~(l[4]||[]).indexOf(k.__value),l[26](k),r(h,C),r(h,O),r(m,M),r(m,x),r(x,W),D||(U=[he(o,"change",l[21]),he(_,"click",l[24]),he(k,"change",l[25]),he(x,"click",l[27])],D=!0)},p(S,E){E[0]&16&&(o.checked=~(S[4]||[]).indexOf(o.__value)),E[0]&4&&I!==(I=S[2]?S[2]+" km.":"Cargar km")&&Me(b,I),E[0]&16&&(k.checked=~(S[4]||[]).indexOf(k.__value)),E[0]&8&&j!==(j=S[3]?S[3]+" litros":"Cargar gas")&&Me(W,j)},d(S){S&&(a(e),a(p),a(m)),l[23](null),l[26](null),z.r(),D=!1,Pe(U)}}}function io(l){let e=[],t=new Map,o,n=Ue(l[14]);const i=c=>c[56].id_checklist_event;for(let c=0;c<n.length;c+=1){let u=wt(l,n,c),_=i(u);t.set(_,e[c]=Lt(_,u))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();o=De()},l(c){for(let u=0;u<e.length;u+=1)e[u].l(c);o=De()},m(c,u){for(let _=0;_<e.length;_+=1)e[_]&&e[_].m(c,u);G(c,o,u)},p(c,u){u[0]&813168&&(n=Ue(c[14]),e=it(e,u,i,1,c,n,t,o.parentNode,lt,Lt,o,wt))},d(c){c&&a(o);for(let u=0;u<e.length;u+=1)e[u].d(c)}}}function lo(l){let e,t=(l[13][l[56].id_checklist_event]?l[13][l[56].id_checklist_event]:"Cargar evidencia")+"",o;return{c(){e=f("label"),o=Oe(t),this.h()},l(n){e=d(n,"LABEL",{for:!0,class:!0});var i=v(e);o=Ne(i,t),i.forEach(a),this.h()},h(){F(e,"for","chklist-"+l[56].id_checklist_event),F(e,"class","button-label")},m(n,i){G(n,e,i),r(e,o)},p(n,i){i[0]&8192&&t!==(t=(n[13][n[56].id_checklist_event]?n[13][n[56].id_checklist_event]:"Cargar evidencia")+"")&&Me(o,t)},d(n){n&&a(e)}}}function ro(l){let e;return{c(){e=f("ion-spinner"),this.h()},l(t){e=d(t,"ION-SPINNER",{name:!0,class:!0}),v(e).forEach(a),this.h()},h(){g(e,"name","dots"),g(e,"class","button-spinner")},m(t,o){G(t,e,o)},p:Ae,d(t){t&&a(e)}}}function Lt(l,e){let t,o,n,i=e[56],c,u,_=e[56].item+"",I,b,p,m=e[56].mandatory=="1"?" * ":"",h,k,C,O,P,M,x,j,W,z;const D=()=>e[35](n,i),U=()=>e[35](null,i);function S(){return e[36](e[56])}function E(Q,Y){return Q[11][Q[56].id_checklist_event]?ro:lo}let w=E(e),R=w(e);function A(...Q){return e[38](e[56],...Q)}return j=bt(e[22][0]),{key:l,first:null,c(){t=f("ion-item"),o=f("ion-label"),n=f("input"),c=N(),u=f("p"),I=Oe(_),b=N(),p=f("b"),h=Oe(m),k=N(),C=f("ion-button"),O=f("div"),R.c(),P=N(),M=f("input"),x=N(),this.h()},l(Q){t=d(Q,"ION-ITEM",{});var Y=v(t);o=d(Y,"ION-LABEL",{style:!0});var me=v(o);n=d(me,"INPUT",{id:!0,style:!0,type:!0}),c=T(me),u=d(me,"P",{style:!0});var ve=v(u);I=Ne(ve,_),ve.forEach(a),b=T(me),p=d(me,"B",{style:!0});var Ie=v(p);h=Ne(Ie,m),Ie.forEach(a),me.forEach(a),k=T(Y),C=d(Y,"ION-BUTTON",{fill:!0,class:!0,size:!0});var B=v(C);O=d(B,"DIV",{class:!0});var ce=v(O);R.l(ce),P=T(ce),M=d(ce,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),ce.forEach(a),B.forEach(a),x=T(Y),Y.forEach(a),this.h()},h(){F(n,"id",`chkbox-${e[56].id_checklist_event}`),s(n,"pointer-events","auto"),F(n,"type","checkbox"),n.__value=e[56].id_checklist_event,En(n,n.__value),n.required=!0,s(u,"margin-left","10px"),s(p,"margin-left","5px"),s(o,"display","flex"),s(M,"display","none"),F(M,"id","chklist-"+e[56].id_checklist_event),F(M,"name","fileToUpload"),F(M,"type","file"),F(M,"accept","image/*"),F(M,"capture","environment"),F(O,"class","button-content"),g(C,"fill","outline"),g(C,"class","loadEvidence"),g(C,"size","small"),j.p(n),this.first=t},m(Q,Y){G(Q,t,Y),r(t,o),r(o,n),n.checked=~(e[4]||[]).indexOf(n.__value),D(),r(o,c),r(o,u),r(u,I),r(o,b),r(o,p),r(p,h),r(t,k),r(t,C),r(C,O),R.m(O,null),r(O,P),r(O,M),e[37](M),r(t,x),W||(z=[he(n,"change",e[34]),he(n,"change",S),he(M,"change",A)],W=!0)},p(Q,Y){e=Q,Y[0]&16&&(n.checked=~(e[4]||[]).indexOf(n.__value)),i!==e[56]&&(U(),i=e[56],D()),w===(w=E(e))&&R?R.p(e,Y):(R.d(1),R=w(e),R&&(R.c(),R.m(O,P)))},d(Q){Q&&a(t),U(),R.d(),e[37](null),j.r(),W=!1,Pe(z)}}}function At(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(o){e=d(o,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),se(e)!=="svelte-1aosxw0"&&(e.innerHTML=t),this.h()},h(){F(e,"class","overlay"),s(e,"position","fixed"),s(e,"top","0"),s(e,"left","0"),s(e,"width","100vw"),s(e,"height","100vh"),s(e,"background","rgba(0, 0, 0, 0.5)"),s(e,"display","flex"),s(e,"align-items","center"),s(e,"justify-content","center"),s(e,"z-index","9999")},m(o,n){G(o,e,n)},d(o){o&&a(e)}}}function ao(l){let e,t,o,n,i="Cancelar",c,u,_="REQUERIMIENTOS DE RUTA",I,b,p,m,h,k,C,O="Confirmar",P,M,x,j;function W(E,w){return E[15]?oo:no}let D=W(l)(l),U=l[14]&&io(l),S=l[12]&&At();return{c(){e=f("ion-header"),t=f("ion-toolbar"),o=f("ion-buttons"),n=f("ion-button"),n.textContent=i,c=N(),u=f("ion-title"),u.textContent=_,I=N(),b=f("ion-content"),p=f("ion-list"),D.c(),m=N(),U&&U.c(),h=N(),k=f("ion-footer"),C=f("ion-button"),C.textContent=O,P=N(),S&&S.c(),M=De(),this.h()},l(E){e=d(E,"ION-HEADER",{translucent:!0});var w=v(e);t=d(w,"ION-TOOLBAR",{});var R=v(t);o=d(R,"ION-BUTTONS",{slot:!0});var A=v(o);n=d(A,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),se(n)!=="svelte-1yhpw6u"&&(n.textContent=i),A.forEach(a),c=T(R),u=d(R,"ION-TITLE",{"data-svelte-h":!0}),se(u)!=="svelte-19bar5p"&&(u.textContent=_),R.forEach(a),w.forEach(a),I=T(E),b=d(E,"ION-CONTENT",{fullscreen:!0});var Q=v(b);p=d(Q,"ION-LIST",{});var Y=v(p);D.l(Y),m=T(Y),U&&U.l(Y),Y.forEach(a),Q.forEach(a),h=T(E),k=d(E,"ION-FOOTER",{});var me=v(k);C=d(me,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),se(C)!=="svelte-1k4i1so"&&(C.textContent=O),me.forEach(a),P=T(E),S&&S.l(E),M=De(),this.h()},h(){g(n,"color","medium"),g(o,"slot","start"),g(e,"translucent",""),g(b,"fullscreen",""),g(C,"fill","outline"),g(C,"color","tertiary"),g(C,"strong",""),s(C,"width","99%"),s(C,"height","auto")},m(E,w){G(E,e,w),r(e,t),r(t,o),r(o,n),r(t,c),r(t,u),G(E,I,w),G(E,b,w),r(b,p),D.m(p,null),r(p,m),U&&U.m(p,null),G(E,h,w),G(E,k,w),r(k,C),G(E,P,w),S&&S.m(E,w),G(E,M,w),x||(j=[he(n,"click",l[16]),he(C,"click",l[17])],x=!0)},p(E,w){D.p(E,w),E[14]&&U.p(E,w),E[12]?S||(S=At(),S.c(),S.m(M.parentNode,M)):S&&(S.d(1),S=null)},i:Ae,o:Ae,d(E){E&&(a(e),a(I),a(b),a(h),a(k),a(P),a(M)),D.d(),U&&U.d(),S&&S.d(E),x=!1,Pe(j)}}}function mt(l,e){if(typeof l=="object"&&l!==null||Array.isArray(l)){if(Array.isArray(l))return l.map(t=>mt(t,e)).flat();{const t=Object.keys(l);let o;return e=="id_checklist_event"?o=t.filter(i=>i.toLowerCase().includes("id_checklist_event")).map(i=>l[i]):e=="mandatory"?o=t.filter(i=>i.toLowerCase().includes("mandatory")).map(i=>l[i]):(console.error("Tipo de dato no reconocido."),o=!1),o}}else return console.error("Invalid input. Please provide a valid object or array."),[]}function so(){return new Promise((l,e)=>{if(!navigator.geolocation)return e("Geoloc no soportada");navigator.geolocation.getCurrentPosition(t=>l({lat:+t.coords.latitude.toFixed(6),lng:+t.coords.longitude.toFixed(6)}),t=>e(t),{enableHighAccuracy:!0,maximumAge:0,timeout:8e3})})}function co(l,e,t){let o=rt,n=document.querySelector("ion-modal");const i=n.componentProps.checklist,c=n.componentProps.driverId,u=n.componentProps.routeId,_=n.componentProps.isLast;let I,b,p,m,h=[],k=null,C={},O,P,M,x,j={},W=new Object,z=!1,D={},U={};tt(()=>{W=JSON.parse(localStorage.getItem("userSession")),_?console.log("Último checklist"):_t.update(L=>(L.mandatory=mt(i,"mandatory"),L.items=mt(i,"id_checklist_event"),L))});function S(L){t(11,j[L]=!0,j)}const E=async()=>{await(await xe.create({header:"Datos o checklist incompletos",message:"Carga la evidencia requerida y marca todas las casillas para confirmar",buttons:[{text:"Cerrar"}]})).present()},w=async(L,K)=>{await(await xe.create({header:L||"Error",message:K||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},R=async L=>{await(await xe.create({header:"Datos inválidos",message:L=="km"?"Llena correctamente el campo de kilometraje inicial":"Llena correctamente el campo de gasolina inicial",buttons:[{text:"Cerrar"}]})).present()},A=()=>{nt.dismiss(),c?We(`/drivers/${c}`):We("/drivers/me")},Q=async()=>{if(t(12,z=!0),_){var L=B(p,"km"),K=B(m,"gas");let te=new Object;te.km_final=L,te.gas_final=K,te.id_route=u,te.id_user_over=W.id_user,te.token=W.token,L&&K?(A(),qe(`${o}api/admin/checklist/add_evidence.php`,function(be){be.success?(t(12,z=!1),w("Datos capturados","El kilometraje y gasolina final fueron registrados correctamente, espere aprobación para finalizar ruta")):(t(12,z=!1),w("Error","Vuelva a intentar capturar los datos solicitados"))},te)):E()}else{var Z=B(I,"km"),oe=B(b,"gas");let te=null;try{te=await so()}catch(be){console.warn("GPS no disponible:",be)}_t.update(be=>{be.items;const Te=be.mandatory;if(be.items.filter((Le,we)=>be.mandatory[we]==="1").every(Le=>be.checkedIndices.includes(Le))&&Z&&oe){let Le=new FormData;Le=ee(Le),Le.append("km_inicial",Z),Le.append("gas_inicial",oe),Le.append("id_route",u),te&&(Le.append("lat",te.lat),Le.append("lng",te.lng));for(const we in D)if(D.hasOwnProperty(we)){const{img:Ge,img_id:Ze}=D[we];Le.append(`selectedImages[${we}][img]`,Ge),Le.append(`selectedImages[${we}][img_id]`,Ze)}fetch(`${o}api/admin/checklist/add_evidence.php`,{method:"POST",body:Le}).then(we=>we.json()).then(we=>{Te&&Te.some(Ge=>Ge==="1")?Ie(u,"checklist-pending"):Ie(u,"enroute")}).catch(we=>{console.error("Error fetching data:",we)}).finally(()=>{t(12,z=!1),A()})}else if(!Te&&Z&&oe){let Le=new FormData;te&&(Le.append("lat",te.lat),Le.append("lng",te.lng)),Le.append("km_inicial",Z),Le.append("gas_inicial",oe),Le=ee(Le),fetch(`${o}api/admin/checklist/add_evidence.php`,{method:"POST",body:Le}).then(we=>we.json()).then(we=>{Ie(u,"enroute")}).catch(we=>{console.error("Error fetching data:",we)}).finally(()=>{t(12,z=!1),A()})}else E();return be})}le()},Y=async(L,K)=>{S(K);const oe=L.target.files[0],te=await me(oe);if(te){let be=new FormData;be.append("fileToUpload",te),be=ee(be);try{const Te=await fetch(`${o}api/admin/manager/upload_img_driver.php`,{method:"POST",body:be});if(Te.ok){const ye=await Te.json();D={...D,[K]:{img:ye.img,img_id:ye.img_id}},t(13,U={...U,[K]:ye.filename}),ve(K),t(6,C[K].checked=!0,C),t(11,j[K]=!1,j)}else console.error("File upload failed:",Te.statusText)}catch(Te){console.error("Error during file upload:",Te)}}},me=async L=>new Promise(K=>{const Z=new Image;Z.src=URL.createObjectURL(L),Z.onload=()=>{const oe=document.createElement("canvas"),te=oe.getContext("2d"),be=800,Te=600;let ye=Z.width,Se=Z.height;ye>be&&(Se*=be/ye,ye=be),Se>Te&&(ye*=Te/Se,Se=Te),oe.width=ye,oe.height=Se,te.drawImage(Z,0,0,ye,Se),oe.toBlob(Le=>{K(Le),URL.revokeObjectURL(Z.src),te.clearRect(0,0,oe.width,oe.height)},"image/jpeg",.7)}}),ve=L=>{_t.update(K=>(K.checkedIndices.indexOf(L)===-1?K.checkedIndices.push(L):console.error(`ID ${L} is already checked.`),K.items.forEach(oe=>{oe.id_checklist_event===L&&(oe.checked=!0)}),K))};function Ie(L,K){let Z=new FormData;Z.append("id_route",L),Z.append("status",K),Z=ee(Z),fetch(`${o}api/admin/route/change_status.php`,{method:"POST",body:Z}).then(oe=>oe.json()).then(oe=>{}).catch(oe=>{console.error("Error fetching data:",oe)})}function B(L,K){return/^\d+$/.test(L)?parseInt(L,10):(R(K),null)}function ce(L,K){ue(K),n.componentProps.data_type=K,Fe("modal-gas-km",to,{r:K}).then(()=>{$e.subscribe(Z=>{pe(Z,K)})})}function ue(L){gn.update(K=>({...K,flag:[L]}))}function pe(L,K){t(0,I=L.km_inicial?L.km_inicial:null),t(1,b=L.gas_inicial?L.gas_inicial:null),t(2,p=L.km_final?L.km_final:null),t(3,m=L.gas_final?L.gas_final:null),K=="km_inicial"&&O&&t(7,O.checked=!0,O),K=="gas_inicial"&&P&&t(8,P.checked=!0,P),K=="km_final"&&M&&t(9,M.checked=!0,M),K=="gas_final"&&x&&t(10,x.checked=!0,x)}function le(){$e.set({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]})}function ee(L){return L.append("token",W.token),L.append("id_user_over",W.id_user),L}const fe=[[]];function de(){h=ot(fe[0],this.__value,this.checked),t(4,h)}function re(L){Re[L?"unshift":"push"](()=>{M=L,t(9,M)})}const $=L=>ce(L,"km_final");function ke(){h=ot(fe[0],this.__value,this.checked),t(4,h)}function ge(L){Re[L?"unshift":"push"](()=>{x=L,t(10,x)})}const Ee=L=>ce(L,"gas_final");function _e(){h=ot(fe[0],this.__value,this.checked),t(4,h)}function ae(L){Re[L?"unshift":"push"](()=>{O=L,t(7,O)})}const J=L=>ce(L,"km_inicial");function X(L){Re[L?"unshift":"push"](()=>{P=L,t(8,P)})}function q(){h=ot(fe[0],this.__value,this.checked),t(4,h)}const ie=L=>ce(L,"gas_inicial");function Ce(){h=ot(fe[0],this.__value,this.checked),t(4,h)}function ne(L,K){Re[L?"unshift":"push"](()=>{C[K.id_checklist_event]=L,t(6,C)})}const y=L=>ve(L.id_checklist_event);function V(L){Re[L?"unshift":"push"](()=>{k=L,t(5,k)})}return[I,b,p,m,h,k,C,O,P,M,x,j,z,U,i,_,A,Q,Y,ve,ce,de,fe,re,$,ke,ge,Ee,_e,ae,J,X,q,ie,Ce,ne,y,V,(L,K)=>Y(K,L.id_checklist_event)]}class bn extends Ye{constructor(e){super(),Qe(this,e,co,ao,Je,{},null,[-1,-1])}}function Mt(l,e,t){const o=l.slice();return o[52]=e[t],o[54]=t,o}function uo(l){let e,t,o,n,i;return{c(){e=f("ion-buttons"),t=f("ion-button"),o=Oe("Confirmar"),this.h()},l(c){e=d(c,"ION-BUTTONS",{slot:!0});var u=v(e);t=d(u,"ION-BUTTON",{strong:!0,disabled:!0});var _=v(t);o=Ne(_,"Confirmar"),_.forEach(a),u.forEach(a),this.h()},h(){g(t,"strong",""),g(t,"disabled",l[9].status=="completed"),g(e,"slot","end")},m(c,u){G(c,e,u),r(e,t),r(t,o),n||(i=he(t,"click",l[21]),n=!0)},p:Ae,d(c){c&&a(e),n=!1,i()}}}function fo(l){let e,t,o,n,i,c="Empresa",u,_,I=l[9].enterprise_name+"",b;return{c(){e=f("ion-item"),t=f("ion-icon"),o=N(),n=f("ion-label"),i=f("p"),i.textContent=c,u=N(),_=f("h2"),b=Oe(I),this.h()},l(p){e=d(p,"ION-ITEM",{});var m=v(e);t=d(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(m),n=d(m,"ION-LABEL",{});var h=v(n);i=d(h,"P",{"data-svelte-h":!0}),se(i)!=="svelte-6noid3"&&(i.textContent=c),u=T(h),_=d(h,"H2",{});var k=v(_);b=Ne(k,I),k.forEach(a),h.forEach(a),m.forEach(a),this.h()},h(){g(t,"icon",vn),g(t,"slot","start")},m(p,m){G(p,e,m),r(e,t),r(e,o),r(e,n),r(n,i),r(n,u),r(n,_),r(_,b)},p:Ae,d(p){p&&a(e)}}}function _o(l){let e,t,o,n,i,c="Negocio",u,_,I=l[9].client_name+"",b;return{c(){e=f("ion-item"),t=f("ion-icon"),o=N(),n=f("ion-label"),i=f("p"),i.textContent=c,u=N(),_=f("h2"),b=Oe(I),this.h()},l(p){e=d(p,"ION-ITEM",{});var m=v(e);t=d(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(m),n=d(m,"ION-LABEL",{});var h=v(n);i=d(h,"P",{"data-svelte-h":!0}),se(i)!=="svelte-57b1dg"&&(i.textContent=c),u=T(h),_=d(h,"H2",{});var k=v(_);b=Ne(k,I),k.forEach(a),h.forEach(a),m.forEach(a),this.h()},h(){g(t,"icon",vn),g(t,"slot","start")},m(p,m){G(p,e,m),r(e,t),r(e,o),r(e,n),r(n,i),r(n,u),r(n,_),r(_,b)},p:Ae,d(p){p&&a(e)}}}function ho(l){let e,t,o,n,i,c="Teléfono de Negocio",u,_,I=l[9].client_phone+"",b;return{c(){e=f("ion-item"),t=f("ion-icon"),o=N(),n=f("ion-label"),i=f("p"),i.textContent=c,u=N(),_=f("h2"),b=Oe(I),this.h()},l(p){e=d(p,"ION-ITEM",{href:!0});var m=v(e);t=d(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(m),n=d(m,"ION-LABEL",{class:!0});var h=v(n);i=d(h,"P",{"data-svelte-h":!0}),se(i)!=="svelte-1u5l7fz"&&(i.textContent=c),u=T(h),_=d(h,"H2",{});var k=v(_);b=Ne(k,I),k.forEach(a),h.forEach(a),m.forEach(a),this.h()},h(){g(t,"icon",An),g(t,"slot","start"),g(n,"class","ion-text-wrap"),g(e,"href","tel:"+l[9].client_phone)},m(p,m){G(p,e,m),r(e,t),r(e,o),r(e,n),r(n,i),r(n,u),r(n,_),r(_,b)},p:Ae,d(p){p&&a(e)}}}function po(l){let e,t,o,n,i,c="Domicilio Alternativo",u,_,I=l[9].line2+"",b,p,m;return{c(){e=f("ion-item"),t=f("ion-icon"),o=N(),n=f("ion-label"),i=f("p"),i.textContent=c,u=N(),_=f("h2"),b=Oe(I),p=N(),m=f("ion-icon"),this.h()},l(h){e=d(h,"ION-ITEM",{href:!0});var k=v(e);t=d(k,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(k),n=d(k,"ION-LABEL",{class:!0});var C=v(n);i=d(C,"P",{"data-svelte-h":!0}),se(i)!=="svelte-1ub9uzw"&&(i.textContent=c),u=T(C),_=d(C,"H2",{});var O=v(_);b=Ne(O,I),O.forEach(a),C.forEach(a),p=T(k),m=d(k,"ION-ICON",{icon:!0,slot:!0}),v(m).forEach(a),k.forEach(a),this.h()},h(){g(t,"icon",Ot),g(t,"slot","start"),g(n,"class","ion-text-wrap"),g(m,"icon",je),g(m,"slot","end"),g(e,"href","https://www.google.com/maps/searhc/?api=1&query="+l[9].line2)},m(h,k){G(h,e,k),r(e,t),r(e,o),r(e,n),r(n,i),r(n,u),r(n,_),r(_,b),r(e,p),r(e,m)},p:Ae,d(h){h&&a(e)}}}function mo(l){let e,t,o,n,i,c="Domicilio",u,_,I=l[9].line1+"",b,p,m,h,k=l[9].line2&&l[9].line2.trim().length,C,O=k&&vo(l);return{c(){e=f("ion-item"),t=f("ion-icon"),o=N(),n=f("ion-label"),i=f("p"),i.textContent=c,u=N(),_=f("h2"),b=Oe(I),p=N(),m=f("ion-icon"),h=N(),O&&O.c(),C=De(),this.h()},l(P){e=d(P,"ION-ITEM",{href:!0});var M=v(e);t=d(M,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(M),n=d(M,"ION-LABEL",{class:!0});var x=v(n);i=d(x,"P",{"data-svelte-h":!0}),se(i)!=="svelte-cbm7q1"&&(i.textContent=c),u=T(x),_=d(x,"H2",{});var j=v(_);b=Ne(j,I),j.forEach(a),x.forEach(a),p=T(M),m=d(M,"ION-ICON",{icon:!0,slot:!0}),v(m).forEach(a),M.forEach(a),h=T(P),O&&O.l(P),C=De(),this.h()},h(){g(t,"icon",Ot),g(t,"slot","start"),g(n,"class","ion-text-wrap"),g(m,"icon",je),g(m,"slot","end"),g(e,"href","https://www.google.com/maps/search/?api=1&query="+l[9].line1)},m(P,M){G(P,e,M),r(e,t),r(e,o),r(e,n),r(n,i),r(n,u),r(n,_),r(_,b),r(e,p),r(e,m),G(P,h,M),O&&O.m(P,M),G(P,C,M)},p(P,M){k&&O.p(P,M)},d(P){P&&(a(e),a(h),a(C)),O&&O.d(P)}}}function vo(l){let e,t,o,n,i,c="Domicilio Alternativo",u,_,I=l[9].line2+"",b,p,m;return{c(){e=f("ion-item"),t=f("ion-icon"),o=N(),n=f("ion-label"),i=f("p"),i.textContent=c,u=N(),_=f("h2"),b=Oe(I),p=N(),m=f("ion-icon"),this.h()},l(h){e=d(h,"ION-ITEM",{href:!0});var k=v(e);t=d(k,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(k),n=d(k,"ION-LABEL",{class:!0});var C=v(n);i=d(C,"P",{"data-svelte-h":!0}),se(i)!=="svelte-1ub9uzw"&&(i.textContent=c),u=T(C),_=d(C,"H2",{});var O=v(_);b=Ne(O,I),O.forEach(a),C.forEach(a),p=T(k),m=d(k,"ION-ICON",{icon:!0,slot:!0}),v(m).forEach(a),k.forEach(a),this.h()},h(){g(t,"icon",Ot),g(t,"slot","start"),g(n,"class","ion-text-wrap"),g(m,"icon",je),g(m,"slot","end"),g(e,"href","https://www.google.com/maps/search/?api=1&query="+l[9].line2)},m(h,k){G(h,e,k),r(e,t),r(e,o),r(e,n),r(n,i),r(n,u),r(n,_),r(_,b),r(e,p),r(e,m)},p:Ae,d(h){h&&a(e)}}}function go(l){let e,t,o,n,i,c="Contacto del Cliente",u,_,I,b,p=l[13]&&l[13]==="1"&&bo(l);return{c(){e=f("ion-item"),t=f("ion-icon"),o=N(),n=f("ion-label"),i=f("p"),i.textContent=c,u=N(),_=f("h2"),I=Oe(l[14]),b=N(),p&&p.c(),this.h()},l(m){e=d(m,"ION-ITEM",{});var h=v(e);t=d(h,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(h),n=d(h,"ION-LABEL",{class:!0});var k=v(n);i=d(k,"P",{"data-svelte-h":!0}),se(i)!=="svelte-1utsyb6"&&(i.textContent=c),u=T(k),_=d(k,"H2",{});var C=v(_);I=Ne(C,l[14]),C.forEach(a),k.forEach(a),b=T(h),p&&p.l(h),h.forEach(a),this.h()},h(){g(t,"icon",Mn),g(t,"slot","start"),g(n,"class","ion-text-wrap")},m(m,h){G(m,e,h),r(e,t),r(e,o),r(e,n),r(n,i),r(n,u),r(n,_),r(_,I),r(e,b),p&&p.m(e,null)},p(m,h){m[13]&&m[13]==="1"&&p.p(m,h)},d(m){m&&a(e),p&&p.d()}}}function bo(l){let e,t=`<ion-icon icon="${Pn}" slot="start"></ion-icon>
                        Notificar Cliente`,o,n;return{c(){e=f("ion-button"),e.innerHTML=t,this.h()},l(i){e=d(i,"ION-BUTTON",{fill:!0,style:!0,"data-svelte-h":!0}),se(e)!=="svelte-149vhpt"&&(e.innerHTML=t),this.h()},h(){g(e,"fill","outline"),s(e,"margin-left","16px")},m(i,c){G(i,e,c),o||(n=he(e,"click",l[22]),o=!0)},p:Ae,d(i){i&&a(e),o=!1,n()}}}function ko(l){let e,t,o,n,i,c="Notas de ubicación",u,_,I;return{c(){e=f("ion-item"),t=f("ion-icon"),o=N(),n=f("ion-label"),i=f("p"),i.textContent=c,u=N(),_=f("h2"),I=Oe(l[15]),this.h()},l(b){e=d(b,"ION-ITEM",{});var p=v(e);t=d(p,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(p),n=d(p,"ION-LABEL",{class:!0});var m=v(n);i=d(m,"P",{"data-svelte-h":!0}),se(i)!=="svelte-nhm2ft"&&(i.textContent=c),u=T(m),_=d(m,"H2",{});var h=v(_);I=Ne(h,l[15]),h.forEach(a),m.forEach(a),p.forEach(a),this.h()},h(){g(t,"icon",hn),g(t,"slot","start"),g(n,"class","ion-text-wrap")},m(b,p){G(b,e,p),r(e,t),r(e,o),r(e,n),r(n,i),r(n,u),r(n,_),r(_,I)},p:Ae,d(b){b&&a(e)}}}function Eo(l){let e,t,o,n,i,c="Horarios",u,_,I=l[9].schedule+"",b;return{c(){e=f("ion-item"),t=f("ion-icon"),o=N(),n=f("ion-label"),i=f("p"),i.textContent=c,u=N(),_=f("h2"),b=Oe(I),this.h()},l(p){e=d(p,"ION-ITEM",{});var m=v(e);t=d(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(m),n=d(m,"ION-LABEL",{});var h=v(n);i=d(h,"P",{"data-svelte-h":!0}),se(i)!=="svelte-11q7hm5"&&(i.textContent=c),u=T(h),_=d(h,"H2",{});var k=v(_);b=Ne(k,I),k.forEach(a),h.forEach(a),m.forEach(a),this.h()},h(){g(t,"icon",Sn),g(t,"slot","start")},m(p,m){G(p,e,m),r(e,t),r(e,o),r(e,n),r(n,i),r(n,u),r(n,_),r(_,b)},p:Ae,d(p){p&&a(e)}}}function Io(l){let e,t,o,n,i,c="Notas del operador",u,_,I=l[9].driver_comments+"",b;return{c(){e=f("ion-item"),t=f("ion-icon"),o=N(),n=f("ion-label"),i=f("p"),i.textContent=c,u=N(),_=f("h2"),b=Oe(I),this.h()},l(p){e=d(p,"ION-ITEM",{});var m=v(e);t=d(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(m),n=d(m,"ION-LABEL",{});var h=v(n);i=d(h,"P",{"data-svelte-h":!0}),se(i)!=="svelte-1yk9qp4"&&(i.textContent=c),u=T(h),_=d(h,"H2",{});var k=v(_);b=Ne(k,I),k.forEach(a),h.forEach(a),m.forEach(a),this.h()},h(){g(t,"icon",pn),g(t,"slot","start")},m(p,m){G(p,e,m),r(e,t),r(e,o),r(e,n),r(n,i),r(n,u),r(n,_),r(_,b)},p:Ae,d(p){p&&a(e)}}}function Oo(l){let e,t=l[9].logistic_comments!="<br>"&&No(l);return{c(){t&&t.c(),e=De()},l(o){t&&t.l(o),e=De()},m(o,n){t&&t.m(o,n),G(o,e,n)},p(o,n){o[9].logistic_comments!="<br>"&&t.p(o,n)},d(o){o&&a(e),t&&t.d(o)}}}function No(l){let e,t,o,n,i,c="Comentarios logísticos",u,_,I=l[9].logistic_comments+"",b;return{c(){e=f("ion-item"),t=f("ion-icon"),o=N(),n=f("ion-label"),i=f("p"),i.textContent=c,u=N(),_=f("h2"),b=Oe(I),this.h()},l(p){e=d(p,"ION-ITEM",{});var m=v(e);t=d(m,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(m),n=d(m,"ION-LABEL",{class:!0});var h=v(n);i=d(h,"P",{"data-svelte-h":!0}),se(i)!=="svelte-1iz85r6"&&(i.textContent=c),u=T(h),_=d(h,"H2",{});var k=v(_);b=Ne(k,I),k.forEach(a),h.forEach(a),m.forEach(a),this.h()},h(){g(t,"icon",hn),g(t,"slot","start"),g(n,"class","ion-text-wrap")},m(p,m){G(p,e,m),r(e,t),r(e,o),r(e,n),r(n,i),r(n,u),r(n,_),r(_,b)},p:Ae,d(p){p&&a(e)}}}function To(l){let e,t,o,n,i="<p>Etiqueta</p>",c,u,_=(l[9].tag?l[9].tag:"")+"",I;return{c(){e=f("ion-item"),t=f("ion-icon"),o=N(),n=f("ion-label"),n.innerHTML=i,c=N(),u=f("div"),I=Oe(_),this.h()},l(b){e=d(b,"ION-ITEM",{});var p=v(e);t=d(p,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(p),n=d(p,"ION-LABEL",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-50rr6d"&&(n.innerHTML=i),c=T(p),u=d(p,"DIV",{class:!0,style:!0});var m=v(u);I=Ne(m,_),m.forEach(a),p.forEach(a),this.h()},h(){g(t,"icon",Dn),g(t,"slot","start"),g(n,"class","ion-text-wrap"),F(u,"class","stop-tag"),s(u,"background-color",l[16]),s(u,"border","1px solid "+l[17]),s(u,"color",l[9].tag_color),s(u,"font-size","14px"),s(u,"text-align","center"),s(u,"align-content","center"),s(u,"border-radius","20px"),s(u,"white-space","normal"),s(u,"padding","4px 8px"),s(u,"width","auto",1),s(u,"display","inline-block")},m(b,p){G(b,e,p),r(e,t),r(e,o),r(e,n),r(e,c),r(e,u),r(u,I)},p:Ae,d(b){b&&a(e)}}}function yo(l){let e,t,o,n,i,c="Estado de entrega",u,_,I="Entregado",b,p,m="No Entregado",h,k,C="Entrega Parcial",O,P,M,x,j,W,z,D,U=l[4]===!0&&St(l),S=(l[5]===!0||l[5]===!1&&l[4]===!1)&&Dt(l);return{c(){e=f("ion-item"),t=f("ion-icon"),o=N(),n=f("ion-select"),i=f("div"),i.textContent=c,u=N(),_=f("ion-select-option"),_.textContent=I,b=N(),p=f("ion-select-option"),p.textContent=m,h=N(),k=f("ion-select-option"),k.textContent=C,O=N(),P=f("ion-item"),M=f("ion-icon"),x=N(),j=f("ion-textarea"),W=N(),z=f("section"),U&&U.c(),D=N(),S&&S.c(),this.h()},l(E){e=d(E,"ION-ITEM",{});var w=v(e);t=d(w,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=T(w),n=d(w,"ION-SELECT",{value:!0});var R=v(n);i=d(R,"DIV",{slot:!0,"data-svelte-h":!0}),se(i)!=="svelte-1635zca"&&(i.textContent=c),u=T(R),_=d(R,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),se(_)!=="svelte-1nhq8vd"&&(_.textContent=I),b=T(R),p=d(R,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),se(p)!=="svelte-dhd4r3"&&(p.textContent=m),h=T(R),k=d(R,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),se(k)!=="svelte-17taxwo"&&(k.textContent=C),R.forEach(a),w.forEach(a),O=T(E),P=d(E,"ION-ITEM",{});var A=v(P);M=d(A,"ION-ICON",{icon:!0,slot:!0}),v(M).forEach(a),x=T(A),j=d(A,"ION-TEXTAREA",{label:!0,placeholder:!0}),v(j).forEach(a),A.forEach(a),W=T(E),z=d(E,"SECTION",{style:!0});var Q=v(z);U&&U.l(Q),D=T(Q),S&&S.l(Q),Q.forEach(a),this.h()},h(){g(t,"icon",Bn),g(t,"slot","start"),F(i,"slot","label"),g(_,"value","delivered"),g(p,"value","notdelivered"),g(k,"value","partialdeliver"),g(n,"value",l[12]?l[12]:"delivered"),g(M,"icon",ft),g(M,"slot","start"),g(j,"label","Notas"),g(j,"placeholder","Escribe aquí..."),s(z,"display","flex"),s(z,"gap","8px"),s(z,"padding","16px 16px 6px")},m(E,w){G(E,e,w),r(e,t),r(e,o),r(e,n),r(n,i),r(n,u),r(n,_),r(n,b),r(n,p),r(n,h),r(n,k),l[29](n),G(E,O,w),G(E,P,w),r(P,M),r(P,x),r(P,j),l[30](j),G(E,W,w),G(E,z,w),U&&U.m(z,null),r(z,D),S&&S.m(z,null)},p(E,w){E[4]===!0?U?U.p(E,w):(U=St(E),U.c(),U.m(z,D)):U&&(U.d(1),U=null),E[5]===!0||E[5]===!1&&E[4]===!1?S?S.p(E,w):(S=Dt(E),S.c(),S.m(z,null)):S&&(S.d(1),S=null)},d(E){E&&(a(e),a(O),a(P),a(W),a(z)),l[29](null),l[30](null),U&&U.d(),S&&S.d()}}}function St(l){let e,t=`<ion-icon icon="${Un}" slot="start"></ion-icon>
                        Ingreso`,o,n;return{c(){e=f("ion-button"),e.innerHTML=t,this.h()},l(i){e=d(i,"ION-BUTTON",{id:!0,style:!0,"data-svelte-h":!0}),se(e)!=="svelte-izs0s1"&&(e.innerHTML=t),this.h()},h(){g(e,"id","checkInBtn"),s(e,"flex","1")},m(i,c){G(i,e,c),o||(n=he(e,"click",l[23]),o=!0)},p:Ae,d(i){i&&a(e),o=!1,n()}}}function Dt(l){let e,t,o,n,i,c;return{c(){e=f("ion-button"),t=f("ion-icon"),o=Oe(`
                        Salida`),this.h()},l(u){e=d(u,"ION-BUTTON",{id:!0,style:!0,disabled:!0});var _=v(e);t=d(_,"ION-ICON",{icon:!0,slot:!0}),v(t).forEach(a),o=Ne(_,`
                        Salida`),_.forEach(a),this.h()},h(){g(t,"icon",Hn),g(t,"slot","start"),g(e,"id","checkOutBtn"),s(e,"flex","1"),g(e,"disabled",n=l[5]===!1)},m(u,_){G(u,e,_),r(e,t),r(e,o),i||(c=he(e,"click",l[24]),i=!0)},p(u,_){_[0]&32&&n!==(n=u[5]===!1)&&g(e,"disabled",n)},d(u){u&&a(e),i=!1,c()}}}function Co(l){let e,t,o,n,i,c,u,_;return{c(){e=f("section"),t=f("ion-button"),o=f("label"),n=f("ion-icon"),i=Oe(`
                        Subir Evidencia
                        `),c=f("input"),this.h()},l(I){e=d(I,"SECTION",{style:!0});var b=v(e);t=d(b,"ION-BUTTON",{fill:!0,class:!0,style:!0,disabled:!0});var p=v(t);o=d(p,"LABEL",{for:!0,style:!0});var m=v(o);n=d(m,"ION-ICON",{icon:!0,slot:!0,style:!0}),v(n).forEach(a),i=Ne(m,`
                        Subir Evidencia
                        `),c=d(m,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),m.forEach(a),p.forEach(a),b.forEach(a),this.h()},h(){g(n,"icon",It),g(n,"slot","start"),s(n,"vertical-align","middle"),s(c,"display","none"),F(c,"id","eventEvidence"),F(c,"name","fileToUpload"),F(c,"type","file"),c.multiple=!0,F(c,"accept","image/*"),F(c,"capture","environment"),F(o,"for","eventEvidence"),s(o,"width","100%"),s(o,"height","100%"),g(t,"fill","outline"),g(t,"class","loadEvidence"),s(t,"flex","1"),s(t,"display","flex"),s(t,"align-items","center"),s(t,"gap","8px"),g(t,"disabled",l[9].status=="completed"),s(e,"display","flex"),s(e,"gap","8px"),s(e,"padding","0px 16px")},m(I,b){G(I,e,b),r(e,t),r(t,o),r(o,n),r(o,i),r(o,c),u||(_=[he(c,"change",l[18]),he(c,"click",l[19])],u=!0)},p:Ae,d(I){I&&a(e),u=!1,Pe(_)}}}function Bt(l){let e,t,o=Ue(l[2]),n=[];for(let i=0;i<o.length;i+=1)n[i]=Ht(Mt(l,o,i));return{c(){e=f("section"),t=f("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=d(i,"SECTION",{});var c=v(e);t=d(c,"DIV",{class:!0,style:!0});var u=v(t);for(let _=0;_<n.length;_+=1)n[_].l(u);u.forEach(a),c.forEach(a),this.h()},h(){F(t,"class","image-grid"),s(t,"display","grid"),s(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),s(t,"gap","10px"),s(t,"padding","0px 10px")},m(i,c){G(i,e,c),r(e,t);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null)},p(i,c){if(c[0]&167772164){o=Ue(i[2]);let u;for(u=0;u<o.length;u+=1){const _=Mt(i,o,u);n[u]?n[u].p(_,c):(n[u]=Ht(_),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=o.length}},d(i){i&&a(e),dt(n,i)}}}function Ht(l){let e,t,o,n,i,c=`<ion-icon icon="${Nt}"></ion-icon>`,u,_,I;function b(){return l[31](l[52])}function p(){return l[32](l[54])}return{c(){e=f("div"),t=f("ion-img"),n=N(),i=f("button"),i.innerHTML=c,u=N(),this.h()},l(m){e=d(m,"DIV",{class:!0,style:!0});var h=v(e);t=d(h,"ION-IMG",{src:!0,alt:!0,style:!0}),v(t).forEach(a),n=T(h),i=d(h,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),se(i)!=="svelte-euavut"&&(i.innerHTML=c),u=T(h),h.forEach(a),this.h()},h(){ze(t.src,o=l[52])||g(t,"src",o),g(t,"alt","Evidencia fotográfica"),s(t,"width","100%"),s(t,"height","100px"),s(t,"object-fit","cover"),s(t,"cursor","pointer"),s(t,"border","1px solid #ccc"),s(t,"border-radius","4px"),s(t,"margin-top","16px"),F(i,"class","remove-button"),s(i,"position","absolute"),s(i,"top","5px"),s(i,"right","5px"),s(i,"border","none"),s(i,"cursor","pointer"),s(i,"font-size","18px"),s(i,"background","white"),s(i,"border-radius","50%"),s(i,"padding","3px 4px 0px"),s(i,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),s(i,"color","#0000008f"),F(e,"class","image-container"),s(e,"position","relative")},m(m,h){G(m,e,h),r(e,t),r(e,n),r(e,i),r(e,u),_||(I=[he(t,"click",b),he(i,"click",p)],_=!0)},p(m,h){l=m,h[0]&4&&!ze(t.src,o=l[52])&&g(t,"src",o)},d(m){m&&a(e),_=!1,Pe(I)}}}function Pt(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(o){e=d(o,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),se(e)!=="svelte-1aosxw0"&&(e.innerHTML=t),this.h()},h(){F(e,"class","overlay"),s(e,"position","fixed"),s(e,"top","0"),s(e,"left","0"),s(e,"width","100vw"),s(e,"height","100vh"),s(e,"background","rgba(0, 0, 0, 0.5)"),s(e,"display","flex"),s(e,"align-items","center"),s(e,"justify-content","center"),s(e,"z-index","9999")},m(o,n){G(o,e,n)},d(o){o&&a(e)}}}function Ut(l){let e,t,o,n,i,c,u=`<ion-icon icon="${Tt}"></ion-icon>`,_,I;return{c(){e=f("div"),t=f("div"),o=f("ion-img"),i=N(),c=f("button"),c.innerHTML=u,this.h()},l(b){e=d(b,"DIV",{class:!0,style:!0});var p=v(e);t=d(p,"DIV",{class:!0,style:!0});var m=v(t);o=d(m,"ION-IMG",{src:!0,alt:!0,style:!0}),v(o).forEach(a),i=T(m),c=d(m,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),se(c)!=="svelte-183t4ti"&&(c.innerHTML=u),m.forEach(a),p.forEach(a),this.h()},h(){ze(o.src,n=l[7])||g(o,"src",n),g(o,"alt","Evidencia fotográfica"),s(o,"width","100%"),s(o,"height","auto"),F(c,"class","close-button"),s(c,"position","absolute"),s(c,"top","5px"),s(c,"right","5px"),s(c,"background","white"),s(c,"color","#444444d1"),s(c,"border","none"),s(c,"cursor","pointer"),s(c,"padding","2px 2px 0px 6px"),s(c,"border-radius","50%"),s(c,"font-size","20px"),F(t,"class","modal-content"),s(t,"position","relative"),s(t,"background","white"),s(t,"padding","20px"),s(t,"border-radius","8px"),s(t,"max-width","90vw"),s(t,"max-height","90vh"),s(t,"overflow","auto"),F(e,"class","modal-overlay"),s(e,"position","fixed"),s(e,"top","0"),s(e,"left","0"),s(e,"width","100vw"),s(e,"height","100vh"),s(e,"background","rgba(0, 0, 0, 0.8)"),s(e,"display","flex"),s(e,"justify-content","center"),s(e,"align-items","center"),s(e,"z-index","1000")},m(b,p){G(b,e,p),r(e,t),r(t,o),r(t,i),r(t,c),_||(I=[he(c,"click",l[26]),he(t,"click",kt(l[28])),he(e,"click",l[26])],_=!0)},p(b,p){p[0]&128&&!ze(o.src,n=b[7])&&g(o,"src",n)},d(b){b&&a(e),_=!1,Pe(I)}}}function wo(l){let e,t,o,n,i="Cerrar",c,u,_=l[9].title+"",I,b,p,m,h,k,C=l[9].client_phone&&l[9].client_phone.trim().length,O,P,M,x,j=l[9].schedule&&l[9].schedule.trim().length,W,z,D=l[9].logistic_comments&&l[9].logistic_comments.trim().length,U,S,E,w,R,A,Q,Y,me,ve=(!l[10]&&!l[11]||l[10]&&l[11])&&uo(l);function Ie(q,ie){return q[9].client_name!=null?_o:fo}let ce=Ie(l)(l),ue=C&&ho(l);function pe(q,ie){if(q[9].line1&&q[9].line1.trim().length)return mo;if(q[9].line2&&q[9].line2.trim().length)return po}let le=pe(l),ee=le&&le(l),fe=l[14]&&go(l),de=l[15]&&l[15]!=="<br>"&&ko(l),re=j&&Eo(l),$=l[9].driver_comments&&Io(l),ke=D&&Oo(l),ge=l[9].tag&&l[9].tag_color&&To(l),Ee=!l[11]&&yo(l),_e=(l[10]&&l[11]||!l[10]&&!l[11])&&Co(l),ae=l[1]&&Bt(l),J=l[3]&&Pt(),X=l[6]&&Ut(l);return{c(){e=f("ion-header"),t=f("ion-toolbar"),o=f("ion-buttons"),n=f("ion-button"),n.textContent=i,c=N(),u=f("ion-title"),I=Oe(_),b=N(),ve&&ve.c(),p=N(),m=f("ion-content"),h=f("ion-list"),ce.c(),k=N(),ue&&ue.c(),O=N(),ee&&ee.c(),P=N(),fe&&fe.c(),M=N(),de&&de.c(),x=N(),re&&re.c(),W=N(),$&&$.c(),z=N(),ke&&ke.c(),U=N(),ge&&ge.c(),S=N(),Ee&&Ee.c(),E=N(),_e&&_e.c(),w=N(),ae&&ae.c(),R=N(),J&&J.c(),A=N(),X&&X.c(),Q=De(),this.h()},l(q){e=d(q,"ION-HEADER",{translucent:!0});var ie=v(e);t=d(ie,"ION-TOOLBAR",{});var Ce=v(t);o=d(Ce,"ION-BUTTONS",{slot:!0});var ne=v(o);n=d(ne,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),se(n)!=="svelte-2ks32x"&&(n.textContent=i),ne.forEach(a),c=T(Ce),u=d(Ce,"ION-TITLE",{style:!0,title:!0});var y=v(u);I=Ne(y,_),y.forEach(a),b=T(Ce),ve&&ve.l(Ce),Ce.forEach(a),ie.forEach(a),p=T(q),m=d(q,"ION-CONTENT",{fullscreen:!0});var V=v(m);h=d(V,"ION-LIST",{});var H=v(h);ce.l(H),k=T(H),ue&&ue.l(H),O=T(H),ee&&ee.l(H),P=T(H),fe&&fe.l(H),M=T(H),de&&de.l(H),x=T(H),re&&re.l(H),W=T(H),$&&$.l(H),z=T(H),ke&&ke.l(H),U=T(H),ge&&ge.l(H),S=T(H),Ee&&Ee.l(H),E=T(H),_e&&_e.l(H),w=T(H),ae&&ae.l(H),H.forEach(a),V.forEach(a),R=T(q),J&&J.l(q),A=T(q),X&&X.l(q),Q=De(),this.h()},h(){g(n,"color","medium"),g(o,"slot","start"),s(u,"text-align","center"),g(u,"title",l[9].title),g(e,"translucent",""),g(m,"fullscreen","")},m(q,ie){G(q,e,ie),r(e,t),r(t,o),r(o,n),r(t,c),r(t,u),r(u,I),r(t,b),ve&&ve.m(t,null),G(q,p,ie),G(q,m,ie),r(m,h),ce.m(h,null),r(h,k),ue&&ue.m(h,null),r(h,O),ee&&ee.m(h,null),r(h,P),fe&&fe.m(h,null),r(h,M),de&&de.m(h,null),r(h,x),re&&re.m(h,null),r(h,W),$&&$.m(h,null),r(h,z),ke&&ke.m(h,null),r(h,U),ge&&ge.m(h,null),r(h,S),Ee&&Ee.m(h,null),r(h,E),_e&&_e.m(h,null),r(h,w),ae&&ae.m(h,null),G(q,R,ie),J&&J.m(q,ie),G(q,A,ie),X&&X.m(q,ie),G(q,Q,ie),Y||(me=he(n,"click",l[20]),Y=!0)},p(q,ie){(!q[10]&&!q[11]||q[10]&&q[11])&&ve.p(q,ie),ce.p(q,ie),C&&ue.p(q,ie),ee&&ee.p(q,ie),q[14]&&fe.p(q,ie),q[15]&&q[15]!=="<br>"&&de.p(q,ie),j&&re.p(q,ie),q[9].driver_comments&&$.p(q,ie),D&&ke.p(q,ie),q[9].tag&&q[9].tag_color&&ge.p(q,ie),q[11]||Ee.p(q,ie),(q[10]&&q[11]||!q[10]&&!q[11])&&_e.p(q,ie),q[1]?ae?ae.p(q,ie):(ae=Bt(q),ae.c(),ae.m(h,null)):ae&&(ae.d(1),ae=null),q[3]?J||(J=Pt(),J.c(),J.m(A.parentNode,A)):J&&(J.d(1),J=null),q[6]?X?X.p(q,ie):(X=Ut(q),X.c(),X.m(Q.parentNode,Q)):X&&(X.d(1),X=null)},i:Ae,o:Ae,d(q){q&&(a(e),a(p),a(m),a(R),a(A),a(Q)),ve&&ve.d(),ce.d(),ue&&ue.d(),ee&&ee.d(),fe&&fe.d(),de&&de.d(),re&&re.d(),$&&$.d(),ke&&ke.d(),ge&&ge.d(),Ee&&Ee.d(),_e&&_e.d(),ae&&ae.d(),J&&J.d(q),X&&X.d(q),Y=!1,me()}}}function Lo(l,e,t){let o=rt,n=document.querySelector("ion-modal"),i=n.componentProps.delivery,c=n.componentProps.isLast||!1,u=n.componentProps.flag||!1,_=i.driver_comments?i.driver_comments:"",I=i.deliver_status?i.deliver_status:"",b=i.img?i.img:"",p=i.img_id?i.img_id:"",m=b?Xe(b):new Array,h=p?Xe(p):new Array,k={latitude:null,longitude:null},C=i.stopsApproval,O=i.smsActive,P=!1,M=!0,x=!1,j=i.phone_notification,W=i.comments_ext,z=!1,D="",U=new Object,S="",E=i.tag_color?Ve(i.tag_color,.2):"",w=i.tag_color?Ve(i.tag_color,.3):"";tt(()=>{U=JSON.parse(localStorage.getItem("userSession")),R()});function R(){i.date_service?i.date_service&&!i.date_completed&&!i.service_time?(t(4,M=!1),t(5,x=!0)):i.date_service&&i.date_completed&&i.service_time&&(t(4,M=!1),t(5,x=!1)):(t(4,M=!0),t(5,x=!1))}const A=async(ne,y)=>{await(await xe.create({header:ne||"Error",message:y||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},Q=async(ne="",y="",V="",H=function(K={}){},L={})=>{await(await xe.create({header:ne||"Error",message:y||"Vuelva a intentar",buttons:[{text:"No",role:"cancel",handler:()=>{}},{text:"Sí",handler:()=>{t(3,P=!0),qe(V,function(Z={}){t(3,P=!1),H(Z)},L)}}]})).present()};async function Y(ne,y){await(await xe.create({header:"¿Cómo quieres notificar?",message:`Elige el medio para enviar mensaje a ${ne.title} (${y})`,buttons:[{text:"SMS",handler:()=>ee("sms",ne,y)},{text:"WhatsApp",handler:()=>ee("whatsapp",ne,y)}]})).present()}const me=async ne=>{if(m.length>=5){A("Límite de evidencias","Solo se permite subir 5 fotos por parada");return}if(u&&c&&m.length>=1){A("Límite de evidencias","Para el final de la ruta solo se permite subir 1 foto");return}const V=ne.target.files[0];if(V)try{t(3,P=!0);const H=await B(V);H&&qe(`${o}api/admin/manager/upload_img_driver.php`,function(L){L.success?(t(1,b=b?`${b},${L.img}`:L.img),p=p?`${p},${L.img_id}`:L.img_id,t(2,m=Xe(b)),h=Xe(p)):A("Carga fallida","Actualiza la página y vuelve a intentar. Si el problema persiste, contacta a soporte.")},{fileToUpload:H})}catch(H){console.error("Compression error:",H)}finally{t(3,P=!1)}};function ve(ne){var y=i.service_time;!y&&M&&!c&&!u&&(ne.preventDefault(),A("Registrar Ingreso","Antes de subir la evidencia registra el ingreso a la actual parada."))}function Ie(){var ne=u?i.date_completed:!1;if(!ne&&!M&&x&&!c&&!u){var y=new Object;y.id_event=i.id_event,y.type="checkout",y.id_user_over=U.id_user,y.token=U.token,Q("Registrar Salida","¿Completaste tu entrega?",o+"api/admin/route/record_check_date.php",function(V){V.minutes&&A("Tiempo por parada","Completaste la parada en "+V.minutes+" minutos.")},y)}}const B=async ne=>new Promise(y=>{const V=new Image;V.src=URL.createObjectURL(ne),V.onload=()=>{const H=document.createElement("canvas"),L=H.getContext("2d"),K=800,Z=600;let oe=V.width,te=V.height;oe>K&&(te*=K/oe,oe=K),te>Z&&(oe*=Z/te,te=Z),H.width=oe,H.height=te,L.drawImage(V,0,0,oe,te),H.toBlob(be=>{y(be),URL.revokeObjectURL(V.src),L.clearRect(0,0,H.width,H.height)},"image/jpeg",.7)}}),ce=()=>{n.dismiss({data:Date.now()})},ue=async()=>{try{if(t(3,P=!0),t(1,b=m.join(",")),p=h.join(","),Ie(),await le())if(S.value=="delivered"||S.value!=="delivered"&&(_.value||i.driver_comments)||u&&c){const y={id_route:i.id_route,...!u&&!c&&{id_event:i.id_event},...!u&&!c&&{comments:_.value},...!u&&!c&&{deliver_status:S.value},img:b,img_id:p,lat:k.latitude,lon:k.longitude,...C==="0"&&{approve:"0"},...c&&{isLast:!0},...u&&c&&{destiny:!0},id_user_over:U.id_user,token:U.token};y.img&&y.img_id||b?(t(3,P=!0),qe(`${o}api/admin/evidence/send_evidence.php`,function(V){if(V.success==!0){const H=y.id_route;ce(),c&&(pe("","",H,c),C=="0"&&_e(H,"completed")),t(3,P=!1)}else t(3,P=!1),A("Carga fallida","Actualiza la página y vuelve a intentar cargar la información!")},y)):A("Información incompleta","Cargar evidencia fotográfica faltante para completar parada.")}else A("Motivo de status de entrega","Favor de ingresar en notas el motivo por el que la entrega no fue entregada correctamente");else A("Ubicación faltante","Asegúrate darle permisos a Rutaflow para acceder a tu ubicación")}catch(ne){console.error("Error fetching data:",ne)}finally{t(3,P=!1)}},pe=(ne,y,V,H)=>{n.componentProps.routeId=V,n.componentProps.driverId=i.id_driver,Fe("modal-km-gas",bn,{checklist:ne,driverId:y,routeId:V,isLast:H}).then(L=>{})},le=async()=>navigator.geolocation?new Promise((ne,y)=>{navigator.geolocation.getCurrentPosition(V=>{k.latitude=V.coords.latitude,k.longitude=V.coords.longitude,ne(!0)},V=>{console.error("Error getting location:",V),ne(!1)})}):(console.error("Geolocation is not supported by your browser"),!1);async function ee(ne,y,V){const H={};if(ne==="sms"){H.id_user_over=U.id_user,H.token=U.token,H.client_phone=V,H.client_name=y.title,H.delivery_phone=y.client_phone,H.enterprise_name=y.enterprise_name,qe(`${o}api/admin/message_central/send_sms.php`,fe("SMS",y.title,V),H);return}try{var L=y.client_phone?`
Si deseas contactarnos, entra al siguiente link: https://wa.me/${y.client_phone}.`:".";H.text=`*Rutaflow*

El repartidor va en camino a tu domicilio ${y.title}${L}

Enviado por _${y.enterprise_name}_`,H.phone=V;const Z=await(await fetch(`${xn}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`${Gn}`},body:JSON.stringify(H)})).json();fe("WHATSAPP",y.title,V)(Z)}catch(K){console.error(K),A("WHATSAPP no enviado","Ocurrió un error de red.")}}function fe(ne,y,V){return H=>{H.success?A(`${ne} enviado`,`Se envió correctamente un ${ne} a ${y} con número ${V}.`):A(`${ne} no enviado`,`Hubo un error al enviar ${ne} a ${y} (${V}).`)}}function de(ne){ne.stopPropagation(),Y(i,j)}function re(){t(4,M=!1),t(5,x=!0),ke(i.id_event,"checkin")}function $(){t(5,x=!1),t(4,M=!1),ke(i.id_event,"checkout")}async function ke(ne,y){if(y){let V=new Object;V.type=y,V.id_event=ne,V.id_user_over=U.id_user,V.token=U.token;try{qe(`${o}api/admin/route/record_check_date.php`,function(H){H.minutes&&A("Tiempo por parada","Completaste la parada en "+H.minutes+" minutos.")},V)}catch(H){console.error("Error during file upload:",H)}finally{}}}const ge=ne=>{t(7,D=ne),t(6,z=!0)},Ee=()=>{t(6,z=!1),t(7,D="")};function _e(ne,y){let V=new Object;return V.id_route=ne,V.status=y,V.id_user_over=U.id_user,V.token=U.token,qe(`${o}api/admin/route/change_status.php`,function(){},V),""}function ae(ne=0){var y=mn(ne,m,h,b);t(2,m=y.files),h=y.img_ids,t(1,b=y.selectedImages)}function J(ne){Et.call(this,l,ne)}function X(ne){Re[ne?"unshift":"push"](()=>{S=ne,t(8,S)})}function q(ne){Re[ne?"unshift":"push"](()=>{_=ne,t(0,_)})}return[_,b,m,P,M,x,z,D,S,i,c,u,I,O,j,W,E,w,me,ve,ce,ue,de,re,$,ge,Ee,ae,J,X,q,ne=>ge(ne),ne=>ae(ne)]}class Rt extends Ye{constructor(e){super(),Qe(this,e,Lo,wo,Je,{},null,[-1,-1])}}function Vt(l,e,t){const o=l.slice();return o[32]=e[t],o[34]=t,o}function zt(l){let e,t,o=Ue(l[1]),n=[];for(let i=0;i<o.length;i+=1)n[i]=jt(Vt(l,o,i));return{c(){e=f("section"),t=f("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=d(i,"SECTION",{});var c=v(e);t=d(c,"DIV",{class:!0,style:!0});var u=v(t);for(let _=0;_<n.length;_+=1)n[_].l(u);u.forEach(a),c.forEach(a),this.h()},h(){F(t,"class","image-grid"),s(t,"display","grid"),s(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),s(t,"gap","10px"),s(t,"padding","0px 10px")},m(i,c){G(i,e,c),r(e,t);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null)},p(i,c){if(c[0]&32770){o=Ue(i[1]);let u;for(u=0;u<o.length;u+=1){const _=Vt(i,o,u);n[u]?n[u].p(_,c):(n[u]=jt(_),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=o.length}},d(i){i&&a(e),dt(n,i)}}}function jt(l){let e,t,o,n,i,c=`<ion-icon icon="${Nt}"></ion-icon>`,u,_,I;function b(){return l[22](l[32])}function p(){return l[23](l[34])}return{c(){e=f("div"),t=f("ion-img"),n=N(),i=f("button"),i.innerHTML=c,u=N(),this.h()},l(m){e=d(m,"DIV",{class:!0,style:!0});var h=v(e);t=d(h,"ION-IMG",{src:!0,alt:!0,style:!0}),v(t).forEach(a),n=T(h),i=d(h,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),se(i)!=="svelte-zguiov"&&(i.innerHTML=c),u=T(h),h.forEach(a),this.h()},h(){ze(t.src,o=l[32])||g(t,"src",o),g(t,"alt","Evidencia fotográfica"),s(t,"width","100%"),s(t,"height","100px"),s(t,"object-fit","cover"),s(t,"cursor","pointer"),s(t,"border","1px solid #ccc"),s(t,"border-radius","4px"),s(t,"margin-top","16px"),F(i,"class","remove-button"),s(i,"position","absolute"),s(i,"top","5px"),s(i,"right","5px"),s(i,"border","none"),s(i,"cursor","pointer"),s(i,"font-size","18px"),s(i,"background","white"),s(i,"border-radius","50%"),s(i,"padding","3px 4px 0px"),s(i,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),s(i,"color","#0000008f"),F(e,"class","image-container"),s(e,"position","relative")},m(m,h){G(m,e,h),r(e,t),r(e,n),r(e,i),r(e,u),_||(I=[he(t,"click",b),he(i,"click",p)],_=!0)},p(m,h){l=m,h[0]&2&&!ze(t.src,o=l[32])&&g(t,"src",o)},d(m){m&&a(e),_=!1,Pe(I)}}}function qt(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(o){e=d(o,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),se(e)!=="svelte-h8s7r2"&&(e.innerHTML=t),this.h()},h(){F(e,"class","overlay"),s(e,"position","fixed"),s(e,"top","0"),s(e,"left","0"),s(e,"width","100vw"),s(e,"height","100vh"),s(e,"background","rgba(0, 0, 0, 0.5)"),s(e,"display","flex"),s(e,"align-items","center"),s(e,"justify-content","center"),s(e,"z-index","9999")},m(o,n){G(o,e,n)},d(o){o&&a(e)}}}function Ft(l){let e,t,o,n,i,c,u=`<ion-icon icon="${Tt}"></ion-icon>`,_,I;return{c(){e=f("div"),t=f("div"),o=f("ion-img"),i=N(),c=f("button"),c.innerHTML=u,this.h()},l(b){e=d(b,"DIV",{class:!0,style:!0});var p=v(e);t=d(p,"DIV",{class:!0,style:!0});var m=v(t);o=d(m,"ION-IMG",{src:!0,alt:!0,style:!0}),v(o).forEach(a),i=T(m),c=d(m,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),se(c)!=="svelte-g0qr0o"&&(c.innerHTML=u),m.forEach(a),p.forEach(a),this.h()},h(){ze(o.src,n=l[8])||g(o,"src",n),g(o,"alt","Evidencia fotográfica"),s(o,"width","100%"),s(o,"height","auto"),F(c,"class","close-button"),s(c,"position","absolute"),s(c,"top","5px"),s(c,"right","5px"),s(c,"background","white"),s(c,"color","#444444d1"),s(c,"border","none"),s(c,"cursor","pointer"),s(c,"padding","2px 2px 0px 6px"),s(c,"border-radius","50%"),s(c,"font-size","20px"),F(t,"class","modal-content"),s(t,"position","relative"),s(t,"background","white"),s(t,"padding","20px"),s(t,"border-radius","8px"),s(t,"max-width","90vw"),s(t,"max-height","90vh"),s(t,"overflow","auto"),F(e,"class","modal-overlay"),s(e,"position","fixed"),s(e,"top","0"),s(e,"left","0"),s(e,"width","100vw"),s(e,"height","100vh"),s(e,"background","rgba(0, 0, 0, 0.8)"),s(e,"display","flex"),s(e,"justify-content","center"),s(e,"align-items","center"),s(e,"z-index","1000")},m(b,p){G(b,e,p),r(e,t),r(t,o),r(t,i),r(t,c),_||(I=[he(c,"click",l[16]),he(t,"click",kt(l[17])),he(e,"click",l[16])],_=!0)},p(b,p){p[0]&256&&!ze(o.src,n=b[8])&&g(o,"src",n)},d(b){b&&a(e),_=!1,Pe(I)}}}function Ao(l){let e,t,o,n,i="Cancelar",c,u,_="AGREGAR GASTO",I,b,p,m="Confirmar",h,k,C,O,P,M,x,j,W,z,D,U,S,E,w,R,A,Q,Y='Tipo de pago <ion-text color="danger">(Obligatorio)</ion-text>',me,ve,Ie="Efectivo",B,ce,ue="Tarjeta",pe,le,ee="Transferencia",fe,de,re,$,ke,ge,Ee,_e,ae,J,X=`<ion-icon icon="${It}" slot="start"></ion-icon>
                        Subir Evidencia`,q,ie,Ce,ne,y,V,H,L,K=l[0]&&zt(l),Z=l[6]&&qt(),oe=l[7]&&Ft(l);return{c(){e=f("ion-header"),t=f("ion-toolbar"),o=f("ion-buttons"),n=f("ion-button"),n.textContent=i,c=N(),u=f("ion-title"),u.textContent=_,I=N(),b=f("ion-buttons"),p=f("ion-button"),p.textContent=m,h=N(),k=f("ion-content"),C=f("ion-list"),O=f("ion-item"),P=f("ion-icon"),M=N(),x=f("ion-input"),j=N(),W=f("ion-item"),z=f("ion-icon"),D=N(),U=f("ion-input"),S=N(),E=f("ion-item"),w=f("ion-icon"),R=N(),A=f("ion-select"),Q=f("div"),Q.innerHTML=Y,me=N(),ve=f("ion-select-option"),ve.textContent=Ie,B=N(),ce=f("ion-select-option"),ce.textContent=ue,pe=N(),le=f("ion-select-option"),le.textContent=ee,fe=N(),de=f("ion-item"),re=f("ion-icon"),$=N(),ke=f("ion-textarea"),ge=N(),Ee=f("section"),_e=f("label"),ae=f("ion-button"),J=f("label"),J.innerHTML=X,q=N(),ie=f("input"),Ce=N(),K&&K.c(),ne=N(),Z&&Z.c(),y=N(),oe&&oe.c(),V=De(),this.h()},l(te){e=d(te,"ION-HEADER",{translucent:!0});var be=v(e);t=d(be,"ION-TOOLBAR",{});var Te=v(t);o=d(Te,"ION-BUTTONS",{slot:!0});var ye=v(o);n=d(ye,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),se(n)!=="svelte-1f8rjcf"&&(n.textContent=i),ye.forEach(a),c=T(Te),u=d(Te,"ION-TITLE",{title:!0,"data-svelte-h":!0}),se(u)!=="svelte-efps2s"&&(u.textContent=_),I=T(Te),b=d(Te,"ION-BUTTONS",{slot:!0});var Se=v(b);p=d(Se,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),se(p)!=="svelte-k5zoz0"&&(p.textContent=m),Se.forEach(a),Te.forEach(a),be.forEach(a),h=T(te),k=d(te,"ION-CONTENT",{fullscreen:!0});var Le=v(k);C=d(Le,"ION-LIST",{});var we=v(C);O=d(we,"ION-ITEM",{});var Ge=v(O);P=d(Ge,"ION-ICON",{icon:!0,slot:!0}),v(P).forEach(a),M=T(Ge),x=d(Ge,"ION-INPUT",{label:!0,type:!0,placeholder:!0,value:!0}),v(x).forEach(a),Ge.forEach(a),j=T(we),W=d(we,"ION-ITEM",{});var Ze=v(W);z=d(Ze,"ION-ICON",{icon:!0,slot:!0}),v(z).forEach(a),D=T(Ze),U=d(Ze,"ION-INPUT",{label:!0,type:!0,value:!0}),v(U).forEach(a),Ze.forEach(a),S=T(we),E=d(we,"ION-ITEM",{});var at=v(E);w=d(at,"ION-ICON",{icon:!0,slot:!0}),v(w).forEach(a),R=T(at),A=d(at,"ION-SELECT",{placeholder:!0,value:!0});var Ke=v(A);Q=d(Ke,"DIV",{slot:!0,"data-svelte-h":!0}),se(Q)!=="svelte-wl764p"&&(Q.innerHTML=Y),me=T(Ke),ve=d(Ke,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),se(ve)!=="svelte-i9crym"&&(ve.textContent=Ie),B=T(Ke),ce=d(Ke,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),se(ce)!=="svelte-fx0z11"&&(ce.textContent=ue),pe=T(Ke),le=d(Ke,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),se(le)!=="svelte-1c24jf2"&&(le.textContent=ee),Ke.forEach(a),at.forEach(a),fe=T(we),de=d(we,"ION-ITEM",{});var st=v(de);re=d(st,"ION-ICON",{icon:!0,slot:!0}),v(re).forEach(a),$=T(st),ke=d(st,"ION-TEXTAREA",{label:!0,placeholder:!0}),v(ke).forEach(a),st.forEach(a),ge=T(we),Ee=d(we,"SECTION",{});var yt=v(Ee);_e=d(yt,"LABEL",{for:!0,style:!0});var Ct=v(_e);ae=d(Ct,"ION-BUTTON",{fill:!0,size:!0,class:!0,expand:!0});var ct=v(ae);J=d(ct,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),se(J)!=="svelte-1m9yw22"&&(J.innerHTML=X),q=T(ct),ie=d(ct,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),ct.forEach(a),Ct.forEach(a),yt.forEach(a),Ce=T(we),K&&K.l(we),we.forEach(a),Le.forEach(a),ne=T(te),Z&&Z.l(te),y=T(te),oe&&oe.l(te),V=De(),this.h()},h(){g(n,"color","medium"),g(o,"slot","start"),g(u,"title",""),g(p,"strong",""),g(b,"slot","end"),g(e,"translucent",""),g(P,"icon",pn),g(P,"slot","start"),g(x,"label","Concepto"),g(x,"type","text"),g(x,"placeholder","Escribe aquí..."),g(x,"value",l[9]?l[9]:""),g(z,"icon",ft),g(z,"slot","start"),g(U,"label","Monto $"),g(U,"type","number"),g(U,"value",l[10]?l[10]:""),g(w,"icon",Rn),g(w,"slot","start"),F(Q,"slot","label"),g(ve,"value","cash"),g(ce,"value","card"),g(le,"value","transfer"),g(A,"placeholder","Tipo de pago"),g(A,"value",l[11]?l[11]:""),g(re,"icon",ft),g(re,"slot","start"),g(ke,"label","Comentarios"),g(ke,"placeholder","Escribe aquí..."),F(J,"for","eventEvidence"),s(J,"width","100%"),s(J,"padding","8px"),s(ie,"display","none"),F(ie,"id","eventEvidence"),F(ie,"name","fileToUpload"),F(ie,"type","file"),F(ie,"accept","image/*"),F(ie,"capture","environment"),g(ae,"fill","outline"),g(ae,"size","small"),g(ae,"class","loadEvidence"),g(ae,"expand","block"),F(_e,"for","eventEvidence"),s(_e,"display","block"),s(_e,"width","100%"),g(k,"fullscreen","")},m(te,be){G(te,e,be),r(e,t),r(t,o),r(o,n),r(t,c),r(t,u),r(t,I),r(t,b),r(b,p),G(te,h,be),G(te,k,be),r(k,C),r(C,O),r(O,P),r(O,M),r(O,x),l[18](x),r(C,j),r(C,W),r(W,z),r(W,D),r(W,U),l[19](U),r(C,S),r(C,E),r(E,w),r(E,R),r(E,A),r(A,Q),r(A,me),r(A,ve),r(A,B),r(A,ce),r(A,pe),r(A,le),l[20](A),r(C,fe),r(C,de),r(de,re),r(de,$),r(de,ke),l[21](ke),r(C,ge),r(C,Ee),r(Ee,_e),r(_e,ae),r(ae,J),r(ae,q),r(ae,ie),r(C,Ce),K&&K.m(C,null),G(te,ne,be),Z&&Z.m(te,be),G(te,y,be),oe&&oe.m(te,be),G(te,V,be),H||(L=[he(n,"click",l[13]),he(p,"click",l[14]),he(ie,"change",l[12])],H=!0)},p(te,be){te[0]?K?K.p(te,be):(K=zt(te),K.c(),K.m(C,null)):K&&(K.d(1),K=null),te[6]?Z||(Z=qt(),Z.c(),Z.m(y.parentNode,y)):Z&&(Z.d(1),Z=null),te[7]?oe?oe.p(te,be):(oe=Ft(te),oe.c(),oe.m(V.parentNode,V)):oe&&(oe.d(1),oe=null)},i:Ae,o:Ae,d(te){te&&(a(e),a(h),a(k),a(ne),a(y),a(V)),l[18](null),l[19](null),l[20](null),l[21](null),K&&K.d(),Z&&Z.d(te),oe&&oe.d(te),H=!1,Pe(L)}}}function Mo(l,e,t){let o=rt,n=document.querySelector("ion-modal"),i=n.componentProps.routeId,c=n.componentProps.ex_concept,u=n.componentProps.ex_amount,_=n.componentProps.ex_type,I=n.componentProps.id_expense,b="",p=new Array,m="",h="",k=0,C="",O="",P=!1,M=new Object,x=!1,j="";tt(()=>{M=JSON.parse(localStorage.getItem("userSession"))});const W=async(B,ce)=>{await(await xe.create({header:B||"Error",message:ce||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},z=async B=>{t(6,P=!0);const ue=B.target.files[0],pe=await D(ue);if(pe){var le=new Object;le.fileToUpload=pe,le.id_user_over=M.id_user,le.token=M.token;try{qe(`${o}api/admin/manager/upload_img_driver.php`,function(ee){ee.success?(t(0,b=ee.img),t(1,p=Xe(b)),m=ee.img_id):W("Error","No se pudo subir la imagen"),t(6,P=!1)},le)}catch(ee){console.error("Error during file upload:",ee)}finally{t(6,P=!1)}}},D=async B=>new Promise(ce=>{const ue=new Image;ue.src=URL.createObjectURL(B),ue.onload=()=>{const pe=document.createElement("canvas"),le=pe.getContext("2d"),ee=800,fe=600;let de=ue.width,re=ue.height;de>ee&&(re*=ee/de,de=ee),re>fe&&(de*=fe/re,re=fe),pe.width=de,pe.height=re,le.drawImage(ue,0,0,de,re),pe.toBlob($=>{ce($),URL.revokeObjectURL(ue.src),le.clearRect(0,0,pe.width,pe.height)},"image/jpeg",.7)}}),U=()=>{nt.dismiss()},S=()=>{var B=new Object;B.id_route=i,B.comments=C.value,B.type=h.value,B.img=b,B.img_id=m,B.amount=k.value,B.concept=O.value,B.status="done",B.id_expense=I||"null",B.id_user_over=M.id_user,B.token=M.token,!m||!b||!k.value||!O.value?W("Datos incompletos","Llena los datos requeridos para completar el registro"):qe(`${o}api/admin/expenses/add_expense.php`,function(ce){U()},B)},E=B=>{t(8,j=B),t(7,x=!0)},w=()=>{t(7,x=!1),t(8,j="")};function R(B){Et.call(this,l,B)}function A(B){Re[B?"unshift":"push"](()=>{O=B,t(5,O)})}function Q(B){Re[B?"unshift":"push"](()=>{k=B,t(3,k)})}function Y(B){Re[B?"unshift":"push"](()=>{h=B,t(2,h)})}function me(B){Re[B?"unshift":"push"](()=>{C=B,t(4,C)})}return[b,p,h,k,C,O,P,x,j,c,u,_,z,U,S,E,w,R,A,Q,Y,me,B=>E(B),B=>removeFile(B)]}class vt extends Ye{constructor(e){super(),Qe(this,e,Mo,Ao,Je,{},null,[-1,-1])}}function xt(l,e,t){const o=l.slice();return o[32]=e[t],o[34]=t,o}function Gt(l,e,t){const o=l.slice();return o[35]=e[t],o}function Kt(l){let e,t,o,n,i,c,u=l[35].label+"",_,I,b,p;function m(){return l[18](l[35])}return{c(){e=f("div"),t=f("ion-button"),o=f("ion-icon"),i=N(),c=f("div"),_=Oe(u),I=N(),this.h()},l(h){e=d(h,"DIV",{class:!0});var k=v(e);t=d(k,"ION-BUTTON",{color:!0,fill:!0,size:!0});var C=v(t);o=d(C,"ION-ICON",{slot:!0,icon:!0}),v(o).forEach(a),C.forEach(a),i=T(k),c=d(k,"DIV",{class:!0,style:!0});var O=v(c);_=Ne(O,u),O.forEach(a),I=T(k),k.forEach(a),this.h()},h(){g(o,"slot","icon-only"),g(o,"icon",l[35].icon),g(t,"color",n=l[6]===l[35].id?"primary":"medium"),g(t,"fill","clear"),g(t,"size","small"),F(c,"class","motive-caption"),s(c,"font-size","11px"),s(c,"margin-top","2px"),s(c,"text-align","center"),s(c,"line-height","1.1"),F(e,"class","motive-button")},m(h,k){G(h,e,k),r(e,t),r(t,o),r(e,i),r(e,c),r(c,_),r(e,I),b||(p=he(t,"click",m),b=!0)},p(h,k){l=h,k[0]&64&&n!==(n=l[6]===l[35].id?"primary":"medium")&&g(t,"color",n)},d(h){h&&a(e),b=!1,p()}}}function Wt(l){let e;return{c(){e=f("div"),this.h()},l(t){e=d(t,"DIV",{id:!0,style:!0}),v(e).forEach(a),this.h()},h(){F(e,"id","motive-map"),s(e,"height","220px"),s(e,"margin","12px 16px"),s(e,"border-radius","8px")},m(t,o){G(t,e,o),l[19](e)},p:Ae,d(t){t&&a(e),l[19](null)}}}function Xt(l){let e,t,o=Ue(l[1]),n=[];for(let i=0;i<o.length;i+=1)n[i]=Jt(xt(l,o,i));return{c(){e=f("section"),t=f("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=d(i,"SECTION",{});var c=v(e);t=d(c,"DIV",{class:!0,style:!0});var u=v(t);for(let _=0;_<n.length;_+=1)n[_].l(u);u.forEach(a),c.forEach(a),this.h()},h(){F(t,"class","image-grid"),s(t,"display","grid"),s(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),s(t,"gap","10px"),s(t,"padding","0px 10px")},m(i,c){G(i,e,c),r(e,t);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null)},p(i,c){if(c[0]&73730){o=Ue(i[1]);let u;for(u=0;u<o.length;u+=1){const _=xt(i,o,u);n[u]?n[u].p(_,c):(n[u]=Jt(_),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=o.length}},d(i){i&&a(e),dt(n,i)}}}function Jt(l){let e,t,o,n,i,c=`<ion-icon icon="${Nt}"></ion-icon>`,u,_,I;function b(){return l[21](l[32])}function p(){return l[22](l[34])}return{c(){e=f("div"),t=f("ion-img"),n=N(),i=f("button"),i.innerHTML=c,u=N(),this.h()},l(m){e=d(m,"DIV",{class:!0,style:!0});var h=v(e);t=d(h,"ION-IMG",{src:!0,alt:!0,style:!0}),v(t).forEach(a),n=T(h),i=d(h,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),se(i)!=="svelte-ulzohx"&&(i.innerHTML=c),u=T(h),h.forEach(a),this.h()},h(){ze(t.src,o=l[32])||g(t,"src",o),g(t,"alt","Evidencia fotográfica"),s(t,"width","100%"),s(t,"height","100px"),s(t,"object-fit","cover"),s(t,"cursor","pointer"),s(t,"border","1px solid #ccc"),s(t,"border-radius","4px"),s(t,"margin-top","16px"),F(i,"class","remove-button"),s(i,"position","absolute"),s(i,"top","5px"),s(i,"right","5px"),s(i,"border","none"),s(i,"cursor","pointer"),s(i,"font-size","18px"),s(i,"background","white"),s(i,"border-radius","50%"),s(i,"padding","3px 4px 0px"),s(i,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),s(i,"color","#0000008f"),F(e,"class","image-container"),s(e,"position","relative")},m(m,h){G(m,e,h),r(e,t),r(e,n),r(e,i),r(e,u),_||(I=[he(t,"click",b),he(i,"click",p)],_=!0)},p(m,h){l=m,h[0]&2&&!ze(t.src,o=l[32])&&g(t,"src",o)},d(m){m&&a(e),_=!1,Pe(I)}}}function Yt(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(o){e=d(o,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),se(e)!=="svelte-1mz0rrk"&&(e.innerHTML=t),this.h()},h(){F(e,"class","overlay"),s(e,"position","fixed"),s(e,"top","0"),s(e,"left","0"),s(e,"width","100vw"),s(e,"height","100vh"),s(e,"background","rgba(0, 0, 0, 0.5)"),s(e,"display","flex"),s(e,"align-items","center"),s(e,"justify-content","center"),s(e,"z-index","9999")},m(o,n){G(o,e,n)},d(o){o&&a(e)}}}function Qt(l){let e,t,o,n,i,c,u=`<ion-icon icon="${Tt}"></ion-icon>`,_,I;return{c(){e=f("div"),t=f("div"),o=f("ion-img"),i=N(),c=f("button"),c.innerHTML=u,this.h()},l(b){e=d(b,"DIV",{class:!0,style:!0});var p=v(e);t=d(p,"DIV",{class:!0,style:!0});var m=v(t);o=d(m,"ION-IMG",{src:!0,alt:!0,style:!0}),v(o).forEach(a),i=T(m),c=d(m,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),se(c)!=="svelte-1fdruw6"&&(c.innerHTML=u),m.forEach(a),p.forEach(a),this.h()},h(){ze(o.src,n=l[5])||g(o,"src",n),g(o,"alt","Evidencia fotográfica"),s(o,"width","100%"),s(o,"height","auto"),F(c,"class","close-button"),s(c,"position","absolute"),s(c,"top","5px"),s(c,"right","5px"),s(c,"background","white"),s(c,"color","#444444d1"),s(c,"border","none"),s(c,"cursor","pointer"),s(c,"padding","2px 2px 0px 6px"),s(c,"border-radius","50%"),s(c,"font-size","20px"),F(t,"class","modal-content"),s(t,"position","relative"),s(t,"background","white"),s(t,"padding","20px"),s(t,"border-radius","8px"),s(t,"max-width","90vw"),s(t,"max-height","90vh"),s(t,"overflow","auto"),F(e,"class","modal-overlay"),s(e,"position","fixed"),s(e,"top","0"),s(e,"left","0"),s(e,"width","100vw"),s(e,"height","100vh"),s(e,"background","rgba(0, 0, 0, 0.8)"),s(e,"display","flex"),s(e,"justify-content","center"),s(e,"align-items","center"),s(e,"z-index","1000")},m(b,p){G(b,e,p),r(e,t),r(t,o),r(t,i),r(t,c),_||(I=[he(c,"click",l[14]),he(t,"click",kt(l[17])),he(e,"click",l[14])],_=!0)},p(b,p){p[0]&32&&!ze(o.src,n=b[5])&&g(o,"src",n)},d(b){b&&a(e),_=!1,Pe(I)}}}function So(l){let e,t,o,n,i="Cancelar",c,u,_="AGREGAR INCIDENCIA",I,b,p,m="Confirmar",h,k,C,O,P,M,x,j,W,z,D,U,S,E,w,R,A=`<ion-icon icon="${It}" slot="start"></ion-icon>
            Subir Evidencia`,Q,Y,me,ve,Ie,B,ce,ue,pe=Ue(l[9]),le=[];for(let $=0;$<pe.length;$+=1)le[$]=Kt(Gt(l,pe,$));let ee=l[7].lat&&Wt(l),fe=l[0]&&Xt(l),de=l[3]&&Yt(),re=l[4]&&Qt(l);return{c(){e=f("ion-header"),t=f("ion-toolbar"),o=f("ion-buttons"),n=f("ion-button"),n.textContent=i,c=N(),u=f("ion-title"),u.textContent=_,I=N(),b=f("ion-buttons"),p=f("ion-button"),p.textContent=m,h=N(),k=f("ion-content"),C=f("ion-list"),O=f("ion-item"),P=f("div");for(let $=0;$<le.length;$+=1)le[$].c();M=N(),ee&&ee.c(),x=N(),j=f("ion-item"),W=f("ion-icon"),z=N(),D=f("ion-textarea"),U=N(),S=f("section"),E=f("label"),w=f("ion-button"),R=f("label"),R.innerHTML=A,Q=N(),Y=f("input"),me=N(),fe&&fe.c(),ve=N(),de&&de.c(),Ie=N(),re&&re.c(),B=De(),this.h()},l($){e=d($,"ION-HEADER",{translucent:!0});var ke=v(e);t=d(ke,"ION-TOOLBAR",{});var ge=v(t);o=d(ge,"ION-BUTTONS",{slot:!0});var Ee=v(o);n=d(Ee,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),se(n)!=="svelte-1f8rjcf"&&(n.textContent=i),Ee.forEach(a),c=T(ge),u=d(ge,"ION-TITLE",{title:!0,"data-svelte-h":!0}),se(u)!=="svelte-zr4yw3"&&(u.textContent=_),I=T(ge),b=d(ge,"ION-BUTTONS",{slot:!0});var _e=v(b);p=d(_e,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),se(p)!=="svelte-1afq5zm"&&(p.textContent=m),_e.forEach(a),ge.forEach(a),ke.forEach(a),h=T($),k=d($,"ION-CONTENT",{fullscreen:!0});var ae=v(k);C=d(ae,"ION-LIST",{});var J=v(C);O=d(J,"ION-ITEM",{lines:!0,class:!0,style:!0});var X=v(O);P=d(X,"DIV",{class:!0,style:!0});var q=v(P);for(let V=0;V<le.length;V+=1)le[V].l(q);q.forEach(a),X.forEach(a),M=T(J),ee&&ee.l(J),x=T(J),j=d(J,"ION-ITEM",{});var ie=v(j);W=d(ie,"ION-ICON",{icon:!0,slot:!0}),v(W).forEach(a),z=T(ie),D=d(ie,"ION-TEXTAREA",{label:!0,placeholder:!0}),v(D).forEach(a),ie.forEach(a),U=T(J),S=d(J,"SECTION",{});var Ce=v(S);E=d(Ce,"LABEL",{for:!0,style:!0});var ne=v(E);w=d(ne,"ION-BUTTON",{fill:!0,size:!0,class:!0,expand:!0});var y=v(w);R=d(y,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),se(R)!=="svelte-1tbnglg"&&(R.innerHTML=A),Q=T(y),Y=d(y,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),y.forEach(a),ne.forEach(a),Ce.forEach(a),me=T(J),fe&&fe.l(J),J.forEach(a),ae.forEach(a),ve=T($),de&&de.l($),Ie=T($),re&&re.l($),B=De(),this.h()},h(){g(n,"color","medium"),g(o,"slot","start"),g(u,"title",""),g(p,"strong",""),g(b,"slot","end"),g(e,"translucent",""),F(P,"class","motive-grid"),s(P,"display","flex"),s(P,"gap","8px"),s(P,"flex-wrap","wrap"),s(P,"justify-content","center"),s(P,"margin-top","6px"),g(O,"lines","none"),g(O,"class","motive-item"),s(O,"display","grid"),s(O,"justify-content","center"),s(O,"margin-bottom","15px"),g(W,"icon",ft),g(W,"slot","start"),g(D,"label","Comentarios"),g(D,"placeholder","Escribe aquí..."),F(R,"for","eventEvidence"),s(R,"width","100%"),s(R,"padding","8px"),s(Y,"display","none"),F(Y,"id","eventEvidence"),F(Y,"name","fileToUpload"),F(Y,"type","file"),F(Y,"accept","image/*"),F(Y,"capture","environment"),g(w,"fill","outline"),g(w,"size","small"),g(w,"class","loadEvidence"),g(w,"expand","block"),F(E,"for","eventEvidence"),s(E,"display","block"),s(E,"width","100%"),g(k,"fullscreen","")},m($,ke){G($,e,ke),r(e,t),r(t,o),r(o,n),r(t,c),r(t,u),r(t,I),r(t,b),r(b,p),G($,h,ke),G($,k,ke),r(k,C),r(C,O),r(O,P);for(let ge=0;ge<le.length;ge+=1)le[ge]&&le[ge].m(P,null);r(C,M),ee&&ee.m(C,null),r(C,x),r(C,j),r(j,W),r(j,z),r(j,D),l[20](D),r(C,U),r(C,S),r(S,E),r(E,w),r(w,R),r(w,Q),r(w,Y),r(C,me),fe&&fe.m(C,null),G($,ve,ke),de&&de.m($,ke),G($,Ie,ke),re&&re.m($,ke),G($,B,ke),ce||(ue=[he(n,"click",l[11]),he(p,"click",l[12]),he(Y,"change",l[10])],ce=!0)},p($,ke){if(ke[0]&33344){pe=Ue($[9]);let ge;for(ge=0;ge<pe.length;ge+=1){const Ee=Gt($,pe,ge);le[ge]?le[ge].p(Ee,ke):(le[ge]=Kt(Ee),le[ge].c(),le[ge].m(P,null))}for(;ge<le.length;ge+=1)le[ge].d(1);le.length=pe.length}$[7].lat?ee?ee.p($,ke):(ee=Wt($),ee.c(),ee.m(C,x)):ee&&(ee.d(1),ee=null),$[0]?fe?fe.p($,ke):(fe=Xt($),fe.c(),fe.m(C,null)):fe&&(fe.d(1),fe=null),$[3]?de||(de=Yt(),de.c(),de.m(Ie.parentNode,Ie)):de&&(de.d(1),de=null),$[4]?re?re.p($,ke):(re=Qt($),re.c(),re.m(B.parentNode,B)):re&&(re.d(1),re=null)},i:Ae,o:Ae,d($){$&&(a(e),a(h),a(k),a(ve),a(Ie),a(B)),dt(le,$),ee&&ee.d(),l[20](null),fe&&fe.d(),de&&de.d($),re&&re.d($),ce=!1,Pe(ue)}}}function Do(l,e,t){let o=rt,i=document.querySelector("ion-modal").componentProps.routeId,c="",u=c?Xe(c):new Array,_="",I=!1,b=new Object,p=!1,m="",h="",k={lat:null,lng:null},C,O,P;const M=[{id:"car_accident",icon:"/car-accident.svg",label:"Accidente"},{id:"hospital",icon:"/hospital.svg",label:"Hospital"},{id:"wc",icon:"/toilet.svg",label:"Baño"},{id:"restaurant",icon:"/restaurant.svg",label:"Restaurant"},{id:"parking",icon:"/parking.svg",label:"Parking"}];tt(()=>{b=JSON.parse(localStorage.getItem("userSession"))});const x=async(B,ce)=>{await(await xe.create({header:B||"Error",message:ce||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},j=async B=>{if(u.length>=5){x("Límite de evidencias","Solo se permite subir 5 fotos por parada");return}t(3,I=!0);const ue=B.target.files[0],pe=await W(ue);if(pe){var le=new Object;le.fileToUpload=pe,le.id_user_over=b.id_user,le.token=b.token;try{qe(`${o}api/admin/manager/upload_img_driver.php`,function(ee){ee.success?(t(0,c=c?`${c},${ee.img}`:ee.img),t(1,u=Xe(c))):x("Error","No se pudo subir la imagen"),t(3,I=!1)},le)}catch(ee){console.error("Error during file upload:",ee)}finally{t(3,I=!1)}}},W=async B=>new Promise(ce=>{const ue=new Image;ue.src=URL.createObjectURL(B),ue.onload=()=>{const pe=document.createElement("canvas"),le=pe.getContext("2d"),ee=800,fe=600;let de=ue.width,re=ue.height;de>ee&&(re*=ee/de,de=ee),re>fe&&(de*=fe/re,re=fe),pe.width=de,pe.height=re,le.drawImage(ue,0,0,de,re),pe.toBlob($=>{ce($),URL.revokeObjectURL(ue.src),le.clearRect(0,0,pe.width,pe.height)},"image/jpeg",.7)}}),z=()=>{nt.dismiss()},D=()=>{var B=new Object;t(0,c=u.join(",")),B.id_route=i,B.comments=_.value,B.lat=k.lat,B.lng=k.lng,B.type=h,B.img=c,B.id_user_over=b.id_user,B.token=b.token,!h||!c||!B.comments||!B.img?x("Datos incompletos","Llena los datos requeridos para completar el registro"):!B.lat||!B.lng?x("Ubicación no disponible","Por favor, asegúrate de que la ubicación está activada en tu dispositivo."):qe(`${o}api/admin/incidence/add_incidence.php`,function(ce){ce?x("Éxito","Incidencia registrada correctamente"):x("Error","No se pudo registrar la incidencia. Por favor, inténtalo de nuevo."),z()},B)},U=B=>{t(5,m=B),t(4,p=!0)},S=()=>{t(4,p=!1),t(5,m="")};async function E(B){t(6,h=B),t(3,I=!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(async ce=>{t(7,k.lat=ce.coords.latitude,k),t(7,k.lng=ce.coords.longitude,k),await w()},()=>console.log("Geolocalización denegada"))}async function w(){if(await _n(),!C)return;const{Map:B}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:ce}=await google.maps.importLibrary("marker");O?O.setCenter(k):O=new B(C,{zoom:15,center:k,mapId:"4504f8b37365c3d0"});const ue=M.find(ee=>ee.id===h);if(!ue)return;P&&P.setMap(null);const pe=document.createElement("div");pe.style.cssText=`
      display:flex;align-items:center;justify-content:center;
      width:38px;height:38px;border-radius:50%;
      background:#ffffff;border:2px solid #d13434;
      box-shadow:0 0 4px rgba(0,0,0,.3);
  `;const le=document.createElement("ion-icon");le.setAttribute("icon",ue.icon),le.style.cssText="font-size:24px;color:#d13434;",pe.appendChild(le),P=new ce({map:O,position:k,title:ue.label,content:pe}),t(3,I=!1)}function R(B=0){var ce=mn(B,u,[""],c);t(1,u=ce.files),t(0,c=ce.selectedImages)}function A(B){Et.call(this,l,B)}const Q=B=>E(B.id);function Y(B){Re[B?"unshift":"push"](()=>{C=B,t(8,C)})}function me(B){Re[B?"unshift":"push"](()=>{_=B,t(2,_)})}return[c,u,_,I,p,m,h,k,C,M,j,z,D,U,S,E,R,A,Q,Y,me,B=>U(B),B=>R(B)]}class Bo extends Ye{constructor(e){super(),Qe(this,e,Do,So,Je,{},null,[-1,-1])}}function Zt(l,e,t){const o=l.slice();return o[7]=e[t],o}function Ho(l){let e,t="Cargar gasto",o,n;function i(...c){return l[4](l[7],...c)}return{c(){e=f("ion-button"),e.textContent=t,this.h()},l(c){e=d(c,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),se(e)!=="svelte-175aelj"&&(e.textContent=t),this.h()},h(){g(e,"fill","outline"),g(e,"size","small"),g(e,"aria-selected","")},m(c,u){G(c,e,u),o||(n=he(e,"click",i),o=!0)},p(c,u){l=c},d(c){c&&a(e),o=!1,n()}}}function Po(l){let e,t="Gasto completado";return{c(){e=f("ion-button"),e.textContent=t,this.h()},l(o){e=d(o,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),se(e)!=="svelte-tlger7"&&(e.textContent=t),this.h()},h(){g(e,"fill","solid"),g(e,"size","small"),g(e,"aria-selected","")},m(o,n){G(o,e,n)},p:Ae,d(o){o&&a(e)}}}function $t(l,e){let t,o,n,i=e[7].concept+"",c,u,_;function I(m,h){return m[7].status=="done"?Po:Ho}let p=I(e)(e);return{key:l,first:null,c(){t=f("ion-item"),o=f("ion-label"),n=f("p"),c=Oe(i),u=N(),p.c(),_=N(),this.h()},l(m){t=d(m,"ION-ITEM",{});var h=v(t);o=d(h,"ION-LABEL",{style:!0});var k=v(o);n=d(k,"P",{style:!0});var C=v(n);c=Ne(C,i),C.forEach(a),k.forEach(a),u=T(h),p.l(h),_=T(h),h.forEach(a),this.h()},h(){s(n,"margin-left","10px"),s(o,"display","flex"),this.first=t},m(m,h){G(m,t,h),r(t,o),r(o,n),r(n,c),r(t,u),p.m(t,null),r(t,_)},p(m,h){e=m,p.p(e,h)},d(m){m&&a(t),p.d()}}}function Uo(l){let e,t,o,n,i=`<ion-icon style="font-size: 25px!important;" icon="${Vn}"></ion-icon>`,c,u,_="LISTA DE GASTOS",I,b,p,m=[],h=new Map,k,C,O,P="Cerrar",M,x,j=Ue(l[0]);const W=z=>z[7].id_expenses;for(let z=0;z<j.length;z+=1){let D=Zt(l,j,z),U=W(D);h.set(U,m[z]=$t(U,D))}return{c(){e=f("ion-header"),t=f("ion-toolbar"),o=f("ion-buttons"),n=f("ion-button"),n.innerHTML=i,c=N(),u=f("ion-title"),u.textContent=_,I=N(),b=f("ion-content"),p=f("ion-list");for(let z=0;z<m.length;z+=1)m[z].c();k=N(),C=f("ion-footer"),O=f("ion-button"),O.textContent=P,this.h()},l(z){e=d(z,"ION-HEADER",{translucent:!0});var D=v(e);t=d(D,"ION-TOOLBAR",{});var U=v(t);o=d(U,"ION-BUTTONS",{slot:!0});var S=v(o);n=d(S,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),se(n)!=="svelte-160xz3i"&&(n.innerHTML=i),S.forEach(a),c=T(U),u=d(U,"ION-TITLE",{"data-svelte-h":!0}),se(u)!=="svelte-1phn90x"&&(u.textContent=_),U.forEach(a),D.forEach(a),I=T(z),b=d(z,"ION-CONTENT",{fullscreen:!0});var E=v(b);p=d(E,"ION-LIST",{});var w=v(p);for(let A=0;A<m.length;A+=1)m[A].l(w);w.forEach(a),E.forEach(a),k=T(z),C=d(z,"ION-FOOTER",{});var R=v(C);O=d(R,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),se(O)!=="svelte-zv7v83"&&(O.textContent=P),R.forEach(a),this.h()},h(){g(n,"color","medium"),g(o,"slot","end"),g(e,"translucent",""),g(b,"fullscreen",""),g(O,"fill","outline"),g(O,"color","tertiary"),g(O,"strong",""),s(O,"width","99%"),s(O,"height","auto")},m(z,D){G(z,e,D),r(e,t),r(t,o),r(o,n),r(t,c),r(t,u),G(z,I,D),G(z,b,D),r(b,p);for(let U=0;U<m.length;U+=1)m[U]&&m[U].m(p,null);G(z,k,D),G(z,C,D),r(C,O),M||(x=[he(n,"click",l[3]),he(O,"click",l[1])],M=!0)},p(z,[D]){D&5&&(j=Ue(z[0]),m=it(m,D,W,1,z,j,h,p,lt,$t,null,Zt))},i:Ae,o:Ae,d(z){z&&(a(e),a(I),a(b),a(k),a(C));for(let D=0;D<m.length;D+=1)m[D].d();M=!1,Pe(x)}}}function Ro(l){let e=document.querySelector("ion-modal");e.componentProps.routeId;let t=e.componentProps.expenses;tt(()=>{});const o=()=>{nt.dismiss()};function n(u,_,I,b,p){e.componentProps.ex_amount=I,e.componentProps.ex_concept=_,e.componentProps.ex_type=b,e.componentProps.id_expense=p,Fe("modal-expense",vt,{amount:I,concept:_,type:b,id_expense:p}).then(()=>{}),o()}return[t,o,n,u=>{Fe("modal-expense",vt,{routeId:u}).then(_=>{}),o()},(u,_)=>n(_,u.concept,u.amount,u.type,u.id_expenses)]}class Vo extends Ye{constructor(e){super(),Qe(this,e,Ro,Uo,Je,{})}}const{document:en}=Jn;function tn(l,e,t){const o=l.slice();return o[53]=e[t],o[55]=t,o}function nn(l,e,t){const o=l.slice();return o[53]=e[t],o[55]=t,o}function on(l,e,t){const o=l.slice();return o[53]=e[t],o[55]=t,o}function ln(l){let e,t;return e=new Kn({props:{$$slots:{default:[Zo]},$$scope:{ctx:l}}}),{c(){Tn(e.$$.fragment)},l(o){yn(e.$$.fragment,o)},m(o,n){Cn(e,o,n),t=!0},p(o,n){const i={};n[0]&2043|n[1]&134217728&&(i.$$scope={dirty:n,ctx:o}),e.$set(i)},i(o){t||(ut(e.$$.fragment,o),t=!0)},o(o){pt(e.$$.fragment,o),t=!1},d(o){wn(e,o)}}}function zo(l){let e,t='<div id="g_map" style="width: 100%; height: 100vh;"></div>';return{c(){e=f("ion-content"),e.innerHTML=t},l(o){e=d(o,"ION-CONTENT",{"data-svelte-h":!0}),se(e)!=="svelte-h8v4nk"&&(e.innerHTML=t)},m(o,n){G(o,e,n)},p:Ae,d(o){o&&a(e)}}}function jo(l){let e;function t(i,c){if(i[7].length>0)return Fo;if(!i[3])return qo}let o=t(l),n=o&&o(l);return{c(){n&&n.c(),e=De()},l(i){n&&n.l(i),e=De()},m(i,c){n&&n.m(i,c),G(i,e,c)},p(i,c){o===(o=t(i))&&n?n.p(i,c):(n&&n.d(1),n=o&&o(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&a(e),n&&n.d(i)}}}function qo(l){let e,t,o,n='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jala para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',i,c,u,_,I,b,p="0",m,h,k,C,O,P=l[6].origin+"",M,x,j,W,z,D,U=[],S=new Map,E,w,R,A,Q,Y=l[5].length+1+"",me,ve,Ie,B,ce,ue,pe=l[6].destination+"",le,ee,fe,de="",re,$,ke,ge,Ee=l[4]&&rn(l),_e=Ue(l[5]);const ae=J=>J[53].id_event;for(let J=0;J<_e.length;J+=1){let X=tn(l,_e,J),q=ae(X);S.set(q,U[J]=sn(q,X))}return{c(){Ee&&Ee.c(),e=N(),t=f("ion-content"),o=f("ion-refresher"),o.innerHTML=n,i=N(),c=f("ion-list"),u=f("ion-item"),_=f("ion-avatar"),I=f("div"),b=f("div"),b.textContent=p,h=N(),k=f("ion-label"),C=f("ion-text"),O=f("h3"),M=Oe(P),x=N(),j=f("div"),W=N(),z=f("ion-icon"),D=N();for(let J=0;J<U.length;J+=1)U[J].c();E=N(),w=f("ion-item"),R=f("ion-avatar"),A=f("div"),Q=f("div"),me=Oe(Y),Ie=N(),B=f("ion-label"),ce=f("ion-text"),ue=f("h3"),le=Oe(pe),ee=N(),fe=f("div"),fe.innerHTML=de,re=N(),$=f("ion-icon"),this.h()},l(J){Ee&&Ee.l(J),e=T(J),t=d(J,"ION-CONTENT",{});var X=v(t);o=d(X,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),se(o)!=="svelte-1mlmyg"&&(o.innerHTML=n),i=T(X),c=d(X,"ION-LIST",{});var q=v(c);u=d(q,"ION-ITEM",{});var ie=v(u);_=d(ie,"ION-AVATAR",{slot:!0});var Ce=v(_);I=d(Ce,"DIV",{class:!0,title:!0,style:!0});var ne=v(I);b=d(ne,"DIV",{class:!0,"data-svelte-h":!0}),se(b)!=="svelte-b78non"&&(b.textContent=p),ne.forEach(a),Ce.forEach(a),h=T(ie),k=d(ie,"ION-LABEL",{button:!0});var y=v(k);C=d(y,"ION-TEXT",{color:!0});var V=v(C);O=d(V,"H3",{});var H=v(O);M=Ne(H,P),H.forEach(a),V.forEach(a),x=T(y),j=d(y,"DIV",{class:!0}),v(j).forEach(a),y.forEach(a),W=T(ie),z=d(ie,"ION-ICON",{icon:!0,slot:!0}),v(z).forEach(a),ie.forEach(a),D=T(q);for(let ye=0;ye<U.length;ye+=1)U[ye].l(q);E=T(q),w=d(q,"ION-ITEM",{});var L=v(w);R=d(L,"ION-AVATAR",{slot:!0});var K=v(R);A=d(K,"DIV",{class:!0,title:!0,style:!0});var Z=v(A);Q=d(Z,"DIV",{class:!0});var oe=v(Q);me=Ne(oe,Y),oe.forEach(a),Z.forEach(a),K.forEach(a),Ie=T(L),B=d(L,"ION-LABEL",{button:!0});var te=v(B);ce=d(te,"ION-TEXT",{color:!0});var be=v(ce);ue=d(be,"H3",{});var Te=v(ue);le=Ne(Te,pe),Te.forEach(a),be.forEach(a),ee=T(te),fe=d(te,"DIV",{class:!0,"data-svelte-h":!0}),se(fe)!=="svelte-17oqe78"&&(fe.innerHTML=de),te.forEach(a),re=T(L),$=d(L,"ION-ICON",{icon:!0,slot:!0}),v($).forEach(a),L.forEach(a),q.forEach(a),X.forEach(a),this.h()},h(){g(o,"slot","fixed"),F(b,"class","order svelte-1ita8l7"),F(I,"class","order-wrapper svelte-1ita8l7"),F(I,"title",m="$"+l[6].origin),s(I,"background-color",l[6].color),s(I,"color",Be(l[6].color)),g(_,"slot","start"),g(C,"color","#2e2e2e"),F(j,"class","sub svelte-1ita8l7"),g(k,"button",""),g(z,"icon",je),g(z,"slot","end"),F(Q,"class","order svelte-1ita8l7"),F(A,"class","order-wrapper svelte-1ita8l7"),F(A,"title",ve="$"+l[6].destination),s(A,"background-color",l[6].color),s(A,"color",Be(l[6].color)),g(R,"slot","start"),g(ce,"color","#2e2e2e"),F(fe,"class","sub svelte-1ita8l7"),g(B,"button",""),g($,"icon",je),g($,"slot","end")},m(J,X){Ee&&Ee.m(J,X),G(J,e,X),G(J,t,X),r(t,o),l[33](o),r(t,i),r(t,c),r(c,u),r(u,_),r(_,I),r(I,b),r(u,h),r(u,k),r(k,C),r(C,O),r(O,M),r(k,x),r(k,j),r(u,W),r(u,z),r(c,D);for(let q=0;q<U.length;q+=1)U[q]&&U[q].m(c,null);r(c,E),r(c,w),r(w,R),r(R,A),r(A,Q),r(Q,me),r(w,Ie),r(w,B),r(B,ce),r(ce,ue),r(ue,le),r(B,ee),r(B,fe),r(w,re),r(w,$),ke||(ge=[he(o,"ionRefresh",l[11]),he(k,"click",l[34]),he(B,"click",l[36])],ke=!0)},p(J,X){J[4]?Ee?Ee.p(J,X):(Ee=rn(J),Ee.c(),Ee.m(e.parentNode,e)):Ee&&(Ee.d(1),Ee=null),X[0]&64&&m!==(m="$"+J[6].origin)&&F(I,"title",m),X[0]&64&&s(I,"background-color",J[6].color),X[0]&64&&s(I,"color",Be(J[6].color)),X[0]&64&&P!==(P=J[6].origin+"")&&Me(M,P),X[0]&1319968&&(_e=Ue(J[5]),U=it(U,X,ae,1,J,_e,S,c,lt,sn,E,tn)),X[0]&32&&Y!==(Y=J[5].length+1+"")&&Me(me,Y),X[0]&64&&ve!==(ve="$"+J[6].destination)&&F(A,"title",ve),X[0]&64&&s(A,"background-color",J[6].color),X[0]&64&&s(A,"color",Be(J[6].color)),X[0]&64&&pe!==(pe=J[6].destination+"")&&Me(le,pe)},d(J){J&&(a(e),a(t)),Ee&&Ee.d(J),l[33](null);for(let X=0;X<U.length;X+=1)U[X].d();ke=!1,Pe(ge)}}}function Fo(l){let e,t;function o(c,u){return u[0]&144&&(e=null),e==null&&(e=!!(c[7].filter(ei).every(ti)&&!c[4])),e?Wo:Ko}let n=o(l,[-1,-1]),i=n(l);return{c(){i.c(),t=De()},l(c){i.l(c),t=De()},m(c,u){i.m(c,u),G(c,t,u)},p(c,u){n===(n=o(c,u))&&i?i.p(c,u):(i.d(1),i=n(c),i&&(i.c(),i.m(t.parentNode,t)))},d(c){c&&a(t),i.d(c)}}}function rn(l){let e=l[15]("",l[1],l[0])+"",t;return{c(){t=Oe(e)},l(o){t=Ne(o,e)},m(o,n){G(o,t,n)},p(o,n){n[0]&3&&e!==(e=o[15]("",o[1],o[0])+"")&&Me(t,e)},d(o){o&&a(t)}}}function an(l){let e;return{c(){e=f("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),v(e).forEach(a),this.h()},h(){F(e,"class","notes svelte-1ita8l7")},m(t,o){G(t,e,o)},d(t){t&&a(e)}}}function xo(l){let e;return{c(){e=f("ion-icon"),this.h()},l(t){e=d(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),v(e).forEach(a),this.h()},h(){g(e,"icon",je),g(e,"slot","end"),s(e,"color",He(l[53].status,l[53].date_service))},m(t,o){G(t,e,o)},p(t,o){o[0]&32&&s(e,"color",He(t[53].status,t[53].date_service))},d(t){t&&a(e)}}}function Go(l){let e,t=(l[53].tag?l[53].tag:"")+"",o;return{c(){e=f("div"),o=Oe(t),this.h()},l(n){e=d(n,"DIV",{class:!0,slot:!0,style:!0});var i=v(e);o=Ne(i,t),i.forEach(a),this.h()},h(){F(e,"class","stop-tag"),F(e,"slot","end"),s(e,"background-color",Ve(l[53].tag_color,.3)),s(e,"border","1px solid "+Ve(l[53].tag_color,.4)),s(e,"color",l[53].tag_color),s(e,"font-size","10px"),s(e,"text-align","center"),s(e,"align-content","center"),s(e,"border-radius","20px"),s(e,"white-space","normal"),s(e,"padding","3px 6px"),s(e,"width","auto",1),s(e,"display","inline-block"),s(e,"font-weight","500")},m(n,i){G(n,e,i),r(e,o)},p(n,i){i[0]&32&&t!==(t=(n[53].tag?n[53].tag:"")+"")&&Me(o,t),i[0]&32&&s(e,"background-color",Ve(n[53].tag_color,.3)),i[0]&32&&s(e,"border","1px solid "+Ve(n[53].tag_color,.4)),i[0]&32&&s(e,"color",n[53].tag_color)},d(n){n&&a(e)}}}function sn(l,e){let t,o,n,i,c=parseInt(e[53].pos)+1+"",u,_,I,b,p,m,h=e[53].title+"",k,C,O=e[53].support_list&&e[53].support_list.length||e[18](e[53]),P,M,x,j=O&&an();function W(){return e[35](e[53])}function z(S,E){return S[53].tag_color&&S[53].tag?Go:xo}let D=z(e),U=D(e);return{key:l,first:null,c(){t=f("ion-item"),o=f("ion-avatar"),n=f("div"),i=f("div"),u=Oe(c),I=N(),b=f("ion-label"),p=f("ion-text"),m=f("h3"),k=Oe(h),C=N(),j&&j.c(),P=N(),U.c(),this.h()},l(S){t=d(S,"ION-ITEM",{});var E=v(t);o=d(E,"ION-AVATAR",{slot:!0});var w=v(o);n=d(w,"DIV",{class:!0,title:!0,style:!0});var R=v(n);i=d(R,"DIV",{class:!0});var A=v(i);u=Ne(A,c),A.forEach(a),R.forEach(a),w.forEach(a),I=T(E),b=d(E,"ION-LABEL",{button:!0});var Q=v(b);p=d(Q,"ION-TEXT",{color:!0});var Y=v(p);m=d(Y,"H3",{});var me=v(m);k=Ne(me,h),C=T(me),j&&j.l(me),me.forEach(a),Y.forEach(a),Q.forEach(a),P=T(E),U.l(E),E.forEach(a),this.h()},h(){F(i,"class","order svelte-1ita8l7"),F(n,"class","order-wrapper svelte-1ita8l7"),F(n,"title",_=et(e[53].status)),s(n,"background-color",He(e[53].status,e[53].date_service)),s(n,"color",Be(He(e[53].status))),g(o,"slot","start"),g(p,"color","#2e2e2e"),g(b,"button",""),this.first=t},m(S,E){G(S,t,E),r(t,o),r(o,n),r(n,i),r(i,u),r(t,I),r(t,b),r(b,p),r(p,m),r(m,k),r(m,C),j&&j.m(m,null),r(t,P),U.m(t,null),M||(x=he(b,"click",W),M=!0)},p(S,E){e=S,E[0]&32&&c!==(c=parseInt(e[53].pos)+1+"")&&Me(u,c),E[0]&32&&_!==(_=et(e[53].status))&&F(n,"title",_),E[0]&32&&s(n,"background-color",He(e[53].status,e[53].date_service)),E[0]&32&&s(n,"color",Be(He(e[53].status))),E[0]&32&&h!==(h=e[53].title+"")&&Me(k,h),E[0]&32&&(O=e[53].support_list&&e[53].support_list.length||e[18](e[53])),O?j||(j=an(),j.c(),j.m(m,null)):j&&(j.d(1),j=null),D===(D=z(e))&&U?U.p(e,E):(U.d(1),U=D(e),U&&(U.c(),U.m(t,null)))},d(S){S&&a(t),j&&j.d(),U.d(),M=!1,x()}}}function Ko(l){let e=l[15](l[7],l[1],l[0])+"",t,o,n,i,c='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Pull to refresh" refreshing-spinner="circles" refreshing-text="Refreshing..."></ion-refresher-content>',u,_,I,b,p,m,h="0",k,C,O,P,M,x=l[6].origin+"",j,W,z,D,U,S,E=[],w=new Map,R,A,Q,Y,me,ve=l[5].length+1+"",Ie,B,ce,ue,pe,le,ee=l[6].destination+"",fe,de,re,$="",ke,ge,Ee,_e,ae=Ue(l[5]);const J=X=>X[53].id_event;for(let X=0;X<ae.length;X+=1){let q=nn(l,ae,X),ie=J(q);w.set(ie,E[X]=un(ie,q))}return{c(){t=Oe(e),o=N(),n=f("ion-content"),i=f("ion-refresher"),i.innerHTML=c,u=N(),_=f("ion-list"),I=f("ion-item"),b=f("ion-avatar"),p=f("div"),m=f("div"),m.textContent=h,C=N(),O=f("ion-label"),P=f("ion-text"),M=f("h3"),j=Oe(x),W=N(),z=f("div"),D=N(),U=f("ion-icon"),S=N();for(let X=0;X<E.length;X+=1)E[X].c();R=N(),A=f("ion-item"),Q=f("ion-avatar"),Y=f("div"),me=f("div"),Ie=Oe(ve),ce=N(),ue=f("ion-label"),pe=f("ion-text"),le=f("h3"),fe=Oe(ee),de=N(),re=f("div"),re.innerHTML=$,ke=N(),ge=f("ion-icon"),this.h()},l(X){t=Ne(X,e),o=T(X),n=d(X,"ION-CONTENT",{});var q=v(n);i=d(q,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),se(i)!=="svelte-1l8nqqz"&&(i.innerHTML=c),u=T(q),_=d(q,"ION-LIST",{});var ie=v(_);I=d(ie,"ION-ITEM",{});var Ce=v(I);b=d(Ce,"ION-AVATAR",{slot:!0});var ne=v(b);p=d(ne,"DIV",{class:!0,title:!0,style:!0});var y=v(p);m=d(y,"DIV",{class:!0,"data-svelte-h":!0}),se(m)!=="svelte-b78non"&&(m.textContent=h),y.forEach(a),ne.forEach(a),C=T(Ce),O=d(Ce,"ION-LABEL",{button:!0});var V=v(O);P=d(V,"ION-TEXT",{color:!0});var H=v(P);M=d(H,"H3",{});var L=v(M);j=Ne(L,x),L.forEach(a),H.forEach(a),W=T(V),z=d(V,"DIV",{class:!0}),v(z).forEach(a),V.forEach(a),D=T(Ce),U=d(Ce,"ION-ICON",{icon:!0,slot:!0}),v(U).forEach(a),Ce.forEach(a),S=T(ie);for(let Se=0;Se<E.length;Se+=1)E[Se].l(ie);R=T(ie),A=d(ie,"ION-ITEM",{});var K=v(A);Q=d(K,"ION-AVATAR",{slot:!0});var Z=v(Q);Y=d(Z,"DIV",{class:!0,title:!0,style:!0});var oe=v(Y);me=d(oe,"DIV",{class:!0});var te=v(me);Ie=Ne(te,ve),te.forEach(a),oe.forEach(a),Z.forEach(a),ce=T(K),ue=d(K,"ION-LABEL",{button:!0});var be=v(ue);pe=d(be,"ION-TEXT",{color:!0});var Te=v(pe);le=d(Te,"H3",{});var ye=v(le);fe=Ne(ye,ee),ye.forEach(a),Te.forEach(a),de=T(be),re=d(be,"DIV",{class:!0,"data-svelte-h":!0}),se(re)!=="svelte-1c76q1w"&&(re.innerHTML=$),be.forEach(a),ke=T(K),ge=d(K,"ION-ICON",{icon:!0,slot:!0}),v(ge).forEach(a),K.forEach(a),ie.forEach(a),q.forEach(a),this.h()},h(){g(i,"slot","fixed"),F(m,"class","order svelte-1ita8l7"),F(p,"class","order-wrapper svelte-1ita8l7"),F(p,"title",k="$"+l[6].origin),s(p,"background-color",l[6].color),s(p,"color",Be(l[6].color)),g(b,"slot","start"),g(P,"color","#2e2e2e"),F(z,"class","sub svelte-1ita8l7"),g(O,"button",""),g(U,"icon",je),g(U,"slot","end"),F(me,"class","order svelte-1ita8l7"),F(Y,"class","order-wrapper svelte-1ita8l7"),F(Y,"title",B="$"+l[6].destination),s(Y,"background-color",l[6].color),s(Y,"color",Be(l[6].color)),g(Q,"slot","start"),g(pe,"color","#2e2e2e"),F(re,"class","sub svelte-1ita8l7"),g(ue,"button",""),g(ge,"icon",je),g(ge,"slot","end")},m(X,q){G(X,t,q),G(X,o,q),G(X,n,q),r(n,i),l[29](i),r(n,u),r(n,_),r(_,I),r(I,b),r(b,p),r(p,m),r(I,C),r(I,O),r(O,P),r(P,M),r(M,j),r(O,W),r(O,z),r(I,D),r(I,U),r(_,S);for(let ie=0;ie<E.length;ie+=1)E[ie]&&E[ie].m(_,null);r(_,R),r(_,A),r(A,Q),r(Q,Y),r(Y,me),r(me,Ie),r(A,ce),r(A,ue),r(ue,pe),r(pe,le),r(le,fe),r(ue,de),r(ue,re),r(A,ke),r(A,ge),Ee||(_e=[he(i,"ionRefresh",l[11]),he(O,"click",l[30]),he(ue,"click",l[32])],Ee=!0)},p(X,q){q[0]&131&&e!==(e=X[15](X[7],X[1],X[0])+"")&&Me(t,e),q[0]&64&&k!==(k="$"+X[6].origin)&&F(p,"title",k),q[0]&64&&s(p,"background-color",X[6].color),q[0]&64&&s(p,"color",Be(X[6].color)),q[0]&64&&x!==(x=X[6].origin+"")&&Me(j,x),q[0]&1319968&&(ae=Ue(X[5]),E=it(E,q,J,1,X,ae,w,_,lt,un,R,nn)),q[0]&32&&ve!==(ve=X[5].length+1+"")&&Me(Ie,ve),q[0]&64&&B!==(B="$"+X[6].destination)&&F(Y,"title",B),q[0]&64&&s(Y,"background-color",X[6].color),q[0]&64&&s(Y,"color",Be(X[6].color)),q[0]&64&&ee!==(ee=X[6].destination+"")&&Me(fe,ee)},d(X){X&&(a(t),a(o),a(n)),l[29](null);for(let q=0;q<E.length;q+=1)E[q].d();Ee=!1,Pe(_e)}}}function Wo(l){let e,t,o='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jale para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',n,i,c,u,_,I,b="0",p,m,h,k,C,O=l[6].origin+"",P,M,x,j,W,z,D=[],U=new Map,S,E,w,R,A,Q=l[5].length+1+"",Y,me,ve,Ie,B,ce,ue=l[6].destination+"",pe,le,ee,fe="",de,re,$,ke,ge=Ue(l[5]);const Ee=_e=>_e[53].id_event;for(let _e=0;_e<ge.length;_e+=1){let ae=on(l,ge,_e),J=Ee(ae);U.set(J,D[_e]=dn(J,ae))}return{c(){e=f("ion-content"),t=f("ion-refresher"),t.innerHTML=o,n=N(),i=f("ion-list"),c=f("ion-item"),u=f("ion-avatar"),_=f("div"),I=f("div"),I.textContent=b,m=N(),h=f("ion-label"),k=f("ion-text"),C=f("h3"),P=Oe(O),M=N(),x=f("div"),j=N(),W=f("ion-icon"),z=N();for(let _e=0;_e<D.length;_e+=1)D[_e].c();S=N(),E=f("ion-item"),w=f("ion-avatar"),R=f("div"),A=f("div"),Y=Oe(Q),ve=N(),Ie=f("ion-label"),B=f("ion-text"),ce=f("h3"),pe=Oe(ue),le=N(),ee=f("div"),ee.innerHTML=fe,de=N(),re=f("ion-icon"),this.h()},l(_e){e=d(_e,"ION-CONTENT",{});var ae=v(e);t=d(ae,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),se(t)!=="svelte-vjbhg4"&&(t.innerHTML=o),n=T(ae),i=d(ae,"ION-LIST",{});var J=v(i);c=d(J,"ION-ITEM",{});var X=v(c);u=d(X,"ION-AVATAR",{slot:!0});var q=v(u);_=d(q,"DIV",{class:!0,title:!0,style:!0});var ie=v(_);I=d(ie,"DIV",{class:!0,"data-svelte-h":!0}),se(I)!=="svelte-b78non"&&(I.textContent=b),ie.forEach(a),q.forEach(a),m=T(X),h=d(X,"ION-LABEL",{button:!0});var Ce=v(h);k=d(Ce,"ION-TEXT",{color:!0});var ne=v(k);C=d(ne,"H3",{});var y=v(C);P=Ne(y,O),y.forEach(a),ne.forEach(a),M=T(Ce),x=d(Ce,"DIV",{class:!0}),v(x).forEach(a),Ce.forEach(a),j=T(X),W=d(X,"ION-ICON",{icon:!0,slot:!0}),v(W).forEach(a),X.forEach(a),z=T(J);for(let be=0;be<D.length;be+=1)D[be].l(J);S=T(J),E=d(J,"ION-ITEM",{});var V=v(E);w=d(V,"ION-AVATAR",{slot:!0});var H=v(w);R=d(H,"DIV",{class:!0,title:!0,style:!0});var L=v(R);A=d(L,"DIV",{class:!0});var K=v(A);Y=Ne(K,Q),K.forEach(a),L.forEach(a),H.forEach(a),ve=T(V),Ie=d(V,"ION-LABEL",{button:!0});var Z=v(Ie);B=d(Z,"ION-TEXT",{color:!0});var oe=v(B);ce=d(oe,"H3",{});var te=v(ce);pe=Ne(te,ue),te.forEach(a),oe.forEach(a),le=T(Z),ee=d(Z,"DIV",{class:!0,"data-svelte-h":!0}),se(ee)!=="svelte-1c76q1w"&&(ee.innerHTML=fe),Z.forEach(a),de=T(V),re=d(V,"ION-ICON",{icon:!0,slot:!0}),v(re).forEach(a),V.forEach(a),J.forEach(a),ae.forEach(a),this.h()},h(){g(t,"slot","fixed"),F(I,"class","order svelte-1ita8l7"),F(_,"class","order-wrapper svelte-1ita8l7"),F(_,"title",p="$"+l[6].origin),s(_,"background-color",l[6].color),s(_,"color",Be(l[6].color)),g(u,"slot","start"),g(k,"color","#2e2e2e"),F(x,"class","sub svelte-1ita8l7"),g(h,"button",""),g(W,"icon",je),g(W,"slot","end"),F(A,"class","order svelte-1ita8l7"),F(R,"class","order-wrapper svelte-1ita8l7"),F(R,"title",me="$"+l[6].destination),s(R,"background-color",l[6].color),s(R,"color",Be(l[6].color)),g(w,"slot","start"),g(B,"color","#2e2e2e"),F(ee,"class","sub svelte-1ita8l7"),g(Ie,"button",""),g(re,"icon",je),g(re,"slot","end")},m(_e,ae){G(_e,e,ae),r(e,t),l[25](t),r(e,n),r(e,i),r(i,c),r(c,u),r(u,_),r(_,I),r(c,m),r(c,h),r(h,k),r(k,C),r(C,P),r(h,M),r(h,x),r(c,j),r(c,W),r(i,z);for(let J=0;J<D.length;J+=1)D[J]&&D[J].m(i,null);r(i,S),r(i,E),r(E,w),r(w,R),r(R,A),r(A,Y),r(E,ve),r(E,Ie),r(Ie,B),r(B,ce),r(ce,pe),r(Ie,le),r(Ie,ee),r(E,de),r(E,re),$||(ke=[he(t,"ionRefresh",l[11]),he(h,"click",l[26]),he(Ie,"click",l[28])],$=!0)},p(_e,ae){ae[0]&64&&p!==(p="$"+_e[6].origin)&&F(_,"title",p),ae[0]&64&&s(_,"background-color",_e[6].color),ae[0]&64&&s(_,"color",Be(_e[6].color)),ae[0]&64&&O!==(O=_e[6].origin+"")&&Me(P,O),ae[0]&1319968&&(ge=Ue(_e[5]),D=it(D,ae,Ee,1,_e,ge,U,i,lt,dn,S,on)),ae[0]&32&&Q!==(Q=_e[5].length+1+"")&&Me(Y,Q),ae[0]&64&&me!==(me="$"+_e[6].destination)&&F(R,"title",me),ae[0]&64&&s(R,"background-color",_e[6].color),ae[0]&64&&s(R,"color",Be(_e[6].color)),ae[0]&64&&ue!==(ue=_e[6].destination+"")&&Me(pe,ue)},d(_e){_e&&a(e),l[25](null);for(let ae=0;ae<D.length;ae+=1)D[ae].d();$=!1,Pe(ke)}}}function cn(l){let e;return{c(){e=f("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),v(e).forEach(a),this.h()},h(){F(e,"class","notes svelte-1ita8l7")},m(t,o){G(t,e,o)},d(t){t&&a(e)}}}function Xo(l){let e;return{c(){e=f("ion-icon"),this.h()},l(t){e=d(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),v(e).forEach(a),this.h()},h(){g(e,"icon",je),g(e,"slot","end"),s(e,"color",He(l[53].status,l[53].date_service))},m(t,o){G(t,e,o)},p(t,o){o[0]&32&&s(e,"color",He(t[53].status,t[53].date_service))},d(t){t&&a(e)}}}function Jo(l){let e,t=(l[53].tag?l[53].tag:"")+"",o;return{c(){e=f("div"),o=Oe(t),this.h()},l(n){e=d(n,"DIV",{class:!0,slot:!0,style:!0});var i=v(e);o=Ne(i,t),i.forEach(a),this.h()},h(){F(e,"class","stop-tag"),F(e,"slot","end"),s(e,"background-color",Ve(l[53].tag_color,.3)),s(e,"border","1px solid "+Ve(l[53].tag_color,.4)),s(e,"color",l[53].tag_color),s(e,"font-size","10px"),s(e,"text-align","center"),s(e,"align-content","center"),s(e,"border-radius","20px"),s(e,"white-space","normal"),s(e,"padding","3px 6px"),s(e,"width","auto",1),s(e,"display","inline-block"),s(e,"font-weight","500")},m(n,i){G(n,e,i),r(e,o)},p(n,i){i[0]&32&&t!==(t=(n[53].tag?n[53].tag:"")+"")&&Me(o,t),i[0]&32&&s(e,"background-color",Ve(n[53].tag_color,.3)),i[0]&32&&s(e,"border","1px solid "+Ve(n[53].tag_color,.4)),i[0]&32&&s(e,"color",n[53].tag_color)},d(n){n&&a(e)}}}function un(l,e){let t,o,n,i,c=parseInt(e[53].pos)+1+"",u,_,I,b,p,m,h=e[53].title+"",k,C,O=e[53].support_list&&e[53].support_list.length||e[18](e[53]),P,M,x="",j,W,z,D=O&&cn();function U(){return e[31](e[53])}function S(R,A){return R[53].tag_color&&R[53].tag?Jo:Xo}let E=S(e),w=E(e);return{key:l,first:null,c(){t=f("ion-item"),o=f("ion-avatar"),n=f("div"),i=f("div"),u=Oe(c),I=N(),b=f("ion-label"),p=f("ion-text"),m=f("h3"),k=Oe(h),C=N(),D&&D.c(),P=N(),M=f("div"),M.innerHTML=x,j=N(),w.c(),this.h()},l(R){t=d(R,"ION-ITEM",{});var A=v(t);o=d(A,"ION-AVATAR",{slot:!0});var Q=v(o);n=d(Q,"DIV",{class:!0,title:!0,style:!0});var Y=v(n);i=d(Y,"DIV",{class:!0});var me=v(i);u=Ne(me,c),me.forEach(a),Y.forEach(a),Q.forEach(a),I=T(A),b=d(A,"ION-LABEL",{button:!0});var ve=v(b);p=d(ve,"ION-TEXT",{color:!0});var Ie=v(p);m=d(Ie,"H3",{});var B=v(m);k=Ne(B,h),C=T(B),D&&D.l(B),B.forEach(a),Ie.forEach(a),P=T(ve),M=d(ve,"DIV",{class:!0,"data-svelte-h":!0}),se(M)!=="svelte-1cx9r38"&&(M.innerHTML=x),ve.forEach(a),j=T(A),w.l(A),A.forEach(a),this.h()},h(){F(i,"class","order svelte-1ita8l7"),F(n,"class","order-wrapper svelte-1ita8l7"),F(n,"title",_=et(e[53].status)),s(n,"background-color",He(e[53].status,e[53].date_service)),s(n,"color",Be(He(e[53].status))),g(o,"slot","start"),g(p,"color","#2e2e2e"),F(M,"class","sub svelte-1ita8l7"),g(b,"button",""),this.first=t},m(R,A){G(R,t,A),r(t,o),r(o,n),r(n,i),r(i,u),r(t,I),r(t,b),r(b,p),r(p,m),r(m,k),r(m,C),D&&D.m(m,null),r(b,P),r(b,M),r(t,j),w.m(t,null),W||(z=he(b,"click",U),W=!0)},p(R,A){e=R,A[0]&32&&c!==(c=parseInt(e[53].pos)+1+"")&&Me(u,c),A[0]&32&&_!==(_=et(e[53].status))&&F(n,"title",_),A[0]&32&&s(n,"background-color",He(e[53].status,e[53].date_service)),A[0]&32&&s(n,"color",Be(He(e[53].status))),A[0]&32&&h!==(h=e[53].title+"")&&Me(k,h),A[0]&32&&(O=e[53].support_list&&e[53].support_list.length||e[18](e[53])),O?D||(D=cn(),D.c(),D.m(m,null)):D&&(D.d(1),D=null),E===(E=S(e))&&w?w.p(e,A):(w.d(1),w=E(e),w&&(w.c(),w.m(t,null)))},d(R){R&&a(t),D&&D.d(),w.d(),W=!1,z()}}}function fn(l){let e;return{c(){e=f("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),v(e).forEach(a),this.h()},h(){F(e,"class","notes svelte-1ita8l7")},m(t,o){G(t,e,o)},d(t){t&&a(e)}}}function Yo(l){let e;return{c(){e=f("ion-icon"),this.h()},l(t){e=d(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),v(e).forEach(a),this.h()},h(){g(e,"icon",je),g(e,"slot","end"),s(e,"color",He(l[53].status,l[53].date_service))},m(t,o){G(t,e,o)},p(t,o){o[0]&32&&s(e,"color",He(t[53].status,t[53].date_service))},d(t){t&&a(e)}}}function Qo(l){let e,t=(l[53].tag?l[53].tag:"")+"",o;return{c(){e=f("div"),o=Oe(t),this.h()},l(n){e=d(n,"DIV",{class:!0,slot:!0,style:!0});var i=v(e);o=Ne(i,t),i.forEach(a),this.h()},h(){F(e,"class","stop-tag"),F(e,"slot","end"),s(e,"background-color",Ve(l[53].tag_color,.3)),s(e,"border","1px solid "+Ve(l[53].tag_color,.4)),s(e,"color",l[53].tag_color),s(e,"font-size","10px"),s(e,"text-align","center"),s(e,"align-content","center"),s(e,"border-radius","20px"),s(e,"white-space","normal"),s(e,"padding","3px 6px"),s(e,"width","auto",1),s(e,"display","inline-block"),s(e,"font-weight","500")},m(n,i){G(n,e,i),r(e,o)},p(n,i){i[0]&32&&t!==(t=(n[53].tag?n[53].tag:"")+"")&&Me(o,t),i[0]&32&&s(e,"background-color",Ve(n[53].tag_color,.3)),i[0]&32&&s(e,"border","1px solid "+Ve(n[53].tag_color,.4)),i[0]&32&&s(e,"color",n[53].tag_color)},d(n){n&&a(e)}}}function dn(l,e){let t,o,n,i,c=parseInt(e[53].pos)+1+"",u,_,I,b,p,m,h=e[53].title+"",k,C,O=e[53].support_list&&e[53].support_list.length||e[18](e[53]),P,M,x="",j,W,z,D=O&&fn();function U(){return e[27](e[53])}function S(R,A){return R[53].tag_color&&R[53].tag?Qo:Yo}let E=S(e),w=E(e);return{key:l,first:null,c(){t=f("ion-item"),o=f("ion-avatar"),n=f("div"),i=f("div"),u=Oe(c),I=N(),b=f("ion-label"),p=f("ion-text"),m=f("h3"),k=Oe(h),C=N(),D&&D.c(),P=N(),M=f("div"),M.innerHTML=x,j=N(),w.c(),this.h()},l(R){t=d(R,"ION-ITEM",{});var A=v(t);o=d(A,"ION-AVATAR",{slot:!0});var Q=v(o);n=d(Q,"DIV",{class:!0,title:!0,style:!0});var Y=v(n);i=d(Y,"DIV",{class:!0});var me=v(i);u=Ne(me,c),me.forEach(a),Y.forEach(a),Q.forEach(a),I=T(A),b=d(A,"ION-LABEL",{button:!0});var ve=v(b);p=d(ve,"ION-TEXT",{color:!0});var Ie=v(p);m=d(Ie,"H3",{});var B=v(m);k=Ne(B,h),C=T(B),D&&D.l(B),B.forEach(a),Ie.forEach(a),P=T(ve),M=d(ve,"DIV",{class:!0,"data-svelte-h":!0}),se(M)!=="svelte-1cx9r38"&&(M.innerHTML=x),ve.forEach(a),j=T(A),w.l(A),A.forEach(a),this.h()},h(){F(i,"class","order svelte-1ita8l7"),F(n,"class","order-wrapper svelte-1ita8l7"),F(n,"title",_=et(e[53].status)),s(n,"background-color",He(e[53].status,e[53].date_service)),s(n,"color",Be(He(e[53].status))),g(o,"slot","start"),g(p,"color","#2e2e2e"),F(M,"class","sub svelte-1ita8l7"),g(b,"button",""),this.first=t},m(R,A){G(R,t,A),r(t,o),r(o,n),r(n,i),r(i,u),r(t,I),r(t,b),r(b,p),r(p,m),r(m,k),r(m,C),D&&D.m(m,null),r(b,P),r(b,M),r(t,j),w.m(t,null),W||(z=he(b,"click",U),W=!0)},p(R,A){e=R,A[0]&32&&c!==(c=parseInt(e[53].pos)+1+"")&&Me(u,c),A[0]&32&&_!==(_=et(e[53].status))&&F(n,"title",_),A[0]&32&&s(n,"background-color",He(e[53].status,e[53].date_service)),A[0]&32&&s(n,"color",Be(He(e[53].status))),A[0]&32&&h!==(h=e[53].title+"")&&Me(k,h),A[0]&32&&(O=e[53].support_list&&e[53].support_list.length||e[18](e[53])),O?D||(D=fn(),D.c(),D.m(m,null)):D&&(D.d(1),D=null),E===(E=S(e))&&w?w.p(e,A):(w.d(1),w=E(e),w&&(w.c(),w.m(t,null)))},d(R){R&&a(t),D&&D.d(),w.d(),W=!1,z()}}}function Zo(l){let e,t,o,n,i=`<ion-icon icon="${zn}"></ion-icon>`,c,u,_,I=`<ion-icon icon="${jn}"></ion-icon>`,b,p,m=`<ion-icon icon="${qn}"></ion-icon>`,h,k,C=(l[6].name?l[6].name.toUpperCase():"")+"",O,P,M,x='<ion-segment-button value="list"><ion-label>Paradas</ion-label></ion-segment-button> <ion-segment-button value="map"><ion-label>Mapa</ion-label></ion-segment-button>',j,W,z,D;function U(w,R){if(w[9]==="list")return jo;if(w[9]==="map")return zo}let S=U(l),E=S&&S(l);return{c(){e=f("ion-header"),t=f("ion-toolbar"),o=f("ion-buttons"),n=f("ion-button"),n.innerHTML=i,c=N(),u=f("ion-buttons"),_=f("ion-button"),_.innerHTML=I,b=N(),p=f("ion-button"),p.innerHTML=m,h=N(),k=f("ion-title"),O=Oe(C),P=N(),M=f("ion-segment"),M.innerHTML=x,j=N(),E&&E.c(),W=De(),this.h()},l(w){e=d(w,"ION-HEADER",{translucent:!0});var R=v(e);t=d(R,"ION-TOOLBAR",{});var A=v(t);o=d(A,"ION-BUTTONS",{slot:!0});var Q=v(o);n=d(Q,"ION-BUTTON",{title:!0,alt:!0,"data-svelte-h":!0}),se(n)!=="svelte-1a21unf"&&(n.innerHTML=i),Q.forEach(a),c=T(A),u=d(A,"ION-BUTTONS",{slot:!0});var Y=v(u);_=d(Y,"ION-BUTTON",{"data-svelte-h":!0}),se(_)!=="svelte-dy3728"&&(_.innerHTML=I),b=T(Y),p=d(Y,"ION-BUTTON",{"data-svelte-h":!0}),se(p)!=="svelte-1omw1hr"&&(p.innerHTML=m),Y.forEach(a),h=T(A),k=d(A,"ION-TITLE",{});var me=v(k);O=Ne(me,C),me.forEach(a),A.forEach(a),P=T(R),M=d(R,"ION-SEGMENT",{value:!0,"data-svelte-h":!0}),se(M)!=="svelte-1rseadq"&&(M.innerHTML=x),R.forEach(a),j=T(w),E&&E.l(w),W=De(),this.h()},h(){g(n,"title","Atrás"),g(n,"alt","Atrás"),g(o,"slot","start"),g(u,"slot","end"),g(M,"value","list"),g(e,"translucent","")},m(w,R){G(w,e,R),r(e,t),r(t,o),r(o,n),r(t,c),r(t,u),r(u,_),r(u,b),r(u,p),r(t,h),r(t,k),r(k,O),r(e,P),r(e,M),G(w,j,R),E&&E.m(w,R),G(w,W,R),z||(D=[he(n,"click",l[19]),he(_,"click",l[22]),he(p,"click",l[23]),he(M,"ionChange",l[24])],z=!0)},p(w,R){R[0]&64&&C!==(C=(w[6].name?w[6].name.toUpperCase():"")+"")&&Me(O,C),S===(S=U(w))&&E?E.p(w,R):(E&&E.d(1),E=S&&S(w),E&&(E.c(),E.m(W.parentNode,W)))},d(w){w&&(a(e),a(j),a(W)),E&&E.d(w),z=!1,Pe(D)}}}function $o(l){let e,t,o,n=l[2]&&ln(l);return{c(){e=N(),n&&n.c(),t=De(),this.h()},l(i){In("svelte-kn0kph",en.head).forEach(a),e=T(i),n&&n.l(i),t=De(),this.h()},h(){en.title="Rutaflow - Detalles de ruta"},m(i,c){G(i,e,c),n&&n.m(i,c),G(i,t,c),o=!0},p(i,c){i[2]?n?(n.p(i,c),c[0]&4&&ut(n,1)):(n=ln(i),n.c(),ut(n,1),n.m(t.parentNode,t)):n&&(Ln(),pt(n,1,1,()=>{n=null}),Nn())},i(i){o||(ut(n),o=!0)},o(i){pt(n),o=!1},d(i){i&&(a(e),a(t)),n&&n.d(i)}}}function He(l,e=""){let t="#ffffff";return l==="pending"&&!e?t="#f2e300":l=="pending"&&e?t="#F6A833":l==="completed"&&(t="#44d900"),t}function et(l){let e="";return l=="pending"?e="Pendiente":l=="completed"&&(e="Completado"),e}function Be(l){l.slice(0,1)==="#"&&(l=l.slice(1)),l.length===3&&(l=l.split("").map(function(i){return i+i}).join(""));const e=parseInt(l.substr(0,2),16),t=parseInt(l.substr(2,2),16),o=parseInt(l.substr(4,2),16);return(e*299+t*587+o*114)/1e3>=128?"#414040":"#fff"}function ht(l,e){for(let t=0;t<e.length;t++)if(e[t].alias===l)return e[t].val;return""}const ei=l=>l.mandatory==="1",ti=l=>l.img;function ni(l,e,t){let o;On(l,Fn,y=>t(21,o=y));var n=this&&this.__awaiter||function(y,V,H,L){function K(Z){return Z instanceof H?Z:new H(function(oe){oe(Z)})}return new(H||(H=Promise))(function(Z,oe){function te(ye){try{Te(L.next(ye))}catch(Se){oe(Se)}}function be(ye){try{Te(L.throw(ye))}catch(Se){oe(Se)}}function Te(ye){ye.done?Z(ye.value):K(ye.value).then(te,be)}Te((L=L.apply(y,V||[])).next())})};let{routeId:i}=e,{driverId:c}=e,u=rt,_=new Object,I=!0,b=!1,p=[],m=[],h={},k=[],C=[],O,P=!1,M="list",x,j="",W="",z="0",D=new Object;const U={car_accident:"/car-accident.svg",restaurant:"/restaurant.svg",parking:"/parking.svg",hospital:"/hospital.svg",wc:"/toilet.svg"},S=()=>n(void 0,void 0,void 0,function*(){yield R(i),O.complete()});tt(()=>n(void 0,void 0,void 0,function*(){ee(),yield R(i)}));function E(y){return n(this,void 0,void 0,function*(){if(t(9,M=y),M==="map"){yield _n(),x=document.getElementById("g_map");const V=new google.maps.Map(x,{zoom:8,center:{lat:20.6745683,lng:-103.3986104},mapId:"4504f8b37365c3d0"}),H=new google.maps.LatLngBounds,{AdvancedMarkerElement:L,PinElement:K}=yield google.maps.importLibrary("marker");navigator.geolocation?navigator.geolocation.getCurrentPosition(function(Z){const oe=new google.maps.LatLng(Z.coords.latitude,Z.coords.longitude);new google.maps.Marker({position:oe,map:V,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"#0062ff",fillOpacity:1,scale:6,strokeColor:"#ffffff",strokeWeight:2}}),new google.maps.Circle({strokeColor:"#00BFFF",strokeOpacity:.5,strokeWeight:1,fillColor:"#00BFFF",fillOpacity:.2,map:V,center:oe,radius:Z.coords.accuracy}),H.extend(oe)},function(Z){console.error("Error retrieving location:",Z)}):console.error("Geolocation not supported by this browser."),h.lat1===h.lat2&&h.lon1===h.lon2?w(H,V,{lat:h.lat2,lon:h.lon2,color:h.color,title:h.destination},{type:"icon",iconClass:"icon-home",title:"Origen/Destino",glyph:`0,${String(p.length+1)}`}):(w(H,V,{lat:h.lat1,lon:h.lon1,color:h.color,title:h.origin},{type:"icon",iconClass:"icon-home",title:"Origen",glyph:"0"}),w(H,V,{lat:h.lat2,lon:h.lon2,color:h.color,title:h.destination},{type:"icon",iconClass:"icon-flag",title:"Destino",glyph:String(p.length+1)})),p.forEach((Z,oe)=>{const te=parseFloat(Z.lat),be=parseFloat(Z.lon),Te=new google.maps.LatLng(te,be),ye=new google.maps.Marker({position:{lat:te,lng:be},map:V,title:Z.title}),Se=new K({background:He(Z.status,Z.date_service),borderColor:"#000",glyphColor:"#000",glyph:(parseInt(Z.pos)+1).toString()});new L({map:V,position:Te,content:Se.element,title:"Parada "+(parseInt(Z.pos)+1).toString()+": "+Z.title}).addListener("click",function(we){Q(Z,!1)}),H.extend(ye.getPosition())}),m.forEach(Z=>{const oe=+Z.lat,te=+Z.lng;if(isNaN(oe)||isNaN(te))return;const be=U[Z.type]||"alert-sharp",Te=document.createElement("div");Te.style.cssText="display:flex;align-items:center;justify-content:center;transform:scale(.85);";const ye=document.createElement("ion-icon");be.startsWith("/")?ye.setAttribute("src",be):ye.setAttribute("icon",be),ye.style.cssText="font-size:20px;color:#d13434;",Te.appendChild(ye);const Se=new K({background:"#fff",borderColor:"#000",glyph:Te}),Le=new L({map:V,position:{lat:oe,lng:te},content:Se.element,title:Z.motive||Z.type});H.extend(Le.position)}),V.fitBounds(H)}})}function w(y,V,H,L){return n(this,void 0,void 0,function*(){let K;const Z=parseFloat(H.lat),oe=parseFloat(H.lon),te=new google.maps.LatLng(Z,oe),{AdvancedMarkerElement:be,PinElement:Te}=yield google.maps.importLibrary("marker");L.type=="icon"?(K=document.createElement("i"),K.className=`${L.iconClass} icon`,K.style.fontSize="14px",K.style.color=Be(H.color),K.style.fontWeight="600"):L.type=="text";const ye=new google.maps.Marker({position:{lat:Z,lng:oe},map:V,title:`${L.title}. ${H.title}`}),Se=new Te({background:H.color,borderColor:"#000",glyphColor:Be(H.color),glyph:L.glyph});return new be({map:V,position:te,content:Se.element,title:L.title+": "+H.title}).addListener("click",function(we){Y(h,L.title=="Destino"||L.title=="Origen/Destino")}),ye})}function R(y){return n(this,void 0,void 0,function*(){let V=new FormData;V.append("id_route",y),V=le(V),V.append("id_enterprise",_.id_enterprise);try{const L=yield(yield fetch(`${u}api/admin/report/seguimiento_list.php`,{method:"POST",body:V})).json();t(6,h=L.data.seguimiento_list[0]),t(5,p=L.data.event_list),t(7,k=L.data.checklist),C=L.data.expenses,m=L.data.incidence_list,h&&t(4,b=h.km_inicial=="0"&&h.gas_inicial=="0"),t(3,I=!1)}catch(H){t(3,I=!1),console.error("Error fetching data:",H)}})}const A=y=>new Promise((V,H)=>{let L=new FormData;L.append("id_route",y.id_route),L.append("id_event",y.id_event),L=le(L),fetch(`${u}api/admin/evidence/evidence_by_event.php`,{method:"POST",body:L}).then(K=>K.json()).then(K=>{V(K.data.event_evidence[0])}).catch(K=>{console.error("Error fetching data:",K),H(K)})}),Q=(y,V)=>{A(y).then(H=>{y.stopsApproval=j,y.smsActive=W,H&&(y.img=H.img,y.driver_comments=H.driver_comments,y.comments=H.comments),Fe("modal-delivery-info",Rt,{delivery:y,isLast:V}).then(L=>{}).finally(()=>{R(i)})})},Y=(y,V)=>{var H=new Object;V?H={title:y.destination,line1:y.dest_address}:H={title:y.origin,line1:y.origin_address},H.enterprise_name=y.enterprise_name,H.client_name=y.client_name,H.client_phone=y.tel,H.id_route=y.id_route,H.stopsApproval=j,H.smsActive=W;var L=!0;Fe("modal-delivery-info",Rt,{delivery:H,isLast:V,flag:L})},me=(y,V,H)=>{var L=!1;return P||(P=!0,Fe("modal-checklist",bn,{checklist:y,driverId:V,routeId:H,isLast:L}).then(K=>{P=!1}),ce(H,"checklist")),""},ve=y=>n(void 0,void 0,void 0,function*(){return yield R(y),C.length>0?Fe("modal-expense-detail",Vo,{routeId:y,expenses:C}).then(V=>{}):Fe("modal-expense",vt,{routeId:y}).then(V=>{}),""}),Ie=y=>n(void 0,void 0,void 0,function*(){return yield R(y),Fe("modal-incidence",Bo,{routeId:y}).then(V=>{}),""}),B=y=>{if(y.tracking_type=="subscription"){if(y.subscriber_info&&y.payment_type==="cash"&&new Date(y.subscriber_info.payment_next)<new Date)return!0}else if(y.tracking_type=="ecommerce"&&Number(y.payment_pending)>0)return!0;return!1};function ce(y,V){let H=new FormData;return H.append("id_route",y),H.append("status",V),H=le(H),fetch(`${u}api/admin/route/change_status.php`,{method:"POST",body:H}).then(L=>L.json()).then(L=>{}).catch(L=>{console.error("Error fetching data:",L)}),""}const ue=()=>{_.type=="super"||_.type=="admin"?We("/drivers/me"):_.id_driver&&We(`/drivers/${_.id_driver}`)},pe=(y,V)=>n(void 0,void 0,void 0,function*(){yield(yield xe.create({header:y||"Error",message:V||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()});function le(y){return y.append("token",_.token),y.append("id_user_over",_.id_user),y}const ee=()=>n(void 0,void 0,void 0,function*(){if(_.id_enterprise){let y=new FormData;y.append("id_enterprise",_.id_enterprise),y=le(y);try{const V=yield fetch(`${u}api/admin/enterprise/enterprise_settings.php`,{method:"POST",body:y});V.ok?(D=(yield V.json()).nodos,j=ht("stops_wait_approval",D),W=ht("sms_active",D),t(10,z=ht("stops_order_restriction",D))):console.error("File upload failed:",V.statusText)}catch(V){console.error("Error during file upload:",V)}}}),fe=()=>Ie(i),de=()=>ve(i),re=y=>E(y.detail.value);function $(y){Re[y?"unshift":"push"](()=>{O=y,t(8,O)})}const ke=()=>{Y(h,!1)},ge=y=>{const V=p.findIndex(oe=>oe.id_event===y.id_event),H=V===0,L=V>0?p[V-1]:null,K=H||L&&L.img!==null,Z=y.img!==null&&y.img!=="";K||H&&!Z||z=="1"?Q(y,!1):pe("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},Ee=()=>{Y(h,!0)};function _e(y){Re[y?"unshift":"push"](()=>{O=y,t(8,O)})}const ae=()=>{Y(h,!1)},J=y=>{const V=p.findIndex(oe=>oe.id_event===y.id_event),H=V===0,L=V>0?p[V-1]:null,K=H||L&&L.img!==null,Z=y.img!==null&&y.img!=="";K||H&&!Z||z=="1"?Q(y,!1):pe("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},X=()=>{Y(h,!0)};function q(y){Re[y?"unshift":"push"](()=>{O=y,t(8,O)})}const ie=()=>{Y(h,!1)},Ce=y=>{const V=p.findIndex(oe=>oe.id_event===y.id_event),H=V===0,L=V>0?p[V-1]:null,K=H||L&&L.img!==null,Z=y.img!==null&&y.img!=="";K||H&&!Z||z=="1"?Q(y,!1):pe("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},ne=()=>{Y(h,!0)};return l.$$set=y=>{"routeId"in y&&t(0,i=y.routeId),"driverId"in y&&t(1,c=y.driverId)},l.$$.update=()=>{l.$$.dirty[0]&2097157&&(t(0,{routeId:i,driverId:c}=o.params,i,(t(1,c),t(21,o),t(2,_),t(0,i))),t(2,_=JSON.parse(localStorage.getItem("userSession"))),_?_.id_user&&(_.type=="admin"||_.type=="super")?(R(i),We(`/drivers/me/routes/${i}`)):_.id_user&&_.id_driver&&(R(i),We(`/drivers/${_.id_driver}/routes/${i}`)):We("/"))},[i,c,_,I,b,p,h,k,O,M,z,S,E,Q,Y,me,ve,Ie,B,ue,pe,o,fe,de,re,$,ke,ge,Ee,_e,ae,J,X,q,ie,Ce,ne]}class ui extends Ye{constructor(e){super(),Qe(this,e,ni,$o,Je,{routeId:0,driverId:1},null,[-1,-1])}}export{ui as component};
