import{Z as gt,s as We,e as f,j as T,b as d,q as m,d as re,h as a,m as y,v as g,i as K,w as r,x as de,n as we,z as Be,_ as kn,B as u,o as $e,k as Se,$ as bt,t as Ne,r as Te,f as G,a0 as In,a1 as tt,A as Pe,y as Me,a2 as dt,a3 as Ve,a4 as Et,a5 as kt,F as dn,l as On,p as Nn}from"../chunks/index.CdEBkEwf.js";import{S as Xe,i as Je,t as ut,a as pt,c as Tn,b as yn,d as Cn,m as wn,e as Ln,g as Mn}from"../chunks/index.Dw8w8a4z.js";import{e as He,u as nt,d as ot,g as je,a as Ke,h as Re,b as An,c as Sn,i as _n,f as Dn,j as hn,k as Bn,m as pn,n as ft,o as Hn,q as It,r as mn,s as vn,t as Ot,v as ze,w as Pn,x as Un,y as Nt,z as Tt,A as Rn,B as gn,C as Vn,D as zn,E as jn,F as qn,p as Fn}from"../chunks/index.CMLxQm81.js";import"../chunks/index-6e05b96e.C_9q9BoX.js";import{m as et,D as lt,a as Fe,W as Gn,b as xn,I as Kn}from"../chunks/IonPage.Cc5-mKi8.js";import{q as Wn,t as Xn}from"../chunks/ion-modal.BYMRzj9z.js";import{g as xe}from"../chunks/entry.90E2-GdU.js";const Jn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,Yn=(i,e)=>{if(!customElements.get(i)){class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const n={};for(const o of this.attributes)n[o.name]=o.value;new e({target:this.shadowRoot,props:n})}}customElements.define(i,t)}},Qn=function(i){return document.createElement(i).constructor!==HTMLElement},Zn=(i,e)=>{Qn(i)||Yn(i,e)},qe=async(i,e,t)=>{Wn(),Xn(),Zn(i,e);const l=await et.create({component:i,componentProps:t});return l.present(),await l.onWillDismiss()};let Qe=gt({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]}),bn=gt({flag:[]});function $n(i){let e,t,l,n,o="Cancelar",c,s,h="Captura de Km/Gas",k,b,p,_="Confirmar",v,E,N,C,H,B,x;return{c(){e=f("ion-header"),t=f("ion-toolbar"),l=f("ion-buttons"),n=f("ion-button"),n.textContent=o,c=T(),s=f("ion-title"),s.textContent=h,k=T(),b=f("ion-buttons"),p=f("ion-button"),p.textContent=_,v=T(),E=f("ion-content"),N=f("ion-item"),C=f("ion-input"),this.h()},l(z){e=d(z,"ION-HEADER",{translucent:!0});var W=m(e);t=d(W,"ION-TOOLBAR",{});var P=m(t);l=d(P,"ION-BUTTONS",{slot:!0});var L=m(l);n=d(L,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),re(n)!=="svelte-17pq4f4"&&(n.textContent=o),L.forEach(a),c=y(P),s=d(P,"ION-TITLE",{"data-svelte-h":!0}),re(s)!=="svelte-1yhkaq7"&&(s.textContent=h),k=y(P),b=d(P,"ION-BUTTONS",{slot:!0});var S=m(b);p=d(S,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),re(p)!=="svelte-cm6j4s"&&(p.textContent=_),S.forEach(a),P.forEach(a),W.forEach(a),v=y(z),E=d(z,"ION-CONTENT",{fullscreen:!0});var R=m(E);N=d(R,"ION-ITEM",{});var I=m(N);C=d(I,"ION-INPUT",{class:!0,inputmode:!0,pattern:!0,type:!0,placeholder:!0,value:!0,required:!0});var M=m(C);M.forEach(a),I.forEach(a),R.forEach(a),this.h()},h(){g(n,"color","medium"),g(l,"slot","start"),g(p,"strong",""),g(b,"slot","end"),g(e,"translucent",""),g(C,"class","fin-km"),g(C,"inputmode","numeric"),g(C,"pattern","[0-9]*"),g(C,"type","number"),g(C,"placeholder",H="Ingresa "+i[0]+" actual"),g(C,"value",i[1]),g(C,"required",""),g(E,"fullscreen","")},m(z,W){K(z,e,W),r(e,t),r(t,l),r(l,n),r(t,c),r(t,s),r(t,k),r(t,b),r(b,p),K(z,v,W),K(z,E,W),r(E,N),r(N,C),B||(x=[de(n,"click",i[2]),de(p,"click",i[3]),de(C,"input",i[4])],B=!0)},p(z,[W]){W&1&&H!==(H="Ingresa "+z[0]+" actual")&&g(C,"placeholder",H),W&2&&g(C,"value",z[1])},i:we,o:we,d(z){z&&(a(e),a(v),a(E)),B=!1,Be(x)}}}function eo(i,e,t){const l=kn();let o=document.querySelector("ion-modal").componentProps.data_type,c="";bn.subscribe(p=>{o=p.flag[0],o=="km_final"||o=="km_inicial"?t(0,c="kilometraje"):t(0,c="litros de gasolina")});let s=0;function h(){et.dismiss()}function k(){l("modalResult",{data:"Your data",role:"confirm"}),o=="km_inicial"?Qe.update(_=>({..._,km_inicial:[s]})):o=="gas_inicial"?Qe.update(_=>({..._,gas_inicial:[s]})):o=="km_final"?Qe.update(_=>({..._,km_final:[s]})):o=="gas_final"&&Qe.update(_=>({..._,gas_final:[s]})),h()}return[c,s,h,k,p=>t(1,s=p.target.value)]}class to extends Xe{constructor(e){super(),Je(this,e,eo,$n,We,{})}}const _t=gt({items:[],checkedIndices:[],mandatory:[]});function wt(i,e,t){const l=i.slice();return l[56]=e[t],l[57]=e,l[58]=t,l}function no(i){let e,t,l,n,o,c="Kilometraje inicial",s,h,k=i[0]?i[0]+" km.":"Cargar km",b,p,_,v,E,N,C,H="Gasolina inicial (litros)",B,x,z=i[1]?i[1]+" litros":"Cargar gas",W,P,L,S;return P=bt(i[21][0]),{c(){e=f("ion-item"),t=f("ion-label"),l=f("input"),n=T(),o=f("p"),o.textContent=c,s=T(),h=f("ion-button"),b=Ne(k),p=T(),_=f("ion-item"),v=f("ion-label"),E=f("input"),N=T(),C=f("p"),C.textContent=H,B=T(),x=f("ion-button"),W=Ne(z),this.h()},l(R){e=d(R,"ION-ITEM",{});var I=m(e);t=d(I,"ION-LABEL",{style:!0});var M=m(t);l=d(M,"INPUT",{id:!0,style:!0,type:!0}),n=y(M),o=d(M,"P",{style:!0,"data-svelte-h":!0}),re(o)!=="svelte-88twxi"&&(o.textContent=c),M.forEach(a),s=y(I),h=d(I,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var U=m(h);b=Te(U,k),U.forEach(a),I.forEach(a),p=y(R),_=d(R,"ION-ITEM",{});var w=m(_);v=d(w,"ION-LABEL",{style:!0});var Q=m(v);E=d(Q,"INPUT",{id:!0,style:!0,type:!0}),N=y(Q),C=d(Q,"P",{style:!0,"data-svelte-h":!0}),re(C)!=="svelte-1ux30eb"&&(C.textContent=H),Q.forEach(a),B=y(w),x=d(w,"ION-BUTTON",{fill:!0,class:!0,size:!0,style:!0});var Z=m(x);W=Te(Z,z),Z.forEach(a),w.forEach(a),this.h()},h(){G(l,"id","chkbox-km-ini"),u(l,"pointer-events","auto"),G(l,"type","checkbox"),l.required=!0,u(o,"margin-left","10px"),u(t,"display","flex"),g(h,"fill","outline"),g(h,"size","small"),g(h,"class","loadKmInicial"),g(h,"aria-selected",""),G(E,"id","chkbox-gas-ini"),u(E,"pointer-events","auto"),G(E,"type","checkbox"),E.required=!0,u(C,"margin-left","10px"),u(v,"display","flex"),g(x,"fill","outline"),g(x,"class","loadGasInicial"),g(x,"size","small"),u(x,"height","16px "),P.p(l,E)},m(R,I){K(R,e,I),r(e,t),r(t,l),l.checked=~(i[4]||[]).indexOf(l.__value),i[28](l),r(t,n),r(t,o),r(e,s),r(e,h),r(h,b),K(R,p,I),K(R,_,I),r(_,v),r(v,E),i[30](E),E.checked=~(i[4]||[]).indexOf(E.__value),r(v,N),r(v,C),r(_,B),r(_,x),r(x,W),L||(S=[de(l,"change",i[27]),de(h,"click",i[29]),de(E,"change",i[31]),de(x,"click",i[32])],L=!0)},p(R,I){I[0]&16&&(l.checked=~(R[4]||[]).indexOf(l.__value)),I[0]&1&&k!==(k=R[0]?R[0]+" km.":"Cargar km")&&Me(b,k),I[0]&16&&(E.checked=~(R[4]||[]).indexOf(E.__value)),I[0]&2&&z!==(z=R[1]?R[1]+" litros":"Cargar gas")&&Me(W,z)},d(R){R&&(a(e),a(p),a(_)),i[28](null),i[30](null),P.r(),L=!1,Be(S)}}}function oo(i){let e,t,l,n,o,c="Kilometraje final",s,h,k=i[2]?i[2]+" km.":"Cargar km",b,p,_,v,E,N,C,H="Gasolina final (litros)",B,x,z=i[3]?i[3]+" litros":"Cargar gas",W,P,L,S;return P=bt(i[21][0]),{c(){e=f("ion-item"),t=f("ion-label"),l=f("input"),n=T(),o=f("p"),o.textContent=c,s=T(),h=f("ion-button"),b=Ne(k),p=T(),_=f("ion-item"),v=f("ion-label"),E=f("input"),N=T(),C=f("p"),C.textContent=H,B=T(),x=f("ion-button"),W=Ne(z),this.h()},l(R){e=d(R,"ION-ITEM",{});var I=m(e);t=d(I,"ION-LABEL",{style:!0});var M=m(t);l=d(M,"INPUT",{id:!0,style:!0,type:!0}),n=y(M),o=d(M,"P",{style:!0,"data-svelte-h":!0}),re(o)!=="svelte-ccmu71"&&(o.textContent=c),M.forEach(a),s=y(I),h=d(I,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var U=m(h);b=Te(U,k),U.forEach(a),I.forEach(a),p=y(R),_=d(R,"ION-ITEM",{});var w=m(_);v=d(w,"ION-LABEL",{style:!0});var Q=m(v);E=d(Q,"INPUT",{id:!0,style:!0,type:!0}),N=y(Q),C=d(Q,"P",{style:!0,"data-svelte-h":!0}),re(C)!=="svelte-wsoyd2"&&(C.textContent=H),Q.forEach(a),B=y(w),x=d(w,"ION-BUTTON",{fill:!0,size:!0,class:!0});var Z=m(x);W=Te(Z,z),Z.forEach(a),w.forEach(a),this.h()},h(){G(l,"id","chkbox-km-fin"),u(l,"pointer-events","auto"),G(l,"type","checkbox"),l.required=!0,u(o,"margin-left","10px"),u(t,"display","flex"),g(h,"fill","outline"),g(h,"size","small"),g(h,"class","loadKmInicial"),g(h,"aria-selected",""),G(E,"id","chkbox-gas-fin"),u(E,"pointer-events","auto"),G(E,"type","checkbox"),E.required=!0,u(C,"margin-left","10px"),u(v,"display","flex"),g(x,"fill","outline"),g(x,"size","small"),g(x,"class","loadGasInicial"),P.p(l,E)},m(R,I){K(R,e,I),r(e,t),r(t,l),l.checked=~(i[4]||[]).indexOf(l.__value),i[22](l),r(t,n),r(t,o),r(e,s),r(e,h),r(h,b),K(R,p,I),K(R,_,I),r(_,v),r(v,E),E.checked=~(i[4]||[]).indexOf(E.__value),i[25](E),r(v,N),r(v,C),r(_,B),r(_,x),r(x,W),L||(S=[de(l,"change",i[20]),de(h,"click",i[23]),de(E,"change",i[24]),de(x,"click",i[26])],L=!0)},p(R,I){I[0]&16&&(l.checked=~(R[4]||[]).indexOf(l.__value)),I[0]&4&&k!==(k=R[2]?R[2]+" km.":"Cargar km")&&Me(b,k),I[0]&16&&(E.checked=~(R[4]||[]).indexOf(E.__value)),I[0]&8&&z!==(z=R[3]?R[3]+" litros":"Cargar gas")&&Me(W,z)},d(R){R&&(a(e),a(p),a(_)),i[22](null),i[25](null),P.r(),L=!1,Be(S)}}}function lo(i){let e=[],t=new Map,l,n=He(i[13]);const o=c=>c[56].id_checklist_event;for(let c=0;c<n.length;c+=1){let s=wt(i,n,c),h=o(s);t.set(h,e[c]=Lt(h,s))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();l=Se()},l(c){for(let s=0;s<e.length;s+=1)e[s].l(c);l=Se()},m(c,s){for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(c,s);K(c,l,s)},p(c,s){s[0]&407664&&(n=He(c[13]),e=nt(e,s,o,1,c,n,t,l.parentNode,ot,Lt,l,wt))},d(c){c&&a(l);for(let s=0;s<e.length;s+=1)e[s].d(c)}}}function io(i){let e,t=(i[12][i[56].id_checklist_event]?i[12][i[56].id_checklist_event]:"Cargar evidencia")+"",l;return{c(){e=f("label"),l=Ne(t),this.h()},l(n){e=d(n,"LABEL",{for:!0,class:!0});var o=m(e);l=Te(o,t),o.forEach(a),this.h()},h(){G(e,"for","chklist-"+i[56].id_checklist_event),G(e,"class","button-label svelte-1ruehls")},m(n,o){K(n,e,o),r(e,l)},p(n,o){o[0]&4096&&t!==(t=(n[12][n[56].id_checklist_event]?n[12][n[56].id_checklist_event]:"Cargar evidencia")+"")&&Me(l,t)},d(n){n&&a(e)}}}function ro(i){let e;return{c(){e=f("ion-spinner"),this.h()},l(t){e=d(t,"ION-SPINNER",{name:!0,class:!0}),m(e).forEach(a),this.h()},h(){g(e,"name","dots"),g(e,"class","button-spinner svelte-1ruehls")},m(t,l){K(t,e,l)},p:we,d(t){t&&a(e)}}}function Lt(i,e){let t,l,n,o=e[56],c,s,h=e[56].item+"",k,b,p,_=e[56].mandatory=="1"?" * ":"",v,E,N,C,H,B,x,z,W,P;const L=()=>e[34](n,o),S=()=>e[34](null,o);function R(){return e[35](e[56])}function I(Q,Z){return Q[11][Q[56].id_checklist_event]?ro:io}let M=I(e),U=M(e);function w(...Q){return e[37](e[56],...Q)}return z=bt(e[21][0]),{key:i,first:null,c(){t=f("ion-item"),l=f("ion-label"),n=f("input"),c=T(),s=f("p"),k=Ne(h),b=T(),p=f("b"),v=Ne(_),E=T(),N=f("ion-button"),C=f("div"),U.c(),H=T(),B=f("input"),x=T(),this.h()},l(Q){t=d(Q,"ION-ITEM",{});var Z=m(t);l=d(Z,"ION-LABEL",{style:!0});var me=m(l);n=d(me,"INPUT",{id:!0,style:!0,type:!0}),c=y(me),s=d(me,"P",{style:!0});var he=m(s);k=Te(he,h),b=y(he),he.forEach(a),p=d(me,"B",{style:!0});var Oe=m(p);v=Te(Oe,_),Oe.forEach(a),me.forEach(a),E=y(Z),N=d(Z,"ION-BUTTON",{fill:!0,class:!0,size:!0});var A=m(N);C=d(A,"DIV",{class:!0});var ae=m(C);U.l(ae),H=y(ae),B=d(ae,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),ae.forEach(a),A.forEach(a),x=y(Z),Z.forEach(a),this.h()},h(){G(n,"id",`chkbox-${e[56].id_checklist_event}`),u(n,"pointer-events","auto"),G(n,"type","checkbox"),n.__value=e[56].id_checklist_event,In(n,n.__value),n.required=!0,u(s,"margin-left","10px"),u(p,"margin-left","5px"),u(l,"display","flex"),u(B,"display","none"),G(B,"id","chklist-"+e[56].id_checklist_event),G(B,"name","fileToUpload"),G(B,"type","file"),G(B,"accept","image/*"),G(B,"capture","environment"),G(C,"class","button-content svelte-1ruehls"),g(N,"fill","outline"),g(N,"class","loadEvidence svelte-1ruehls"),g(N,"size","small"),z.p(n),this.first=t},m(Q,Z){K(Q,t,Z),r(t,l),r(l,n),n.checked=~(e[4]||[]).indexOf(n.__value),L(),r(l,c),r(l,s),r(s,k),r(s,b),r(l,p),r(p,v),r(t,E),r(t,N),r(N,C),U.m(C,null),r(C,H),r(C,B),e[36](B),r(t,x),W||(P=[de(n,"change",e[33]),de(n,"change",R),de(B,"change",w)],W=!0)},p(Q,Z){e=Q,Z[0]&16&&(n.checked=~(e[4]||[]).indexOf(n.__value)),o!==e[56]&&(S(),o=e[56],L()),M===(M=I(e))&&U?U.p(e,Z):(U.d(1),U=M(e),U&&(U.c(),U.m(C,H)))},d(Q){Q&&a(t),S(),U.d(),e[36](null),z.r(),W=!1,Be(P)}}}function ao(i){let e,t,l,n,o="Cancelar",c,s,h="REQUERIMIENTOS DE RUTA",k,b,p,_,v,E,N,C="Confirmar",H,B;function x(L,S){return L[14]?oo:no}let W=x(i)(i),P=i[13]&&lo(i);return{c(){e=f("ion-header"),t=f("ion-toolbar"),l=f("ion-buttons"),n=f("ion-button"),n.textContent=o,c=T(),s=f("ion-title"),s.textContent=h,k=T(),b=f("ion-content"),p=f("ion-list"),W.c(),_=T(),P&&P.c(),v=T(),E=f("ion-footer"),N=f("ion-button"),N.textContent=C,this.h()},l(L){e=d(L,"ION-HEADER",{translucent:!0});var S=m(e);t=d(S,"ION-TOOLBAR",{});var R=m(t);l=d(R,"ION-BUTTONS",{slot:!0});var I=m(l);n=d(I,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),re(n)!=="svelte-1dnmkxs"&&(n.textContent=o),I.forEach(a),c=y(R),s=d(R,"ION-TITLE",{"data-svelte-h":!0}),re(s)!=="svelte-19bar5p"&&(s.textContent=h),R.forEach(a),S.forEach(a),k=y(L),b=d(L,"ION-CONTENT",{fullscreen:!0});var M=m(b);p=d(M,"ION-LIST",{});var U=m(p);W.l(U),_=y(U),P&&P.l(U),U.forEach(a),M.forEach(a),v=y(L),E=d(L,"ION-FOOTER",{});var w=m(E);N=d(w,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),re(N)!=="svelte-g82qqw"&&(N.textContent=C),w.forEach(a),this.h()},h(){g(n,"color","medium"),g(l,"slot","start"),g(e,"translucent",""),g(b,"fullscreen",""),g(N,"fill","outline"),g(N,"color","tertiary"),g(N,"strong",""),u(N,"width","99%"),u(N,"height","auto")},m(L,S){K(L,e,S),r(e,t),r(t,l),r(l,n),r(t,c),r(t,s),K(L,k,S),K(L,b,S),r(b,p),W.m(p,null),r(p,_),P&&P.m(p,null),K(L,v,S),K(L,E,S),r(E,N),H||(B=[de(n,"click",i[15]),de(N,"click",i[16])],H=!0)},p(L,S){W.p(L,S),L[13]&&P.p(L,S)},i:we,o:we,d(L){L&&(a(e),a(k),a(b),a(v),a(E)),W.d(),P&&P.d(),H=!1,Be(B)}}}function mt(i,e){if(typeof i=="object"&&i!==null||Array.isArray(i)){if(Array.isArray(i))return i.map(t=>mt(t,e)).flat();{const t=Object.keys(i);let l;return e=="id_checklist_event"?l=t.filter(o=>o.toLowerCase().includes("id_checklist_event")).map(o=>i[o]):e=="mandatory"?l=t.filter(o=>o.toLowerCase().includes("mandatory")).map(o=>i[o]):(console.error("Tipo de dato no reconocido."),l=!1),l}}else return console.error("Invalid input. Please provide a valid object or array."),[]}function so(i,e,t){let l=lt,n=document.querySelector("ion-modal");const o=n.componentProps.checklist,c=n.componentProps.driverId,s=n.componentProps.routeId,h=n.componentProps.isLast;let k,b,p,_,v=[],E=null,N={},C,H,B,x,z={},W=new Object,P={},L={};$e(()=>{W=JSON.parse(localStorage.getItem("userSession")),h?console.log("Último checklist"):_t.update(O=>(O.mandatory=mt(o,"mandatory"),O.items=mt(o,"id_checklist_event"),O))});function S(O){t(11,z[O]=!0,z)}const R=async()=>{await(await Fe.create({header:"Datos o checklist incompletos",message:"Carga la evidencia requerida y marca todas las casillas para confirmar",buttons:[{text:"Cerrar"}]})).present()},I=async(O,J)=>{await(await Fe.create({header:O||"Error",message:J||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},M=async O=>{await(await Fe.create({header:"Datos inválidos",message:O=="km"?"Llena correctamente el campo de kilometraje inicial":"Llena correctamente el campo de gasolina inicial",buttons:[{text:"Cerrar"}]})).present()},U=()=>{et.dismiss(),c?xe(`/drivers/${c}`):xe("/drivers/me")},w=()=>{if(h){var O=Oe(p,"km"),J=Oe(_,"gas");let be=new Object;be.km_final=O,be.gas_final=J,be.id_route=s,be.id_user_over=W.id_user,be.token=W.token,O&&J?(U(),je(`${l}api/admin/checklist/add_evidence.php`,function(ce){ce.success?I("Datos capturados","El kilometraje y gasolina final fueron registrados correctamente, espere aprobación para finalizar ruta"):I("Error","Vuelva a intentar capturar los datos solicitados")},be)):R()}else{var te=Oe(k,"km"),_e=Oe(b,"gas");_t.update(be=>{be.items;const ce=be.mandatory;if(be.items.filter((ye,Le)=>be.mandatory[Le]==="1").every(ye=>be.checkedIndices.includes(ye))&&te&&_e){let ye=new FormData;ye=oe(ye),ye.append("km_inicial",te),ye.append("gas_inicial",_e),ye.append("id_route",s);for(const Le in P)if(P.hasOwnProperty(Le)){const{img:Ye,img_id:Ue}=P[Le];ye.append(`selectedImages[${Le}][img]`,Ye),ye.append(`selectedImages[${Le}][img_id]`,Ue)}fetch(`${l}api/admin/checklist/add_evidence.php`,{method:"POST",body:ye}).then(Le=>Le.json()).then(Le=>{ce&&ce.some(Ye=>Ye==="1")?he(s,"checklist-pending"):he(s,"enroute")}).catch(Le=>{console.error("Error fetching data:",Le)}).finally(()=>{U()})}else if(!ce&&te&&_e){let ye=new FormData;ye.append("km_inicial",te),ye.append("gas_inicial",_e),ye=oe(ye),fetch(`${l}api/admin/checklist/add_evidence.php`,{method:"POST",body:ye}).then(Le=>Le.json()).then(Le=>{he(s,"enroute")}).catch(Le=>{console.error("Error fetching data:",Le)})}else R();return be})}ve()},Q=async(O,J)=>{S(J);const _e=O.target.files[0],be=await Z(_e);if(be){let ce=new FormData;ce.append("fileToUpload",be),ce=oe(ce);try{const Ie=await fetch(`${l}api/admin/manager/upload_img_driver.php`,{method:"POST",body:ce});if(Ie.ok){const Ce=await Ie.json();P={...P,[J]:{img:Ce.img,img_id:Ce.img_id}},t(12,L={...L,[J]:Ce.filename}),me(J),t(6,N[J].checked=!0,N),t(11,z[J]=!1,z)}else console.error("File upload failed:",Ie.statusText)}catch(Ie){console.error("Error during file upload:",Ie)}}},Z=async O=>new Promise(J=>{const te=new Image;te.src=URL.createObjectURL(O),te.onload=()=>{const _e=document.createElement("canvas"),be=_e.getContext("2d"),ce=800,Ie=600;let Ce=te.width,ye=te.height;Ce>ce&&(ye*=ce/Ce,Ce=ce),ye>Ie&&(Ce*=Ie/ye,ye=Ie),_e.width=Ce,_e.height=ye,be.drawImage(te,0,0,Ce,ye),_e.toBlob(Le=>{J(Le),URL.revokeObjectURL(te.src),be.clearRect(0,0,_e.width,_e.height)},"image/jpeg",.7)}}),me=O=>{_t.update(J=>(J.checkedIndices.indexOf(O)===-1?J.checkedIndices.push(O):console.error(`ID ${O} is already checked.`),J.items.forEach(_e=>{_e.id_checklist_event===O&&(_e.checked=!0)}),J))};function he(O,J){let te=new FormData;te.append("id_route",O),te.append("status",J),te=oe(te),fetch(`${l}api/admin/route/change_status.php`,{method:"POST",body:te}).then(_e=>_e.json()).then(_e=>{}).catch(_e=>{console.error("Error fetching data:",_e)})}function Oe(O,J){return/^\d+$/.test(O)?parseInt(O,10):(M(J),null)}function A(O,J){ae(J),n.componentProps.data_type=J,qe("modal-gas-km",to,{r:J}).then(()=>{Qe.subscribe(te=>{se(te,J)})})}function ae(O){bn.update(J=>({...J,flag:[O]}))}function se(O,J){t(0,k=O.km_inicial?O.km_inicial:null),t(1,b=O.gas_inicial?O.gas_inicial:null),t(2,p=O.km_final?O.km_final:null),t(3,_=O.gas_final?O.gas_final:null),J=="km_inicial"&&C&&t(7,C.checked=!0,C),J=="gas_inicial"&&H&&t(8,H.checked=!0,H),J=="km_final"&&B&&t(9,B.checked=!0,B),J=="gas_final"&&x&&t(10,x.checked=!0,x)}function ve(){Qe.set({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]})}function oe(O){return O.append("token",W.token),O.append("id_user_over",W.id_user),O}const $=[[]];function pe(){v=tt($[0],this.__value,this.checked),t(4,v)}function ue(O){Pe[O?"unshift":"push"](()=>{B=O,t(9,B)})}const le=O=>A(O,"km_final");function ee(){v=tt($[0],this.__value,this.checked),t(4,v)}function Ee(O){Pe[O?"unshift":"push"](()=>{x=O,t(10,x)})}const ge=O=>A(O,"gas_final");function ke(){v=tt($[0],this.__value,this.checked),t(4,v)}function fe(O){Pe[O?"unshift":"push"](()=>{C=O,t(7,C)})}const ie=O=>A(O,"km_inicial");function Y(O){Pe[O?"unshift":"push"](()=>{H=O,t(8,H)})}function X(){v=tt($[0],this.__value,this.checked),t(4,v)}const j=O=>A(O,"gas_inicial");function ne(){v=tt($[0],this.__value,this.checked),t(4,v)}function F(O,J){Pe[O?"unshift":"push"](()=>{N[J.id_checklist_event]=O,t(6,N)})}const V=O=>me(O.id_checklist_event);function D(O){Pe[O?"unshift":"push"](()=>{E=O,t(5,E)})}return[k,b,p,_,v,E,N,C,H,B,x,z,L,o,h,U,w,Q,me,A,pe,$,ue,le,ee,Ee,ge,ke,fe,ie,Y,X,j,ne,F,V,D,(O,J)=>Q(J,O.id_checklist_event)]}class En extends Xe{constructor(e){super(),Je(this,e,so,ao,We,{},null,[-1,-1])}}function Mt(i,e,t){const l=i.slice();return l[52]=e[t],l[54]=t,l}function co(i){let e,t,l="Confirmar",n,o;return{c(){e=f("ion-buttons"),t=f("ion-button"),t.textContent=l,this.h()},l(c){e=d(c,"ION-BUTTONS",{slot:!0});var s=m(e);t=d(s,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),re(t)!=="svelte-1qeh5vd"&&(t.textContent=l),s.forEach(a),this.h()},h(){g(t,"strong",""),g(e,"slot","end")},m(c,s){K(c,e,s),r(e,t),n||(o=de(t,"click",i[21]),n=!0)},p:we,d(c){c&&a(e),n=!1,o()}}}function uo(i){let e,t,l,n,o,c="Empresa",s,h,k=i[9].enterprise_name+"",b;return{c(){e=f("ion-item"),t=f("ion-icon"),l=T(),n=f("ion-label"),o=f("p"),o.textContent=c,s=T(),h=f("h2"),b=Ne(k),this.h()},l(p){e=d(p,"ION-ITEM",{});var _=m(e);t=d(_,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=y(_),n=d(_,"ION-LABEL",{});var v=m(n);o=d(v,"P",{"data-svelte-h":!0}),re(o)!=="svelte-6noid3"&&(o.textContent=c),s=y(v),h=d(v,"H2",{});var E=m(h);b=Te(E,k),E.forEach(a),v.forEach(a),_.forEach(a),this.h()},h(){g(t,"icon",vn),g(t,"slot","start")},m(p,_){K(p,e,_),r(e,t),r(e,l),r(e,n),r(n,o),r(n,s),r(n,h),r(h,b)},p:we,d(p){p&&a(e)}}}function fo(i){let e,t,l,n,o,c="Negocio",s,h,k=i[9].client_name+"",b;return{c(){e=f("ion-item"),t=f("ion-icon"),l=T(),n=f("ion-label"),o=f("p"),o.textContent=c,s=T(),h=f("h2"),b=Ne(k),this.h()},l(p){e=d(p,"ION-ITEM",{});var _=m(e);t=d(_,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=y(_),n=d(_,"ION-LABEL",{});var v=m(n);o=d(v,"P",{"data-svelte-h":!0}),re(o)!=="svelte-57b1dg"&&(o.textContent=c),s=y(v),h=d(v,"H2",{});var E=m(h);b=Te(E,k),E.forEach(a),v.forEach(a),_.forEach(a),this.h()},h(){g(t,"icon",vn),g(t,"slot","start")},m(p,_){K(p,e,_),r(e,t),r(e,l),r(e,n),r(n,o),r(n,s),r(n,h),r(h,b)},p:we,d(p){p&&a(e)}}}function _o(i){let e,t,l,n,o,c="Teléfono de Negocio",s,h,k=i[9].client_phone+"",b;return{c(){e=f("ion-item"),t=f("ion-icon"),l=T(),n=f("ion-label"),o=f("p"),o.textContent=c,s=T(),h=f("h2"),b=Ne(k),this.h()},l(p){e=d(p,"ION-ITEM",{href:!0});var _=m(e);t=d(_,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=y(_),n=d(_,"ION-LABEL",{class:!0});var v=m(n);o=d(v,"P",{"data-svelte-h":!0}),re(o)!=="svelte-1u5l7fz"&&(o.textContent=c),s=y(v),h=d(v,"H2",{});var E=m(h);b=Te(E,k),E.forEach(a),v.forEach(a),_.forEach(a),this.h()},h(){g(t,"icon",An),g(t,"slot","start"),g(n,"class","ion-text-wrap"),g(e,"href","tel:"+i[9].client_phone)},m(p,_){K(p,e,_),r(e,t),r(e,l),r(e,n),r(n,o),r(n,s),r(n,h),r(h,b)},p:we,d(p){p&&a(e)}}}function ho(i){let e,t,l,n,o,c="Domicilio Alternativo",s,h,k=i[9].line2+"",b,p,_;return{c(){e=f("ion-item"),t=f("ion-icon"),l=T(),n=f("ion-label"),o=f("p"),o.textContent=c,s=T(),h=f("h2"),b=Ne(k),p=T(),_=f("ion-icon"),this.h()},l(v){e=d(v,"ION-ITEM",{href:!0});var E=m(e);t=d(E,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=y(E),n=d(E,"ION-LABEL",{class:!0});var N=m(n);o=d(N,"P",{"data-svelte-h":!0}),re(o)!=="svelte-1ub9uzw"&&(o.textContent=c),s=y(N),h=d(N,"H2",{});var C=m(h);b=Te(C,k),C.forEach(a),N.forEach(a),p=y(E),_=d(E,"ION-ICON",{icon:!0,slot:!0}),m(_).forEach(a),E.forEach(a),this.h()},h(){g(t,"icon",Ot),g(t,"slot","start"),g(n,"class","ion-text-wrap"),g(_,"icon",ze),g(_,"slot","end"),g(e,"href","https://www.google.com/maps/searhc/?api=1&query="+i[9].line2)},m(v,E){K(v,e,E),r(e,t),r(e,l),r(e,n),r(n,o),r(n,s),r(n,h),r(h,b),r(e,p),r(e,_)},p:we,d(v){v&&a(e)}}}function po(i){let e,t,l,n,o,c="Domicilio",s,h,k=i[9].line1+"",b,p,_,v,E=i[9].line2&&i[9].line2.trim().length,N,C=E&&mo(i);return{c(){e=f("ion-item"),t=f("ion-icon"),l=T(),n=f("ion-label"),o=f("p"),o.textContent=c,s=T(),h=f("h2"),b=Ne(k),p=T(),_=f("ion-icon"),v=T(),C&&C.c(),N=Se(),this.h()},l(H){e=d(H,"ION-ITEM",{href:!0});var B=m(e);t=d(B,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=y(B),n=d(B,"ION-LABEL",{class:!0});var x=m(n);o=d(x,"P",{"data-svelte-h":!0}),re(o)!=="svelte-cbm7q1"&&(o.textContent=c),s=y(x),h=d(x,"H2",{});var z=m(h);b=Te(z,k),z.forEach(a),x.forEach(a),p=y(B),_=d(B,"ION-ICON",{icon:!0,slot:!0}),m(_).forEach(a),B.forEach(a),v=y(H),C&&C.l(H),N=Se(),this.h()},h(){g(t,"icon",Ot),g(t,"slot","start"),g(n,"class","ion-text-wrap"),g(_,"icon",ze),g(_,"slot","end"),g(e,"href","https://www.google.com/maps/search/?api=1&query="+i[9].line1)},m(H,B){K(H,e,B),r(e,t),r(e,l),r(e,n),r(n,o),r(n,s),r(n,h),r(h,b),r(e,p),r(e,_),K(H,v,B),C&&C.m(H,B),K(H,N,B)},p(H,B){E&&C.p(H,B)},d(H){H&&(a(e),a(v),a(N)),C&&C.d(H)}}}function mo(i){let e,t,l,n,o,c="Domicilio Alternativo",s,h,k=i[9].line2+"",b,p,_;return{c(){e=f("ion-item"),t=f("ion-icon"),l=T(),n=f("ion-label"),o=f("p"),o.textContent=c,s=T(),h=f("h2"),b=Ne(k),p=T(),_=f("ion-icon"),this.h()},l(v){e=d(v,"ION-ITEM",{href:!0});var E=m(e);t=d(E,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=y(E),n=d(E,"ION-LABEL",{class:!0});var N=m(n);o=d(N,"P",{"data-svelte-h":!0}),re(o)!=="svelte-1ub9uzw"&&(o.textContent=c),s=y(N),h=d(N,"H2",{});var C=m(h);b=Te(C,k),C.forEach(a),N.forEach(a),p=y(E),_=d(E,"ION-ICON",{icon:!0,slot:!0}),m(_).forEach(a),E.forEach(a),this.h()},h(){g(t,"icon",Ot),g(t,"slot","start"),g(n,"class","ion-text-wrap"),g(_,"icon",ze),g(_,"slot","end"),g(e,"href","https://www.google.com/maps/search/?api=1&query="+i[9].line2)},m(v,E){K(v,e,E),r(e,t),r(e,l),r(e,n),r(n,o),r(n,s),r(n,h),r(h,b),r(e,p),r(e,_)},p:we,d(v){v&&a(e)}}}function vo(i){let e,t,l,n,o,c="Contacto del Cliente",s,h,k,b,p=i[13]&&i[13]==="1"&&go(i);return{c(){e=f("ion-item"),t=f("ion-icon"),l=T(),n=f("ion-label"),o=f("p"),o.textContent=c,s=T(),h=f("h2"),k=Ne(i[14]),b=T(),p&&p.c(),this.h()},l(_){e=d(_,"ION-ITEM",{});var v=m(e);t=d(v,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=y(v),n=d(v,"ION-LABEL",{class:!0});var E=m(n);o=d(E,"P",{"data-svelte-h":!0}),re(o)!=="svelte-1utsyb6"&&(o.textContent=c),s=y(E),h=d(E,"H2",{});var N=m(h);k=Te(N,i[14]),N.forEach(a),E.forEach(a),b=y(v),p&&p.l(v),v.forEach(a),this.h()},h(){g(t,"icon",Sn),g(t,"slot","start"),g(n,"class","ion-text-wrap")},m(_,v){K(_,e,v),r(e,t),r(e,l),r(e,n),r(n,o),r(n,s),r(n,h),r(h,k),r(e,b),p&&p.m(e,null)},p(_,v){_[13]&&_[13]==="1"&&p.p(_,v)},d(_){_&&a(e),p&&p.d()}}}function go(i){let e,t=`<ion-icon icon="${Pn}" slot="start"></ion-icon>
                        Notificar Cliente`,l,n;return{c(){e=f("ion-button"),e.innerHTML=t,this.h()},l(o){e=d(o,"ION-BUTTON",{fill:!0,style:!0,"data-svelte-h":!0}),re(e)!=="svelte-149vhpt"&&(e.innerHTML=t),this.h()},h(){g(e,"fill","outline"),u(e,"margin-left","16px")},m(o,c){K(o,e,c),l||(n=de(e,"click",i[22]),l=!0)},p:we,d(o){o&&a(e),l=!1,n()}}}function bo(i){let e,t,l,n,o,c="Notas de ubicación",s,h,k;return{c(){e=f("ion-item"),t=f("ion-icon"),l=T(),n=f("ion-label"),o=f("p"),o.textContent=c,s=T(),h=f("h2"),k=Ne(i[15]),this.h()},l(b){e=d(b,"ION-ITEM",{});var p=m(e);t=d(p,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=y(p),n=d(p,"ION-LABEL",{class:!0});var _=m(n);o=d(_,"P",{"data-svelte-h":!0}),re(o)!=="svelte-nhm2ft"&&(o.textContent=c),s=y(_),h=d(_,"H2",{});var v=m(h);k=Te(v,i[15]),v.forEach(a),_.forEach(a),p.forEach(a),this.h()},h(){g(t,"icon",_n),g(t,"slot","start"),g(n,"class","ion-text-wrap")},m(b,p){K(b,e,p),r(e,t),r(e,l),r(e,n),r(n,o),r(n,s),r(n,h),r(h,k)},p:we,d(b){b&&a(e)}}}function Eo(i){let e,t,l,n,o,c="Horarios",s,h,k=i[9].schedule+"",b;return{c(){e=f("ion-item"),t=f("ion-icon"),l=T(),n=f("ion-label"),o=f("p"),o.textContent=c,s=T(),h=f("h2"),b=Ne(k),this.h()},l(p){e=d(p,"ION-ITEM",{});var _=m(e);t=d(_,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=y(_),n=d(_,"ION-LABEL",{});var v=m(n);o=d(v,"P",{"data-svelte-h":!0}),re(o)!=="svelte-11q7hm5"&&(o.textContent=c),s=y(v),h=d(v,"H2",{});var E=m(h);b=Te(E,k),E.forEach(a),v.forEach(a),_.forEach(a),this.h()},h(){g(t,"icon",Dn),g(t,"slot","start")},m(p,_){K(p,e,_),r(e,t),r(e,l),r(e,n),r(n,o),r(n,s),r(n,h),r(h,b)},p:we,d(p){p&&a(e)}}}function ko(i){let e,t,l,n,o,c="Notas del operador",s,h,k=i[9].driver_comments+"",b;return{c(){e=f("ion-item"),t=f("ion-icon"),l=T(),n=f("ion-label"),o=f("p"),o.textContent=c,s=T(),h=f("h2"),b=Ne(k),this.h()},l(p){e=d(p,"ION-ITEM",{});var _=m(e);t=d(_,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=y(_),n=d(_,"ION-LABEL",{});var v=m(n);o=d(v,"P",{"data-svelte-h":!0}),re(o)!=="svelte-1yk9qp4"&&(o.textContent=c),s=y(v),h=d(v,"H2",{});var E=m(h);b=Te(E,k),E.forEach(a),v.forEach(a),_.forEach(a),this.h()},h(){g(t,"icon",hn),g(t,"slot","start")},m(p,_){K(p,e,_),r(e,t),r(e,l),r(e,n),r(n,o),r(n,s),r(n,h),r(h,b)},p:we,d(p){p&&a(e)}}}function Io(i){let e,t=i[9].logistic_comments!="<br>"&&Oo(i);return{c(){t&&t.c(),e=Se()},l(l){t&&t.l(l),e=Se()},m(l,n){t&&t.m(l,n),K(l,e,n)},p(l,n){l[9].logistic_comments!="<br>"&&t.p(l,n)},d(l){l&&a(e),t&&t.d(l)}}}function Oo(i){let e,t,l,n,o,c="Comentarios logísticos",s,h,k=i[9].logistic_comments+"",b;return{c(){e=f("ion-item"),t=f("ion-icon"),l=T(),n=f("ion-label"),o=f("p"),o.textContent=c,s=T(),h=f("h2"),b=Ne(k),this.h()},l(p){e=d(p,"ION-ITEM",{});var _=m(e);t=d(_,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=y(_),n=d(_,"ION-LABEL",{class:!0});var v=m(n);o=d(v,"P",{"data-svelte-h":!0}),re(o)!=="svelte-1iz85r6"&&(o.textContent=c),s=y(v),h=d(v,"H2",{});var E=m(h);b=Te(E,k),E.forEach(a),v.forEach(a),_.forEach(a),this.h()},h(){g(t,"icon",_n),g(t,"slot","start"),g(n,"class","ion-text-wrap")},m(p,_){K(p,e,_),r(e,t),r(e,l),r(e,n),r(n,o),r(n,s),r(n,h),r(h,b)},p:we,d(p){p&&a(e)}}}function No(i){let e,t,l,n,o="<p>Etiqueta</p>",c,s,h=(i[9].tag?i[9].tag:"")+"",k;return{c(){e=f("ion-item"),t=f("ion-icon"),l=T(),n=f("ion-label"),n.innerHTML=o,c=T(),s=f("div"),k=Ne(h),this.h()},l(b){e=d(b,"ION-ITEM",{});var p=m(e);t=d(p,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=y(p),n=d(p,"ION-LABEL",{class:!0,"data-svelte-h":!0}),re(n)!=="svelte-50rr6d"&&(n.innerHTML=o),c=y(p),s=d(p,"DIV",{class:!0,style:!0});var _=m(s);k=Te(_,h),_.forEach(a),p.forEach(a),this.h()},h(){g(t,"icon",Bn),g(t,"slot","start"),g(n,"class","ion-text-wrap"),G(s,"class","stop-tag"),u(s,"background-color",i[16]),u(s,"border","1px solid "+i[17]),u(s,"color",i[9].tag_color),u(s,"font-size","14px"),u(s,"text-align","center"),u(s,"align-content","center"),u(s,"border-radius","20px"),u(s,"white-space","normal"),u(s,"padding","4px 8px"),u(s,"width","auto",1),u(s,"display","inline-block")},m(b,p){K(b,e,p),r(e,t),r(e,l),r(e,n),r(e,c),r(e,s),r(s,k)},p:we,d(b){b&&a(e)}}}function To(i){let e,t,l,n,o,c="Estado de entrega",s,h,k="Entregado",b,p,_="No Entregado",v,E,N="Entrega Parcial",C,H,B,x,z,W,P,L,S=i[4]===!0&&At(i),R=(i[5]===!0||i[5]===!1&&i[4]===!1)&&St(i);return{c(){e=f("ion-item"),t=f("ion-icon"),l=T(),n=f("ion-select"),o=f("div"),o.textContent=c,s=T(),h=f("ion-select-option"),h.textContent=k,b=T(),p=f("ion-select-option"),p.textContent=_,v=T(),E=f("ion-select-option"),E.textContent=N,C=T(),H=f("ion-item"),B=f("ion-icon"),x=T(),z=f("ion-textarea"),W=T(),P=f("section"),S&&S.c(),L=T(),R&&R.c(),this.h()},l(I){e=d(I,"ION-ITEM",{});var M=m(e);t=d(M,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=y(M),n=d(M,"ION-SELECT",{value:!0});var U=m(n);o=d(U,"DIV",{slot:!0,"data-svelte-h":!0}),re(o)!=="svelte-1635zca"&&(o.textContent=c),s=y(U),h=d(U,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),re(h)!=="svelte-1nhq8vd"&&(h.textContent=k),b=y(U),p=d(U,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),re(p)!=="svelte-dhd4r3"&&(p.textContent=_),v=y(U),E=d(U,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),re(E)!=="svelte-17taxwo"&&(E.textContent=N),U.forEach(a),M.forEach(a),C=y(I),H=d(I,"ION-ITEM",{});var w=m(H);B=d(w,"ION-ICON",{icon:!0,slot:!0}),m(B).forEach(a),x=y(w),z=d(w,"ION-TEXTAREA",{label:!0,placeholder:!0}),m(z).forEach(a),w.forEach(a),W=y(I),P=d(I,"SECTION",{style:!0});var Q=m(P);S&&S.l(Q),L=y(Q),R&&R.l(Q),Q.forEach(a),this.h()},h(){g(t,"icon",pn),g(t,"slot","start"),G(o,"slot","label"),g(h,"value","delivered"),g(p,"value","notdelivered"),g(E,"value","partialdeliver"),g(n,"value",i[12]?i[12]:"delivered"),g(B,"icon",ft),g(B,"slot","start"),g(z,"label","Notas"),g(z,"placeholder","Escribe aquí..."),u(P,"display","flex"),u(P,"gap","8px"),u(P,"padding","16px 16px 6px")},m(I,M){K(I,e,M),r(e,t),r(e,l),r(e,n),r(n,o),r(n,s),r(n,h),r(n,b),r(n,p),r(n,v),r(n,E),i[29](n),K(I,C,M),K(I,H,M),r(H,B),r(H,x),r(H,z),i[30](z),K(I,W,M),K(I,P,M),S&&S.m(P,null),r(P,L),R&&R.m(P,null)},p(I,M){I[4]===!0?S?S.p(I,M):(S=At(I),S.c(),S.m(P,L)):S&&(S.d(1),S=null),I[5]===!0||I[5]===!1&&I[4]===!1?R?R.p(I,M):(R=St(I),R.c(),R.m(P,null)):R&&(R.d(1),R=null)},d(I){I&&(a(e),a(C),a(H),a(W),a(P)),i[29](null),i[30](null),S&&S.d(),R&&R.d()}}}function At(i){let e,t=`<ion-icon icon="${Un}" slot="start"></ion-icon>
                        Ingreso`,l,n;return{c(){e=f("ion-button"),e.innerHTML=t,this.h()},l(o){e=d(o,"ION-BUTTON",{id:!0,style:!0,"data-svelte-h":!0}),re(e)!=="svelte-izs0s1"&&(e.innerHTML=t),this.h()},h(){g(e,"id","checkInBtn"),u(e,"flex","1")},m(o,c){K(o,e,c),l||(n=de(e,"click",i[23]),l=!0)},p:we,d(o){o&&a(e),l=!1,n()}}}function St(i){let e,t,l,n,o,c;return{c(){e=f("ion-button"),t=f("ion-icon"),l=Ne(`
                        Salida`),this.h()},l(s){e=d(s,"ION-BUTTON",{id:!0,style:!0,disabled:!0});var h=m(e);t=d(h,"ION-ICON",{icon:!0,slot:!0}),m(t).forEach(a),l=Te(h,`
                        Salida`),h.forEach(a),this.h()},h(){g(t,"icon",Hn),g(t,"slot","start"),g(e,"id","checkOutBtn"),u(e,"flex","1"),g(e,"disabled",n=i[5]===!1)},m(s,h){K(s,e,h),r(e,t),r(e,l),o||(c=de(e,"click",i[24]),o=!0)},p(s,h){h[0]&32&&n!==(n=s[5]===!1)&&g(e,"disabled",n)},d(s){s&&a(e),o=!1,c()}}}function yo(i){let e,t,l,n,o,c,s,h;return{c(){e=f("section"),t=f("ion-button"),l=f("label"),n=f("ion-icon"),o=Ne(`
                        Subir Evidencia
                        `),c=f("input"),this.h()},l(k){e=d(k,"SECTION",{style:!0});var b=m(e);t=d(b,"ION-BUTTON",{fill:!0,class:!0,style:!0});var p=m(t);l=d(p,"LABEL",{for:!0,style:!0});var _=m(l);n=d(_,"ION-ICON",{icon:!0,slot:!0,style:!0}),m(n).forEach(a),o=Te(_,`
                        Subir Evidencia
                        `),c=d(_,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),_.forEach(a),p.forEach(a),b.forEach(a),this.h()},h(){g(n,"icon",It),g(n,"slot","start"),u(n,"vertical-align","middle"),u(c,"display","none"),G(c,"id","eventEvidence"),G(c,"name","fileToUpload"),G(c,"type","file"),c.multiple=!0,G(c,"accept","image/*"),G(c,"capture","environment"),G(l,"for","eventEvidence"),u(l,"width","100%"),u(l,"height","100%"),g(t,"fill","outline"),g(t,"class","loadEvidence"),u(t,"flex","1"),u(t,"display","flex"),u(t,"align-items","center"),u(t,"gap","8px"),u(e,"display","flex"),u(e,"gap","8px"),u(e,"padding","0px 16px")},m(k,b){K(k,e,b),r(e,t),r(t,l),r(l,n),r(l,o),r(l,c),s||(h=[de(c,"change",i[18]),de(c,"click",i[19])],s=!0)},p:we,d(k){k&&a(e),s=!1,Be(h)}}}function Dt(i){let e,t,l=He(i[2]),n=[];for(let o=0;o<l.length;o+=1)n[o]=Bt(Mt(i,l,o));return{c(){e=f("section"),t=f("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=d(o,"SECTION",{});var c=m(e);t=d(c,"DIV",{class:!0,style:!0});var s=m(t);for(let h=0;h<n.length;h+=1)n[h].l(s);s.forEach(a),c.forEach(a),this.h()},h(){G(t,"class","image-grid"),u(t,"display","grid"),u(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),u(t,"gap","10px"),u(t,"padding","0px 10px")},m(o,c){K(o,e,c),r(e,t);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(t,null)},p(o,c){if(c[0]&167772164){l=He(o[2]);let s;for(s=0;s<l.length;s+=1){const h=Mt(o,l,s);n[s]?n[s].p(h,c):(n[s]=Bt(h),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=l.length}},d(o){o&&a(e),dt(n,o)}}}function Bt(i){let e,t,l,n,o,c=`<ion-icon icon="${Nt}"></ion-icon>`,s,h,k;function b(){return i[31](i[52])}function p(){return i[32](i[54])}return{c(){e=f("div"),t=f("ion-img"),n=T(),o=f("button"),o.innerHTML=c,s=T(),this.h()},l(_){e=d(_,"DIV",{class:!0,style:!0});var v=m(e);t=d(v,"ION-IMG",{src:!0,alt:!0,style:!0}),m(t).forEach(a),n=y(v),o=d(v,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),re(o)!=="svelte-euavut"&&(o.innerHTML=c),s=y(v),v.forEach(a),this.h()},h(){Ve(t.src,l=i[52])||g(t,"src",l),g(t,"alt","Evidencia fotográfica"),u(t,"width","100%"),u(t,"height","100px"),u(t,"object-fit","cover"),u(t,"cursor","pointer"),u(t,"border","1px solid #ccc"),u(t,"border-radius","4px"),u(t,"margin-top","16px"),G(o,"class","remove-button"),u(o,"position","absolute"),u(o,"top","5px"),u(o,"right","5px"),u(o,"border","none"),u(o,"cursor","pointer"),u(o,"font-size","18px"),u(o,"background","white"),u(o,"border-radius","50%"),u(o,"padding","3px 4px 0px"),u(o,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),u(o,"color","#0000008f"),G(e,"class","image-container"),u(e,"position","relative")},m(_,v){K(_,e,v),r(e,t),r(e,n),r(e,o),r(e,s),h||(k=[de(t,"click",b),de(o,"click",p)],h=!0)},p(_,v){i=_,v[0]&4&&!Ve(t.src,l=i[52])&&g(t,"src",l)},d(_){_&&a(e),h=!1,Be(k)}}}function Ht(i){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),re(e)!=="svelte-1aosxw0"&&(e.innerHTML=t),this.h()},h(){G(e,"class","overlay"),u(e,"position","fixed"),u(e,"top","0"),u(e,"left","0"),u(e,"width","100vw"),u(e,"height","100vh"),u(e,"background","rgba(0, 0, 0, 0.5)"),u(e,"display","flex"),u(e,"align-items","center"),u(e,"justify-content","center"),u(e,"z-index","9999")},m(l,n){K(l,e,n)},d(l){l&&a(e)}}}function Pt(i){let e,t,l,n,o,c,s=`<ion-icon icon="${Tt}"></ion-icon>`,h,k;return{c(){e=f("div"),t=f("div"),l=f("ion-img"),o=T(),c=f("button"),c.innerHTML=s,this.h()},l(b){e=d(b,"DIV",{class:!0,style:!0});var p=m(e);t=d(p,"DIV",{class:!0,style:!0});var _=m(t);l=d(_,"ION-IMG",{src:!0,alt:!0,style:!0}),m(l).forEach(a),o=y(_),c=d(_,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),re(c)!=="svelte-183t4ti"&&(c.innerHTML=s),_.forEach(a),p.forEach(a),this.h()},h(){Ve(l.src,n=i[7])||g(l,"src",n),g(l,"alt","Evidencia fotográfica"),u(l,"width","100%"),u(l,"height","auto"),G(c,"class","close-button"),u(c,"position","absolute"),u(c,"top","5px"),u(c,"right","5px"),u(c,"background","white"),u(c,"color","#444444d1"),u(c,"border","none"),u(c,"cursor","pointer"),u(c,"padding","2px 2px 0px 6px"),u(c,"border-radius","50%"),u(c,"font-size","20px"),G(t,"class","modal-content"),u(t,"position","relative"),u(t,"background","white"),u(t,"padding","20px"),u(t,"border-radius","8px"),u(t,"max-width","90vw"),u(t,"max-height","90vh"),u(t,"overflow","auto"),G(e,"class","modal-overlay"),u(e,"position","fixed"),u(e,"top","0"),u(e,"left","0"),u(e,"width","100vw"),u(e,"height","100vh"),u(e,"background","rgba(0, 0, 0, 0.8)"),u(e,"display","flex"),u(e,"justify-content","center"),u(e,"align-items","center"),u(e,"z-index","1000")},m(b,p){K(b,e,p),r(e,t),r(t,l),r(t,o),r(t,c),h||(k=[de(c,"click",i[26]),de(t,"click",Et(i[28])),de(e,"click",i[26])],h=!0)},p(b,p){p[0]&128&&!Ve(l.src,n=b[7])&&g(l,"src",n)},d(b){b&&a(e),h=!1,Be(k)}}}function Co(i){let e,t,l,n,o="Cerrar",c,s,h=i[9].title+"",k,b,p,_,v,E,N=i[9].client_phone&&i[9].client_phone.trim().length,C,H,B,x,z=i[9].schedule&&i[9].schedule.trim().length,W,P,L=i[9].logistic_comments&&i[9].logistic_comments.trim().length,S,R,I,M,U,w,Q,Z,me,he=(!i[10]&&!i[11]||i[10]&&i[11])&&co(i);function Oe(j,ne){return j[9].client_name!=null?fo:uo}let ae=Oe(i)(i),se=N&&_o(i);function ve(j,ne){if(j[9].line1&&j[9].line1.trim().length)return po;if(j[9].line2&&j[9].line2.trim().length)return ho}let oe=ve(i),$=oe&&oe(i),pe=i[14]&&vo(i),ue=i[15]&&i[15]!=="<br>"&&bo(i),le=z&&Eo(i),ee=i[9].driver_comments&&ko(i),Ee=L&&Io(i),ge=i[9].tag&&i[9].tag_color&&No(i),ke=!i[11]&&To(i),fe=(i[10]&&i[11]||!i[10]&&!i[11])&&yo(i),ie=i[1]&&Dt(i),Y=i[3]&&Ht(),X=i[6]&&Pt(i);return{c(){e=f("ion-header"),t=f("ion-toolbar"),l=f("ion-buttons"),n=f("ion-button"),n.textContent=o,c=T(),s=f("ion-title"),k=Ne(h),b=T(),he&&he.c(),p=T(),_=f("ion-content"),v=f("ion-list"),ae.c(),E=T(),se&&se.c(),C=T(),$&&$.c(),H=T(),pe&&pe.c(),B=T(),ue&&ue.c(),x=T(),le&&le.c(),W=T(),ee&&ee.c(),P=T(),Ee&&Ee.c(),S=T(),ge&&ge.c(),R=T(),ke&&ke.c(),I=T(),fe&&fe.c(),M=T(),ie&&ie.c(),U=T(),Y&&Y.c(),w=T(),X&&X.c(),Q=Se(),this.h()},l(j){e=d(j,"ION-HEADER",{translucent:!0});var ne=m(e);t=d(ne,"ION-TOOLBAR",{});var F=m(t);l=d(F,"ION-BUTTONS",{slot:!0});var V=m(l);n=d(V,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),re(n)!=="svelte-2ks32x"&&(n.textContent=o),V.forEach(a),c=y(F),s=d(F,"ION-TITLE",{style:!0,title:!0});var D=m(s);k=Te(D,h),D.forEach(a),b=y(F),he&&he.l(F),F.forEach(a),ne.forEach(a),p=y(j),_=d(j,"ION-CONTENT",{fullscreen:!0});var q=m(_);v=d(q,"ION-LIST",{});var O=m(v);ae.l(O),E=y(O),se&&se.l(O),C=y(O),$&&$.l(O),H=y(O),pe&&pe.l(O),B=y(O),ue&&ue.l(O),x=y(O),le&&le.l(O),W=y(O),ee&&ee.l(O),P=y(O),Ee&&Ee.l(O),S=y(O),ge&&ge.l(O),R=y(O),ke&&ke.l(O),I=y(O),fe&&fe.l(O),M=y(O),ie&&ie.l(O),O.forEach(a),q.forEach(a),U=y(j),Y&&Y.l(j),w=y(j),X&&X.l(j),Q=Se(),this.h()},h(){g(n,"color","medium"),g(l,"slot","start"),u(s,"text-align","center"),g(s,"title",i[9].title),g(e,"translucent",""),g(_,"fullscreen","")},m(j,ne){K(j,e,ne),r(e,t),r(t,l),r(l,n),r(t,c),r(t,s),r(s,k),r(t,b),he&&he.m(t,null),K(j,p,ne),K(j,_,ne),r(_,v),ae.m(v,null),r(v,E),se&&se.m(v,null),r(v,C),$&&$.m(v,null),r(v,H),pe&&pe.m(v,null),r(v,B),ue&&ue.m(v,null),r(v,x),le&&le.m(v,null),r(v,W),ee&&ee.m(v,null),r(v,P),Ee&&Ee.m(v,null),r(v,S),ge&&ge.m(v,null),r(v,R),ke&&ke.m(v,null),r(v,I),fe&&fe.m(v,null),r(v,M),ie&&ie.m(v,null),K(j,U,ne),Y&&Y.m(j,ne),K(j,w,ne),X&&X.m(j,ne),K(j,Q,ne),Z||(me=de(n,"click",i[20]),Z=!0)},p(j,ne){(!j[10]&&!j[11]||j[10]&&j[11])&&he.p(j,ne),ae.p(j,ne),N&&se.p(j,ne),$&&$.p(j,ne),j[14]&&pe.p(j,ne),j[15]&&j[15]!=="<br>"&&ue.p(j,ne),z&&le.p(j,ne),j[9].driver_comments&&ee.p(j,ne),L&&Ee.p(j,ne),j[9].tag&&j[9].tag_color&&ge.p(j,ne),j[11]||ke.p(j,ne),(j[10]&&j[11]||!j[10]&&!j[11])&&fe.p(j,ne),j[1]?ie?ie.p(j,ne):(ie=Dt(j),ie.c(),ie.m(v,null)):ie&&(ie.d(1),ie=null),j[3]?Y||(Y=Ht(),Y.c(),Y.m(w.parentNode,w)):Y&&(Y.d(1),Y=null),j[6]?X?X.p(j,ne):(X=Pt(j),X.c(),X.m(Q.parentNode,Q)):X&&(X.d(1),X=null)},i:we,o:we,d(j){j&&(a(e),a(p),a(_),a(U),a(w),a(Q)),he&&he.d(),ae.d(),se&&se.d(),$&&$.d(),pe&&pe.d(),ue&&ue.d(),le&&le.d(),ee&&ee.d(),Ee&&Ee.d(),ge&&ge.d(),ke&&ke.d(),fe&&fe.d(),ie&&ie.d(),Y&&Y.d(j),X&&X.d(j),Z=!1,me()}}}function wo(i,e,t){let l=lt,n=document.querySelector("ion-modal"),o=n.componentProps.delivery,c=n.componentProps.isLast||!1,s=n.componentProps.flag||!1,h=o.driver_comments?o.driver_comments:"",k=o.deliver_status?o.deliver_status:"",b=o.img?o.img:"",p=o.img_id?o.img_id:"",_=b?Ke(b):new Array,v=p?Ke(p):new Array,E={latitude:null,longitude:null},N=o.stopsApproval,C=o.smsActive,H=!1,B=!0,x=!1,z=o.phone_notification,W=o.comments_ext,P=!1,L="",S=new Object,R="",I=o.tag_color?Re(o.tag_color,.2):"",M=o.tag_color?Re(o.tag_color,.3):"";$e(()=>{S=JSON.parse(localStorage.getItem("userSession")),U()});function U(){o.date_service?o.date_service&&!o.date_completed&&!o.service_time?(t(4,B=!1),t(5,x=!0)):o.date_service&&o.date_completed&&o.service_time&&(t(4,B=!1),t(5,x=!1)):(t(4,B=!0),t(5,x=!1))}const w=async(V,D)=>{await(await Fe.create({header:V||"Error",message:D||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},Q=async(V="",D="",q="",O=function(te={}){},J={})=>{console.log(J),await(await Fe.create({header:V||"Error",message:D||"Vuelva a intentar",buttons:[{text:"No",role:"cancel",handler:()=>{}},{text:"Sí",handler:()=>{t(3,H=!0),je(q,function(_e={}){t(3,H=!1),O(_e)},J)}}]})).present()};async function Z(V,D){await(await Fe.create({header:"¿Cómo quieres notificar?",message:`Elige el medio para enviar mensaje a ${V.title} (${D})`,buttons:[{text:"SMS",handler:()=>$("sms",V,D)},{text:"WhatsApp",handler:()=>$("whatsapp",V,D)}]})).present()}const me=async V=>{if(_.length>=5){w("Límite de evidencias","Solo se permite subir 5 fotos por parada");return}if(s&&c&&_.length>=1){w("Límite de evidencias","Para el final de la ruta solo se permite subir 1 foto");return}const q=V.target.files[0];if(q)try{t(3,H=!0);const O=await A(q);O&&je(`${l}api/admin/manager/upload_img_driver.php`,function(J){J.success?(t(1,b=b?`${b},${J.img}`:J.img),p=p?`${p},${J.img_id}`:J.img_id,t(2,_=Ke(b)),v=Ke(p)):w("Carga fallida","Actualiza la página y vuelve a intentar. Si el problema persiste, contacta a soporte.")},{fileToUpload:O})}catch(O){console.error("Compression error:",O)}finally{t(3,H=!1)}};function he(V){var D=o.service_time;!D&&B&&!c&&!s&&(V.preventDefault(),w("Registrar Ingreso","Antes de subir la evidencia registra el ingreso a la actual parada."))}function Oe(){var V=s?o.date_completed:!1;if(!V&&!B&&x&&!c&&!s){var D=new Object;D.id_event=o.id_event,D.type="checkout",D.id_user_over=S.id_user,D.token=S.token,Q("Registrar Salida","¿Completaste tu entrega?",l+"api/admin/route/record_check_date.php",function(q){q.minutes&&w("Tiempo por parada","Completaste la parada en "+q.minutes+" minutos.")},D)}}const A=async V=>new Promise(D=>{const q=new Image;q.src=URL.createObjectURL(V),q.onload=()=>{const O=document.createElement("canvas"),J=O.getContext("2d"),te=800,_e=600;let be=q.width,ce=q.height;be>te&&(ce*=te/be,be=te),ce>_e&&(be*=_e/ce,ce=_e),O.width=be,O.height=ce,J.drawImage(q,0,0,be,ce),O.toBlob(Ie=>{D(Ie),URL.revokeObjectURL(q.src),J.clearRect(0,0,O.width,O.height)},"image/jpeg",.7)}}),ae=()=>{n.dismiss({data:Date.now()})},se=async()=>{try{if(t(3,H=!0),t(1,b=_.join(",")),p=v.join(","),Oe(),await oe())if(R.value=="delivered"||R.value!=="delivered"&&(h.value||o.driver_comments)||s&&c){const D={id_route:o.id_route,...!s&&!c&&{id_event:o.id_event},...!s&&!c&&{comments:h.value},...!s&&!c&&{deliver_status:R.value},img:b,img_id:p,lat:E.latitude,lon:E.longitude,...N==="0"&&{approve:"0"},...c&&{isLast:!0},...s&&c&&{destiny:!0},id_user_over:S.id_user,token:S.token};D.img&&D.img_id||b?(t(3,H=!0),je(`${l}api/admin/evidence/send_evidence.php`,function(q){if(q.success==!0){const O=D.id_route;ae(),c&&(ve("","",O,c),N=="0"&&fe(O,"completed")),t(3,H=!1)}else t(3,H=!1),w("Carga fallida","Actualiza la página y vuelve a intentar cargar la información!")},D)):w("Información incompleta","Cargar evidencia fotográfica faltante para completar parada.")}else w("Motivo de status de entrega","Favor de ingresar en notas el motivo por el que la entrega no fue entregada correctamente");else w("Ubicación faltante","Asegúrate darle permisos a Rutaflow para acceder a tu ubicación")}catch(V){console.error("Error fetching data:",V)}finally{t(3,H=!1)}},ve=(V,D,q,O)=>{n.componentProps.routeId=q,n.componentProps.driverId=o.id_driver,qe("modal-km-gas",En,{checklist:V,driverId:D,routeId:q,isLast:O}).then(J=>{})},oe=async()=>navigator.geolocation?new Promise((V,D)=>{navigator.geolocation.getCurrentPosition(q=>{E.latitude=q.coords.latitude,E.longitude=q.coords.longitude,V(!0)},q=>{console.error("Error getting location:",q),V(!1)})}):(console.error("Geolocation is not supported by your browser"),!1);async function $(V,D,q){const O={};if(V==="sms"){O.id_user_over=S.id_user,O.token=S.token,O.client_phone=q,O.client_name=D.title,O.delivery_phone=D.client_phone,O.enterprise_name=D.enterprise_name,je(`${l}api/admin/message_central/send_sms.php`,pe("SMS",D.title,q),O);return}try{var J=D.client_phone?`
Si deseas contactarnos, entra al siguiente link: https://wa.me/${D.client_phone}.`:".";O.text=`*Rutaflow*

El repartidor va en camino a tu domicilio ${D.title}${J}

Enviado por _${D.enterprise_name}_`,O.phone=q;const _e=await(await fetch(`${Gn}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`${xn}`},body:JSON.stringify(O)})).json();pe("WHATSAPP",D.title,q)(_e)}catch(te){console.error(te),w("WHATSAPP no enviado","Ocurrió un error de red.")}}function pe(V,D,q){return O=>{O.success?w(`${V} enviado`,`Se envió correctamente un ${V} a ${D} con número ${q}.`):w(`${V} no enviado`,`Hubo un error al enviar ${V} a ${D} (${q}).`)}}function ue(V){V.stopPropagation(),Z(o,z)}function le(){t(4,B=!1),t(5,x=!0),Ee(o.id_event,"checkin")}function ee(){t(5,x=!1),t(4,B=!1),Ee(o.id_event,"checkout")}async function Ee(V,D){if(D){let q=new Object;q.type=D,q.id_event=V,q.id_user_over=S.id_user,q.token=S.token;try{je(`${l}api/admin/route/record_check_date.php`,function(O){O.minutes&&w("Tiempo por parada","Completaste la parada en "+O.minutes+" minutos.")},q)}catch(O){console.error("Error during file upload:",O)}finally{}}}const ge=V=>{t(7,L=V),t(6,P=!0)},ke=()=>{t(6,P=!1),t(7,L="")};function fe(V,D){let q=new Object;return q.id_route=V,q.status=D,q.id_user_over=S.id_user,q.token=S.token,je(`${l}api/admin/route/change_status.php`,function(){},q),""}function ie(V=0){var D=mn(V,_,v,b);t(2,_=D.files),v=D.img_ids,t(1,b=D.selectedImages)}function Y(V){kt.call(this,i,V)}function X(V){Pe[V?"unshift":"push"](()=>{R=V,t(8,R)})}function j(V){Pe[V?"unshift":"push"](()=>{h=V,t(0,h)})}return[h,b,_,H,B,x,P,L,R,o,c,s,k,C,z,W,I,M,me,he,ae,se,ue,le,ee,ge,ke,ie,Y,X,j,V=>ge(V),V=>ie(V)]}class Ut extends Xe{constructor(e){super(),Je(this,e,wo,Co,We,{},null,[-1,-1])}}function Rt(i,e,t){const l=i.slice();return l[32]=e[t],l[34]=t,l}function Vt(i){let e,t,l=He(i[1]),n=[];for(let o=0;o<l.length;o+=1)n[o]=zt(Rt(i,l,o));return{c(){e=f("section"),t=f("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=d(o,"SECTION",{});var c=m(e);t=d(c,"DIV",{class:!0,style:!0});var s=m(t);for(let h=0;h<n.length;h+=1)n[h].l(s);s.forEach(a),c.forEach(a),this.h()},h(){G(t,"class","image-grid"),u(t,"display","grid"),u(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),u(t,"gap","10px"),u(t,"padding","0px 10px")},m(o,c){K(o,e,c),r(e,t);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(t,null)},p(o,c){if(c[0]&32770){l=He(o[1]);let s;for(s=0;s<l.length;s+=1){const h=Rt(o,l,s);n[s]?n[s].p(h,c):(n[s]=zt(h),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=l.length}},d(o){o&&a(e),dt(n,o)}}}function zt(i){let e,t,l,n,o,c=`<ion-icon icon="${Nt}"></ion-icon>`,s,h,k;function b(){return i[22](i[32])}function p(){return i[23](i[34])}return{c(){e=f("div"),t=f("ion-img"),n=T(),o=f("button"),o.innerHTML=c,s=T(),this.h()},l(_){e=d(_,"DIV",{class:!0,style:!0});var v=m(e);t=d(v,"ION-IMG",{src:!0,alt:!0,style:!0}),m(t).forEach(a),n=y(v),o=d(v,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),re(o)!=="svelte-zguiov"&&(o.innerHTML=c),s=y(v),v.forEach(a),this.h()},h(){Ve(t.src,l=i[32])||g(t,"src",l),g(t,"alt","Evidencia fotográfica"),u(t,"width","100%"),u(t,"height","100px"),u(t,"object-fit","cover"),u(t,"cursor","pointer"),u(t,"border","1px solid #ccc"),u(t,"border-radius","4px"),u(t,"margin-top","16px"),G(o,"class","remove-button"),u(o,"position","absolute"),u(o,"top","5px"),u(o,"right","5px"),u(o,"border","none"),u(o,"cursor","pointer"),u(o,"font-size","18px"),u(o,"background","white"),u(o,"border-radius","50%"),u(o,"padding","3px 4px 0px"),u(o,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),u(o,"color","#0000008f"),G(e,"class","image-container"),u(e,"position","relative")},m(_,v){K(_,e,v),r(e,t),r(e,n),r(e,o),r(e,s),h||(k=[de(t,"click",b),de(o,"click",p)],h=!0)},p(_,v){i=_,v[0]&2&&!Ve(t.src,l=i[32])&&g(t,"src",l)},d(_){_&&a(e),h=!1,Be(k)}}}function jt(i){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),re(e)!=="svelte-h8s7r2"&&(e.innerHTML=t),this.h()},h(){G(e,"class","overlay"),u(e,"position","fixed"),u(e,"top","0"),u(e,"left","0"),u(e,"width","100vw"),u(e,"height","100vh"),u(e,"background","rgba(0, 0, 0, 0.5)"),u(e,"display","flex"),u(e,"align-items","center"),u(e,"justify-content","center"),u(e,"z-index","9999")},m(l,n){K(l,e,n)},d(l){l&&a(e)}}}function qt(i){let e,t,l,n,o,c,s=`<ion-icon icon="${Tt}"></ion-icon>`,h,k;return{c(){e=f("div"),t=f("div"),l=f("ion-img"),o=T(),c=f("button"),c.innerHTML=s,this.h()},l(b){e=d(b,"DIV",{class:!0,style:!0});var p=m(e);t=d(p,"DIV",{class:!0,style:!0});var _=m(t);l=d(_,"ION-IMG",{src:!0,alt:!0,style:!0}),m(l).forEach(a),o=y(_),c=d(_,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),re(c)!=="svelte-g0qr0o"&&(c.innerHTML=s),_.forEach(a),p.forEach(a),this.h()},h(){Ve(l.src,n=i[8])||g(l,"src",n),g(l,"alt","Evidencia fotográfica"),u(l,"width","100%"),u(l,"height","auto"),G(c,"class","close-button"),u(c,"position","absolute"),u(c,"top","5px"),u(c,"right","5px"),u(c,"background","white"),u(c,"color","#444444d1"),u(c,"border","none"),u(c,"cursor","pointer"),u(c,"padding","2px 2px 0px 6px"),u(c,"border-radius","50%"),u(c,"font-size","20px"),G(t,"class","modal-content"),u(t,"position","relative"),u(t,"background","white"),u(t,"padding","20px"),u(t,"border-radius","8px"),u(t,"max-width","90vw"),u(t,"max-height","90vh"),u(t,"overflow","auto"),G(e,"class","modal-overlay"),u(e,"position","fixed"),u(e,"top","0"),u(e,"left","0"),u(e,"width","100vw"),u(e,"height","100vh"),u(e,"background","rgba(0, 0, 0, 0.8)"),u(e,"display","flex"),u(e,"justify-content","center"),u(e,"align-items","center"),u(e,"z-index","1000")},m(b,p){K(b,e,p),r(e,t),r(t,l),r(t,o),r(t,c),h||(k=[de(c,"click",i[16]),de(t,"click",Et(i[17])),de(e,"click",i[16])],h=!0)},p(b,p){p[0]&256&&!Ve(l.src,n=b[8])&&g(l,"src",n)},d(b){b&&a(e),h=!1,Be(k)}}}function Lo(i){let e,t,l,n,o="Cancelar",c,s,h="AGREGAR GASTO",k,b,p,_="Confirmar",v,E,N,C,H,B,x,z,W,P,L,S,R,I,M,U,w,Q,Z='Tipo de pago <ion-text color="danger">(Obligatorio)</ion-text>',me,he,Oe="Efectivo",A,ae,se="Tarjeta",ve,oe,$="Transferencia",pe,ue,le,ee,Ee,ge,ke,fe,ie,Y,X=`<ion-icon icon="${It}" slot="start"></ion-icon>
                        Subir Evidencia`,j,ne,F,V,D,q,O,J,te=i[0]&&Vt(i),_e=i[6]&&jt(),be=i[7]&&qt(i);return{c(){e=f("ion-header"),t=f("ion-toolbar"),l=f("ion-buttons"),n=f("ion-button"),n.textContent=o,c=T(),s=f("ion-title"),s.textContent=h,k=T(),b=f("ion-buttons"),p=f("ion-button"),p.textContent=_,v=T(),E=f("ion-content"),N=f("ion-list"),C=f("ion-item"),H=f("ion-icon"),B=T(),x=f("ion-input"),z=T(),W=f("ion-item"),P=f("ion-icon"),L=T(),S=f("ion-input"),R=T(),I=f("ion-item"),M=f("ion-icon"),U=T(),w=f("ion-select"),Q=f("div"),Q.innerHTML=Z,me=T(),he=f("ion-select-option"),he.textContent=Oe,A=T(),ae=f("ion-select-option"),ae.textContent=se,ve=T(),oe=f("ion-select-option"),oe.textContent=$,pe=T(),ue=f("ion-item"),le=f("ion-icon"),ee=T(),Ee=f("ion-textarea"),ge=T(),ke=f("section"),fe=f("label"),ie=f("ion-button"),Y=f("label"),Y.innerHTML=X,j=T(),ne=f("input"),F=T(),te&&te.c(),V=T(),_e&&_e.c(),D=T(),be&&be.c(),q=Se(),this.h()},l(ce){e=d(ce,"ION-HEADER",{translucent:!0});var Ie=m(e);t=d(Ie,"ION-TOOLBAR",{});var Ce=m(t);l=d(Ce,"ION-BUTTONS",{slot:!0});var ye=m(l);n=d(ye,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),re(n)!=="svelte-1f8rjcf"&&(n.textContent=o),ye.forEach(a),c=y(Ce),s=d(Ce,"ION-TITLE",{title:!0,"data-svelte-h":!0}),re(s)!=="svelte-efps2s"&&(s.textContent=h),k=y(Ce),b=d(Ce,"ION-BUTTONS",{slot:!0});var Le=m(b);p=d(Le,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),re(p)!=="svelte-k5zoz0"&&(p.textContent=_),Le.forEach(a),Ce.forEach(a),Ie.forEach(a),v=y(ce),E=d(ce,"ION-CONTENT",{fullscreen:!0});var Ye=m(E);N=d(Ye,"ION-LIST",{});var Ue=m(N);C=d(Ue,"ION-ITEM",{});var it=m(C);H=d(it,"ION-ICON",{icon:!0,slot:!0}),m(H).forEach(a),B=y(it),x=d(it,"ION-INPUT",{label:!0,type:!0,placeholder:!0,value:!0}),m(x).forEach(a),it.forEach(a),z=y(Ue),W=d(Ue,"ION-ITEM",{});var rt=m(W);P=d(rt,"ION-ICON",{icon:!0,slot:!0}),m(P).forEach(a),L=y(rt),S=d(rt,"ION-INPUT",{label:!0,type:!0,value:!0}),m(S).forEach(a),rt.forEach(a),R=y(Ue),I=d(Ue,"ION-ITEM",{});var at=m(I);M=d(at,"ION-ICON",{icon:!0,slot:!0}),m(M).forEach(a),U=y(at),w=d(at,"ION-SELECT",{placeholder:!0,value:!0});var Ge=m(w);Q=d(Ge,"DIV",{slot:!0,"data-svelte-h":!0}),re(Q)!=="svelte-wl764p"&&(Q.innerHTML=Z),me=y(Ge),he=d(Ge,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),re(he)!=="svelte-i9crym"&&(he.textContent=Oe),A=y(Ge),ae=d(Ge,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),re(ae)!=="svelte-fx0z11"&&(ae.textContent=se),ve=y(Ge),oe=d(Ge,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),re(oe)!=="svelte-1c24jf2"&&(oe.textContent=$),Ge.forEach(a),at.forEach(a),pe=y(Ue),ue=d(Ue,"ION-ITEM",{});var st=m(ue);le=d(st,"ION-ICON",{icon:!0,slot:!0}),m(le).forEach(a),ee=y(st),Ee=d(st,"ION-TEXTAREA",{label:!0,placeholder:!0}),m(Ee).forEach(a),st.forEach(a),ge=y(Ue),ke=d(Ue,"SECTION",{});var yt=m(ke);fe=d(yt,"LABEL",{for:!0,style:!0});var Ct=m(fe);ie=d(Ct,"ION-BUTTON",{fill:!0,size:!0,class:!0,expand:!0});var ct=m(ie);Y=d(ct,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),re(Y)!=="svelte-1m9yw22"&&(Y.innerHTML=X),j=y(ct),ne=d(ct,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),ct.forEach(a),Ct.forEach(a),yt.forEach(a),F=y(Ue),te&&te.l(Ue),Ue.forEach(a),Ye.forEach(a),V=y(ce),_e&&_e.l(ce),D=y(ce),be&&be.l(ce),q=Se(),this.h()},h(){g(n,"color","medium"),g(l,"slot","start"),g(s,"title",""),g(p,"strong",""),g(b,"slot","end"),g(e,"translucent",""),g(H,"icon",hn),g(H,"slot","start"),g(x,"label","Concepto"),g(x,"type","text"),g(x,"placeholder","Escribe aquí..."),g(x,"value",i[9]?i[9]:""),g(P,"icon",ft),g(P,"slot","start"),g(S,"label","Monto $"),g(S,"type","number"),g(S,"value",i[10]?i[10]:""),g(M,"icon",Rn),g(M,"slot","start"),G(Q,"slot","label"),g(he,"value","cash"),g(ae,"value","card"),g(oe,"value","transfer"),g(w,"placeholder","Tipo de pago"),g(w,"value",i[11]?i[11]:""),g(le,"icon",ft),g(le,"slot","start"),g(Ee,"label","Comentarios"),g(Ee,"placeholder","Escribe aquí..."),G(Y,"for","eventEvidence"),u(Y,"width","100%"),u(Y,"padding","8px"),u(ne,"display","none"),G(ne,"id","eventEvidence"),G(ne,"name","fileToUpload"),G(ne,"type","file"),G(ne,"accept","image/*"),G(ne,"capture","environment"),g(ie,"fill","outline"),g(ie,"size","small"),g(ie,"class","loadEvidence"),g(ie,"expand","block"),G(fe,"for","eventEvidence"),u(fe,"display","block"),u(fe,"width","100%"),g(E,"fullscreen","")},m(ce,Ie){K(ce,e,Ie),r(e,t),r(t,l),r(l,n),r(t,c),r(t,s),r(t,k),r(t,b),r(b,p),K(ce,v,Ie),K(ce,E,Ie),r(E,N),r(N,C),r(C,H),r(C,B),r(C,x),i[18](x),r(N,z),r(N,W),r(W,P),r(W,L),r(W,S),i[19](S),r(N,R),r(N,I),r(I,M),r(I,U),r(I,w),r(w,Q),r(w,me),r(w,he),r(w,A),r(w,ae),r(w,ve),r(w,oe),i[20](w),r(N,pe),r(N,ue),r(ue,le),r(ue,ee),r(ue,Ee),i[21](Ee),r(N,ge),r(N,ke),r(ke,fe),r(fe,ie),r(ie,Y),r(ie,j),r(ie,ne),r(N,F),te&&te.m(N,null),K(ce,V,Ie),_e&&_e.m(ce,Ie),K(ce,D,Ie),be&&be.m(ce,Ie),K(ce,q,Ie),O||(J=[de(n,"click",i[13]),de(p,"click",i[14]),de(ne,"change",i[12])],O=!0)},p(ce,Ie){ce[0]?te?te.p(ce,Ie):(te=Vt(ce),te.c(),te.m(N,null)):te&&(te.d(1),te=null),ce[6]?_e||(_e=jt(),_e.c(),_e.m(D.parentNode,D)):_e&&(_e.d(1),_e=null),ce[7]?be?be.p(ce,Ie):(be=qt(ce),be.c(),be.m(q.parentNode,q)):be&&(be.d(1),be=null)},i:we,o:we,d(ce){ce&&(a(e),a(v),a(E),a(V),a(D),a(q)),i[18](null),i[19](null),i[20](null),i[21](null),te&&te.d(),_e&&_e.d(ce),be&&be.d(ce),O=!1,Be(J)}}}function Mo(i,e,t){let l=lt,n=document.querySelector("ion-modal"),o=n.componentProps.routeId,c=n.componentProps.ex_concept,s=n.componentProps.ex_amount,h=n.componentProps.ex_type,k=n.componentProps.id_expense,b="",p=new Array,_="",v="",E=0,N="",C="",H=!1,B=new Object,x=!1,z="";$e(()=>{B=JSON.parse(localStorage.getItem("userSession"))});const W=async(A,ae)=>{await(await Fe.create({header:A||"Error",message:ae||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},P=async A=>{t(6,H=!0);const se=A.target.files[0],ve=await L(se);if(ve){var oe=new Object;oe.fileToUpload=ve,oe.id_user_over=B.id_user,oe.token=B.token;try{je(`${l}api/admin/manager/upload_img_driver.php`,function($){$.success?(t(0,b=$.img),t(1,p=Ke(b)),_=$.img_id):W("Error","No se pudo subir la imagen"),t(6,H=!1)},oe)}catch($){console.error("Error during file upload:",$)}finally{t(6,H=!1)}}},L=async A=>new Promise(ae=>{const se=new Image;se.src=URL.createObjectURL(A),se.onload=()=>{const ve=document.createElement("canvas"),oe=ve.getContext("2d"),$=800,pe=600;let ue=se.width,le=se.height;ue>$&&(le*=$/ue,ue=$),le>pe&&(ue*=pe/le,le=pe),ve.width=ue,ve.height=le,oe.drawImage(se,0,0,ue,le),ve.toBlob(ee=>{ae(ee),URL.revokeObjectURL(se.src),oe.clearRect(0,0,ve.width,ve.height)},"image/jpeg",.7)}}),S=()=>{et.dismiss()},R=()=>{var A=new Object;A.id_route=o,A.comments=N.value,A.type=v.value,A.img=b,A.img_id=_,A.amount=E.value,A.concept=C.value,A.status="done",A.id_expense=k||"null",A.id_user_over=B.id_user,A.token=B.token,!_||!b||!E.value||!C.value?W("Datos incompletos","Llena los datos requeridos para completar el registro"):je(`${l}api/admin/expenses/add_expense.php`,function(ae){S()},A)},I=A=>{t(8,z=A),t(7,x=!0)},M=()=>{t(7,x=!1),t(8,z="")};function U(A){kt.call(this,i,A)}function w(A){Pe[A?"unshift":"push"](()=>{C=A,t(5,C)})}function Q(A){Pe[A?"unshift":"push"](()=>{E=A,t(3,E)})}function Z(A){Pe[A?"unshift":"push"](()=>{v=A,t(2,v)})}function me(A){Pe[A?"unshift":"push"](()=>{N=A,t(4,N)})}return[b,p,v,E,N,C,H,x,z,c,s,h,P,S,R,I,M,U,w,Q,Z,me,A=>I(A),A=>removeFile(A)]}class vt extends Xe{constructor(e){super(),Je(this,e,Mo,Lo,We,{},null,[-1,-1])}}function Ft(i,e,t){const l=i.slice();return l[32]=e[t],l[34]=t,l}function Gt(i,e,t){const l=i.slice();return l[35]=e[t],l}function xt(i){let e,t,l,n,o,c,s=i[35].label+"",h,k,b,p;function _(){return i[18](i[35])}return{c(){e=f("div"),t=f("ion-button"),l=f("ion-icon"),o=T(),c=f("div"),h=Ne(s),k=T(),this.h()},l(v){e=d(v,"DIV",{class:!0});var E=m(e);t=d(E,"ION-BUTTON",{color:!0,fill:!0,size:!0});var N=m(t);l=d(N,"ION-ICON",{slot:!0,icon:!0}),m(l).forEach(a),N.forEach(a),o=y(E),c=d(E,"DIV",{class:!0,style:!0});var C=m(c);h=Te(C,s),C.forEach(a),k=y(E),E.forEach(a),this.h()},h(){g(l,"slot","icon-only"),g(l,"icon",i[35].icon),g(t,"color",n=i[6]===i[35].id?"primary":"medium"),g(t,"fill","clear"),g(t,"size","small"),G(c,"class","motive-caption"),u(c,"font-size","11px"),u(c,"margin-top","2px"),u(c,"text-align","center"),u(c,"line-height","1.1"),G(e,"class","motive-button")},m(v,E){K(v,e,E),r(e,t),r(t,l),r(e,o),r(e,c),r(c,h),r(e,k),b||(p=de(t,"click",_),b=!0)},p(v,E){i=v,E[0]&64&&n!==(n=i[6]===i[35].id?"primary":"medium")&&g(t,"color",n)},d(v){v&&a(e),b=!1,p()}}}function Kt(i){let e;return{c(){e=f("div"),this.h()},l(t){e=d(t,"DIV",{id:!0,style:!0}),m(e).forEach(a),this.h()},h(){G(e,"id","motive-map"),u(e,"height","220px"),u(e,"margin","12px 16px"),u(e,"border-radius","8px")},m(t,l){K(t,e,l),i[19](e)},p:we,d(t){t&&a(e),i[19](null)}}}function Wt(i){let e,t,l=He(i[1]),n=[];for(let o=0;o<l.length;o+=1)n[o]=Xt(Ft(i,l,o));return{c(){e=f("section"),t=f("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=d(o,"SECTION",{});var c=m(e);t=d(c,"DIV",{class:!0,style:!0});var s=m(t);for(let h=0;h<n.length;h+=1)n[h].l(s);s.forEach(a),c.forEach(a),this.h()},h(){G(t,"class","image-grid"),u(t,"display","grid"),u(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),u(t,"gap","10px"),u(t,"padding","0px 10px")},m(o,c){K(o,e,c),r(e,t);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(t,null)},p(o,c){if(c[0]&73730){l=He(o[1]);let s;for(s=0;s<l.length;s+=1){const h=Ft(o,l,s);n[s]?n[s].p(h,c):(n[s]=Xt(h),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=l.length}},d(o){o&&a(e),dt(n,o)}}}function Xt(i){let e,t,l,n,o,c=`<ion-icon icon="${Nt}"></ion-icon>`,s,h,k;function b(){return i[21](i[32])}function p(){return i[22](i[34])}return{c(){e=f("div"),t=f("ion-img"),n=T(),o=f("button"),o.innerHTML=c,s=T(),this.h()},l(_){e=d(_,"DIV",{class:!0,style:!0});var v=m(e);t=d(v,"ION-IMG",{src:!0,alt:!0,style:!0}),m(t).forEach(a),n=y(v),o=d(v,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),re(o)!=="svelte-ulzohx"&&(o.innerHTML=c),s=y(v),v.forEach(a),this.h()},h(){Ve(t.src,l=i[32])||g(t,"src",l),g(t,"alt","Evidencia fotográfica"),u(t,"width","100%"),u(t,"height","100px"),u(t,"object-fit","cover"),u(t,"cursor","pointer"),u(t,"border","1px solid #ccc"),u(t,"border-radius","4px"),u(t,"margin-top","16px"),G(o,"class","remove-button"),u(o,"position","absolute"),u(o,"top","5px"),u(o,"right","5px"),u(o,"border","none"),u(o,"cursor","pointer"),u(o,"font-size","18px"),u(o,"background","white"),u(o,"border-radius","50%"),u(o,"padding","3px 4px 0px"),u(o,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),u(o,"color","#0000008f"),G(e,"class","image-container"),u(e,"position","relative")},m(_,v){K(_,e,v),r(e,t),r(e,n),r(e,o),r(e,s),h||(k=[de(t,"click",b),de(o,"click",p)],h=!0)},p(_,v){i=_,v[0]&2&&!Ve(t.src,l=i[32])&&g(t,"src",l)},d(_){_&&a(e),h=!1,Be(k)}}}function Jt(i){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),re(e)!=="svelte-1mz0rrk"&&(e.innerHTML=t),this.h()},h(){G(e,"class","overlay"),u(e,"position","fixed"),u(e,"top","0"),u(e,"left","0"),u(e,"width","100vw"),u(e,"height","100vh"),u(e,"background","rgba(0, 0, 0, 0.5)"),u(e,"display","flex"),u(e,"align-items","center"),u(e,"justify-content","center"),u(e,"z-index","9999")},m(l,n){K(l,e,n)},d(l){l&&a(e)}}}function Yt(i){let e,t,l,n,o,c,s=`<ion-icon icon="${Tt}"></ion-icon>`,h,k;return{c(){e=f("div"),t=f("div"),l=f("ion-img"),o=T(),c=f("button"),c.innerHTML=s,this.h()},l(b){e=d(b,"DIV",{class:!0,style:!0});var p=m(e);t=d(p,"DIV",{class:!0,style:!0});var _=m(t);l=d(_,"ION-IMG",{src:!0,alt:!0,style:!0}),m(l).forEach(a),o=y(_),c=d(_,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),re(c)!=="svelte-1fdruw6"&&(c.innerHTML=s),_.forEach(a),p.forEach(a),this.h()},h(){Ve(l.src,n=i[5])||g(l,"src",n),g(l,"alt","Evidencia fotográfica"),u(l,"width","100%"),u(l,"height","auto"),G(c,"class","close-button"),u(c,"position","absolute"),u(c,"top","5px"),u(c,"right","5px"),u(c,"background","white"),u(c,"color","#444444d1"),u(c,"border","none"),u(c,"cursor","pointer"),u(c,"padding","2px 2px 0px 6px"),u(c,"border-radius","50%"),u(c,"font-size","20px"),G(t,"class","modal-content"),u(t,"position","relative"),u(t,"background","white"),u(t,"padding","20px"),u(t,"border-radius","8px"),u(t,"max-width","90vw"),u(t,"max-height","90vh"),u(t,"overflow","auto"),G(e,"class","modal-overlay"),u(e,"position","fixed"),u(e,"top","0"),u(e,"left","0"),u(e,"width","100vw"),u(e,"height","100vh"),u(e,"background","rgba(0, 0, 0, 0.8)"),u(e,"display","flex"),u(e,"justify-content","center"),u(e,"align-items","center"),u(e,"z-index","1000")},m(b,p){K(b,e,p),r(e,t),r(t,l),r(t,o),r(t,c),h||(k=[de(c,"click",i[14]),de(t,"click",Et(i[17])),de(e,"click",i[14])],h=!0)},p(b,p){p[0]&32&&!Ve(l.src,n=b[5])&&g(l,"src",n)},d(b){b&&a(e),h=!1,Be(k)}}}function Ao(i){let e,t,l,n,o="Cancelar",c,s,h="AGREGAR INCIDENCIA",k,b,p,_="Confirmar",v,E,N,C,H,B,x,z,W,P,L,S,R,I,M,U,w=`<ion-icon icon="${It}" slot="start"></ion-icon>
            Subir Evidencia`,Q,Z,me,he,Oe,A,ae,se,ve=He(i[9]),oe=[];for(let ee=0;ee<ve.length;ee+=1)oe[ee]=xt(Gt(i,ve,ee));let $=i[7].lat&&Kt(i),pe=i[0]&&Wt(i),ue=i[3]&&Jt(),le=i[4]&&Yt(i);return{c(){e=f("ion-header"),t=f("ion-toolbar"),l=f("ion-buttons"),n=f("ion-button"),n.textContent=o,c=T(),s=f("ion-title"),s.textContent=h,k=T(),b=f("ion-buttons"),p=f("ion-button"),p.textContent=_,v=T(),E=f("ion-content"),N=f("ion-list"),C=f("ion-item"),H=f("div");for(let ee=0;ee<oe.length;ee+=1)oe[ee].c();B=T(),$&&$.c(),x=T(),z=f("ion-item"),W=f("ion-icon"),P=T(),L=f("ion-textarea"),S=T(),R=f("section"),I=f("label"),M=f("ion-button"),U=f("label"),U.innerHTML=w,Q=T(),Z=f("input"),me=T(),pe&&pe.c(),he=T(),ue&&ue.c(),Oe=T(),le&&le.c(),A=Se(),this.h()},l(ee){e=d(ee,"ION-HEADER",{translucent:!0});var Ee=m(e);t=d(Ee,"ION-TOOLBAR",{});var ge=m(t);l=d(ge,"ION-BUTTONS",{slot:!0});var ke=m(l);n=d(ke,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),re(n)!=="svelte-1f8rjcf"&&(n.textContent=o),ke.forEach(a),c=y(ge),s=d(ge,"ION-TITLE",{title:!0,"data-svelte-h":!0}),re(s)!=="svelte-zr4yw3"&&(s.textContent=h),k=y(ge),b=d(ge,"ION-BUTTONS",{slot:!0});var fe=m(b);p=d(fe,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),re(p)!=="svelte-1afq5zm"&&(p.textContent=_),fe.forEach(a),ge.forEach(a),Ee.forEach(a),v=y(ee),E=d(ee,"ION-CONTENT",{fullscreen:!0});var ie=m(E);N=d(ie,"ION-LIST",{});var Y=m(N);C=d(Y,"ION-ITEM",{lines:!0,class:!0,style:!0});var X=m(C);H=d(X,"DIV",{class:!0,style:!0});var j=m(H);for(let q=0;q<oe.length;q+=1)oe[q].l(j);j.forEach(a),X.forEach(a),B=y(Y),$&&$.l(Y),x=y(Y),z=d(Y,"ION-ITEM",{});var ne=m(z);W=d(ne,"ION-ICON",{icon:!0,slot:!0}),m(W).forEach(a),P=y(ne),L=d(ne,"ION-TEXTAREA",{label:!0,placeholder:!0}),m(L).forEach(a),ne.forEach(a),S=y(Y),R=d(Y,"SECTION",{});var F=m(R);I=d(F,"LABEL",{for:!0,style:!0});var V=m(I);M=d(V,"ION-BUTTON",{fill:!0,size:!0,class:!0,expand:!0});var D=m(M);U=d(D,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),re(U)!=="svelte-1tbnglg"&&(U.innerHTML=w),Q=y(D),Z=d(D,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),D.forEach(a),V.forEach(a),F.forEach(a),me=y(Y),pe&&pe.l(Y),Y.forEach(a),ie.forEach(a),he=y(ee),ue&&ue.l(ee),Oe=y(ee),le&&le.l(ee),A=Se(),this.h()},h(){g(n,"color","medium"),g(l,"slot","start"),g(s,"title",""),g(p,"strong",""),g(b,"slot","end"),g(e,"translucent",""),G(H,"class","motive-grid"),u(H,"display","flex"),u(H,"gap","8px"),u(H,"flex-wrap","wrap"),u(H,"justify-content","center"),u(H,"margin-top","6px"),g(C,"lines","none"),g(C,"class","motive-item"),u(C,"display","grid"),u(C,"justify-content","center"),g(W,"icon",ft),g(W,"slot","start"),g(L,"label","Comentarios"),g(L,"placeholder","Escribe aquí..."),G(U,"for","eventEvidence"),u(U,"width","100%"),u(U,"padding","8px"),u(Z,"display","none"),G(Z,"id","eventEvidence"),G(Z,"name","fileToUpload"),G(Z,"type","file"),G(Z,"accept","image/*"),G(Z,"capture","environment"),g(M,"fill","outline"),g(M,"size","small"),g(M,"class","loadEvidence"),g(M,"expand","block"),G(I,"for","eventEvidence"),u(I,"display","block"),u(I,"width","100%"),g(E,"fullscreen","")},m(ee,Ee){K(ee,e,Ee),r(e,t),r(t,l),r(l,n),r(t,c),r(t,s),r(t,k),r(t,b),r(b,p),K(ee,v,Ee),K(ee,E,Ee),r(E,N),r(N,C),r(C,H);for(let ge=0;ge<oe.length;ge+=1)oe[ge]&&oe[ge].m(H,null);r(N,B),$&&$.m(N,null),r(N,x),r(N,z),r(z,W),r(z,P),r(z,L),i[20](L),r(N,S),r(N,R),r(R,I),r(I,M),r(M,U),r(M,Q),r(M,Z),r(N,me),pe&&pe.m(N,null),K(ee,he,Ee),ue&&ue.m(ee,Ee),K(ee,Oe,Ee),le&&le.m(ee,Ee),K(ee,A,Ee),ae||(se=[de(n,"click",i[11]),de(p,"click",i[12]),de(Z,"change",i[10])],ae=!0)},p(ee,Ee){if(Ee[0]&33344){ve=He(ee[9]);let ge;for(ge=0;ge<ve.length;ge+=1){const ke=Gt(ee,ve,ge);oe[ge]?oe[ge].p(ke,Ee):(oe[ge]=xt(ke),oe[ge].c(),oe[ge].m(H,null))}for(;ge<oe.length;ge+=1)oe[ge].d(1);oe.length=ve.length}ee[7].lat?$?$.p(ee,Ee):($=Kt(ee),$.c(),$.m(N,x)):$&&($.d(1),$=null),ee[0]?pe?pe.p(ee,Ee):(pe=Wt(ee),pe.c(),pe.m(N,null)):pe&&(pe.d(1),pe=null),ee[3]?ue||(ue=Jt(),ue.c(),ue.m(Oe.parentNode,Oe)):ue&&(ue.d(1),ue=null),ee[4]?le?le.p(ee,Ee):(le=Yt(ee),le.c(),le.m(A.parentNode,A)):le&&(le.d(1),le=null)},i:we,o:we,d(ee){ee&&(a(e),a(v),a(E),a(he),a(Oe),a(A)),dt(oe,ee),$&&$.d(),i[20](null),pe&&pe.d(),ue&&ue.d(ee),le&&le.d(ee),ae=!1,Be(se)}}}function So(i,e,t){let l=lt,o=document.querySelector("ion-modal").componentProps.routeId,c="",s=c?Ke(c):new Array,h="",k=!1,b=new Object,p=!1,_="",v="",E={lat:null,lng:null},N,C,H;const B=[{id:"car_accident",icon:gn,label:"Accidente"},{id:"hospital",icon:"/hospital.svg",label:"Hospital"},{id:"wc",icon:"/toilet.svg",label:"Baño"},{id:"restaurant",icon:Vn,label:"Restaurante"},{id:"parking",icon:pn,label:"Parking"}];$e(()=>{b=JSON.parse(localStorage.getItem("userSession"))});const x=async(A,ae)=>{await(await Fe.create({header:A||"Error",message:ae||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},z=async A=>{if(console.log(s),s.length>=5){x("Límite de evidencias","Solo se permite subir 5 fotos por parada");return}t(3,k=!0);const se=A.target.files[0],ve=await W(se);if(ve){var oe=new Object;oe.fileToUpload=ve,oe.id_user_over=b.id_user,oe.token=b.token;try{je(`${l}api/admin/manager/upload_img_driver.php`,function($){$.success?(t(0,c=c?`${c},${$.img}`:$.img),console.log(c),t(1,s=Ke(c))):x("Error","No se pudo subir la imagen"),t(3,k=!1)},oe)}catch($){console.error("Error during file upload:",$)}finally{t(3,k=!1)}}},W=async A=>new Promise(ae=>{const se=new Image;se.src=URL.createObjectURL(A),se.onload=()=>{const ve=document.createElement("canvas"),oe=ve.getContext("2d"),$=800,pe=600;let ue=se.width,le=se.height;ue>$&&(le*=$/ue,ue=$),le>pe&&(ue*=pe/le,le=pe),ve.width=ue,ve.height=le,oe.drawImage(se,0,0,ue,le),ve.toBlob(ee=>{ae(ee),URL.revokeObjectURL(se.src),oe.clearRect(0,0,ve.width,ve.height)},"image/jpeg",.7)}}),P=()=>{et.dismiss()},L=()=>{var A=new Object;t(0,c=s.join(",")),A.id_route=o,A.comments=h.value,A.lat=E.lat,A.lng=E.lng,A.type=v,A.img=c,A.id_user_over=b.id_user,A.token=b.token,!v||!c||!A.comments||!A.img?x("Datos incompletos","Llena los datos requeridos para completar el registro"):!A.lat||!A.lng?x("Ubicación no disponible","Por favor, asegúrate de que la ubicación está activada en tu dispositivo."):je(`${l}api/admin/incidence/add_incidence.php`,function(ae){ae?x("Éxito","Incidencia registrada correctamente"):x("Error","No se pudo registrar la incidencia. Por favor, inténtalo de nuevo."),P()},A)},S=A=>{t(5,_=A),t(4,p=!0)},R=()=>{t(4,p=!1),t(5,_="")};async function I(A){t(6,v=A),t(3,k=!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(async ae=>{t(7,E.lat=ae.coords.latitude,E),t(7,E.lng=ae.coords.longitude,E),await M()},()=>console.log("Geolocalización denegada"))}async function M(){if(await dn(),!N)return;const{Map:A}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:ae}=await google.maps.importLibrary("marker");C?C.setCenter(E):C=new A(N,{zoom:15,center:E,mapId:"4504f8b37365c3d0"});const se=B.find($=>$.id===v);if(!se)return;H&&H.setMap(null);const ve=document.createElement("div");ve.style.cssText=`
      display:flex;align-items:center;justify-content:center;
      width:38px;height:38px;border-radius:50%;
      background:#ffffff;border:2px solid #428cff;
      box-shadow:0 0 4px rgba(0,0,0,.3);
  `;const oe=document.createElement("ion-icon");oe.setAttribute("icon",se.icon),oe.style.cssText="font-size:24px;color:#428cff;",ve.appendChild(oe),H=new ae({map:C,position:E,title:se.label,content:ve}),t(3,k=!1)}function U(A=0){var ae=mn(A,s,[""],c);t(1,s=ae.files),t(0,c=ae.selectedImages)}function w(A){kt.call(this,i,A)}const Q=A=>I(A.id);function Z(A){Pe[A?"unshift":"push"](()=>{N=A,t(8,N)})}function me(A){Pe[A?"unshift":"push"](()=>{h=A,t(2,h)})}return[c,s,h,k,p,_,v,E,N,B,z,P,L,S,R,I,U,w,Q,Z,me,A=>S(A),A=>U(A)]}class Do extends Xe{constructor(e){super(),Je(this,e,So,Ao,We,{},null,[-1,-1])}}function Qt(i,e,t){const l=i.slice();return l[7]=e[t],l}function Bo(i){let e,t="Cargar gasto",l,n;function o(...c){return i[4](i[7],...c)}return{c(){e=f("ion-button"),e.textContent=t,this.h()},l(c){e=d(c,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),re(e)!=="svelte-175aelj"&&(e.textContent=t),this.h()},h(){g(e,"fill","outline"),g(e,"size","small"),g(e,"aria-selected","")},m(c,s){K(c,e,s),l||(n=de(e,"click",o),l=!0)},p(c,s){i=c},d(c){c&&a(e),l=!1,n()}}}function Ho(i){let e,t="Gasto completado";return{c(){e=f("ion-button"),e.textContent=t,this.h()},l(l){e=d(l,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),re(e)!=="svelte-tlger7"&&(e.textContent=t),this.h()},h(){g(e,"fill","solid"),g(e,"size","small"),g(e,"aria-selected","")},m(l,n){K(l,e,n)},p:we,d(l){l&&a(e)}}}function Zt(i,e){let t,l,n,o=e[7].concept+"",c,s,h;function k(_,v){return _[7].status=="done"?Ho:Bo}let p=k(e)(e);return{key:i,first:null,c(){t=f("ion-item"),l=f("ion-label"),n=f("p"),c=Ne(o),s=T(),p.c(),h=T(),this.h()},l(_){t=d(_,"ION-ITEM",{});var v=m(t);l=d(v,"ION-LABEL",{style:!0});var E=m(l);n=d(E,"P",{style:!0});var N=m(n);c=Te(N,o),N.forEach(a),E.forEach(a),s=y(v),p.l(v),h=y(v),v.forEach(a),this.h()},h(){u(n,"margin-left","10px"),u(l,"display","flex"),this.first=t},m(_,v){K(_,t,v),r(t,l),r(l,n),r(n,c),r(t,s),p.m(t,null),r(t,h)},p(_,v){e=_,p.p(e,v)},d(_){_&&a(t),p.d()}}}function Po(i){let e,t,l,n,o=`<ion-icon style="font-size: 25px!important;" icon="${zn}"></ion-icon>`,c,s,h="LISTA DE GASTOS",k,b,p,_=[],v=new Map,E,N,C,H="Cerrar",B,x,z=He(i[0]);const W=P=>P[7].id_expenses;for(let P=0;P<z.length;P+=1){let L=Qt(i,z,P),S=W(L);v.set(S,_[P]=Zt(S,L))}return{c(){e=f("ion-header"),t=f("ion-toolbar"),l=f("ion-buttons"),n=f("ion-button"),n.innerHTML=o,c=T(),s=f("ion-title"),s.textContent=h,k=T(),b=f("ion-content"),p=f("ion-list");for(let P=0;P<_.length;P+=1)_[P].c();E=T(),N=f("ion-footer"),C=f("ion-button"),C.textContent=H,this.h()},l(P){e=d(P,"ION-HEADER",{translucent:!0});var L=m(e);t=d(L,"ION-TOOLBAR",{});var S=m(t);l=d(S,"ION-BUTTONS",{slot:!0});var R=m(l);n=d(R,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),re(n)!=="svelte-160xz3i"&&(n.innerHTML=o),R.forEach(a),c=y(S),s=d(S,"ION-TITLE",{"data-svelte-h":!0}),re(s)!=="svelte-1phn90x"&&(s.textContent=h),S.forEach(a),L.forEach(a),k=y(P),b=d(P,"ION-CONTENT",{fullscreen:!0});var I=m(b);p=d(I,"ION-LIST",{});var M=m(p);for(let w=0;w<_.length;w+=1)_[w].l(M);M.forEach(a),I.forEach(a),E=y(P),N=d(P,"ION-FOOTER",{});var U=m(N);C=d(U,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),re(C)!=="svelte-zv7v83"&&(C.textContent=H),U.forEach(a),this.h()},h(){g(n,"color","medium"),g(l,"slot","end"),g(e,"translucent",""),g(b,"fullscreen",""),g(C,"fill","outline"),g(C,"color","tertiary"),g(C,"strong",""),u(C,"width","99%"),u(C,"height","auto")},m(P,L){K(P,e,L),r(e,t),r(t,l),r(l,n),r(t,c),r(t,s),K(P,k,L),K(P,b,L),r(b,p);for(let S=0;S<_.length;S+=1)_[S]&&_[S].m(p,null);K(P,E,L),K(P,N,L),r(N,C),B||(x=[de(n,"click",i[3]),de(C,"click",i[1])],B=!0)},p(P,[L]){L&5&&(z=He(P[0]),_=nt(_,L,W,1,P,z,v,p,ot,Zt,null,Qt))},i:we,o:we,d(P){P&&(a(e),a(k),a(b),a(E),a(N));for(let L=0;L<_.length;L+=1)_[L].d();B=!1,Be(x)}}}function Uo(i){let e=document.querySelector("ion-modal");e.componentProps.routeId;let t=e.componentProps.expenses;$e(()=>{});const l=()=>{et.dismiss()};function n(s,h,k,b,p){e.componentProps.ex_amount=k,e.componentProps.ex_concept=h,e.componentProps.ex_type=b,e.componentProps.id_expense=p,qe("modal-expense",vt,{amount:k,concept:h,type:b,id_expense:p}).then(()=>{}),l()}return[t,l,n,s=>{qe("modal-expense",vt,{routeId:s}).then(h=>{}),l()},(s,h)=>n(h,s.concept,s.amount,s.type,s.id_expenses)]}class Ro extends Xe{constructor(e){super(),Je(this,e,Uo,Po,We,{})}}const{document:$t}=Jn;function en(i,e,t){const l=i.slice();return l[51]=e[t],l[53]=t,l}function tn(i,e,t){const l=i.slice();return l[51]=e[t],l[53]=t,l}function nn(i,e,t){const l=i.slice();return l[51]=e[t],l[53]=t,l}function on(i){let e,t;return e=new Kn({props:{$$slots:{default:[Qo]},$$scope:{ctx:i}}}),{c(){yn(e.$$.fragment)},l(l){Cn(e.$$.fragment,l)},m(l,n){wn(e,l,n),t=!0},p(l,n){const o={};n[0]&2043|n[1]&33554432&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(ut(e.$$.fragment,l),t=!0)},o(l){pt(e.$$.fragment,l),t=!1},d(l){Ln(e,l)}}}function Vo(i){let e,t='<div id="g_map" style="width: 100%; height: 100vh;"></div>';return{c(){e=f("ion-content"),e.innerHTML=t},l(l){e=d(l,"ION-CONTENT",{"data-svelte-h":!0}),re(e)!=="svelte-h8v4nk"&&(e.innerHTML=t)},m(l,n){K(l,e,n)},p:we,d(l){l&&a(e)}}}function zo(i){let e;function t(o,c){if(o[7].length>0)return qo;if(!o[3])return jo}let l=t(i),n=l&&l(i);return{c(){n&&n.c(),e=Se()},l(o){n&&n.l(o),e=Se()},m(o,c){n&&n.m(o,c),K(o,e,c)},p(o,c){l===(l=t(o))&&n?n.p(o,c):(n&&n.d(1),n=l&&l(o),n&&(n.c(),n.m(e.parentNode,e)))},d(o){o&&a(e),n&&n.d(o)}}}function jo(i){let e,t,l,n='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jala para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',o,c,s,h,k,b,p="0",_,v,E,N,C,H=i[6].origin+"",B,x,z,W,P,L,S=[],R=new Map,I,M,U,w,Q,Z=i[5].length+1+"",me,he,Oe,A,ae,se,ve=i[6].destination+"",oe,$,pe,ue="",le,ee,Ee,ge,ke=i[4]&&ln(i),fe=He(i[5]);const ie=Y=>Y[51].id_event;for(let Y=0;Y<fe.length;Y+=1){let X=en(i,fe,Y),j=ie(X);R.set(j,S[Y]=an(j,X))}return{c(){ke&&ke.c(),e=T(),t=f("ion-content"),l=f("ion-refresher"),l.innerHTML=n,o=T(),c=f("ion-list"),s=f("ion-item"),h=f("ion-avatar"),k=f("div"),b=f("div"),b.textContent=p,v=T(),E=f("ion-label"),N=f("ion-text"),C=f("h3"),B=Ne(H),x=T(),z=f("div"),W=T(),P=f("ion-icon"),L=T();for(let Y=0;Y<S.length;Y+=1)S[Y].c();I=T(),M=f("ion-item"),U=f("ion-avatar"),w=f("div"),Q=f("div"),me=Ne(Z),Oe=T(),A=f("ion-label"),ae=f("ion-text"),se=f("h3"),oe=Ne(ve),$=T(),pe=f("div"),pe.innerHTML=ue,le=T(),ee=f("ion-icon"),this.h()},l(Y){ke&&ke.l(Y),e=y(Y),t=d(Y,"ION-CONTENT",{});var X=m(t);l=d(X,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),re(l)!=="svelte-1mlmyg"&&(l.innerHTML=n),o=y(X),c=d(X,"ION-LIST",{});var j=m(c);s=d(j,"ION-ITEM",{});var ne=m(s);h=d(ne,"ION-AVATAR",{slot:!0});var F=m(h);k=d(F,"DIV",{class:!0,title:!0,style:!0});var V=m(k);b=d(V,"DIV",{class:!0,"data-svelte-h":!0}),re(b)!=="svelte-b78non"&&(b.textContent=p),V.forEach(a),F.forEach(a),v=y(ne),E=d(ne,"ION-LABEL",{button:!0});var D=m(E);N=d(D,"ION-TEXT",{color:!0});var q=m(N);C=d(q,"H3",{});var O=m(C);B=Te(O,H),O.forEach(a),q.forEach(a),x=y(D),z=d(D,"DIV",{class:!0}),m(z).forEach(a),D.forEach(a),W=y(ne),P=d(ne,"ION-ICON",{icon:!0,slot:!0}),m(P).forEach(a),ne.forEach(a),L=y(j);for(let ye=0;ye<S.length;ye+=1)S[ye].l(j);I=y(j),M=d(j,"ION-ITEM",{});var J=m(M);U=d(J,"ION-AVATAR",{slot:!0});var te=m(U);w=d(te,"DIV",{class:!0,title:!0,style:!0});var _e=m(w);Q=d(_e,"DIV",{class:!0});var be=m(Q);me=Te(be,Z),be.forEach(a),_e.forEach(a),te.forEach(a),Oe=y(J),A=d(J,"ION-LABEL",{button:!0});var ce=m(A);ae=d(ce,"ION-TEXT",{color:!0});var Ie=m(ae);se=d(Ie,"H3",{});var Ce=m(se);oe=Te(Ce,ve),Ce.forEach(a),Ie.forEach(a),$=y(ce),pe=d(ce,"DIV",{class:!0,"data-svelte-h":!0}),re(pe)!=="svelte-17oqe78"&&(pe.innerHTML=ue),ce.forEach(a),le=y(J),ee=d(J,"ION-ICON",{icon:!0,slot:!0}),m(ee).forEach(a),J.forEach(a),j.forEach(a),X.forEach(a),this.h()},h(){g(l,"slot","fixed"),G(b,"class","order svelte-1ita8l7"),G(k,"class","order-wrapper svelte-1ita8l7"),G(k,"title",_="$"+i[6].origin),u(k,"background-color",i[6].color),u(k,"color",Ae(i[6].color)),g(h,"slot","start"),g(N,"color","#2e2e2e"),G(z,"class","sub svelte-1ita8l7"),g(E,"button",""),g(P,"icon",ze),g(P,"slot","end"),G(Q,"class","order svelte-1ita8l7"),G(w,"class","order-wrapper svelte-1ita8l7"),G(w,"title",he="$"+i[6].destination),u(w,"background-color",i[6].color),u(w,"color",Ae(i[6].color)),g(U,"slot","start"),g(ae,"color","#2e2e2e"),G(pe,"class","sub svelte-1ita8l7"),g(A,"button",""),g(ee,"icon",ze),g(ee,"slot","end")},m(Y,X){ke&&ke.m(Y,X),K(Y,e,X),K(Y,t,X),r(t,l),i[33](l),r(t,o),r(t,c),r(c,s),r(s,h),r(h,k),r(k,b),r(s,v),r(s,E),r(E,N),r(N,C),r(C,B),r(E,x),r(E,z),r(s,W),r(s,P),r(c,L);for(let j=0;j<S.length;j+=1)S[j]&&S[j].m(c,null);r(c,I),r(c,M),r(M,U),r(U,w),r(w,Q),r(Q,me),r(M,Oe),r(M,A),r(A,ae),r(ae,se),r(se,oe),r(A,$),r(A,pe),r(M,le),r(M,ee),Ee||(ge=[de(l,"ionRefresh",i[11]),de(E,"click",i[34]),de(A,"click",i[36])],Ee=!0)},p(Y,X){Y[4]?ke?ke.p(Y,X):(ke=ln(Y),ke.c(),ke.m(e.parentNode,e)):ke&&(ke.d(1),ke=null),X[0]&64&&_!==(_="$"+Y[6].origin)&&G(k,"title",_),X[0]&64&&u(k,"background-color",Y[6].color),X[0]&64&&u(k,"color",Ae(Y[6].color)),X[0]&64&&H!==(H=Y[6].origin+"")&&Me(B,H),X[0]&1319968&&(fe=He(Y[5]),S=nt(S,X,ie,1,Y,fe,R,c,ot,an,I,en)),X[0]&32&&Z!==(Z=Y[5].length+1+"")&&Me(me,Z),X[0]&64&&he!==(he="$"+Y[6].destination)&&G(w,"title",he),X[0]&64&&u(w,"background-color",Y[6].color),X[0]&64&&u(w,"color",Ae(Y[6].color)),X[0]&64&&ve!==(ve=Y[6].destination+"")&&Me(oe,ve)},d(Y){Y&&(a(e),a(t)),ke&&ke.d(Y),i[33](null);for(let X=0;X<S.length;X+=1)S[X].d();Ee=!1,Be(ge)}}}function qo(i){let e,t;function l(c,s){return s[0]&144&&(e=null),e==null&&(e=!!(c[7].filter($o).every(el)&&!c[4])),e?Ko:xo}let n=l(i,[-1,-1]),o=n(i);return{c(){o.c(),t=Se()},l(c){o.l(c),t=Se()},m(c,s){o.m(c,s),K(c,t,s)},p(c,s){n===(n=l(c,s))&&o?o.p(c,s):(o.d(1),o=n(c),o&&(o.c(),o.m(t.parentNode,t)))},d(c){c&&a(t),o.d(c)}}}function ln(i){let e=i[15]("",i[1],i[0])+"",t;return{c(){t=Ne(e)},l(l){t=Te(l,e)},m(l,n){K(l,t,n)},p(l,n){n[0]&3&&e!==(e=l[15]("",l[1],l[0])+"")&&Me(t,e)},d(l){l&&a(t)}}}function rn(i){let e;return{c(){e=f("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),m(e).forEach(a),this.h()},h(){G(e,"class","notes svelte-1ita8l7")},m(t,l){K(t,e,l)},d(t){t&&a(e)}}}function Fo(i){let e;return{c(){e=f("ion-icon"),this.h()},l(t){e=d(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),m(e).forEach(a),this.h()},h(){g(e,"icon",ze),g(e,"slot","end"),u(e,"color",De(i[51].status,i[51].date_service))},m(t,l){K(t,e,l)},p(t,l){l[0]&32&&u(e,"color",De(t[51].status,t[51].date_service))},d(t){t&&a(e)}}}function Go(i){let e,t=(i[51].tag?i[51].tag:"")+"",l;return{c(){e=f("div"),l=Ne(t),this.h()},l(n){e=d(n,"DIV",{class:!0,slot:!0,style:!0});var o=m(e);l=Te(o,t),o.forEach(a),this.h()},h(){G(e,"class","stop-tag"),G(e,"slot","end"),u(e,"background-color",Re(i[51].tag_color,.3)),u(e,"border","1px solid "+Re(i[51].tag_color,.4)),u(e,"color",i[51].tag_color),u(e,"font-size","10px"),u(e,"text-align","center"),u(e,"align-content","center"),u(e,"border-radius","20px"),u(e,"white-space","normal"),u(e,"padding","3px 6px"),u(e,"width","auto",1),u(e,"display","inline-block"),u(e,"font-weight","500")},m(n,o){K(n,e,o),r(e,l)},p(n,o){o[0]&32&&t!==(t=(n[51].tag?n[51].tag:"")+"")&&Me(l,t),o[0]&32&&u(e,"background-color",Re(n[51].tag_color,.3)),o[0]&32&&u(e,"border","1px solid "+Re(n[51].tag_color,.4)),o[0]&32&&u(e,"color",n[51].tag_color)},d(n){n&&a(e)}}}function an(i,e){let t,l,n,o,c=parseInt(e[51].pos)+1+"",s,h,k,b,p,_,v=e[51].title+"",E,N,C=e[51].support_list&&e[51].support_list.length||e[18](e[51]),H,B,x,z=C&&rn();function W(){return e[35](e[51])}function P(R,I){return R[51].tag_color&&R[51].tag?Go:Fo}let L=P(e),S=L(e);return{key:i,first:null,c(){t=f("ion-item"),l=f("ion-avatar"),n=f("div"),o=f("div"),s=Ne(c),k=T(),b=f("ion-label"),p=f("ion-text"),_=f("h3"),E=Ne(v),N=T(),z&&z.c(),H=T(),S.c(),this.h()},l(R){t=d(R,"ION-ITEM",{});var I=m(t);l=d(I,"ION-AVATAR",{slot:!0});var M=m(l);n=d(M,"DIV",{class:!0,title:!0,style:!0});var U=m(n);o=d(U,"DIV",{class:!0});var w=m(o);s=Te(w,c),w.forEach(a),U.forEach(a),M.forEach(a),k=y(I),b=d(I,"ION-LABEL",{button:!0});var Q=m(b);p=d(Q,"ION-TEXT",{color:!0});var Z=m(p);_=d(Z,"H3",{});var me=m(_);E=Te(me,v),N=y(me),z&&z.l(me),me.forEach(a),Z.forEach(a),Q.forEach(a),H=y(I),S.l(I),I.forEach(a),this.h()},h(){G(o,"class","order svelte-1ita8l7"),G(n,"class","order-wrapper svelte-1ita8l7"),G(n,"title",h=Ze(e[51].status)),u(n,"background-color",De(e[51].status,e[51].date_service)),u(n,"color",Ae(De(e[51].status))),g(l,"slot","start"),g(p,"color","#2e2e2e"),g(b,"button",""),this.first=t},m(R,I){K(R,t,I),r(t,l),r(l,n),r(n,o),r(o,s),r(t,k),r(t,b),r(b,p),r(p,_),r(_,E),r(_,N),z&&z.m(_,null),r(t,H),S.m(t,null),B||(x=de(b,"click",W),B=!0)},p(R,I){e=R,I[0]&32&&c!==(c=parseInt(e[51].pos)+1+"")&&Me(s,c),I[0]&32&&h!==(h=Ze(e[51].status))&&G(n,"title",h),I[0]&32&&u(n,"background-color",De(e[51].status,e[51].date_service)),I[0]&32&&u(n,"color",Ae(De(e[51].status))),I[0]&32&&v!==(v=e[51].title+"")&&Me(E,v),I[0]&32&&(C=e[51].support_list&&e[51].support_list.length||e[18](e[51])),C?z||(z=rn(),z.c(),z.m(_,null)):z&&(z.d(1),z=null),L===(L=P(e))&&S?S.p(e,I):(S.d(1),S=L(e),S&&(S.c(),S.m(t,null)))},d(R){R&&a(t),z&&z.d(),S.d(),B=!1,x()}}}function xo(i){let e=i[15](i[7],i[1],i[0])+"",t,l,n,o,c='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Pull to refresh" refreshing-spinner="circles" refreshing-text="Refreshing..."></ion-refresher-content>',s,h,k,b,p,_,v="0",E,N,C,H,B,x=i[6].origin+"",z,W,P,L,S,R,I=[],M=new Map,U,w,Q,Z,me,he=i[5].length+1+"",Oe,A,ae,se,ve,oe,$=i[6].destination+"",pe,ue,le,ee="",Ee,ge,ke,fe,ie=He(i[5]);const Y=X=>X[51].id_event;for(let X=0;X<ie.length;X+=1){let j=tn(i,ie,X),ne=Y(j);M.set(ne,I[X]=cn(ne,j))}return{c(){t=Ne(e),l=T(),n=f("ion-content"),o=f("ion-refresher"),o.innerHTML=c,s=T(),h=f("ion-list"),k=f("ion-item"),b=f("ion-avatar"),p=f("div"),_=f("div"),_.textContent=v,N=T(),C=f("ion-label"),H=f("ion-text"),B=f("h3"),z=Ne(x),W=T(),P=f("div"),L=T(),S=f("ion-icon"),R=T();for(let X=0;X<I.length;X+=1)I[X].c();U=T(),w=f("ion-item"),Q=f("ion-avatar"),Z=f("div"),me=f("div"),Oe=Ne(he),ae=T(),se=f("ion-label"),ve=f("ion-text"),oe=f("h3"),pe=Ne($),ue=T(),le=f("div"),le.innerHTML=ee,Ee=T(),ge=f("ion-icon"),this.h()},l(X){t=Te(X,e),l=y(X),n=d(X,"ION-CONTENT",{});var j=m(n);o=d(j,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),re(o)!=="svelte-1l8nqqz"&&(o.innerHTML=c),s=y(j),h=d(j,"ION-LIST",{});var ne=m(h);k=d(ne,"ION-ITEM",{});var F=m(k);b=d(F,"ION-AVATAR",{slot:!0});var V=m(b);p=d(V,"DIV",{class:!0,title:!0,style:!0});var D=m(p);_=d(D,"DIV",{class:!0,"data-svelte-h":!0}),re(_)!=="svelte-b78non"&&(_.textContent=v),D.forEach(a),V.forEach(a),N=y(F),C=d(F,"ION-LABEL",{button:!0});var q=m(C);H=d(q,"ION-TEXT",{color:!0});var O=m(H);B=d(O,"H3",{});var J=m(B);z=Te(J,x),J.forEach(a),O.forEach(a),W=y(q),P=d(q,"DIV",{class:!0}),m(P).forEach(a),q.forEach(a),L=y(F),S=d(F,"ION-ICON",{icon:!0,slot:!0}),m(S).forEach(a),F.forEach(a),R=y(ne);for(let Le=0;Le<I.length;Le+=1)I[Le].l(ne);U=y(ne),w=d(ne,"ION-ITEM",{});var te=m(w);Q=d(te,"ION-AVATAR",{slot:!0});var _e=m(Q);Z=d(_e,"DIV",{class:!0,title:!0,style:!0});var be=m(Z);me=d(be,"DIV",{class:!0});var ce=m(me);Oe=Te(ce,he),ce.forEach(a),be.forEach(a),_e.forEach(a),ae=y(te),se=d(te,"ION-LABEL",{button:!0});var Ie=m(se);ve=d(Ie,"ION-TEXT",{color:!0});var Ce=m(ve);oe=d(Ce,"H3",{});var ye=m(oe);pe=Te(ye,$),ye.forEach(a),Ce.forEach(a),ue=y(Ie),le=d(Ie,"DIV",{class:!0,"data-svelte-h":!0}),re(le)!=="svelte-1c76q1w"&&(le.innerHTML=ee),Ie.forEach(a),Ee=y(te),ge=d(te,"ION-ICON",{icon:!0,slot:!0}),m(ge).forEach(a),te.forEach(a),ne.forEach(a),j.forEach(a),this.h()},h(){g(o,"slot","fixed"),G(_,"class","order svelte-1ita8l7"),G(p,"class","order-wrapper svelte-1ita8l7"),G(p,"title",E="$"+i[6].origin),u(p,"background-color",i[6].color),u(p,"color",Ae(i[6].color)),g(b,"slot","start"),g(H,"color","#2e2e2e"),G(P,"class","sub svelte-1ita8l7"),g(C,"button",""),g(S,"icon",ze),g(S,"slot","end"),G(me,"class","order svelte-1ita8l7"),G(Z,"class","order-wrapper svelte-1ita8l7"),G(Z,"title",A="$"+i[6].destination),u(Z,"background-color",i[6].color),u(Z,"color",Ae(i[6].color)),g(Q,"slot","start"),g(ve,"color","#2e2e2e"),G(le,"class","sub svelte-1ita8l7"),g(se,"button",""),g(ge,"icon",ze),g(ge,"slot","end")},m(X,j){K(X,t,j),K(X,l,j),K(X,n,j),r(n,o),i[29](o),r(n,s),r(n,h),r(h,k),r(k,b),r(b,p),r(p,_),r(k,N),r(k,C),r(C,H),r(H,B),r(B,z),r(C,W),r(C,P),r(k,L),r(k,S),r(h,R);for(let ne=0;ne<I.length;ne+=1)I[ne]&&I[ne].m(h,null);r(h,U),r(h,w),r(w,Q),r(Q,Z),r(Z,me),r(me,Oe),r(w,ae),r(w,se),r(se,ve),r(ve,oe),r(oe,pe),r(se,ue),r(se,le),r(w,Ee),r(w,ge),ke||(fe=[de(o,"ionRefresh",i[11]),de(C,"click",i[30]),de(se,"click",i[32])],ke=!0)},p(X,j){j[0]&131&&e!==(e=X[15](X[7],X[1],X[0])+"")&&Me(t,e),j[0]&64&&E!==(E="$"+X[6].origin)&&G(p,"title",E),j[0]&64&&u(p,"background-color",X[6].color),j[0]&64&&u(p,"color",Ae(X[6].color)),j[0]&64&&x!==(x=X[6].origin+"")&&Me(z,x),j[0]&1319968&&(ie=He(X[5]),I=nt(I,j,Y,1,X,ie,M,h,ot,cn,U,tn)),j[0]&32&&he!==(he=X[5].length+1+"")&&Me(Oe,he),j[0]&64&&A!==(A="$"+X[6].destination)&&G(Z,"title",A),j[0]&64&&u(Z,"background-color",X[6].color),j[0]&64&&u(Z,"color",Ae(X[6].color)),j[0]&64&&$!==($=X[6].destination+"")&&Me(pe,$)},d(X){X&&(a(t),a(l),a(n)),i[29](null);for(let j=0;j<I.length;j+=1)I[j].d();ke=!1,Be(fe)}}}function Ko(i){let e,t,l='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jale para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',n,o,c,s,h,k,b="0",p,_,v,E,N,C=i[6].origin+"",H,B,x,z,W,P,L=[],S=new Map,R,I,M,U,w,Q=i[5].length+1+"",Z,me,he,Oe,A,ae,se=i[6].destination+"",ve,oe,$,pe="",ue,le,ee,Ee,ge=He(i[5]);const ke=fe=>fe[51].id_event;for(let fe=0;fe<ge.length;fe+=1){let ie=nn(i,ge,fe),Y=ke(ie);S.set(Y,L[fe]=fn(Y,ie))}return{c(){e=f("ion-content"),t=f("ion-refresher"),t.innerHTML=l,n=T(),o=f("ion-list"),c=f("ion-item"),s=f("ion-avatar"),h=f("div"),k=f("div"),k.textContent=b,_=T(),v=f("ion-label"),E=f("ion-text"),N=f("h3"),H=Ne(C),B=T(),x=f("div"),z=T(),W=f("ion-icon"),P=T();for(let fe=0;fe<L.length;fe+=1)L[fe].c();R=T(),I=f("ion-item"),M=f("ion-avatar"),U=f("div"),w=f("div"),Z=Ne(Q),he=T(),Oe=f("ion-label"),A=f("ion-text"),ae=f("h3"),ve=Ne(se),oe=T(),$=f("div"),$.innerHTML=pe,ue=T(),le=f("ion-icon"),this.h()},l(fe){e=d(fe,"ION-CONTENT",{});var ie=m(e);t=d(ie,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),re(t)!=="svelte-vjbhg4"&&(t.innerHTML=l),n=y(ie),o=d(ie,"ION-LIST",{});var Y=m(o);c=d(Y,"ION-ITEM",{});var X=m(c);s=d(X,"ION-AVATAR",{slot:!0});var j=m(s);h=d(j,"DIV",{class:!0,title:!0,style:!0});var ne=m(h);k=d(ne,"DIV",{class:!0,"data-svelte-h":!0}),re(k)!=="svelte-b78non"&&(k.textContent=b),ne.forEach(a),j.forEach(a),_=y(X),v=d(X,"ION-LABEL",{button:!0});var F=m(v);E=d(F,"ION-TEXT",{color:!0});var V=m(E);N=d(V,"H3",{});var D=m(N);H=Te(D,C),D.forEach(a),V.forEach(a),B=y(F),x=d(F,"DIV",{class:!0}),m(x).forEach(a),F.forEach(a),z=y(X),W=d(X,"ION-ICON",{icon:!0,slot:!0}),m(W).forEach(a),X.forEach(a),P=y(Y);for(let Ie=0;Ie<L.length;Ie+=1)L[Ie].l(Y);R=y(Y),I=d(Y,"ION-ITEM",{});var q=m(I);M=d(q,"ION-AVATAR",{slot:!0});var O=m(M);U=d(O,"DIV",{class:!0,title:!0,style:!0});var J=m(U);w=d(J,"DIV",{class:!0});var te=m(w);Z=Te(te,Q),te.forEach(a),J.forEach(a),O.forEach(a),he=y(q),Oe=d(q,"ION-LABEL",{button:!0});var _e=m(Oe);A=d(_e,"ION-TEXT",{color:!0});var be=m(A);ae=d(be,"H3",{});var ce=m(ae);ve=Te(ce,se),ce.forEach(a),be.forEach(a),oe=y(_e),$=d(_e,"DIV",{class:!0,"data-svelte-h":!0}),re($)!=="svelte-1c76q1w"&&($.innerHTML=pe),_e.forEach(a),ue=y(q),le=d(q,"ION-ICON",{icon:!0,slot:!0}),m(le).forEach(a),q.forEach(a),Y.forEach(a),ie.forEach(a),this.h()},h(){g(t,"slot","fixed"),G(k,"class","order svelte-1ita8l7"),G(h,"class","order-wrapper svelte-1ita8l7"),G(h,"title",p="$"+i[6].origin),u(h,"background-color",i[6].color),u(h,"color",Ae(i[6].color)),g(s,"slot","start"),g(E,"color","#2e2e2e"),G(x,"class","sub svelte-1ita8l7"),g(v,"button",""),g(W,"icon",ze),g(W,"slot","end"),G(w,"class","order svelte-1ita8l7"),G(U,"class","order-wrapper svelte-1ita8l7"),G(U,"title",me="$"+i[6].destination),u(U,"background-color",i[6].color),u(U,"color",Ae(i[6].color)),g(M,"slot","start"),g(A,"color","#2e2e2e"),G($,"class","sub svelte-1ita8l7"),g(Oe,"button",""),g(le,"icon",ze),g(le,"slot","end")},m(fe,ie){K(fe,e,ie),r(e,t),i[25](t),r(e,n),r(e,o),r(o,c),r(c,s),r(s,h),r(h,k),r(c,_),r(c,v),r(v,E),r(E,N),r(N,H),r(v,B),r(v,x),r(c,z),r(c,W),r(o,P);for(let Y=0;Y<L.length;Y+=1)L[Y]&&L[Y].m(o,null);r(o,R),r(o,I),r(I,M),r(M,U),r(U,w),r(w,Z),r(I,he),r(I,Oe),r(Oe,A),r(A,ae),r(ae,ve),r(Oe,oe),r(Oe,$),r(I,ue),r(I,le),ee||(Ee=[de(t,"ionRefresh",i[11]),de(v,"click",i[26]),de(Oe,"click",i[28])],ee=!0)},p(fe,ie){ie[0]&64&&p!==(p="$"+fe[6].origin)&&G(h,"title",p),ie[0]&64&&u(h,"background-color",fe[6].color),ie[0]&64&&u(h,"color",Ae(fe[6].color)),ie[0]&64&&C!==(C=fe[6].origin+"")&&Me(H,C),ie[0]&1319968&&(ge=He(fe[5]),L=nt(L,ie,ke,1,fe,ge,S,o,ot,fn,R,nn)),ie[0]&32&&Q!==(Q=fe[5].length+1+"")&&Me(Z,Q),ie[0]&64&&me!==(me="$"+fe[6].destination)&&G(U,"title",me),ie[0]&64&&u(U,"background-color",fe[6].color),ie[0]&64&&u(U,"color",Ae(fe[6].color)),ie[0]&64&&se!==(se=fe[6].destination+"")&&Me(ve,se)},d(fe){fe&&a(e),i[25](null);for(let ie=0;ie<L.length;ie+=1)L[ie].d();ee=!1,Be(Ee)}}}function sn(i){let e;return{c(){e=f("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),m(e).forEach(a),this.h()},h(){G(e,"class","notes svelte-1ita8l7")},m(t,l){K(t,e,l)},d(t){t&&a(e)}}}function Wo(i){let e;return{c(){e=f("ion-icon"),this.h()},l(t){e=d(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),m(e).forEach(a),this.h()},h(){g(e,"icon",ze),g(e,"slot","end"),u(e,"color",De(i[51].status,i[51].date_service))},m(t,l){K(t,e,l)},p(t,l){l[0]&32&&u(e,"color",De(t[51].status,t[51].date_service))},d(t){t&&a(e)}}}function Xo(i){let e,t=(i[51].tag?i[51].tag:"")+"",l;return{c(){e=f("div"),l=Ne(t),this.h()},l(n){e=d(n,"DIV",{class:!0,slot:!0,style:!0});var o=m(e);l=Te(o,t),o.forEach(a),this.h()},h(){G(e,"class","stop-tag"),G(e,"slot","end"),u(e,"background-color",Re(i[51].tag_color,.3)),u(e,"border","1px solid "+Re(i[51].tag_color,.4)),u(e,"color",i[51].tag_color),u(e,"font-size","10px"),u(e,"text-align","center"),u(e,"align-content","center"),u(e,"border-radius","20px"),u(e,"white-space","normal"),u(e,"padding","3px 6px"),u(e,"width","auto",1),u(e,"display","inline-block"),u(e,"font-weight","500")},m(n,o){K(n,e,o),r(e,l)},p(n,o){o[0]&32&&t!==(t=(n[51].tag?n[51].tag:"")+"")&&Me(l,t),o[0]&32&&u(e,"background-color",Re(n[51].tag_color,.3)),o[0]&32&&u(e,"border","1px solid "+Re(n[51].tag_color,.4)),o[0]&32&&u(e,"color",n[51].tag_color)},d(n){n&&a(e)}}}function cn(i,e){let t,l,n,o,c=parseInt(e[51].pos)+1+"",s,h,k,b,p,_,v=e[51].title+"",E,N,C=e[51].support_list&&e[51].support_list.length||e[18](e[51]),H,B,x="",z,W,P,L=C&&sn();function S(){return e[31](e[51])}function R(U,w){return U[51].tag_color&&U[51].tag?Xo:Wo}let I=R(e),M=I(e);return{key:i,first:null,c(){t=f("ion-item"),l=f("ion-avatar"),n=f("div"),o=f("div"),s=Ne(c),k=T(),b=f("ion-label"),p=f("ion-text"),_=f("h3"),E=Ne(v),N=T(),L&&L.c(),H=T(),B=f("div"),B.innerHTML=x,z=T(),M.c(),this.h()},l(U){t=d(U,"ION-ITEM",{});var w=m(t);l=d(w,"ION-AVATAR",{slot:!0});var Q=m(l);n=d(Q,"DIV",{class:!0,title:!0,style:!0});var Z=m(n);o=d(Z,"DIV",{class:!0});var me=m(o);s=Te(me,c),me.forEach(a),Z.forEach(a),Q.forEach(a),k=y(w),b=d(w,"ION-LABEL",{button:!0});var he=m(b);p=d(he,"ION-TEXT",{color:!0});var Oe=m(p);_=d(Oe,"H3",{});var A=m(_);E=Te(A,v),N=y(A),L&&L.l(A),A.forEach(a),Oe.forEach(a),H=y(he),B=d(he,"DIV",{class:!0,"data-svelte-h":!0}),re(B)!=="svelte-1cx9r38"&&(B.innerHTML=x),he.forEach(a),z=y(w),M.l(w),w.forEach(a),this.h()},h(){G(o,"class","order svelte-1ita8l7"),G(n,"class","order-wrapper svelte-1ita8l7"),G(n,"title",h=Ze(e[51].status)),u(n,"background-color",De(e[51].status,e[51].date_service)),u(n,"color",Ae(De(e[51].status))),g(l,"slot","start"),g(p,"color","#2e2e2e"),G(B,"class","sub svelte-1ita8l7"),g(b,"button",""),this.first=t},m(U,w){K(U,t,w),r(t,l),r(l,n),r(n,o),r(o,s),r(t,k),r(t,b),r(b,p),r(p,_),r(_,E),r(_,N),L&&L.m(_,null),r(b,H),r(b,B),r(t,z),M.m(t,null),W||(P=de(b,"click",S),W=!0)},p(U,w){e=U,w[0]&32&&c!==(c=parseInt(e[51].pos)+1+"")&&Me(s,c),w[0]&32&&h!==(h=Ze(e[51].status))&&G(n,"title",h),w[0]&32&&u(n,"background-color",De(e[51].status,e[51].date_service)),w[0]&32&&u(n,"color",Ae(De(e[51].status))),w[0]&32&&v!==(v=e[51].title+"")&&Me(E,v),w[0]&32&&(C=e[51].support_list&&e[51].support_list.length||e[18](e[51])),C?L||(L=sn(),L.c(),L.m(_,null)):L&&(L.d(1),L=null),I===(I=R(e))&&M?M.p(e,w):(M.d(1),M=I(e),M&&(M.c(),M.m(t,null)))},d(U){U&&a(t),L&&L.d(),M.d(),W=!1,P()}}}function un(i){let e;return{c(){e=f("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),m(e).forEach(a),this.h()},h(){G(e,"class","notes svelte-1ita8l7")},m(t,l){K(t,e,l)},d(t){t&&a(e)}}}function Jo(i){let e;return{c(){e=f("ion-icon"),this.h()},l(t){e=d(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),m(e).forEach(a),this.h()},h(){g(e,"icon",ze),g(e,"slot","end"),u(e,"color",De(i[51].status,i[51].date_service))},m(t,l){K(t,e,l)},p(t,l){l[0]&32&&u(e,"color",De(t[51].status,t[51].date_service))},d(t){t&&a(e)}}}function Yo(i){let e,t=(i[51].tag?i[51].tag:"")+"",l;return{c(){e=f("div"),l=Ne(t),this.h()},l(n){e=d(n,"DIV",{class:!0,slot:!0,style:!0});var o=m(e);l=Te(o,t),o.forEach(a),this.h()},h(){G(e,"class","stop-tag"),G(e,"slot","end"),u(e,"background-color",Re(i[51].tag_color,.3)),u(e,"border","1px solid "+Re(i[51].tag_color,.4)),u(e,"color",i[51].tag_color),u(e,"font-size","10px"),u(e,"text-align","center"),u(e,"align-content","center"),u(e,"border-radius","20px"),u(e,"white-space","normal"),u(e,"padding","3px 6px"),u(e,"width","auto",1),u(e,"display","inline-block"),u(e,"font-weight","500")},m(n,o){K(n,e,o),r(e,l)},p(n,o){o[0]&32&&t!==(t=(n[51].tag?n[51].tag:"")+"")&&Me(l,t),o[0]&32&&u(e,"background-color",Re(n[51].tag_color,.3)),o[0]&32&&u(e,"border","1px solid "+Re(n[51].tag_color,.4)),o[0]&32&&u(e,"color",n[51].tag_color)},d(n){n&&a(e)}}}function fn(i,e){let t,l,n,o,c=parseInt(e[51].pos)+1+"",s,h,k,b,p,_,v=e[51].title+"",E,N,C=e[51].support_list&&e[51].support_list.length||e[18](e[51]),H,B,x="",z,W,P,L=C&&un();function S(){return e[27](e[51])}function R(U,w){return U[51].tag_color&&U[51].tag?Yo:Jo}let I=R(e),M=I(e);return{key:i,first:null,c(){t=f("ion-item"),l=f("ion-avatar"),n=f("div"),o=f("div"),s=Ne(c),k=T(),b=f("ion-label"),p=f("ion-text"),_=f("h3"),E=Ne(v),N=T(),L&&L.c(),H=T(),B=f("div"),B.innerHTML=x,z=T(),M.c(),this.h()},l(U){t=d(U,"ION-ITEM",{});var w=m(t);l=d(w,"ION-AVATAR",{slot:!0});var Q=m(l);n=d(Q,"DIV",{class:!0,title:!0,style:!0});var Z=m(n);o=d(Z,"DIV",{class:!0});var me=m(o);s=Te(me,c),me.forEach(a),Z.forEach(a),Q.forEach(a),k=y(w),b=d(w,"ION-LABEL",{button:!0});var he=m(b);p=d(he,"ION-TEXT",{color:!0});var Oe=m(p);_=d(Oe,"H3",{});var A=m(_);E=Te(A,v),N=y(A),L&&L.l(A),A.forEach(a),Oe.forEach(a),H=y(he),B=d(he,"DIV",{class:!0,"data-svelte-h":!0}),re(B)!=="svelte-1cx9r38"&&(B.innerHTML=x),he.forEach(a),z=y(w),M.l(w),w.forEach(a),this.h()},h(){G(o,"class","order svelte-1ita8l7"),G(n,"class","order-wrapper svelte-1ita8l7"),G(n,"title",h=Ze(e[51].status)),u(n,"background-color",De(e[51].status,e[51].date_service)),u(n,"color",Ae(De(e[51].status))),g(l,"slot","start"),g(p,"color","#2e2e2e"),G(B,"class","sub svelte-1ita8l7"),g(b,"button",""),this.first=t},m(U,w){K(U,t,w),r(t,l),r(l,n),r(n,o),r(o,s),r(t,k),r(t,b),r(b,p),r(p,_),r(_,E),r(_,N),L&&L.m(_,null),r(b,H),r(b,B),r(t,z),M.m(t,null),W||(P=de(b,"click",S),W=!0)},p(U,w){e=U,w[0]&32&&c!==(c=parseInt(e[51].pos)+1+"")&&Me(s,c),w[0]&32&&h!==(h=Ze(e[51].status))&&G(n,"title",h),w[0]&32&&u(n,"background-color",De(e[51].status,e[51].date_service)),w[0]&32&&u(n,"color",Ae(De(e[51].status))),w[0]&32&&v!==(v=e[51].title+"")&&Me(E,v),w[0]&32&&(C=e[51].support_list&&e[51].support_list.length||e[18](e[51])),C?L||(L=un(),L.c(),L.m(_,null)):L&&(L.d(1),L=null),I===(I=R(e))&&M?M.p(e,w):(M.d(1),M=I(e),M&&(M.c(),M.m(t,null)))},d(U){U&&a(t),L&&L.d(),M.d(),W=!1,P()}}}function Qo(i){let e,t,l,n,o=`<ion-icon icon="${jn}"></ion-icon>`,c,s,h,k=`<ion-icon icon="${gn}"></ion-icon>`,b,p,_=`<ion-icon icon="${qn}"></ion-icon>`,v,E,N=(i[6].name?i[6].name.toUpperCase():"")+"",C,H,B,x='<ion-segment-button value="list"><ion-label>Paradas</ion-label></ion-segment-button> <ion-segment-button value="map"><ion-label>Mapa</ion-label></ion-segment-button>',z,W,P,L;function S(M,U){if(M[9]==="list")return zo;if(M[9]==="map")return Vo}let R=S(i),I=R&&R(i);return{c(){e=f("ion-header"),t=f("ion-toolbar"),l=f("ion-buttons"),n=f("ion-button"),n.innerHTML=o,c=T(),s=f("ion-buttons"),h=f("ion-button"),h.innerHTML=k,b=T(),p=f("ion-button"),p.innerHTML=_,v=T(),E=f("ion-title"),C=Ne(N),H=T(),B=f("ion-segment"),B.innerHTML=x,z=T(),I&&I.c(),W=Se(),this.h()},l(M){e=d(M,"ION-HEADER",{translucent:!0});var U=m(e);t=d(U,"ION-TOOLBAR",{});var w=m(t);l=d(w,"ION-BUTTONS",{slot:!0});var Q=m(l);n=d(Q,"ION-BUTTON",{title:!0,alt:!0,"data-svelte-h":!0}),re(n)!=="svelte-1a21unf"&&(n.innerHTML=o),Q.forEach(a),c=y(w),s=d(w,"ION-BUTTONS",{slot:!0});var Z=m(s);h=d(Z,"ION-BUTTON",{"data-svelte-h":!0}),re(h)!=="svelte-dy3728"&&(h.innerHTML=k),b=y(Z),p=d(Z,"ION-BUTTON",{"data-svelte-h":!0}),re(p)!=="svelte-1omw1hr"&&(p.innerHTML=_),Z.forEach(a),v=y(w),E=d(w,"ION-TITLE",{});var me=m(E);C=Te(me,N),me.forEach(a),w.forEach(a),H=y(U),B=d(U,"ION-SEGMENT",{value:!0,"data-svelte-h":!0}),re(B)!=="svelte-1rseadq"&&(B.innerHTML=x),U.forEach(a),z=y(M),I&&I.l(M),W=Se(),this.h()},h(){g(n,"title","Atrás"),g(n,"alt","Atrás"),g(l,"slot","start"),g(s,"slot","end"),g(B,"value","list"),g(e,"translucent","")},m(M,U){K(M,e,U),r(e,t),r(t,l),r(l,n),r(t,c),r(t,s),r(s,h),r(s,b),r(s,p),r(t,v),r(t,E),r(E,C),r(e,H),r(e,B),K(M,z,U),I&&I.m(M,U),K(M,W,U),P||(L=[de(n,"click",i[19]),de(h,"click",i[22]),de(p,"click",i[23]),de(B,"ionChange",i[24])],P=!0)},p(M,U){U[0]&64&&N!==(N=(M[6].name?M[6].name.toUpperCase():"")+"")&&Me(C,N),R===(R=S(M))&&I?I.p(M,U):(I&&I.d(1),I=R&&R(M),I&&(I.c(),I.m(W.parentNode,W)))},d(M){M&&(a(e),a(z),a(W)),I&&I.d(M),P=!1,Be(L)}}}function Zo(i){let e,t,l,n=i[2]&&on(i);return{c(){e=T(),n&&n.c(),t=Se(),this.h()},l(o){On("svelte-kn0kph",$t.head).forEach(a),e=y(o),n&&n.l(o),t=Se(),this.h()},h(){$t.title="Rutaflow - Detalles de ruta"},m(o,c){K(o,e,c),n&&n.m(o,c),K(o,t,c),l=!0},p(o,c){o[2]?n?(n.p(o,c),c[0]&4&&ut(n,1)):(n=on(o),n.c(),ut(n,1),n.m(t.parentNode,t)):n&&(Mn(),pt(n,1,1,()=>{n=null}),Tn())},i(o){l||(ut(n),l=!0)},o(o){pt(n),l=!1},d(o){o&&(a(e),a(t)),n&&n.d(o)}}}function De(i,e=""){let t="#ffffff";return i==="pending"&&!e?t="#f2e300":i=="pending"&&e?t="#F6A833":i==="completed"&&(t="#44d900"),t}function Ze(i){let e="";return i=="pending"?e="Pendiente":i=="completed"&&(e="Completado"),e}function Ae(i){i.slice(0,1)==="#"&&(i=i.slice(1)),i.length===3&&(i=i.split("").map(function(o){return o+o}).join(""));const e=parseInt(i.substr(0,2),16),t=parseInt(i.substr(2,2),16),l=parseInt(i.substr(4,2),16);return(e*299+t*587+l*114)/1e3>=128?"#414040":"#fff"}function ht(i,e){for(let t=0;t<e.length;t++)if(e[t].alias===i)return e[t].val;return""}const $o=i=>i.mandatory==="1",el=i=>i.img;function tl(i,e,t){let l;Nn(i,Fn,F=>t(21,l=F));var n=this&&this.__awaiter||function(F,V,D,q){function O(J){return J instanceof D?J:new D(function(te){te(J)})}return new(D||(D=Promise))(function(J,te){function _e(Ie){try{ce(q.next(Ie))}catch(Ce){te(Ce)}}function be(Ie){try{ce(q.throw(Ie))}catch(Ce){te(Ce)}}function ce(Ie){Ie.done?J(Ie.value):O(Ie.value).then(_e,be)}ce((q=q.apply(F,V||[])).next())})};let{routeId:o}=e,{driverId:c}=e,s=lt,h=new Object,k=!0,b=!1,p=[],_={},v=[],E=[],N,C=!1,H="list",B,x="",z="",W="0",P=new Object;const L=()=>n(void 0,void 0,void 0,function*(){yield I(o),N.complete()});$e(()=>n(void 0,void 0,void 0,function*(){ve(),yield I(o)}));function S(F){return n(this,void 0,void 0,function*(){if(t(9,H=F),H==="map"){yield dn(),B=document.getElementById("g_map");const V=new google.maps.Map(B,{zoom:8,center:{lat:20.6745683,lng:-103.3986104},mapId:"4504f8b37365c3d0"}),D=new google.maps.LatLngBounds,{AdvancedMarkerElement:q,PinElement:O}=yield google.maps.importLibrary("marker");navigator.geolocation?navigator.geolocation.getCurrentPosition(function(J){const te=new google.maps.LatLng(J.coords.latitude,J.coords.longitude);new google.maps.Marker({position:te,map:V,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"#0062ff",fillOpacity:1,scale:6,strokeColor:"#ffffff",strokeWeight:2}}),new google.maps.Circle({strokeColor:"#00BFFF",strokeOpacity:.5,strokeWeight:1,fillColor:"#00BFFF",fillOpacity:.2,map:V,center:te,radius:J.coords.accuracy}),D.extend(te)},function(J){console.error("Error retrieving location:",J)}):console.error("Geolocation not supported by this browser."),_.lat1===_.lat2&&_.lon1===_.lon2?R(D,V,{lat:_.lat2,lon:_.lon2,color:_.color,title:_.destination},{type:"icon",iconClass:"icon-home",title:"Origen/Destino",glyph:`0,${String(p.length+1)}`}):(R(D,V,{lat:_.lat1,lon:_.lon1,color:_.color,title:_.origin},{type:"icon",iconClass:"icon-home",title:"Origen",glyph:"0"}),R(D,V,{lat:_.lat2,lon:_.lon2,color:_.color,title:_.destination},{type:"icon",iconClass:"icon-flag",title:"Destino",glyph:String(p.length+1)})),p.forEach((J,te)=>{const _e=parseFloat(J.lat),be=parseFloat(J.lon),ce=new google.maps.LatLng(_e,be),Ie=new google.maps.Marker({position:{lat:_e,lng:be},map:V,title:J.title}),Ce=new O({background:De(J.status,J.date_service),borderColor:"#000",glyphColor:"#000",glyph:(parseInt(J.pos)+1).toString()});new q({map:V,position:ce,content:Ce.element,title:"Parada "+(parseInt(J.pos)+1).toString()+": "+J.title}).addListener("click",function(Le){U(J,!1)}),D.extend(Ie.getPosition())}),V.fitBounds(D)}})}function R(F,V,D,q){return n(this,void 0,void 0,function*(){let O;const J=parseFloat(D.lat),te=parseFloat(D.lon),_e=new google.maps.LatLng(J,te),{AdvancedMarkerElement:be,PinElement:ce}=yield google.maps.importLibrary("marker");q.type=="icon"?(O=document.createElement("i"),O.className=`${q.iconClass} icon`,O.style.fontSize="14px",O.style.color=Ae(D.color),O.style.fontWeight="600"):q.type=="text";const Ie=new google.maps.Marker({position:{lat:J,lng:te},map:V,title:`${q.title}. ${D.title}`}),Ce=new ce({background:D.color,borderColor:"#000",glyphColor:Ae(D.color),glyph:q.glyph});return new be({map:V,position:_e,content:Ce.element,title:q.title+": "+D.title}).addListener("click",function(Le){w(_,q.title=="Destino"||q.title=="Origen/Destino")}),Ie})}function I(F){return n(this,void 0,void 0,function*(){let V=new FormData;V.append("id_route",F),V=se(V),V.append("id_enterprise",h.id_enterprise);try{const q=yield(yield fetch(`${s}api/admin/report/seguimiento_list.php`,{method:"POST",body:V})).json();t(6,_=q.data.seguimiento_list[0]),t(5,p=q.data.event_list),t(7,v=q.data.checklist),E=q.data.expenses,_&&t(4,b=_.km_inicial=="0"&&_.gas_inicial=="0"),t(3,k=!1)}catch(D){t(3,k=!1),console.error("Error fetching data:",D)}})}const M=F=>new Promise((V,D)=>{let q=new FormData;q.append("id_route",F.id_route),q.append("id_event",F.id_event),q=se(q),fetch(`${s}api/admin/evidence/evidence_by_event.php`,{method:"POST",body:q}).then(O=>O.json()).then(O=>{V(O.data.event_evidence[0])}).catch(O=>{console.error("Error fetching data:",O),D(O)})}),U=(F,V)=>{M(F).then(D=>{F.stopsApproval=x,F.smsActive=z,D&&(F.img=D.img,F.driver_comments=D.driver_comments,F.comments=D.comments),qe("modal-delivery-info",Ut,{delivery:F,isLast:V}).then(q=>{}).finally(()=>{I(o)})})},w=(F,V)=>{var D=new Object;V?D={title:F.destination,line1:F.dest_address}:D={title:F.origin,line1:F.origin_address},D.enterprise_name=F.enterprise_name,D.client_name=F.client_name,D.client_phone=F.tel,D.id_route=F.id_route,D.stopsApproval=x,D.smsActive=z;var q=!0;qe("modal-delivery-info",Ut,{delivery:D,isLast:V,flag:q})},Q=(F,V,D)=>{var q=!1;return C||(C=!0,qe("modal-checklist",En,{checklist:F,driverId:V,routeId:D,isLast:q}).then(O=>{C=!1}),Oe(D,"checklist")),""},Z=F=>n(void 0,void 0,void 0,function*(){return yield I(F),E.length>0?qe("modal-expense-detail",Ro,{routeId:F,expenses:E}).then(V=>{}):qe("modal-expense",vt,{routeId:F}).then(V=>{}),""}),me=F=>n(void 0,void 0,void 0,function*(){return yield I(F),qe("modal-incidence",Do,{routeId:F}).then(V=>{}),""}),he=F=>{if(F.tracking_type=="subscription"){if(F.subscriber_info&&F.payment_type==="cash"&&new Date(F.subscriber_info.payment_next)<new Date)return!0}else if(F.tracking_type=="ecommerce"&&Number(F.payment_pending)>0)return!0;return!1};function Oe(F,V){let D=new FormData;return D.append("id_route",F),D.append("status",V),D=se(D),fetch(`${s}api/admin/route/change_status.php`,{method:"POST",body:D}).then(q=>q.json()).then(q=>{}).catch(q=>{console.error("Error fetching data:",q)}),""}const A=()=>{h.type=="super"||h.type=="admin"?xe("/drivers/me"):h.id_driver&&xe(`/drivers/${h.id_driver}`)},ae=(F,V)=>n(void 0,void 0,void 0,function*(){yield(yield Fe.create({header:F||"Error",message:V||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()});function se(F){return F.append("token",h.token),F.append("id_user_over",h.id_user),F}const ve=()=>n(void 0,void 0,void 0,function*(){if(h.id_enterprise){let F=new FormData;F.append("id_enterprise",h.id_enterprise),F=se(F);try{const V=yield fetch(`${s}api/admin/enterprise/enterprise_settings.php`,{method:"POST",body:F});V.ok?(P=(yield V.json()).nodos,x=ht("stops_wait_approval",P),z=ht("sms_active",P),t(10,W=ht("stops_order_restriction",P))):console.error("File upload failed:",V.statusText)}catch(V){console.error("Error during file upload:",V)}}}),oe=()=>me(o),$=()=>Z(o),pe=F=>S(F.detail.value);function ue(F){Pe[F?"unshift":"push"](()=>{N=F,t(8,N)})}const le=()=>{w(_,!1)},ee=F=>{const V=p.findIndex(te=>te.id_event===F.id_event),D=V===0,q=V>0?p[V-1]:null,O=D||q&&q.img!==null,J=F.img!==null&&F.img!=="";O||D&&!J||W=="1"?U(F,!1):ae("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},Ee=()=>{w(_,!0)};function ge(F){Pe[F?"unshift":"push"](()=>{N=F,t(8,N)})}const ke=()=>{w(_,!1)},fe=F=>{const V=p.findIndex(te=>te.id_event===F.id_event),D=V===0,q=V>0?p[V-1]:null,O=D||q&&q.img!==null,J=F.img!==null&&F.img!=="";O||D&&!J||W=="1"?U(F,!1):ae("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},ie=()=>{w(_,!0)};function Y(F){Pe[F?"unshift":"push"](()=>{N=F,t(8,N)})}const X=()=>{w(_,!1)},j=F=>{const V=p.findIndex(te=>te.id_event===F.id_event),D=V===0,q=V>0?p[V-1]:null,O=D||q&&q.img!==null,J=F.img!==null&&F.img!=="";O||D&&!J||W=="1"?U(F,!1):ae("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},ne=()=>{w(_,!0)};return i.$$set=F=>{"routeId"in F&&t(0,o=F.routeId),"driverId"in F&&t(1,c=F.driverId)},i.$$.update=()=>{i.$$.dirty[0]&2097157&&(t(0,{routeId:o,driverId:c}=l.params,o,(t(1,c),t(21,l),t(2,h),t(0,o))),t(2,h=JSON.parse(localStorage.getItem("userSession"))),h?h.id_user&&(h.type=="admin"||h.type=="super")?(I(o),xe(`/drivers/me/routes/${o}`)):h.id_user&&h.id_driver&&(I(o),xe(`/drivers/${h.id_driver}/routes/${o}`)):xe("/"))},[o,c,h,k,b,p,_,v,N,H,W,L,S,U,w,Q,Z,me,he,A,ae,l,oe,$,pe,ue,le,ee,Ee,ge,ke,fe,ie,Y,X,j,ne]}class cl extends Xe{constructor(e){super(),Je(this,e,tl,Zo,We,{routeId:0,driverId:1},null,[-1,-1])}}export{cl as component};
