import{Z as wt,s as $e,e as h,j as N,b as _,q as k,d as ie,h as u,m as C,v as E,i as V,w as s,x as ue,n as Ce,z as He,_ as Ui,k as Be,B as c,o as ct,$ as Nt,t as ye,r as Oe,f as S,a0 as Ht,y as Pe,a1 as dt,A as xe,F as Ct,J as Hi,a2 as Et,a3 as Je,a4 as Tt,a5 as Lt,a6 as rt,a7 as st,a8 as je,l as Ri,p as Fi}from"../chunks/index.DViGqkF2.js";import{S as et,i as tt,b as Mt,d as St,m as At,t as nt,a as at,e as Pt,g as Li,c as Mi}from"../chunks/index.BWiWegHk.js";import{e as qe,u as _t,d as pt,g as Xe,a as it,h as Ke,b as Vi,c as qi,i as Si,f as Wi,j as Ai,k as ji,m as Gi,n as gt,o as Ki,q as Dt,r as Pi,s as Di,t as Bt,v as Ye,w as Xi,x as Ji,y as xt,z as zt,A as Yi,B as Qi,I as Zi,C as $i,D as en,E as tn,p as nn}from"../chunks/index.psA69Uur.js";import"../chunks/index-6e05b96e.C_9q9BoX.js";import{m as ot,D as mt,a as Ze,W as on,b as ln}from"../chunks/overlays-b874c3c3.Dmy48c2G.js";import{q as rn,t as sn}from"../chunks/ion-modal.BYMRzj9z.js";import{g as ht}from"../chunks/entry.CFIwT7d9.js";const an=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,cn=(l,e)=>{if(!customElements.get(l)){class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){new e({target:this.shadowRoot,props:this.componentProps||{}})}}customElements.define(l,t)}},un=l=>document.createElement(l).constructor!==HTMLElement,fn=(l,e)=>{un(l)||cn(l,e)},Qe=async(l,e,t={},i={})=>{rn(),sn(),fn(l,e);const n=await ot.create({component:l,componentProps:t,...i});return n.addEventListener("ionModalDidPresent",()=>{const o=n.querySelector(l);o&&(o.componentProps=t)}),await n.present(),n.onWillDismiss()};let ut=wt({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]}),Bi=wt({flag:[]});function dn(l){let e,t,i,n,o="Cancelar",r,a,f="Captura de Km/Gas",b,g,d,m="Confirmar",p,v,y,w,H,P,B;return{c(){e=h("ion-header"),t=h("ion-toolbar"),i=h("ion-buttons"),n=h("ion-button"),n.textContent=o,r=N(),a=h("ion-title"),a.textContent=f,b=N(),g=h("ion-buttons"),d=h("ion-button"),d.textContent=m,p=N(),v=h("ion-content"),y=h("ion-item"),w=h("ion-input"),this.h()},l(U){e=_(U,"ION-HEADER",{translucent:!0});var W=k(e);t=_(W,"ION-TOOLBAR",{});var R=k(t);i=_(R,"ION-BUTTONS",{slot:!0});var L=k(i);n=_(L,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),ie(n)!=="svelte-17pq4f4"&&(n.textContent=o),L.forEach(u),r=C(R),a=_(R,"ION-TITLE",{"data-svelte-h":!0}),ie(a)!=="svelte-1yhkaq7"&&(a.textContent=f),b=C(R),g=_(R,"ION-BUTTONS",{slot:!0});var z=k(g);d=_(z,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),ie(d)!=="svelte-cm6j4s"&&(d.textContent=m),z.forEach(u),R.forEach(u),W.forEach(u),p=C(U),v=_(U,"ION-CONTENT",{fullscreen:!0});var x=k(v);y=_(x,"ION-ITEM",{});var I=k(y);w=_(I,"ION-INPUT",{class:!0,inputmode:!0,pattern:!0,type:!0,placeholder:!0,value:!0,required:!0});var T=k(w);T.forEach(u),I.forEach(u),x.forEach(u),this.h()},h(){E(n,"color","medium"),E(i,"slot","start"),E(d,"strong",""),E(g,"slot","end"),E(e,"translucent",""),E(w,"class","fin-km"),E(w,"inputmode","numeric"),E(w,"pattern","[0-9]*"),E(w,"type","number"),E(w,"placeholder",H="Ingresa "+l[0]+" actual"),E(w,"value",l[1]),E(w,"required",""),E(v,"fullscreen","")},m(U,W){V(U,e,W),s(e,t),s(t,i),s(i,n),s(t,r),s(t,a),s(t,b),s(t,g),s(g,d),V(U,p,W),V(U,v,W),s(v,y),s(y,w),P||(B=[ue(n,"click",l[2]),ue(d,"click",l[3]),ue(w,"input",l[4])],P=!0)},p(U,[W]){W&1&&H!==(H="Ingresa "+U[0]+" actual")&&E(w,"placeholder",H),W&2&&E(w,"value",U[1])},i:Ce,o:Ce,d(U){U&&(u(e),u(p),u(v)),P=!1,He(B)}}}function hn(l,e,t){const i=Ui();let o=document.querySelector("ion-modal").componentProps.data_type,r="";Bi.subscribe(d=>{o=d.flag[0],o=="km_final"||o=="km_inicial"?t(0,r="kilometraje"):t(0,r="litros de gasolina")});let a=0;function f(){ot.dismiss()}function b(){i("modalResult",{data:"Your data",role:"confirm"}),o=="km_inicial"?ut.update(m=>({...m,km_inicial:[a]})):o=="gas_inicial"?ut.update(m=>({...m,gas_inicial:[a]})):o=="km_final"?ut.update(m=>({...m,km_final:[a]})):o=="gas_final"&&ut.update(m=>({...m,gas_final:[a]})),f()}return[r,a,f,b,d=>t(1,a=d.target.value)]}class _n extends et{constructor(e){super(),tt(this,e,hn,dn,$e,{})}}const It=wt({items:[],checkedIndices:[],mandatory:[]});function Rt(l,e,t){const i=l.slice();return i[56]=e[t],i[57]=e,i[58]=t,i}function pn(l){let e,t,i,n,o,r="Kilometraje inicial",a,f,b=l[2]?l[2]+" km.":"Cargar km",g,d,m,p,v,y,w,H="Gasolina inicial (litros)",P,B,U=l[3]?l[3]+" litros":"Cargar gas",W,R,L,z;return R=Nt(l[22][0]),{c(){e=h("ion-item"),t=h("ion-label"),i=h("input"),n=N(),o=h("p"),o.textContent=r,a=N(),f=h("ion-button"),g=ye(b),d=N(),m=h("ion-item"),p=h("ion-label"),v=h("input"),y=N(),w=h("p"),w.textContent=H,P=N(),B=h("ion-button"),W=ye(U),this.h()},l(x){e=_(x,"ION-ITEM",{});var I=k(e);t=_(I,"ION-LABEL",{style:!0});var T=k(t);i=_(T,"INPUT",{id:!0,style:!0,type:!0}),n=C(T),o=_(T,"P",{style:!0,"data-svelte-h":!0}),ie(o)!=="svelte-88twxi"&&(o.textContent=r),T.forEach(u),a=C(I),f=_(I,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var O=k(f);g=Oe(O,b),O.forEach(u),I.forEach(u),d=C(x),m=_(x,"ION-ITEM",{});var D=k(m);p=_(D,"ION-LABEL",{style:!0});var Z=k(p);v=_(Z,"INPUT",{id:!0,style:!0,type:!0}),y=C(Z),w=_(Z,"P",{style:!0,"data-svelte-h":!0}),ie(w)!=="svelte-1ux30eb"&&(w.textContent=H),Z.forEach(u),P=C(D),B=_(D,"ION-BUTTON",{fill:!0,class:!0,size:!0,style:!0});var ne=k(B);W=Oe(ne,U),ne.forEach(u),D.forEach(u),this.h()},h(){S(i,"id","chkbox-km-ini"),c(i,"pointer-events","auto"),S(i,"type","checkbox"),i.required=!0,c(o,"margin-left","10px"),c(t,"display","flex"),E(f,"fill","outline"),E(f,"size","small"),E(f,"class","loadKmInicial"),E(f,"aria-selected",""),S(v,"id","chkbox-gas-ini"),c(v,"pointer-events","auto"),S(v,"type","checkbox"),v.required=!0,c(w,"margin-left","10px"),c(p,"display","flex"),E(B,"fill","outline"),E(B,"class","loadGasInicial"),E(B,"size","small"),c(B,"height","16px "),R.p(i,v)},m(x,I){V(x,e,I),s(e,t),s(t,i),i.checked=~(l[6]||[]).indexOf(i.__value),l[29](i),s(t,n),s(t,o),s(e,a),s(e,f),s(f,g),V(x,d,I),V(x,m,I),s(m,p),s(p,v),l[31](v),v.checked=~(l[6]||[]).indexOf(v.__value),s(p,y),s(p,w),s(m,P),s(m,B),s(B,W),L||(z=[ue(i,"change",l[28]),ue(f,"click",l[30]),ue(v,"change",l[32]),ue(B,"click",l[33])],L=!0)},p(x,I){I[0]&65&&(i.checked=~(x[6]||[]).indexOf(i.__value)),I[0]&4&&b!==(b=x[2]?x[2]+" km.":"Cargar km")&&Pe(g,b),I[0]&65&&(v.checked=~(x[6]||[]).indexOf(v.__value)),I[0]&8&&U!==(U=x[3]?x[3]+" litros":"Cargar gas")&&Pe(W,U)},d(x){x&&(u(e),u(d),u(m)),l[29](null),l[31](null),R.r(),L=!1,He(z)}}}function mn(l){let e,t,i,n,o,r="Kilometraje final",a,f,b=l[4]?l[4]+" km.":"Cargar km",g,d,m,p,v,y,w,H="Gasolina final (litros)",P,B,U=l[5]?l[5]+" litros":"Cargar gas",W,R,L,z;return R=Nt(l[22][0]),{c(){e=h("ion-item"),t=h("ion-label"),i=h("input"),n=N(),o=h("p"),o.textContent=r,a=N(),f=h("ion-button"),g=ye(b),d=N(),m=h("ion-item"),p=h("ion-label"),v=h("input"),y=N(),w=h("p"),w.textContent=H,P=N(),B=h("ion-button"),W=ye(U),this.h()},l(x){e=_(x,"ION-ITEM",{});var I=k(e);t=_(I,"ION-LABEL",{style:!0});var T=k(t);i=_(T,"INPUT",{id:!0,style:!0,type:!0}),n=C(T),o=_(T,"P",{style:!0,"data-svelte-h":!0}),ie(o)!=="svelte-ccmu71"&&(o.textContent=r),T.forEach(u),a=C(I),f=_(I,"ION-BUTTON",{fill:!0,size:!0,class:!0,"aria-selected":!0});var O=k(f);g=Oe(O,b),O.forEach(u),I.forEach(u),d=C(x),m=_(x,"ION-ITEM",{});var D=k(m);p=_(D,"ION-LABEL",{style:!0});var Z=k(p);v=_(Z,"INPUT",{id:!0,style:!0,type:!0}),y=C(Z),w=_(Z,"P",{style:!0,"data-svelte-h":!0}),ie(w)!=="svelte-wsoyd2"&&(w.textContent=H),Z.forEach(u),P=C(D),B=_(D,"ION-BUTTON",{fill:!0,size:!0,class:!0});var ne=k(B);W=Oe(ne,U),ne.forEach(u),D.forEach(u),this.h()},h(){S(i,"id","chkbox-km-fin"),c(i,"pointer-events","auto"),S(i,"type","checkbox"),i.required=!0,c(o,"margin-left","10px"),c(t,"display","flex"),E(f,"fill","outline"),E(f,"size","small"),E(f,"class","loadKmInicial"),E(f,"aria-selected",""),S(v,"id","chkbox-gas-fin"),c(v,"pointer-events","auto"),S(v,"type","checkbox"),v.required=!0,c(w,"margin-left","10px"),c(p,"display","flex"),E(B,"fill","outline"),E(B,"size","small"),E(B,"class","loadGasInicial"),R.p(i,v)},m(x,I){V(x,e,I),s(e,t),s(t,i),i.checked=~(l[6]||[]).indexOf(i.__value),l[23](i),s(t,n),s(t,o),s(e,a),s(e,f),s(f,g),V(x,d,I),V(x,m,I),s(m,p),s(p,v),v.checked=~(l[6]||[]).indexOf(v.__value),l[26](v),s(p,y),s(p,w),s(m,P),s(m,B),s(B,W),L||(z=[ue(i,"change",l[21]),ue(f,"click",l[24]),ue(v,"change",l[25]),ue(B,"click",l[27])],L=!0)},p(x,I){I[0]&65&&(i.checked=~(x[6]||[]).indexOf(i.__value)),I[0]&16&&b!==(b=x[4]?x[4]+" km.":"Cargar km")&&Pe(g,b),I[0]&65&&(v.checked=~(x[6]||[]).indexOf(v.__value)),I[0]&32&&U!==(U=x[5]?x[5]+" litros":"Cargar gas")&&Pe(W,U)},d(x){x&&(u(e),u(d),u(m)),l[23](null),l[26](null),R.r(),L=!1,He(z)}}}function Ft(l){let e=[],t=new Map,i,n=qe(l[0]);const o=r=>r[56].id_checklist_event;for(let r=0;r<n.length;r+=1){let a=Rt(l,n,r),f=o(a);t.set(f,e[r]=Vt(f,a))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();i=Be()},l(r){for(let a=0;a<e.length;a+=1)e[a].l(r);i=Be()},m(r,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,a);V(r,i,a)},p(r,a){a[0]&827841&&(n=qe(r[0]),e=_t(e,a,o,1,r,n,t,i.parentNode,pt,Vt,i,Rt))},d(r){r&&u(i);for(let a=0;a<e.length;a+=1)e[a].d(r)}}}function vn(l){let e,t=(l[15][l[56].id_checklist_event]?l[15][l[56].id_checklist_event]:"Cargar evidencia")+"",i,n;return{c(){e=h("label"),i=ye(t),this.h()},l(o){e=_(o,"LABEL",{for:!0,class:!0});var r=k(e);i=Oe(r,t),r.forEach(u),this.h()},h(){S(e,"for",n="chklist-"+l[56].id_checklist_event),S(e,"class","button-label")},m(o,r){V(o,e,r),s(e,i)},p(o,r){r[0]&32769&&t!==(t=(o[15][o[56].id_checklist_event]?o[15][o[56].id_checklist_event]:"Cargar evidencia")+"")&&Pe(i,t),r[0]&1&&n!==(n="chklist-"+o[56].id_checklist_event)&&S(e,"for",n)},d(o){o&&u(e)}}}function gn(l){let e;return{c(){e=h("ion-spinner"),this.h()},l(t){e=_(t,"ION-SPINNER",{name:!0,class:!0}),k(e).forEach(u),this.h()},h(){E(e,"name","dots"),E(e,"class","button-spinner")},m(t,i){V(t,e,i)},p:Ce,d(t){t&&u(e)}}}function Vt(l,e){let t,i,n,o,r,a=!1,f=e[56],b,g,d=e[56].item+"",m,p,v,y=e[56].mandatory=="1"?" * ":"",w,H,P,B,U,W,R,L,z,x,I;const T=()=>e[35](n,f),O=()=>e[35](null,f);function D(){return e[36](e[56])}function Z(me,M){return me[13][me[56].id_checklist_event]?gn:vn}let ne=Z(e),oe=ne(e);function re(...me){return e[38](e[56],...me)}return z=Nt(e[22][0]),{key:l,first:null,c(){t=h("ion-item"),i=h("ion-label"),n=h("input"),b=N(),g=h("p"),m=ye(d),p=N(),v=h("b"),w=ye(y),H=N(),P=h("ion-button"),B=h("div"),oe.c(),U=N(),W=h("input"),L=N(),this.h()},l(me){t=_(me,"ION-ITEM",{});var M=k(t);i=_(M,"ION-LABEL",{style:!0});var se=k(i);n=_(se,"INPUT",{id:!0,style:!0,type:!0}),b=C(se),g=_(se,"P",{style:!0});var le=k(g);m=Oe(le,d),le.forEach(u),p=C(se),v=_(se,"B",{style:!0});var be=k(v);w=Oe(be,y),be.forEach(u),se.forEach(u),H=C(M),P=_(M,"ION-BUTTON",{fill:!0,class:!0,size:!0});var de=k(P);B=_(de,"DIV",{class:!0});var ee=k(B);oe.l(ee),U=C(ee),W=_(ee,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),ee.forEach(u),de.forEach(u),L=C(M),M.forEach(u),this.h()},h(){S(n,"id",o=`chkbox-${e[56].id_checklist_event}`),c(n,"pointer-events","auto"),S(n,"type","checkbox"),n.__value=r=e[56].id_checklist_event,Ht(n,n.__value),n.required=!0,c(g,"margin-left","10px"),c(v,"margin-left","5px"),c(i,"display","flex"),c(W,"display","none"),S(W,"id",R="chklist-"+e[56].id_checklist_event),S(W,"name","fileToUpload"),S(W,"type","file"),S(W,"accept","image/*"),S(W,"capture","environment"),S(B,"class","button-content"),E(P,"fill","outline"),E(P,"class","loadEvidence"),E(P,"size","small"),z.p(n),this.first=t},m(me,M){V(me,t,M),s(t,i),s(i,n),n.checked=~(e[6]||[]).indexOf(n.__value),T(),s(i,b),s(i,g),s(g,m),s(i,p),s(i,v),s(v,w),s(t,H),s(t,P),s(P,B),oe.m(B,null),s(B,U),s(B,W),e[37](W),s(t,L),x||(I=[ue(n,"change",e[34]),ue(n,"change",D),ue(W,"change",re)],x=!0)},p(me,M){e=me,M[0]&1&&o!==(o=`chkbox-${e[56].id_checklist_event}`)&&S(n,"id",o),M[0]&1&&r!==(r=e[56].id_checklist_event)&&(n.__value=r,Ht(n,n.__value),a=!0),(a||M[0]&65)&&(n.checked=~(e[6]||[]).indexOf(n.__value)),f!==e[56]&&(O(),f=e[56],T()),M[0]&1&&d!==(d=e[56].item+"")&&Pe(m,d),M[0]&1&&y!==(y=e[56].mandatory=="1"?" * ":"")&&Pe(w,y),ne===(ne=Z(e))&&oe?oe.p(e,M):(oe.d(1),oe=ne(e),oe&&(oe.c(),oe.m(B,U))),M[0]&1&&R!==(R="chklist-"+e[56].id_checklist_event)&&S(W,"id",R)},d(me){me&&u(t),O(),oe.d(),e[37](null),z.r(),x=!1,He(I)}}}function qt(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(i){e=_(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1muo9sg"&&(e.innerHTML=t),this.h()},h(){S(e,"class","overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(i,n){V(i,e,n)},d(i){i&&u(e)}}}function bn(l){let e,t,i,n,o="Cancelar",r,a,f="REQUERIMIENTOS DE RUTA",b,g,d,m,p,v,y,w="Confirmar",H,P,B,U;function W(I,T){return I[1]?mn:pn}let R=W(l),L=R(l),z=l[0]&&Ft(l),x=l[14]&&qt();return{c(){e=h("ion-header"),t=h("ion-toolbar"),i=h("ion-buttons"),n=h("ion-button"),n.textContent=o,r=N(),a=h("ion-title"),a.textContent=f,b=N(),g=h("ion-content"),d=h("ion-list"),L.c(),m=N(),z&&z.c(),p=N(),v=h("ion-footer"),y=h("ion-button"),y.textContent=w,H=N(),x&&x.c(),P=Be(),this.h()},l(I){e=_(I,"ION-HEADER",{translucent:!0});var T=k(e);t=_(T,"ION-TOOLBAR",{});var O=k(t);i=_(O,"ION-BUTTONS",{slot:!0});var D=k(i);n=_(D,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),ie(n)!=="svelte-18837zq"&&(n.textContent=o),D.forEach(u),r=C(O),a=_(O,"ION-TITLE",{"data-svelte-h":!0}),ie(a)!=="svelte-19bar5p"&&(a.textContent=f),O.forEach(u),T.forEach(u),b=C(I),g=_(I,"ION-CONTENT",{fullscreen:!0});var Z=k(g);d=_(Z,"ION-LIST",{});var ne=k(d);L.l(ne),m=C(ne),z&&z.l(ne),ne.forEach(u),Z.forEach(u),p=C(I),v=_(I,"ION-FOOTER",{});var oe=k(v);y=_(oe,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),ie(y)!=="svelte-1vqzxem"&&(y.textContent=w),oe.forEach(u),H=C(I),x&&x.l(I),P=Be(),this.h()},h(){E(n,"color","medium"),E(i,"slot","start"),E(e,"translucent",""),E(g,"fullscreen",""),E(y,"fill","outline"),E(y,"color","tertiary"),E(y,"strong",""),c(y,"width","99%"),c(y,"height","auto"),c(y,"margin-bottom","120px")},m(I,T){V(I,e,T),s(e,t),s(t,i),s(i,n),s(t,r),s(t,a),V(I,b,T),V(I,g,T),s(g,d),L.m(d,null),s(d,m),z&&z.m(d,null),V(I,p,T),V(I,v,T),s(v,y),V(I,H,T),x&&x.m(I,T),V(I,P,T),B||(U=[ue(n,"click",l[16]),ue(y,"click",l[17])],B=!0)},p(I,T){R===(R=W(I))&&L?L.p(I,T):(L.d(1),L=R(I),L&&(L.c(),L.m(d,m))),I[0]?z?z.p(I,T):(z=Ft(I),z.c(),z.m(d,null)):z&&(z.d(1),z=null),I[14]?x||(x=qt(),x.c(),x.m(P.parentNode,P)):x&&(x.d(1),x=null)},i:Ce,o:Ce,d(I){I&&(u(e),u(b),u(g),u(p),u(v),u(H),u(P)),L.d(),z&&z.d(),x&&x.d(I),B=!1,He(U)}}}function yt(l,e){if(typeof l=="object"&&l!==null||Array.isArray(l)){if(Array.isArray(l))return l.map(t=>yt(t,e)).flat();{const t=Object.keys(l);let i;return e=="id_checklist_event"?i=t.filter(o=>o.toLowerCase().includes("id_checklist_event")).map(o=>l[o]):e=="mandatory"?i=t.filter(o=>o.toLowerCase().includes("mandatory")).map(o=>l[o]):(console.error("Tipo de dato no reconocido."),i=!1),i}}else return console.error("Invalid input. Please provide a valid object or array."),[]}function kn(){return new Promise((l,e)=>{if(!navigator.geolocation)return e("Geoloc no soportada");navigator.geolocation.getCurrentPosition(t=>l({lat:+t.coords.latitude.toFixed(6),lng:+t.coords.longitude.toFixed(6)}),t=>e(t),{enableHighAccuracy:!0,maximumAge:0,timeout:8e3})})}function En(l,e,t){let i=mt,n,o=[],r,a=!1,f,b,g,d,m=[],p=null,v={},y,w,H,P,B={},U=new Object,W=!1,R={},L={};ct(()=>{n=document.querySelector("ion-modal");const q=(n==null?void 0:n.componentProps)||{};if(t(0,o=q.checklist||[]),q.driverId,r=q.routeId,t(1,a=!!q.isLast),U=JSON.parse(localStorage.getItem("userSession")),a||It.update(ce=>(ce.mandatory=yt(o,"mandatory"),ce.items=yt(o,"id_checklist_event"),ce)),n){n.breakpoints=[.25,.85,1],n.initialBreakpoint=.85;const ce=F=>{var Y;const K=(Y=F.detail)==null?void 0:Y.breakpoint;K&&K>=.6&&n.setCurrentBreakpoint(.95)};n.addEventListener("ionBreakpointDidChange",ce)}});function z(q){t(13,B[q]=!0,B)}const x=async()=>{await(await Ze.create({header:"Datos o checklist incompletos",message:"Carga la evidencia requerida y marca todas las casillas para confirmar",buttons:[{text:"Cerrar"}]})).present()},I=async(q,ce)=>{await(await Ze.create({header:q||"Error",message:ce||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},T=async q=>{await(await Ze.create({header:"Datos inválidos",message:q=="km"?"Llena correctamente el campo de kilometraje inicial":"Llena correctamente el campo de gasolina inicial",buttons:[{text:"Cerrar"}]})).present()},O=()=>{ot.dismiss()},D=async()=>{if(t(14,W=!0),a){const q=me(g,"km"),ce=me(d,"gas"),F={km_final:q,gas_final:ce,id_route:r,id_user_over:U.id_user,token:U.token};q&&ce?(O(),Xe(`${i}api/admin/checklist/add_evidence.php`,function(K){K.success?(t(14,W=!1),I("Datos capturados","El kilometraje y gasolina final fueron registrados correctamente, espere aprobación para finalizar ruta")):(t(14,W=!1),I("Error","Vuelva a intentar capturar los datos solicitados"))},F)):x()}else{const q=me(f,"km"),ce=me(b,"gas");let F=null;try{F=await kn()}catch(K){console.warn("GPS no disponible:",K)}It.update(K=>{const Y=K.mandatory,ge=K.items.filter((te,fe)=>K.mandatory[fe]==="1").every(te=>K.checkedIndices.includes(te)),ae=Array.isArray(Y)&&Y.some(te=>te==="1")&&!ge?"checklist-pending":"enroute";if(q&&ce){let te=new FormData;te=de(te),te.append("km_inicial",q),te.append("gas_inicial",ce),te.append("id_route",r),F&&(te.append("lat",F.lat),te.append("lng",F.lng));for(const fe in R)if(Object.prototype.hasOwnProperty.call(R,fe)){const{img:we,img_id:De}=R[fe];te.append(`selectedImages[${fe}][img]`,we),te.append(`selectedImages[${fe}][img_id]`,De)}fetch(`${i}api/admin/checklist/add_evidence.php`,{method:"POST",body:te}).then(fe=>fe.json()).then(()=>{re(r,ae)}).catch(fe=>{console.error("Error fetching data:",fe)}).finally(()=>{t(14,W=!1),O()})}else(!q||!ce)&&x();return K})}be()},Z=async(q,ce)=>{z(ce);const K=q.target.files[0],Y=await ne(K);if(Y){let Q=new FormData;Q.append("fileToUpload",Y),Q=de(Q);try{const ge=await fetch(`${i}api/admin/manager/upload_img_driver.php`,{method:"POST",body:Q});if(ge.ok){const G=await ge.json();R={...R,[ce]:{img:G.img,img_id:G.img_id}},t(15,L={...L,[ce]:G.filename}),oe(ce),t(8,v[ce].checked=!0,v),t(13,B[ce]=!1,B)}else console.error("File upload failed:",ge.statusText)}catch(ge){console.error("Error durante la carga del archivo:",ge)}}},ne=async q=>new Promise(ce=>{const F=new Image;F.src=URL.createObjectURL(q),F.onload=()=>{const K=document.createElement("canvas"),Y=K.getContext("2d"),Q=800,ge=600;let G=F.width,ae=F.height;G>Q&&(ae*=Q/G,G=Q),ae>ge&&(G*=ge/ae,ae=ge),K.width=G,K.height=ae,Y.drawImage(F,0,0,G,ae),K.toBlob(te=>{ce(te),URL.revokeObjectURL(F.src),Y.clearRect(0,0,K.width,K.height)},"image/jpeg",.7)}}),oe=q=>{It.update(ce=>(ce.checkedIndices.indexOf(q)===-1?ce.checkedIndices.push(q):console.error(`ID ${q} is already checked.`),ce.items.forEach(K=>{K.id_checklist_event===q&&(K.checked=!0)}),ce))};function re(q,ce){let F=new FormData;F.append("id_route",q),F.append("status",ce),F=de(F),fetch(`${i}api/admin/route/change_status.php`,{method:"POST",body:F}).then(K=>K.json()).then(K=>{}).catch(K=>{console.error("Error fetching data:",K)})}function me(q,ce){return/^\d+$/.test(q)?parseInt(q,10):(T(ce),null)}function M(q,ce){se(ce),n||(n=document.querySelector("ion-modal")),n&&(n.componentProps.data_type=ce),Qe("modal-gas-km",_n,{r:ce},{breakpoints:[.25,.85,1],initialBreakpoint:.85,backdropBreakpoint:.25,handle:!0,handleBehavior:"cycle",canDismiss:!0,showBackdrop:!0}).then(()=>{ut.subscribe(F=>le(F,ce))})}function se(q){Bi.update(ce=>({...ce,flag:[q]}))}function le(q,ce){t(2,f=q.km_inicial?q.km_inicial:null),t(3,b=q.gas_inicial?q.gas_inicial:null),t(4,g=q.km_final?q.km_final:null),t(5,d=q.gas_final?q.gas_final:null),ce=="km_inicial"&&y&&t(9,y.checked=!0,y),ce=="gas_inicial"&&w&&t(10,w.checked=!0,w),ce=="km_final"&&H&&t(11,H.checked=!0,H),ce=="gas_final"&&P&&t(12,P.checked=!0,P)}function be(){ut.set({km_inicial:[],gas_inicial:[],km_final:[],gas_final:[]})}function de(q){return q.append("token",U.token),q.append("id_user_over",U.id_user),q}const ee=[[]];function Ie(){m=dt(ee[0],this.__value,this.checked),t(6,m)}function ke(q){xe[q?"unshift":"push"](()=>{H=q,t(11,H)})}const he=q=>M(q,"km_final");function pe(){m=dt(ee[0],this.__value,this.checked),t(6,m)}function Te(q){xe[q?"unshift":"push"](()=>{P=q,t(12,P)})}const Ee=q=>M(q,"gas_final");function ve(){m=dt(ee[0],this.__value,this.checked),t(6,m)}function J(q){xe[q?"unshift":"push"](()=>{y=q,t(9,y)})}const X=q=>M(q,"km_inicial");function A(q){xe[q?"unshift":"push"](()=>{w=q,t(10,w)})}function $(){m=dt(ee[0],this.__value,this.checked),t(6,m)}const j=q=>M(q,"gas_inicial");function _e(){m=dt(ee[0],this.__value,this.checked),t(6,m)}function Se(q,ce){xe[q?"unshift":"push"](()=>{v[ce.id_checklist_event]=q,t(8,v)})}const Me=q=>oe(q.id_checklist_event);function Ae(q){xe[q?"unshift":"push"](()=>{p=q,t(7,p)})}return[o,a,f,b,g,d,m,p,v,y,w,H,P,B,W,L,O,D,Z,oe,M,Ie,ee,ke,he,pe,Te,Ee,ve,J,X,A,$,j,_e,Se,Me,Ae,(q,ce)=>Z(ce,q.id_checklist_event)]}class xi extends et{constructor(e){super(),tt(this,e,En,bn,$e,{},null,[-1,-1])}}/*!
 * Signature Pad v5.0.10 | https://github.com/szimek/signature_pad
 * (c) 2025 Szymon Nowak | Released under the MIT license
 */class bt{constructor(e,t,i,n){if(isNaN(e)||isNaN(t))throw new Error(`Point is invalid: (${e}, ${t})`);this.x=+e,this.y=+t,this.pressure=i||0,this.time=n||Date.now()}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}equals(e){return this.x===e.x&&this.y===e.y&&this.pressure===e.pressure&&this.time===e.time}velocityFrom(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}}class Ut{static fromPoints(e,t){const i=this.calculateControlPoints(e[0],e[1],e[2]).c2,n=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new Ut(e[1],i,n,e[2],t.start,t.end)}static calculateControlPoints(e,t,i){const n=e.x-t.x,o=e.y-t.y,r=t.x-i.x,a=t.y-i.y,f={x:(e.x+t.x)/2,y:(e.y+t.y)/2},b={x:(t.x+i.x)/2,y:(t.y+i.y)/2},g=Math.sqrt(n*n+o*o),d=Math.sqrt(r*r+a*a),m=f.x-b.x,p=f.y-b.y,v=g+d==0?0:d/(g+d),y={x:b.x+m*v,y:b.y+p*v},w=t.x-y.x,H=t.y-y.y;return{c1:new bt(f.x+w,f.y+H),c2:new bt(b.x+w,b.y+H)}}constructor(e,t,i,n,o,r){this.startPoint=e,this.control2=t,this.control1=i,this.endPoint=n,this.startWidth=o,this.endWidth=r}length(){let t=0,i,n;for(let o=0;o<=10;o+=1){const r=o/10,a=this.point(r,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),f=this.point(r,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){const b=a-i,g=f-n;t+=Math.sqrt(b*b+g*g)}i=a,n=f}return t}point(e,t,i,n,o){return t*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*n*(1-e)*e*e+o*e*e*e}}class In{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(e,t,i){this._et.addEventListener(e,t,i)}dispatchEvent(e){return this._et.dispatchEvent(e)}removeEventListener(e,t,i){this._et.removeEventListener(e,t,i)}}function yn(l,e=250){let t=0,i=null,n,o,r;const a=()=>{t=Date.now(),i=null,n=l.apply(o,r),i||(o=null,r=[])};return function(...b){const g=Date.now(),d=e-(g-t);return o=this,r=b,d<=0||d>e?(i&&(clearTimeout(i),i=null),t=g,n=l.apply(o,r),i||(o=null,r=[])):i||(i=window.setTimeout(a,d)),n}}class kt extends In{constructor(e,t={}){var i,n,o;super(),this.canvas=e,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle=(i=t.throttle)!==null&&i!==void 0?i:16,this.minDistance=(n=t.minDistance)!==null&&n!==void 0?n:5,this.dotSize=t.dotSize||0,this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=t.compositeOperation||"source-over",this.canvasContextOptions=(o=t.canvasContextOptions)!==null&&o!==void 0?o:{},this._strokeMoveUpdate=this.throttle?yn(kt.prototype._strokeUpdate,this.throttle):kt.prototype._strokeUpdate,this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this._handleTouchStart=this._handleTouchStart.bind(this),this._handleTouchMove=this._handleTouchMove.bind(this),this._handleTouchEnd=this._handleTouchEnd.bind(this),this._handlePointerDown=this._handlePointerDown.bind(this),this._handlePointerMove=this._handlePointerMove.bind(this),this._handlePointerUp=this._handlePointerUp.bind(this),this._ctx=e.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){const{_ctx:e,canvas:t}=this;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0,this._strokePointerId=void 0}fromDataURL(e,t={}){return new Promise((i,n)=>{const o=new Image,r=t.ratio||window.devicePixelRatio||1,a=t.width||this.canvas.width/r,f=t.height||this.canvas.height/r,b=t.xOffset||0,g=t.yOffset||0;this._reset(this._getPointGroupOptions()),o.onload=()=>{this._ctx.drawImage(o,b,g,a,f),i()},o.onerror=d=>{n(d)},o.crossOrigin="anonymous",o.src=e,this._isEmpty=!1})}toDataURL(e="image/png",t){switch(e){case"image/svg+xml":return typeof t!="object"&&(t=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(t))}`;default:return typeof t!="number"&&(t=void 0),this.canvas.toDataURL(e,t)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const e=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!e?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerDown),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this._removeMoveUpEventListeners()}_getListenerFunctions(){var e;const t=window.document===this.canvas.ownerDocument?window:(e=this.canvas.ownerDocument.defaultView)!==null&&e!==void 0?e:this.canvas.ownerDocument;return{addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}_removeMoveUpEventListeners(){const{removeEventListener:e}=this._getListenerFunctions();e("pointermove",this._handlePointerMove),e("pointerup",this._handlePointerUp),e("mousemove",this._handleMouseMove),e("mouseup",this._handleMouseUp),e("touchmove",this._handleTouchMove),e("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(e,{clear:t=!0}={}){t&&this.clear(),this._fromData(e,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(e)}toData(){return this._data}_isLeftButtonPressed(e,t){return t?e.buttons===1:(e.buttons&1)===1}_pointerEventToSignatureEvent(e){return{event:e,type:e.type,x:e.clientX,y:e.clientY,pressure:"pressure"in e?e.pressure:0}}_touchEventToSignatureEvent(e){const t=e.changedTouches[0];return{event:e,type:e.type,x:t.clientX,y:t.clientY,pressure:t.force}}_handleMouseDown(e){!this._isLeftButtonPressed(e,!0)||this._drawingStroke||this._strokeBegin(this._pointerEventToSignatureEvent(e))}_handleMouseMove(e){if(!this._isLeftButtonPressed(e,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(e),!1);return}this._strokeMoveUpdate(this._pointerEventToSignatureEvent(e))}_handleMouseUp(e){this._isLeftButtonPressed(e)||this._strokeEnd(this._pointerEventToSignatureEvent(e))}_handleTouchStart(e){e.targetTouches.length!==1||this._drawingStroke||(e.cancelable&&e.preventDefault(),this._strokeBegin(this._touchEventToSignatureEvent(e)))}_handleTouchMove(e){if(e.targetTouches.length===1){if(e.cancelable&&e.preventDefault(),!this._drawingStroke){this._strokeEnd(this._touchEventToSignatureEvent(e),!1);return}this._strokeMoveUpdate(this._touchEventToSignatureEvent(e))}}_handleTouchEnd(e){e.targetTouches.length===0&&(e.cancelable&&e.preventDefault(),this._strokeEnd(this._touchEventToSignatureEvent(e)))}_getPointerId(e){return e.persistentDeviceId||e.pointerId}_allowPointerId(e,t=!1){return typeof this._strokePointerId>"u"?t:this._getPointerId(e)===this._strokePointerId}_handlePointerDown(e){this._drawingStroke||!this._isLeftButtonPressed(e)||!this._allowPointerId(e,!0)||(this._strokePointerId=this._getPointerId(e),e.preventDefault(),this._strokeBegin(this._pointerEventToSignatureEvent(e)))}_handlePointerMove(e){if(this._allowPointerId(e)){if(!this._isLeftButtonPressed(e,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(e),!1);return}e.preventDefault(),this._strokeMoveUpdate(this._pointerEventToSignatureEvent(e))}}_handlePointerUp(e){this._isLeftButtonPressed(e)||!this._allowPointerId(e)||(e.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(e)))}_getPointGroupOptions(e){return{penColor:e&&"penColor"in e?e.penColor:this.penColor,dotSize:e&&"dotSize"in e?e.dotSize:this.dotSize,minWidth:e&&"minWidth"in e?e.minWidth:this.minWidth,maxWidth:e&&"maxWidth"in e?e.maxWidth:this.maxWidth,velocityFilterWeight:e&&"velocityFilterWeight"in e?e.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:e&&"compositeOperation"in e?e.compositeOperation:this.compositeOperation}}_strokeBegin(e){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:e,cancelable:!0})))return;const{addEventListener:i}=this._getListenerFunctions();switch(e.event.type){case"mousedown":i("mousemove",this._handleMouseMove,{passive:!1}),i("mouseup",this._handleMouseUp,{passive:!1});break;case"touchstart":i("touchmove",this._handleTouchMove,{passive:!1}),i("touchend",this._handleTouchEnd,{passive:!1});break;case"pointerdown":i("pointermove",this._handlePointerMove,{passive:!1}),i("pointerup",this._handlePointerUp,{passive:!1});break}this._drawingStroke=!0;const n=this._getPointGroupOptions(),o=Object.assign(Object.assign({},n),{points:[]});this._data.push(o),this._reset(n),this._strokeUpdate(e)}_strokeUpdate(e){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(e);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:e}));const t=this._createPoint(e.x,e.y,e.pressure),i=this._data[this._data.length-1],n=i.points,o=n.length>0&&n[n.length-1],r=o?t.distanceTo(o)<=this.minDistance:!1,a=this._getPointGroupOptions(i);if(!o||!(o&&r)){const f=this._addPoint(t,a);o?f&&this._drawCurve(f,a):this._drawDot(t,a),n.push({time:t.time,x:t.x,y:t.y,pressure:t.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:e}))}_strokeEnd(e,t=!0){this._removeMoveUpEventListeners(),this._drawingStroke&&(t&&this._strokeUpdate(e),this._drawingStroke=!1,this._strokePointerId=void 0,this.dispatchEvent(new CustomEvent("endStroke",{detail:e})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerDown,{passive:!1})}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown,{passive:!1})}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart,{passive:!1})}_reset(e){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(e.minWidth+e.maxWidth)/2,this._ctx.fillStyle=e.penColor,this._ctx.globalCompositeOperation=e.compositeOperation}_createPoint(e,t,i){const n=this.canvas.getBoundingClientRect();return new bt(e-n.left,t-n.top,i,new Date().getTime())}_addPoint(e,t){const{_lastPoints:i}=this;if(i.push(e),i.length>2){i.length===3&&i.unshift(i[0]);const n=this._calculateCurveWidths(i[1],i[2],t),o=Ut.fromPoints(i,n);return i.shift(),o}return null}_calculateCurveWidths(e,t,i){const n=i.velocityFilterWeight*t.velocityFrom(e)+(1-i.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(n,i),r={end:o,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=o,r}_strokeWidth(e,t){return Math.max(t.maxWidth/(e+1),t.minWidth)}_drawCurveSegment(e,t,i){const n=this._ctx;n.moveTo(e,t),n.arc(e,t,i,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(e,t){const i=this._ctx,n=e.endWidth-e.startWidth,o=Math.ceil(e.length())*2;i.beginPath(),i.fillStyle=t.penColor;for(let r=0;r<o;r+=1){const a=r/o,f=a*a,b=f*a,g=1-a,d=g*g,m=d*g;let p=m*e.startPoint.x;p+=3*d*a*e.control1.x,p+=3*g*f*e.control2.x,p+=b*e.endPoint.x;let v=m*e.startPoint.y;v+=3*d*a*e.control1.y,v+=3*g*f*e.control2.y,v+=b*e.endPoint.y;const y=Math.min(e.startWidth+b*n,t.maxWidth);this._drawCurveSegment(p,v,y)}i.closePath(),i.fill()}_drawDot(e,t){const i=this._ctx,n=t.dotSize>0?t.dotSize:(t.minWidth+t.maxWidth)/2;i.beginPath(),this._drawCurveSegment(e.x,e.y,n),i.closePath(),i.fillStyle=t.penColor,i.fill()}_fromData(e,t,i){for(const n of e){const{points:o}=n,r=this._getPointGroupOptions(n);if(o.length>1)for(let a=0;a<o.length;a+=1){const f=o[a],b=new bt(f.x,f.y,f.pressure,f.time);a===0&&this._reset(r);const g=this._addPoint(b,r);g&&t(g,r)}else this._reset(r),i(o[0],r)}}toSVG({includeBackgroundColor:e=!1}={}){const t=this._data,i=Math.max(window.devicePixelRatio||1,1),n=0,o=0,r=this.canvas.width/i,a=this.canvas.height/i,f=document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.setAttribute("xmlns","http://www.w3.org/2000/svg"),f.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),f.setAttribute("viewBox",`${n} ${o} ${r} ${a}`),f.setAttribute("width",r.toString()),f.setAttribute("height",a.toString()),e&&this.backgroundColor){const b=document.createElement("rect");b.setAttribute("width","100%"),b.setAttribute("height","100%"),b.setAttribute("fill",this.backgroundColor),f.appendChild(b)}return this._fromData(t,(b,{penColor:g})=>{const d=document.createElement("path");if(!isNaN(b.control1.x)&&!isNaN(b.control1.y)&&!isNaN(b.control2.x)&&!isNaN(b.control2.y)){const m=`M ${b.startPoint.x.toFixed(3)},${b.startPoint.y.toFixed(3)} C ${b.control1.x.toFixed(3)},${b.control1.y.toFixed(3)} ${b.control2.x.toFixed(3)},${b.control2.y.toFixed(3)} ${b.endPoint.x.toFixed(3)},${b.endPoint.y.toFixed(3)}`;d.setAttribute("d",m),d.setAttribute("stroke-width",(b.endWidth*2.25).toFixed(3)),d.setAttribute("stroke",g),d.setAttribute("fill","none"),d.setAttribute("stroke-linecap","round"),f.appendChild(d)}},(b,{penColor:g,dotSize:d,minWidth:m,maxWidth:p})=>{const v=document.createElement("circle"),y=d>0?d:(m+p)/2;v.setAttribute("r",y.toString()),v.setAttribute("cx",b.x.toString()),v.setAttribute("cy",b.y.toString()),v.setAttribute("fill",g),f.appendChild(v)}),f.outerHTML}}function On(l){let e,t;return{c(){e=h("div"),t=h("canvas"),this.h()},l(i){e=_(i,"DIV",{class:!0,style:!0});var n=k(e);t=_(n,"CANVAS",{class:!0,style:!0}),k(t).forEach(u),n.forEach(u),this.h()},h(){S(t,"class","signature-canvas"),c(t,"position","absolute"),c(t,"top","0"),c(t,"left","0"),c(t,"width","100%"),c(t,"height","100%"),c(t,"display","block"),S(e,"class","signature-container"),c(e,"position","relative"),c(e,"width","100%"),c(e,"height","150px"),c(e,"border","1px solid #ccc"),c(e,"border-radius","4px"),c(e,"touch-action","none"),c(e,"-ms-touch-action","none")},m(i,n){V(i,e,n),s(e,t),l[5](t),l[6](e)},p:Ce,i:Ce,o:Ce,d(i){i&&u(e),l[5](null),l[6](null)}}}function wn(l,e,t){let i,n,o,r;function a(){o&&o.clear()}async function f(p="image/png"){return!o||o.isEmpty()?(await(await Ze.create({header:"Firma vacía",message:"No existe firma por guardar",buttons:[{text:"Cerrar"}]})).present(),null):o.toDataURL(p)}function b(){g(),o&&o.clear()}function g(){const p=Math.max(window.devicePixelRatio||1,1),v=n.clientWidth,y=n.clientHeight;if(!v||!y)return;const w=32767,H=Math.min(p,w/v,w/y);t(0,i.width=Math.floor(v*H),i),t(0,i.height=Math.floor(y*H),i);const P=i.getContext("2d");try{P.scale(H,H)}catch(B){console.warn("Canvas scale failed:",B)}}ct(async()=>{await Ct(),g(),o=new kt(i,{backgroundColor:"rgba(255, 255, 255, 0)",penColor:"black"}),r=new ResizeObserver(g),r.observe(n)}),Hi(()=>{r&&r.disconnect()});function d(p){xe[p?"unshift":"push"](()=>{i=p,t(0,i)})}function m(p){xe[p?"unshift":"push"](()=>{n=p,t(1,n)})}return[i,n,a,f,b,d,m]}class Nn extends et{constructor(e){super(),tt(this,e,wn,On,$e,{clear:2,save:3,reset:4})}get clear(){return this.$$.ctx[2]}get save(){return this.$$.ctx[3]}get reset(){return this.$$.ctx[4]}}function Cn(l){let e,t,i,n,o="Cancelar",r,a,f="Firmar",b,g,d,m,p,v,y,w="Borrar",H,P,B="Guardar",U,W,R,L={};return m=new Nn({props:L}),l[4](m),{c(){e=h("ion-header"),t=h("ion-toolbar"),i=h("ion-buttons"),n=h("ion-button"),n.textContent=o,r=N(),a=h("ion-title"),a.textContent=f,b=N(),g=h("ion-content"),d=h("section"),Mt(m.$$.fragment),p=N(),v=h("div"),y=h("ion-button"),y.textContent=w,H=N(),P=h("ion-button"),P.textContent=B,this.h()},l(z){e=_(z,"ION-HEADER",{translucent:!0});var x=k(e);t=_(x,"ION-TOOLBAR",{});var I=k(t);i=_(I,"ION-BUTTONS",{slot:!0});var T=k(i);n=_(T,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),ie(n)!=="svelte-sam1rw"&&(n.textContent=o),T.forEach(u),r=C(I),a=_(I,"ION-TITLE",{"data-svelte-h":!0}),ie(a)!=="svelte-1ibb3l9"&&(a.textContent=f),I.forEach(u),x.forEach(u),b=C(z),g=_(z,"ION-CONTENT",{fullscreen:!0,scrollY:!0,class:!0});var O=k(g);d=_(O,"SECTION",{style:!0});var D=k(d);St(m.$$.fragment,D),p=C(D),v=_(D,"DIV",{style:!0});var Z=k(v);y=_(Z,"ION-BUTTON",{fill:!0,style:!0,"data-svelte-h":!0}),ie(y)!=="svelte-1rt6y6r"&&(y.textContent=w),H=C(Z),P=_(Z,"ION-BUTTON",{style:!0,"data-svelte-h":!0}),ie(P)!=="svelte-7uw5bf"&&(P.textContent=B),Z.forEach(u),D.forEach(u),O.forEach(u),this.h()},h(){E(n,"color","medium"),E(i,"slot","start"),E(e,"translucent",""),E(y,"fill","outline"),c(y,"flex","1"),c(P,"flex","1"),c(v,"display","flex"),c(v,"gap","8px"),c(d,"display","flex"),c(d,"flex-direction","column"),c(d,"gap","12px"),c(d,"padding","16px"),E(g,"fullscreen",""),E(g,"scrollY",!1),E(g,"class","no-scroll svelte-1mh8gy4")},m(z,x){V(z,e,x),s(e,t),s(t,i),s(i,n),s(t,r),s(t,a),V(z,b,x),V(z,g,x),s(g,d),At(m,d,null),s(d,p),s(d,v),s(v,y),s(v,H),s(v,P),U=!0,W||(R=[ue(n,"click",l[1]),ue(y,"click",l[3]),ue(P,"click",l[2])],W=!0)},p(z,[x]){const I={};m.$set(I)},i(z){U||(nt(m.$$.fragment,z),U=!0)},o(z){at(m.$$.fragment,z),U=!1},d(z){z&&(u(e),u(b),u(g)),l[4](null),Pt(m),W=!1,He(R)}}}function Tn(l,e,t){let i;function n(){ot.dismiss(void 0,"cancel")}async function o(){const f=await i.save();f&&ot.dismiss({dataUrl:f},"confirm")}function r(){i.clear()}function a(f){xe[f?"unshift":"push"](()=>{i=f,t(0,i)})}return[i,n,o,r,a]}class Ln extends et{constructor(e){super(),tt(this,e,Tn,Cn,$e,{})}}function Wt(l,e,t){const i=l.slice();return i[60]=e[t],i[62]=t,i}function Mn(l){let e,t,i,n,o;return{c(){e=h("ion-buttons"),t=h("ion-button"),i=ye("Confirmar"),this.h()},l(r){e=_(r,"ION-BUTTONS",{slot:!0});var a=k(e);t=_(a,"ION-BUTTON",{strong:!0,disabled:!0});var f=k(t);i=Oe(f,"Confirmar"),f.forEach(u),a.forEach(u),this.h()},h(){E(t,"strong",""),E(t,"disabled",l[21]()),E(e,"slot","end")},m(r,a){V(r,e,a),s(e,t),s(t,i),n||(o=ue(t,"click",l[24]),n=!0)},p:Ce,d(r){r&&u(e),n=!1,o()}}}function Sn(l){let e,t,i,n,o,r="Empresa",a,f,b=l[10].enterprise_name+"",g;return{c(){e=h("ion-item"),t=h("ion-icon"),i=N(),n=h("ion-label"),o=h("p"),o.textContent=r,a=N(),f=h("h2"),g=ye(b),this.h()},l(d){e=_(d,"ION-ITEM",{});var m=k(e);t=_(m,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=C(m),n=_(m,"ION-LABEL",{});var p=k(n);o=_(p,"P",{"data-svelte-h":!0}),ie(o)!=="svelte-6noid3"&&(o.textContent=r),a=C(p),f=_(p,"H2",{});var v=k(f);g=Oe(v,b),v.forEach(u),p.forEach(u),m.forEach(u),this.h()},h(){E(t,"icon",Di),E(t,"slot","start")},m(d,m){V(d,e,m),s(e,t),s(e,i),s(e,n),s(n,o),s(n,a),s(n,f),s(f,g)},p:Ce,d(d){d&&u(e)}}}function An(l){let e,t,i,n,o,r="Negocio",a,f,b=l[10].client_name+"",g;return{c(){e=h("ion-item"),t=h("ion-icon"),i=N(),n=h("ion-label"),o=h("p"),o.textContent=r,a=N(),f=h("h2"),g=ye(b),this.h()},l(d){e=_(d,"ION-ITEM",{});var m=k(e);t=_(m,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=C(m),n=_(m,"ION-LABEL",{});var p=k(n);o=_(p,"P",{"data-svelte-h":!0}),ie(o)!=="svelte-57b1dg"&&(o.textContent=r),a=C(p),f=_(p,"H2",{});var v=k(f);g=Oe(v,b),v.forEach(u),p.forEach(u),m.forEach(u),this.h()},h(){E(t,"icon",Di),E(t,"slot","start")},m(d,m){V(d,e,m),s(e,t),s(e,i),s(e,n),s(n,o),s(n,a),s(n,f),s(f,g)},p:Ce,d(d){d&&u(e)}}}function Pn(l){let e,t,i,n,o,r="Teléfono de Negocio",a,f,b=l[10].client_phone+"",g;return{c(){e=h("ion-item"),t=h("ion-icon"),i=N(),n=h("ion-label"),o=h("p"),o.textContent=r,a=N(),f=h("h2"),g=ye(b),this.h()},l(d){e=_(d,"ION-ITEM",{href:!0});var m=k(e);t=_(m,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=C(m),n=_(m,"ION-LABEL",{class:!0});var p=k(n);o=_(p,"P",{"data-svelte-h":!0}),ie(o)!=="svelte-1u5l7fz"&&(o.textContent=r),a=C(p),f=_(p,"H2",{});var v=k(f);g=Oe(v,b),v.forEach(u),p.forEach(u),m.forEach(u),this.h()},h(){E(t,"icon",Vi),E(t,"slot","start"),E(n,"class","ion-text-wrap"),E(e,"href","tel:"+l[10].client_phone)},m(d,m){V(d,e,m),s(e,t),s(e,i),s(e,n),s(n,o),s(n,a),s(n,f),s(f,g)},p:Ce,d(d){d&&u(e)}}}function Dn(l){let e,t,i,n,o,r="Domicilio Alternativo",a,f,b=l[10].line2+"",g,d,m;return{c(){e=h("ion-item"),t=h("ion-icon"),i=N(),n=h("ion-label"),o=h("p"),o.textContent=r,a=N(),f=h("h2"),g=ye(b),d=N(),m=h("ion-icon"),this.h()},l(p){e=_(p,"ION-ITEM",{href:!0});var v=k(e);t=_(v,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=C(v),n=_(v,"ION-LABEL",{class:!0});var y=k(n);o=_(y,"P",{"data-svelte-h":!0}),ie(o)!=="svelte-1ub9uzw"&&(o.textContent=r),a=C(y),f=_(y,"H2",{});var w=k(f);g=Oe(w,b),w.forEach(u),y.forEach(u),d=C(v),m=_(v,"ION-ICON",{icon:!0,slot:!0}),k(m).forEach(u),v.forEach(u),this.h()},h(){E(t,"icon",Bt),E(t,"slot","start"),E(n,"class","ion-text-wrap"),E(m,"icon",Ye),E(m,"slot","end"),E(e,"href","https://www.google.com/maps/searhc/?api=1&query="+l[10].line2)},m(p,v){V(p,e,v),s(e,t),s(e,i),s(e,n),s(n,o),s(n,a),s(n,f),s(f,g),s(e,d),s(e,m)},p:Ce,d(p){p&&u(e)}}}function Bn(l){let e,t,i,n,o,r="Domicilio",a,f,b=l[10].line1+"",g,d,m,p,v=l[10].line2&&l[10].line2.trim().length,y,w=v&&xn(l);return{c(){e=h("ion-item"),t=h("ion-icon"),i=N(),n=h("ion-label"),o=h("p"),o.textContent=r,a=N(),f=h("h2"),g=ye(b),d=N(),m=h("ion-icon"),p=N(),w&&w.c(),y=Be(),this.h()},l(H){e=_(H,"ION-ITEM",{href:!0});var P=k(e);t=_(P,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=C(P),n=_(P,"ION-LABEL",{class:!0});var B=k(n);o=_(B,"P",{"data-svelte-h":!0}),ie(o)!=="svelte-cbm7q1"&&(o.textContent=r),a=C(B),f=_(B,"H2",{});var U=k(f);g=Oe(U,b),U.forEach(u),B.forEach(u),d=C(P),m=_(P,"ION-ICON",{icon:!0,slot:!0}),k(m).forEach(u),P.forEach(u),p=C(H),w&&w.l(H),y=Be(),this.h()},h(){E(t,"icon",Bt),E(t,"slot","start"),E(n,"class","ion-text-wrap"),E(m,"icon",Ye),E(m,"slot","end"),E(e,"href","https://www.google.com/maps/search/?api=1&query="+l[10].line1)},m(H,P){V(H,e,P),s(e,t),s(e,i),s(e,n),s(n,o),s(n,a),s(n,f),s(f,g),s(e,d),s(e,m),V(H,p,P),w&&w.m(H,P),V(H,y,P)},p(H,P){v&&w.p(H,P)},d(H){H&&(u(e),u(p),u(y)),w&&w.d(H)}}}function xn(l){let e,t,i,n,o,r="Domicilio Alternativo",a,f,b=l[10].line2+"",g,d,m;return{c(){e=h("ion-item"),t=h("ion-icon"),i=N(),n=h("ion-label"),o=h("p"),o.textContent=r,a=N(),f=h("h2"),g=ye(b),d=N(),m=h("ion-icon"),this.h()},l(p){e=_(p,"ION-ITEM",{href:!0});var v=k(e);t=_(v,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=C(v),n=_(v,"ION-LABEL",{class:!0});var y=k(n);o=_(y,"P",{"data-svelte-h":!0}),ie(o)!=="svelte-1ub9uzw"&&(o.textContent=r),a=C(y),f=_(y,"H2",{});var w=k(f);g=Oe(w,b),w.forEach(u),y.forEach(u),d=C(v),m=_(v,"ION-ICON",{icon:!0,slot:!0}),k(m).forEach(u),v.forEach(u),this.h()},h(){E(t,"icon",Bt),E(t,"slot","start"),E(n,"class","ion-text-wrap"),E(m,"icon",Ye),E(m,"slot","end"),E(e,"href","https://www.google.com/maps/search/?api=1&query="+l[10].line2)},m(p,v){V(p,e,v),s(e,t),s(e,i),s(e,n),s(n,o),s(n,a),s(n,f),s(f,g),s(e,d),s(e,m)},p:Ce,d(p){p&&u(e)}}}function zn(l){let e,t,i,n,o,r="Contacto del Cliente",a,f,b,g,d=l[15]&&l[15]==="1"&&Un(l);return{c(){e=h("ion-item"),t=h("ion-icon"),i=N(),n=h("ion-label"),o=h("p"),o.textContent=r,a=N(),f=h("h2"),b=ye(l[17]),g=N(),d&&d.c(),this.h()},l(m){e=_(m,"ION-ITEM",{});var p=k(e);t=_(p,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=C(p),n=_(p,"ION-LABEL",{class:!0});var v=k(n);o=_(v,"P",{"data-svelte-h":!0}),ie(o)!=="svelte-1utsyb6"&&(o.textContent=r),a=C(v),f=_(v,"H2",{});var y=k(f);b=Oe(y,l[17]),y.forEach(u),v.forEach(u),g=C(p),d&&d.l(p),p.forEach(u),this.h()},h(){E(t,"icon",qi),E(t,"slot","start"),E(n,"class","ion-text-wrap")},m(m,p){V(m,e,p),s(e,t),s(e,i),s(e,n),s(n,o),s(n,a),s(n,f),s(f,b),s(e,g),d&&d.m(e,null)},p(m,p){m[15]&&m[15]==="1"&&d.p(m,p)},d(m){m&&u(e),d&&d.d()}}}function Un(l){let e,t=`<ion-icon icon="${Xi}" slot="start"></ion-icon>
                        Notificar Cliente`,i,n;return{c(){e=h("ion-button"),e.innerHTML=t,this.h()},l(o){e=_(o,"ION-BUTTON",{fill:!0,style:!0,"data-svelte-h":!0}),ie(e)!=="svelte-149vhpt"&&(e.innerHTML=t),this.h()},h(){E(e,"fill","outline"),c(e,"margin-left","16px")},m(o,r){V(o,e,r),i||(n=ue(e,"click",l[25]),i=!0)},p:Ce,d(o){o&&u(e),i=!1,n()}}}function Hn(l){let e,t,i,n,o,r="Notas de ubicación",a,f,b;return{c(){e=h("ion-item"),t=h("ion-icon"),i=N(),n=h("ion-label"),o=h("p"),o.textContent=r,a=N(),f=h("h2"),b=ye(l[18]),this.h()},l(g){e=_(g,"ION-ITEM",{});var d=k(e);t=_(d,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=C(d),n=_(d,"ION-LABEL",{class:!0});var m=k(n);o=_(m,"P",{"data-svelte-h":!0}),ie(o)!=="svelte-nhm2ft"&&(o.textContent=r),a=C(m),f=_(m,"H2",{});var p=k(f);b=Oe(p,l[18]),p.forEach(u),m.forEach(u),d.forEach(u),this.h()},h(){E(t,"icon",Si),E(t,"slot","start"),E(n,"class","ion-text-wrap")},m(g,d){V(g,e,d),s(e,t),s(e,i),s(e,n),s(n,o),s(n,a),s(n,f),s(f,b)},p:Ce,d(g){g&&u(e)}}}function Rn(l){let e,t,i,n,o,r="Horarios",a,f,b=l[10].schedule+"",g;return{c(){e=h("ion-item"),t=h("ion-icon"),i=N(),n=h("ion-label"),o=h("p"),o.textContent=r,a=N(),f=h("h2"),g=ye(b),this.h()},l(d){e=_(d,"ION-ITEM",{});var m=k(e);t=_(m,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=C(m),n=_(m,"ION-LABEL",{});var p=k(n);o=_(p,"P",{"data-svelte-h":!0}),ie(o)!=="svelte-11q7hm5"&&(o.textContent=r),a=C(p),f=_(p,"H2",{});var v=k(f);g=Oe(v,b),v.forEach(u),p.forEach(u),m.forEach(u),this.h()},h(){E(t,"icon",Wi),E(t,"slot","start")},m(d,m){V(d,e,m),s(e,t),s(e,i),s(e,n),s(n,o),s(n,a),s(n,f),s(f,g)},p:Ce,d(d){d&&u(e)}}}function Fn(l){let e,t,i,n,o,r="Notas del operador",a,f,b=l[10].driver_comments+"",g;return{c(){e=h("ion-item"),t=h("ion-icon"),i=N(),n=h("ion-label"),o=h("p"),o.textContent=r,a=N(),f=h("h2"),g=ye(b),this.h()},l(d){e=_(d,"ION-ITEM",{});var m=k(e);t=_(m,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=C(m),n=_(m,"ION-LABEL",{});var p=k(n);o=_(p,"P",{"data-svelte-h":!0}),ie(o)!=="svelte-1yk9qp4"&&(o.textContent=r),a=C(p),f=_(p,"H2",{});var v=k(f);g=Oe(v,b),v.forEach(u),p.forEach(u),m.forEach(u),this.h()},h(){E(t,"icon",Ai),E(t,"slot","start")},m(d,m){V(d,e,m),s(e,t),s(e,i),s(e,n),s(n,o),s(n,a),s(n,f),s(f,g)},p:Ce,d(d){d&&u(e)}}}function Vn(l){let e,t=l[10].logistic_comments!="<br>"&&qn(l);return{c(){t&&t.c(),e=Be()},l(i){t&&t.l(i),e=Be()},m(i,n){t&&t.m(i,n),V(i,e,n)},p(i,n){i[10].logistic_comments!="<br>"&&t.p(i,n)},d(i){i&&u(e),t&&t.d(i)}}}function qn(l){let e,t,i,n,o,r="Comentarios logísticos",a,f,b=l[10].logistic_comments+"",g;return{c(){e=h("ion-item"),t=h("ion-icon"),i=N(),n=h("ion-label"),o=h("p"),o.textContent=r,a=N(),f=h("h2"),g=ye(b),this.h()},l(d){e=_(d,"ION-ITEM",{});var m=k(e);t=_(m,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=C(m),n=_(m,"ION-LABEL",{class:!0});var p=k(n);o=_(p,"P",{"data-svelte-h":!0}),ie(o)!=="svelte-1iz85r6"&&(o.textContent=r),a=C(p),f=_(p,"H2",{});var v=k(f);g=Oe(v,b),v.forEach(u),p.forEach(u),m.forEach(u),this.h()},h(){E(t,"icon",Si),E(t,"slot","start"),E(n,"class","ion-text-wrap")},m(d,m){V(d,e,m),s(e,t),s(e,i),s(e,n),s(n,o),s(n,a),s(n,f),s(f,g)},p:Ce,d(d){d&&u(e)}}}function Wn(l){let e,t,i,n,o="<p>Etiqueta</p>",r,a,f=(l[10].tag?l[10].tag:"")+"",b;return{c(){e=h("ion-item"),t=h("ion-icon"),i=N(),n=h("ion-label"),n.innerHTML=o,r=N(),a=h("div"),b=ye(f),this.h()},l(g){e=_(g,"ION-ITEM",{});var d=k(e);t=_(d,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=C(d),n=_(d,"ION-LABEL",{class:!0,"data-svelte-h":!0}),ie(n)!=="svelte-50rr6d"&&(n.innerHTML=o),r=C(d),a=_(d,"DIV",{class:!0,style:!0});var m=k(a);b=Oe(m,f),m.forEach(u),d.forEach(u),this.h()},h(){E(t,"icon",ji),E(t,"slot","start"),E(n,"class","ion-text-wrap"),S(a,"class","stop-tag"),c(a,"background-color",l[19]),c(a,"border","1px solid "+l[20]),c(a,"color",l[10].tag_color),c(a,"font-size","14px"),c(a,"text-align","center"),c(a,"align-content","center"),c(a,"border-radius","20px"),c(a,"white-space","normal"),c(a,"padding","4px 8px"),c(a,"width","auto",1),c(a,"display","inline-block")},m(g,d){V(g,e,d),s(e,t),s(e,i),s(e,n),s(e,r),s(e,a),s(a,b)},p:Ce,d(g){g&&u(e)}}}function jn(l){let e,t,i,n,o="<p>Estado de entrega</p>",r,a,f,b="Entregado",g,d,m="No Entregado",p,v,y="Entrega Parcial",w,H,P,B,U,W="<p>Notas</p>",R,L,z,x,I=!l[13]&&Gn(l);return{c(){e=h("ion-item"),t=h("ion-icon"),i=N(),n=h("ion-label"),n.innerHTML=o,r=N(),a=h("ion-select"),f=h("ion-select-option"),f.textContent=b,g=N(),d=h("ion-select-option"),d.textContent=m,p=N(),v=h("ion-select-option"),v.textContent=y,w=N(),H=h("ion-item"),P=h("ion-icon"),B=N(),U=h("ion-label"),U.innerHTML=W,R=N(),L=h("ion-textarea"),z=N(),I&&I.c(),x=Be(),this.h()},l(T){e=_(T,"ION-ITEM",{});var O=k(e);t=_(O,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=C(O),n=_(O,"ION-LABEL",{class:!0,"data-svelte-h":!0}),ie(n)!=="svelte-1ql9csq"&&(n.innerHTML=o),r=C(O),a=_(O,"ION-SELECT",{value:!0,disabled:!0});var D=k(a);f=_(D,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),ie(f)!=="svelte-1nhq8vd"&&(f.textContent=b),g=C(D),d=_(D,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),ie(d)!=="svelte-dhd4r3"&&(d.textContent=m),p=C(D),v=_(D,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),ie(v)!=="svelte-17taxwo"&&(v.textContent=y),D.forEach(u),O.forEach(u),w=C(T),H=_(T,"ION-ITEM",{});var Z=k(H);P=_(Z,"ION-ICON",{icon:!0,slot:!0}),k(P).forEach(u),B=C(Z),U=_(Z,"ION-LABEL",{class:!0,"data-svelte-h":!0}),ie(U)!=="svelte-c9yniu"&&(U.innerHTML=W),R=C(Z),L=_(Z,"ION-TEXTAREA",{placeholder:!0,readonly:!0,disabled:!0}),k(L).forEach(u),Z.forEach(u),z=C(T),I&&I.l(T),x=Be(),this.h()},h(){E(t,"icon",Gi),E(t,"slot","start"),E(n,"class","ion-text-wrap"),E(f,"value","delivered"),E(d,"value","notdelivered"),E(v,"value","partialdeliver"),E(a,"value",l[14]?l[14]:"delivered"),E(a,"disabled",l[13]),E(P,"icon",gt),E(P,"slot","start"),E(U,"class","ion-text-wrap"),E(L,"placeholder","Escribe aquí..."),E(L,"readonly",l[13]),E(L,"disabled",l[13])},m(T,O){V(T,e,O),s(e,t),s(e,i),s(e,n),s(e,r),s(e,a),s(a,f),s(a,g),s(a,d),s(a,p),s(a,v),l[33](a),V(T,w,O),V(T,H,O),s(H,P),s(H,B),s(H,U),s(H,R),s(H,L),l[34](L),V(T,z,O),I&&I.m(T,O),V(T,x,O)},p(T,O){T[13]||I.p(T,O)},d(T){T&&(u(e),u(w),u(H),u(z),u(x)),l[33](null),l[34](null),I&&I.d(T)}}}function Gn(l){let e,t,i=l[5]===!0&&jt(l),n=(l[6]===!0||l[6]===!1&&l[5]===!1)&&Gt(l);return{c(){e=h("section"),i&&i.c(),t=N(),n&&n.c(),this.h()},l(o){e=_(o,"SECTION",{style:!0});var r=k(e);i&&i.l(r),t=C(r),n&&n.l(r),r.forEach(u),this.h()},h(){c(e,"display","flex"),c(e,"gap","8px"),c(e,"padding","16px 16px 6px")},m(o,r){V(o,e,r),i&&i.m(e,null),s(e,t),n&&n.m(e,null)},p(o,r){o[5]===!0?i?i.p(o,r):(i=jt(o),i.c(),i.m(e,t)):i&&(i.d(1),i=null),o[6]===!0||o[6]===!1&&o[5]===!1?n?n.p(o,r):(n=Gt(o),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(o){o&&u(e),i&&i.d(),n&&n.d()}}}function jt(l){let e,t=`<ion-icon icon="${Ji}" slot="start"></ion-icon>
                        Ingreso`,i,n;return{c(){e=h("ion-button"),e.innerHTML=t,this.h()},l(o){e=_(o,"ION-BUTTON",{id:!0,style:!0,"data-svelte-h":!0}),ie(e)!=="svelte-izs0s1"&&(e.innerHTML=t),this.h()},h(){E(e,"id","checkInBtn"),c(e,"flex","1")},m(o,r){V(o,e,r),i||(n=ue(e,"click",l[26]),i=!0)},p:Ce,d(o){o&&u(e),i=!1,n()}}}function Gt(l){let e,t,i,n,o,r;return{c(){e=h("ion-button"),t=h("ion-icon"),i=ye(`\r
                        Salida`),this.h()},l(a){e=_(a,"ION-BUTTON",{id:!0,style:!0,disabled:!0});var f=k(e);t=_(f,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=Oe(f,`\r
                        Salida`),f.forEach(u),this.h()},h(){E(t,"icon",Ki),E(t,"slot","start"),E(e,"id","checkOutBtn"),c(e,"flex","1"),E(e,"disabled",n=l[6]===!1)},m(a,f){V(a,e,f),s(e,t),s(e,i),o||(r=ue(e,"click",l[27]),o=!0)},p(a,f){f[0]&64&&n!==(n=a[6]===!1)&&E(e,"disabled",n)},d(a){a&&u(e),o=!1,r()}}}function Kn(l){let e,t,i,n,o,r,a,f,b,g=l[16]==="1"&&Xn(l);return{c(){e=h("section"),t=h("ion-button"),i=h("label"),n=h("ion-icon"),o=ye(`\r
        Evidencia\r
        `),r=h("input"),a=N(),g&&g.c(),this.h()},l(d){e=_(d,"SECTION",{style:!0});var m=k(e);t=_(m,"ION-BUTTON",{fill:!0,class:!0,style:!0,disabled:!0});var p=k(t);i=_(p,"LABEL",{for:!0,style:!0});var v=k(i);n=_(v,"ION-ICON",{icon:!0,slot:!0,style:!0}),k(n).forEach(u),o=Oe(v,`\r
        Evidencia\r
        `),r=_(v,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),v.forEach(u),p.forEach(u),a=C(m),g&&g.l(m),m.forEach(u),this.h()},h(){E(n,"icon",Dt),E(n,"slot","start"),c(n,"vertical-align","middle"),c(r,"display","none"),S(r,"id","eventEvidence"),S(r,"name","fileToUpload"),S(r,"type","file"),r.multiple=!0,S(r,"accept","image/*"),S(r,"capture","environment"),r.disabled=l[21](),S(i,"for","eventEvidence"),c(i,"width","100%"),c(i,"height","100%"),c(i,"pointer-events",l[21]()?"none":"auto"),E(t,"fill","outline"),E(t,"class","loadEvidence"),c(t,"flex","1"),c(t,"display","flex"),c(t,"align-items","center"),c(t,"gap","8px"),E(t,"disabled",l[21]()),c(e,"display","flex"),c(e,"gap","8px"),c(e,"padding","0px 16px")},m(d,m){V(d,e,m),s(e,t),s(t,i),s(i,n),s(i,o),s(i,r),s(e,a),g&&g.m(e,null),f||(b=[ue(r,"change",l[22]),ue(r,"click",l[23])],f=!0)},p(d,m){d[16]==="1"&&g.p(d,m)},d(d){d&&u(e),g&&g.d(),f=!1,He(b)}}}function Xn(l){let e,t,i,n,o;return{c(){e=h("ion-button"),t=h("ion-icon"),i=ye(`\r
        Firmar`),this.h()},l(r){e=_(r,"ION-BUTTON",{fill:!0,style:!0,disabled:!0});var a=k(e);t=_(a,"ION-ICON",{icon:!0,slot:!0}),k(t).forEach(u),i=Oe(a,`\r
        Firmar`),a.forEach(u),this.h()},h(){E(t,"icon",gt),E(t,"slot","start"),E(e,"fill","outline"),c(e,"flex","1"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"gap","8px"),E(e,"disabled",l[21]())},m(r,a){V(r,e,a),s(e,t),s(e,i),n||(o=ue(e,"click",l[31]),n=!0)},p:Ce,d(r){r&&u(e),n=!1,o()}}}function Kt(l){let e,t,i=qe(l[3]),n=[];for(let o=0;o<i.length;o+=1)n[o]=Xt(Wt(l,i,o));return{c(){e=h("section"),t=h("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=_(o,"SECTION",{});var r=k(e);t=_(r,"DIV",{class:!0,style:!0});var a=k(t);for(let f=0;f<n.length;f+=1)n[f].l(a);a.forEach(u),r.forEach(u),this.h()},h(){S(t,"class","image-grid"),c(t,"display","grid"),c(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),c(t,"gap","10px"),c(t,"padding","0px 10px")},m(o,r){V(o,e,r),s(e,t);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null)},p(o,r){if(r[0]&1342186504){i=qe(o[3]);let a;for(a=0;a<i.length;a+=1){const f=Wt(o,i,a);n[a]?n[a].p(f,r):(n[a]=Xt(f),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=i.length}},d(o){o&&u(e),Et(n,o)}}}function Jn(l){let e,t=`<ion-icon icon="${zt}"></ion-icon>`,i,n;function o(){return l[36](l[62])}return{c(){e=h("button"),e.innerHTML=t,this.h()},l(r){e=_(r,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),ie(e)!=="svelte-mf38w5"&&(e.innerHTML=t),this.h()},h(){S(e,"class","remove-button"),c(e,"position","absolute"),c(e,"top","5px"),c(e,"right","5px"),c(e,"border","none"),c(e,"cursor","pointer"),c(e,"font-size","18px"),c(e,"background","white"),c(e,"border-radius","50%"),c(e,"padding","3px 4px 0px"),c(e,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),c(e,"color","#0000008f")},m(r,a){V(r,e,a),i||(n=ue(e,"click",o),i=!0)},p(r,a){l=r},d(r){r&&u(e),i=!1,n()}}}function Xt(l){let e,t,i,n,o,r,a;function f(){return l[35](l[60])}let b=l[10].status!=="completed"&&!l[13]&&Jn(l);return{c(){e=h("div"),t=h("ion-img"),n=N(),b&&b.c(),o=N(),this.h()},l(g){e=_(g,"DIV",{class:!0,style:!0});var d=k(e);t=_(d,"ION-IMG",{src:!0,alt:!0,style:!0}),k(t).forEach(u),n=C(d),b&&b.l(d),o=C(d),d.forEach(u),this.h()},h(){Je(t.src,i=l[60])||E(t,"src",i),E(t,"alt","Evidencia fotográfica"),c(t,"width","100%"),c(t,"height","100px"),c(t,"object-fit","cover"),c(t,"cursor","pointer"),c(t,"border","1px solid #ccc"),c(t,"border-radius","4px"),c(t,"margin-top","16px"),S(e,"class","image-container"),c(e,"position","relative")},m(g,d){V(g,e,d),s(e,t),s(e,n),b&&b.m(e,null),s(e,o),r||(a=ue(t,"click",f),r=!0)},p(g,d){l=g,d[0]&8&&!Je(t.src,i=l[60])&&E(t,"src",i),l[10].status!=="completed"&&!l[13]&&b.p(l,d)},d(g){g&&u(e),b&&b.d(),r=!1,a()}}}function Jt(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(i){e=_(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1aosxw0"&&(e.innerHTML=t),this.h()},h(){S(e,"class","overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(i,n){V(i,e,n)},d(i){i&&u(e)}}}function Yt(l){let e,t,i,n,o,r,a=`<ion-icon icon="${xt}"></ion-icon>`,f,b;return{c(){e=h("div"),t=h("div"),i=h("ion-img"),o=N(),r=h("button"),r.innerHTML=a,this.h()},l(g){e=_(g,"DIV",{class:!0,style:!0});var d=k(e);t=_(d,"DIV",{class:!0,style:!0});var m=k(t);i=_(m,"ION-IMG",{src:!0,alt:!0,style:!0}),k(i).forEach(u),o=C(m),r=_(m,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),ie(r)!=="svelte-183t4ti"&&(r.innerHTML=a),m.forEach(u),d.forEach(u),this.h()},h(){Je(i.src,n=l[8])||E(i,"src",n),E(i,"alt","Evidencia fotográfica"),c(i,"width","100%"),c(i,"height","auto"),S(r,"class","close-button"),c(r,"position","absolute"),c(r,"top","5px"),c(r,"right","5px"),c(r,"background","white"),c(r,"color","#444444d1"),c(r,"border","none"),c(r,"cursor","pointer"),c(r,"padding","2px 2px 0px 6px"),c(r,"border-radius","50%"),c(r,"font-size","20px"),S(t,"class","modal-content"),c(t,"position","relative"),c(t,"background","white"),c(t,"padding","20px"),c(t,"border-radius","8px"),c(t,"max-width","90vw"),c(t,"max-height","90vh"),c(t,"overflow","auto"),S(e,"class","modal-overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.8)"),c(e,"display","flex"),c(e,"justify-content","center"),c(e,"align-items","center"),c(e,"z-index","1000")},m(g,d){V(g,e,d),s(e,t),s(t,i),s(t,o),s(t,r),f||(b=[ue(r,"click",l[29]),ue(t,"click",Tt(l[32])),ue(e,"click",l[29])],f=!0)},p(g,d){d[0]&256&&!Je(i.src,n=g[8])&&E(i,"src",n)},d(g){g&&u(e),f=!1,He(b)}}}function Yn(l){let e,t,i,n,o="Cerrar",r,a,f=l[10].title+"",b,g,d,m,p,v,y=l[10].client_phone&&l[10].client_phone.trim().length,w,H,P,B,U=l[10].schedule&&l[10].schedule.trim().length,W,R,L=l[10].logistic_comments&&l[10].logistic_comments.trim().length,z,x,I,T,O,D,Z,ne,oe,re=(!l[11]&&!l[12]||l[11]&&l[12])&&Mn(l);function me(j,_e){return j[10].client_name!=null?An:Sn}let se=me(l)(l),le=y&&Pn(l);function be(j,_e){if(j[10].line1&&j[10].line1.trim().length)return Bn;if(j[10].line2&&j[10].line2.trim().length)return Dn}let de=be(l),ee=de&&de(l),Ie=l[17]&&zn(l),ke=l[18]&&l[18]!=="<br>"&&Hn(l),he=U&&Rn(l),pe=l[10].driver_comments&&Fn(l),Te=L&&Vn(l),Ee=l[10].tag&&l[10].tag_color&&Wn(l),ve=!l[12]&&jn(l),J=(l[11]&&l[12]||!l[11]&&!l[12])&&Kn(l),X=l[2]&&Kt(l),A=l[4]&&Jt(),$=l[7]&&Yt(l);return{c(){e=h("ion-header"),t=h("ion-toolbar"),i=h("ion-buttons"),n=h("ion-button"),n.textContent=o,r=N(),a=h("ion-title"),b=ye(f),g=N(),re&&re.c(),d=N(),m=h("ion-content"),p=h("ion-list"),se.c(),v=N(),le&&le.c(),w=N(),ee&&ee.c(),H=N(),Ie&&Ie.c(),P=N(),ke&&ke.c(),B=N(),he&&he.c(),W=N(),pe&&pe.c(),R=N(),Te&&Te.c(),z=N(),Ee&&Ee.c(),x=N(),ve&&ve.c(),I=N(),J&&J.c(),T=N(),X&&X.c(),O=N(),A&&A.c(),D=N(),$&&$.c(),Z=Be(),this.h()},l(j){e=_(j,"ION-HEADER",{translucent:!0});var _e=k(e);t=_(_e,"ION-TOOLBAR",{});var Se=k(t);i=_(Se,"ION-BUTTONS",{slot:!0});var Me=k(i);n=_(Me,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),ie(n)!=="svelte-2ks32x"&&(n.textContent=o),Me.forEach(u),r=C(Se),a=_(Se,"ION-TITLE",{style:!0,title:!0});var Ae=k(a);b=Oe(Ae,f),Ae.forEach(u),g=C(Se),re&&re.l(Se),Se.forEach(u),_e.forEach(u),d=C(j),m=_(j,"ION-CONTENT",{fullscreen:!0});var Le=k(m);p=_(Le,"ION-LIST",{});var q=k(p);se.l(q),v=C(q),le&&le.l(q),w=C(q),ee&&ee.l(q),H=C(q),Ie&&Ie.l(q),P=C(q),ke&&ke.l(q),B=C(q),he&&he.l(q),W=C(q),pe&&pe.l(q),R=C(q),Te&&Te.l(q),z=C(q),Ee&&Ee.l(q),x=C(q),ve&&ve.l(q),I=C(q),J&&J.l(q),T=C(q),X&&X.l(q),q.forEach(u),Le.forEach(u),O=C(j),A&&A.l(j),D=C(j),$&&$.l(j),Z=Be(),this.h()},h(){E(n,"color","medium"),E(i,"slot","start"),c(a,"text-align","center"),E(a,"title",l[10].title),E(e,"translucent",""),E(m,"fullscreen","")},m(j,_e){V(j,e,_e),s(e,t),s(t,i),s(i,n),s(t,r),s(t,a),s(a,b),s(t,g),re&&re.m(t,null),V(j,d,_e),V(j,m,_e),s(m,p),se.m(p,null),s(p,v),le&&le.m(p,null),s(p,w),ee&&ee.m(p,null),s(p,H),Ie&&Ie.m(p,null),s(p,P),ke&&ke.m(p,null),s(p,B),he&&he.m(p,null),s(p,W),pe&&pe.m(p,null),s(p,R),Te&&Te.m(p,null),s(p,z),Ee&&Ee.m(p,null),s(p,x),ve&&ve.m(p,null),s(p,I),J&&J.m(p,null),s(p,T),X&&X.m(p,null),V(j,O,_e),A&&A.m(j,_e),V(j,D,_e),$&&$.m(j,_e),V(j,Z,_e),ne||(oe=ue(n,"click",l[0]),ne=!0)},p(j,_e){(!j[11]&&!j[12]||j[11]&&j[12])&&re.p(j,_e),se.p(j,_e),y&&le.p(j,_e),ee&&ee.p(j,_e),j[17]&&Ie.p(j,_e),j[18]&&j[18]!=="<br>"&&ke.p(j,_e),U&&he.p(j,_e),j[10].driver_comments&&pe.p(j,_e),L&&Te.p(j,_e),j[10].tag&&j[10].tag_color&&Ee.p(j,_e),j[12]||ve.p(j,_e),(j[11]&&j[12]||!j[11]&&!j[12])&&J.p(j,_e),j[2]?X?X.p(j,_e):(X=Kt(j),X.c(),X.m(p,null)):X&&(X.d(1),X=null),j[4]?A||(A=Jt(),A.c(),A.m(D.parentNode,D)):A&&(A.d(1),A=null),j[7]?$?$.p(j,_e):($=Yt(j),$.c(),$.m(Z.parentNode,Z)):$&&($.d(1),$=null)},i:Ce,o:Ce,d(j){j&&(u(e),u(d),u(m),u(O),u(D),u(Z)),re&&re.d(),se.d(),le&&le.d(),ee&&ee.d(),Ie&&Ie.d(),ke&&ke.d(),he&&he.d(),pe&&pe.d(),Te&&Te.d(),Ee&&Ee.d(),ve&&ve.d(),J&&J.d(),X&&X.d(),A&&A.d(j),$&&$.d(j),ne=!1,oe()}}}function Qn(l){const[e,t]=l.split(","),i=e.match(/:(.*?);/)[1],n=atob(t),o=n.length,r=new Uint8Array(o);for(let a=0;a<o;a++)r[a]=n.charCodeAt(a);return new Blob([r],{type:i})}function Zn(l,e,t){let i=mt,n=document.querySelector("ion-modal"),o=n.componentProps.delivery,r=n.componentProps.isLast||!1,a=n.componentProps.flag||!1,f=!!n.componentProps.readOnly,b=o.driver_comments?o.driver_comments:"",g=o.deliver_status?o.deliver_status:"",d=o.img?o.img:"",m=o.img_id?o.img_id:"",p=d?it(d):new Array,v=m?it(m):new Array,y={latitude:null,longitude:null},w=o.stopsApproval,H=o.smsActive,P=o.signatureActive,B=!1,U=!0,W=!1,R=o.phone_notification,L=o.comments_ext,z=!1,x="",I=new Object,T="",O=o.tag_color?Ke(o.tag_color,.2):"",D=o.tag_color?Ke(o.tag_color,.3):"",Z=!1;const ne=()=>f||o.status=="completed";ct(()=>{I=JSON.parse(localStorage.getItem("userSession")),oe()});function oe(){o.date_service?o.date_service&&!o.date_completed&&!o.service_time?(t(5,U=!1),t(6,W=!0)):o.date_service&&o.date_completed&&o.service_time&&(t(5,U=!1),t(6,W=!1)):(t(5,U=!0),t(6,W=!1))}const re=async(F,K)=>{await(await Ze.create({header:F||"Error",message:K||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},me=async(F="",K="",Y="",Q=function(G={}){},ge={})=>{await(await Ze.create({header:F||"Error",message:K||"Vuelva a intentar",buttons:[{text:"No",role:"cancel",handler:()=>{}},{text:"Sí",handler:()=>{t(4,B=!0),Xe(Y,function(ae={}){t(4,B=!1),Q(ae)},ge)}}]})).present()};async function M(F,K){await(await Ze.create({header:"¿Cómo quieres notificar?",message:`Elige el medio para enviar mensaje a ${F.title} (${K})`,buttons:[{text:"SMS",handler:()=>pe("sms",F,K)},{text:"WhatsApp",handler:()=>pe("whatsapp",F,K)}]})).present()}const se=async F=>{if(f){re("Solo lectura","Completa los requisitos para editar.");return}if(p.length>=5){re("Límite de evidencias","Solo se permite subir 5 fotos por parada");return}if(a&&r&&p.length>=1){re("Límite de evidencias","Para el final de la ruta solo se permite subir 1 foto");return}const Y=F.target.files[0];if(Y)try{t(4,B=!0);const Q=await de(Y);Q&&Xe(`${i}api/admin/manager/upload_img_driver.php`,function(ge){ge.success?(t(2,d=d?`${d},${ge.img}`:ge.img),m=m?`${m},${ge.img_id}`:ge.img_id,t(3,p=it(d)),v=it(m)):re("Carga fallida","Actualiza la página y vuelve a intentar. Si el problema persiste, contacta a soporte.")},{fileToUpload:Q})}catch(Q){console.error("Compression error:",Q)}finally{t(4,B=!1)}};function le(F){var Y;if(f){(Y=F==null?void 0:F.preventDefault)==null||Y.call(F),re("Solo lectura","Completa los requisitos para editar.");return}var K=o.service_time;!K&&U&&!r&&!a&&(F.preventDefault(),re("Registrar Ingreso","Antes de subir la evidencia registra el ingreso a la actual parada."))}function be(){if(f){re("Solo lectura","Completa los requisitos para editar.");return}var F=a?o.date_completed:!1;if(!F&&!U&&W&&!r&&!a){var K=new Object;K.id_event=o.id_event,K.type="checkout",K.id_user_over=I.id_user,K.token=I.token,me("Registrar Salida","¿Completaste tu entrega?",i+"api/admin/route/record_check_date.php",function(Y){Y.minutes&&re("Tiempo por parada","Completaste la parada en "+Y.minutes+" minutos.")},K)}}const de=async F=>new Promise(K=>{const Y=new Image;Y.src=URL.createObjectURL(F),Y.onload=()=>{const Q=document.createElement("canvas"),ge=Q.getContext("2d"),G=800,ae=600;let te=Y.width,fe=Y.height;te>G&&(fe*=G/te,te=G),fe>ae&&(te*=ae/fe,fe=ae),Q.width=te,Q.height=fe,ge.drawImage(Y,0,0,te,fe),Q.toBlob(we=>{K(we),URL.revokeObjectURL(Y.src),ge.clearRect(0,0,Q.width,Q.height)},"image/jpeg",.7)}});async function ee(){try{if(n!=null&&n.isConnected){await n.dismiss({data:Date.now()});return}const F=await ot.getTop();F&&await F.dismiss({data:Date.now()})}catch{console.warn("Close Modal Safe: modal ya cerrado o inexistente")}}const Ie=async()=>{if(f){re("Solo lectura","Completa los requisitos para confirmar.");return}if(!B){t(4,B=!0);try{if(t(2,d=p.join(",")),m=v.join(","),be(),await he())if(T.value=="delivered"||T.value!=="delivered"&&(b.value||o.driver_comments)||a&&r){const K={id_route:o.id_route,...!a&&!r&&{id_event:o.id_event},...!a&&!r&&{comments:b.value},...!a&&!r&&{deliver_status:T.value},img:d,img_id:m,lat:y.latitude,lon:y.longitude,...w==="0"&&{approve:"0"},...r&&{isLast:!0},...a&&r&&{destiny:!0},id_user_over:I.id_user,token:I.token};K.img&&K.img_id||d?Xe(`${i}api/admin/evidence/send_evidence.php`,function(Y){if(Y.success==!0){ee();const Q=K.id_route;r&&(ke("","",Q,r),w=="0"&&j(Q,"completed"))}else t(4,B=!1),re("Carga fallida","Actualiza la página y vuelve a intentar cargar la información!")},K):re("Información incompleta","Cargar evidencia fotográfica faltante para completar parada.")}else re("Motivo de status de entrega","Favor de ingresar en notas el motivo por el que la entrega no fue entregada correctamente");else re("Ubicación faltante","Asegúrate darle permisos a Rutaflow para acceder a tu ubicación")}catch(F){console.error("Error fetching data:",F)}finally{t(4,B=!1)}}},ke=(F,K,Y,Q)=>{n.componentProps.routeId=Y,n.componentProps.driverId=o.id_driver,Qe("modal-km-gas",xi,{checklist:F,driverId:K,routeId:Y,isLast:Q}).then(ge=>{})},he=async()=>navigator.geolocation?new Promise((F,K)=>{navigator.geolocation.getCurrentPosition(Y=>{y.latitude=Y.coords.latitude,y.longitude=Y.coords.longitude,F(!0)},Y=>{console.error("Error getting location:",Y),F(!1)})}):(console.error("Geolocation is not supported by your browser"),!1);async function pe(F,K,Y){const Q={};if(F==="sms"){Q.id_user_over=I.id_user,Q.token=I.token,Q.client_phone=Y,Q.client_name=K.title,Q.delivery_phone=K.client_phone,Q.enterprise_name=K.enterprise_name,Xe(`${i}api/admin/message_central/send_sms.php`,Te("SMS",K.title,Y),Q);return}try{var ge=K.client_phone?`
Si deseas contactarnos, entra al siguiente link: https://wa.me/${K.client_phone}.`:".";Q.text=`*Rutaflow*

El repartidor va en camino a tu domicilio ${K.title}${ge}

Enviado por _${K.enterprise_name}_`,Q.phone=Y;const ae=await(await fetch(`${on}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`${ln}`},body:JSON.stringify(Q)})).json();Te("WHATSAPP",K.title,Y)(ae)}catch(G){console.error(G),re("WHATSAPP no enviado","Ocurrió un error de red.")}}function Te(F,K,Y){return Q=>{Q.success?re(`${F} enviado`,`Se envió correctamente un ${F} a ${K} con número ${Y}.`):re(`${F} no enviado`,`Hubo un error al enviar ${F} a ${K} (${Y}).`)}}function Ee(F){F.stopPropagation(),M(o,R)}function ve(){if(f){re("Solo lectura","Completa los requisitos para editar.");return}t(5,U=!1),t(6,W=!0),X(o.id_event,"checkin")}function J(){if(f){re("Solo lectura","Completa los requisitos para editar.");return}t(6,W=!1),t(5,U=!1),X(o.id_event,"checkout")}async function X(F,K){if(!f&&K){let Y=new Object;Y.type=K,Y.id_event=F,Y.id_user_over=I.id_user,Y.token=I.token;try{Xe(`${i}api/admin/route/record_check_date.php`,function(Q){Q.minutes&&re("Tiempo por parada","Completaste la parada en "+Q.minutes+" minutos.")},Y)}catch(Q){console.error("Error during file upload:",Q)}finally{}}}const A=F=>{t(8,x=F),t(7,z=!0)},$=()=>{t(7,z=!1),t(8,x="")};function j(F,K){let Y=new Object;return Y.id_route=F,Y.status=K,Y.id_user_over=I.id_user,Y.token=I.token,Xe(`${i}api/admin/route/change_status.php`,function(){},Y),""}function _e(F=0){if(!f){var K=Pi(F,p,v,d);t(3,p=K.files),v=K.img_ids,t(2,d=K.selectedImages)}}async function Se(){var Y;if(f){re("Solo lectura","Completa los requisitos para firmar.");return}const F=await Qe("modal-signature-plugin",Ln,{},{backdropDismiss:!1,swipeToClose:!1,showBackdrop:!0,canDismiss:(Q,ge)=>ge==="cancel"||ge==="confirm"}),K=((Y=F==null?void 0:F.data)==null?void 0:Y.dataUrl)??(F==null?void 0:F.dataUrl)??F;if(K)try{Z=!0;const Q=Qn(K);Xe(`${i}api/admin/manager/upload_img_driver.php`,function(ge){ge.success?(t(2,d=d?`${d},${ge.img}`:ge.img),m=m?`${m},${ge.img_id}`:ge.img_id,t(3,p=it(d)),v=it(m)):re("Carga fallida","Actualiza la página y vuelve a intentar. Si el problema persiste, contacta a soporte.")},{fileToUpload:Q})}catch(Q){console.error(Q)}finally{Z=!1}}function Me(F){Lt.call(this,l,F)}function Ae(F){xe[F?"unshift":"push"](()=>{T=F,t(9,T)})}function Le(F){xe[F?"unshift":"push"](()=>{b=F,t(1,b)})}return[ee,b,d,p,B,U,W,z,x,T,o,r,a,f,g,H,P,R,L,O,D,ne,se,le,Ie,Ee,ve,J,A,$,_e,Se,Me,Ae,Le,F=>A(F),F=>_e(F)]}class Qt extends et{constructor(e){super(),tt(this,e,Zn,Yn,$e,{closeModal:0},null,[-1,-1,-1])}get closeModal(){return this.$$.ctx[0]}}function Zt(l,e,t){const i=l.slice();return i[32]=e[t],i[34]=t,i}function $t(l){let e,t,i=qe(l[1]),n=[];for(let o=0;o<i.length;o+=1)n[o]=ei(Zt(l,i,o));return{c(){e=h("section"),t=h("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=_(o,"SECTION",{});var r=k(e);t=_(r,"DIV",{class:!0,style:!0});var a=k(t);for(let f=0;f<n.length;f+=1)n[f].l(a);a.forEach(u),r.forEach(u),this.h()},h(){S(t,"class","image-grid"),c(t,"display","grid"),c(t,"grid-template-columns","repeat(auto-fill, minmax(100px, 1fr))"),c(t,"gap","10px"),c(t,"padding","0px 10px")},m(o,r){V(o,e,r),s(e,t);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null)},p(o,r){if(r[0]&32770){i=qe(o[1]);let a;for(a=0;a<i.length;a+=1){const f=Zt(o,i,a);n[a]?n[a].p(f,r):(n[a]=ei(f),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=i.length}},d(o){o&&u(e),Et(n,o)}}}function ei(l){let e,t,i,n,o,r=`<ion-icon icon="${zt}"></ion-icon>`,a,f,b;function g(){return l[22](l[32])}function d(){return l[23](l[34])}return{c(){e=h("div"),t=h("ion-img"),n=N(),o=h("button"),o.innerHTML=r,a=N(),this.h()},l(m){e=_(m,"DIV",{class:!0,style:!0});var p=k(e);t=_(p,"ION-IMG",{src:!0,alt:!0,style:!0}),k(t).forEach(u),n=C(p),o=_(p,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),ie(o)!=="svelte-zguiov"&&(o.innerHTML=r),a=C(p),p.forEach(u),this.h()},h(){Je(t.src,i=l[32])||E(t,"src",i),E(t,"alt","Evidencia fotográfica"),c(t,"width","100%"),c(t,"height","100px"),c(t,"object-fit","cover"),c(t,"cursor","pointer"),c(t,"border","1px solid #ccc"),c(t,"border-radius","4px"),c(t,"margin-top","16px"),S(o,"class","remove-button"),c(o,"position","absolute"),c(o,"top","5px"),c(o,"right","5px"),c(o,"border","none"),c(o,"cursor","pointer"),c(o,"font-size","18px"),c(o,"background","white"),c(o,"border-radius","50%"),c(o,"padding","3px 4px 0px"),c(o,"box-shadow","2px 2px 6px rgba(0, 0, 0, 0.3)"),c(o,"color","#0000008f"),S(e,"class","image-container"),c(e,"position","relative")},m(m,p){V(m,e,p),s(e,t),s(e,n),s(e,o),s(e,a),f||(b=[ue(t,"click",g),ue(o,"click",d)],f=!0)},p(m,p){l=m,p[0]&2&&!Je(t.src,i=l[32])&&E(t,"src",i)},d(m){m&&u(e),f=!1,He(b)}}}function ti(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(i){e=_(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),ie(e)!=="svelte-h8s7r2"&&(e.innerHTML=t),this.h()},h(){S(e,"class","overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(i,n){V(i,e,n)},d(i){i&&u(e)}}}function ii(l){let e,t,i,n,o,r,a=`<ion-icon icon="${xt}"></ion-icon>`,f,b;return{c(){e=h("div"),t=h("div"),i=h("ion-img"),o=N(),r=h("button"),r.innerHTML=a,this.h()},l(g){e=_(g,"DIV",{class:!0,style:!0});var d=k(e);t=_(d,"DIV",{class:!0,style:!0});var m=k(t);i=_(m,"ION-IMG",{src:!0,alt:!0,style:!0}),k(i).forEach(u),o=C(m),r=_(m,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),ie(r)!=="svelte-g0qr0o"&&(r.innerHTML=a),m.forEach(u),d.forEach(u),this.h()},h(){Je(i.src,n=l[8])||E(i,"src",n),E(i,"alt","Evidencia fotográfica"),c(i,"width","100%"),c(i,"height","auto"),S(r,"class","close-button"),c(r,"position","absolute"),c(r,"top","5px"),c(r,"right","5px"),c(r,"background","white"),c(r,"color","#444444d1"),c(r,"border","none"),c(r,"cursor","pointer"),c(r,"padding","2px 2px 0px 6px"),c(r,"border-radius","50%"),c(r,"font-size","20px"),S(t,"class","modal-content"),c(t,"position","relative"),c(t,"background","white"),c(t,"padding","20px"),c(t,"border-radius","8px"),c(t,"max-width","90vw"),c(t,"max-height","90vh"),c(t,"overflow","auto"),S(e,"class","modal-overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.8)"),c(e,"display","flex"),c(e,"justify-content","center"),c(e,"align-items","center"),c(e,"z-index","1000")},m(g,d){V(g,e,d),s(e,t),s(t,i),s(t,o),s(t,r),f||(b=[ue(r,"click",l[16]),ue(t,"click",Tt(l[17])),ue(e,"click",l[16])],f=!0)},p(g,d){d[0]&256&&!Je(i.src,n=g[8])&&E(i,"src",n)},d(g){g&&u(e),f=!1,He(b)}}}function $n(l){let e,t,i,n,o="Cancelar",r,a,f="AGREGAR GASTO",b,g,d,m="Confirmar",p,v,y,w,H,P,B,U,W,R,L,z,x,I,T,O,D,Z,ne='Tipo de pago <ion-text color="danger">(Obligatorio)</ion-text>',oe,re,me="Efectivo",M,se,le="Tarjeta",be,de,ee="Transferencia",Ie,ke,he,pe,Te,Ee,ve,J,X,A,$=`<ion-icon icon="${Dt}" slot="start"></ion-icon>
                        Subir Evidencia`,j,_e,Se,Me,Ae,Le,q,ce,F=l[0]&&$t(l),K=l[6]&&ti(),Y=l[7]&&ii(l);return{c(){e=h("ion-header"),t=h("ion-toolbar"),i=h("ion-buttons"),n=h("ion-button"),n.textContent=o,r=N(),a=h("ion-title"),a.textContent=f,b=N(),g=h("ion-buttons"),d=h("ion-button"),d.textContent=m,p=N(),v=h("ion-content"),y=h("ion-list"),w=h("ion-item"),H=h("ion-icon"),P=N(),B=h("ion-input"),U=N(),W=h("ion-item"),R=h("ion-icon"),L=N(),z=h("ion-input"),x=N(),I=h("ion-item"),T=h("ion-icon"),O=N(),D=h("ion-select"),Z=h("div"),Z.innerHTML=ne,oe=N(),re=h("ion-select-option"),re.textContent=me,M=N(),se=h("ion-select-option"),se.textContent=le,be=N(),de=h("ion-select-option"),de.textContent=ee,Ie=N(),ke=h("ion-item"),he=h("ion-icon"),pe=N(),Te=h("ion-textarea"),Ee=N(),ve=h("section"),J=h("label"),X=h("ion-button"),A=h("label"),A.innerHTML=$,j=N(),_e=h("input"),Se=N(),F&&F.c(),Me=N(),K&&K.c(),Ae=N(),Y&&Y.c(),Le=Be(),this.h()},l(Q){e=_(Q,"ION-HEADER",{translucent:!0});var ge=k(e);t=_(ge,"ION-TOOLBAR",{});var G=k(t);i=_(G,"ION-BUTTONS",{slot:!0});var ae=k(i);n=_(ae,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),ie(n)!=="svelte-1f8rjcf"&&(n.textContent=o),ae.forEach(u),r=C(G),a=_(G,"ION-TITLE",{title:!0,"data-svelte-h":!0}),ie(a)!=="svelte-efps2s"&&(a.textContent=f),b=C(G),g=_(G,"ION-BUTTONS",{slot:!0});var te=k(g);d=_(te,"ION-BUTTON",{strong:!0,"data-svelte-h":!0}),ie(d)!=="svelte-k5zoz0"&&(d.textContent=m),te.forEach(u),G.forEach(u),ge.forEach(u),p=C(Q),v=_(Q,"ION-CONTENT",{fullscreen:!0});var fe=k(v);y=_(fe,"ION-LIST",{});var we=k(y);w=_(we,"ION-ITEM",{});var De=k(w);H=_(De,"ION-ICON",{icon:!0,slot:!0}),k(H).forEach(u),P=C(De),B=_(De,"ION-INPUT",{label:!0,type:!0,placeholder:!0,value:!0}),k(B).forEach(u),De.forEach(u),U=C(we),W=_(we,"ION-ITEM",{});var Ne=k(W);R=_(Ne,"ION-ICON",{icon:!0,slot:!0}),k(R).forEach(u),L=C(Ne),z=_(Ne,"ION-INPUT",{label:!0,type:!0,value:!0}),k(z).forEach(u),Ne.forEach(u),x=C(we),I=_(we,"ION-ITEM",{});var Re=k(I);T=_(Re,"ION-ICON",{icon:!0,slot:!0}),k(T).forEach(u),O=C(Re),D=_(Re,"ION-SELECT",{placeholder:!0,value:!0});var Fe=k(D);Z=_(Fe,"DIV",{slot:!0,"data-svelte-h":!0}),ie(Z)!=="svelte-wl764p"&&(Z.innerHTML=ne),oe=C(Fe),re=_(Fe,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),ie(re)!=="svelte-i9crym"&&(re.textContent=me),M=C(Fe),se=_(Fe,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),ie(se)!=="svelte-fx0z11"&&(se.textContent=le),be=C(Fe),de=_(Fe,"ION-SELECT-OPTION",{value:!0,"data-svelte-h":!0}),ie(de)!=="svelte-1c24jf2"&&(de.textContent=ee),Fe.forEach(u),Re.forEach(u),Ie=C(we),ke=_(we,"ION-ITEM",{});var We=k(ke);he=_(We,"ION-ICON",{icon:!0,slot:!0}),k(he).forEach(u),pe=C(We),Te=_(We,"ION-TEXTAREA",{label:!0,placeholder:!0}),k(Te).forEach(u),We.forEach(u),Ee=C(we),ve=_(we,"SECTION",{});var Ve=k(ve);J=_(Ve,"LABEL",{for:!0,style:!0});var Ge=k(J);X=_(Ge,"ION-BUTTON",{fill:!0,size:!0,class:!0,expand:!0});var lt=k(X);A=_(lt,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),ie(A)!=="svelte-1m9yw22"&&(A.innerHTML=$),j=C(lt),_e=_(lt,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),lt.forEach(u),Ge.forEach(u),Ve.forEach(u),Se=C(we),F&&F.l(we),we.forEach(u),fe.forEach(u),Me=C(Q),K&&K.l(Q),Ae=C(Q),Y&&Y.l(Q),Le=Be(),this.h()},h(){E(n,"color","medium"),E(i,"slot","start"),E(a,"title",""),E(d,"strong",""),E(g,"slot","end"),E(e,"translucent",""),E(H,"icon",Ai),E(H,"slot","start"),E(B,"label","Concepto"),E(B,"type","text"),E(B,"placeholder","Escribe aquí..."),E(B,"value",l[9]?l[9]:""),E(R,"icon",gt),E(R,"slot","start"),E(z,"label","Monto $"),E(z,"type","number"),E(z,"value",l[10]?l[10]:""),E(T,"icon",Yi),E(T,"slot","start"),S(Z,"slot","label"),E(re,"value","cash"),E(se,"value","card"),E(de,"value","transfer"),E(D,"placeholder","Tipo de pago"),E(D,"value",l[11]?l[11]:""),E(he,"icon",gt),E(he,"slot","start"),E(Te,"label","Comentarios"),E(Te,"placeholder","Escribe aquí..."),S(A,"for","eventEvidence"),c(A,"width","100%"),c(A,"padding","8px"),c(_e,"display","none"),S(_e,"id","eventEvidence"),S(_e,"name","fileToUpload"),S(_e,"type","file"),S(_e,"accept","image/*"),S(_e,"capture","environment"),E(X,"fill","outline"),E(X,"size","small"),E(X,"class","loadEvidence"),E(X,"expand","block"),S(J,"for","eventEvidence"),c(J,"display","block"),c(J,"width","100%"),E(v,"fullscreen","")},m(Q,ge){V(Q,e,ge),s(e,t),s(t,i),s(i,n),s(t,r),s(t,a),s(t,b),s(t,g),s(g,d),V(Q,p,ge),V(Q,v,ge),s(v,y),s(y,w),s(w,H),s(w,P),s(w,B),l[18](B),s(y,U),s(y,W),s(W,R),s(W,L),s(W,z),l[19](z),s(y,x),s(y,I),s(I,T),s(I,O),s(I,D),s(D,Z),s(D,oe),s(D,re),s(D,M),s(D,se),s(D,be),s(D,de),l[20](D),s(y,Ie),s(y,ke),s(ke,he),s(ke,pe),s(ke,Te),l[21](Te),s(y,Ee),s(y,ve),s(ve,J),s(J,X),s(X,A),s(X,j),s(X,_e),s(y,Se),F&&F.m(y,null),V(Q,Me,ge),K&&K.m(Q,ge),V(Q,Ae,ge),Y&&Y.m(Q,ge),V(Q,Le,ge),q||(ce=[ue(n,"click",l[13]),ue(d,"click",l[14]),ue(_e,"change",l[12])],q=!0)},p(Q,ge){Q[0]?F?F.p(Q,ge):(F=$t(Q),F.c(),F.m(y,null)):F&&(F.d(1),F=null),Q[6]?K||(K=ti(),K.c(),K.m(Ae.parentNode,Ae)):K&&(K.d(1),K=null),Q[7]?Y?Y.p(Q,ge):(Y=ii(Q),Y.c(),Y.m(Le.parentNode,Le)):Y&&(Y.d(1),Y=null)},i:Ce,o:Ce,d(Q){Q&&(u(e),u(p),u(v),u(Me),u(Ae),u(Le)),l[18](null),l[19](null),l[20](null),l[21](null),F&&F.d(),K&&K.d(Q),Y&&Y.d(Q),q=!1,He(ce)}}}function eo(l,e,t){let i=mt,n=document.querySelector("ion-modal"),o=n.componentProps.routeId,r=n.componentProps.ex_concept,a=n.componentProps.ex_amount,f=n.componentProps.ex_type,b=n.componentProps.id_expense,g="",d=new Array,m="",p="",v=0,y="",w="",H=!1,P=new Object,B=!1,U="";ct(()=>{P=JSON.parse(localStorage.getItem("userSession"))});const W=async(M,se)=>{await(await Ze.create({header:M||"Error",message:se||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},R=async M=>{t(6,H=!0);const le=M.target.files[0],be=await L(le);if(be){var de=new Object;de.fileToUpload=be,de.id_user_over=P.id_user,de.token=P.token;try{Xe(`${i}api/admin/manager/upload_img_driver.php`,function(ee){ee.success?(t(0,g=ee.img),t(1,d=it(g)),m=ee.img_id):W("Error","No se pudo subir la imagen"),t(6,H=!1)},de)}catch(ee){console.error("Error during file upload:",ee)}finally{t(6,H=!1)}}},L=async M=>new Promise(se=>{const le=new Image;le.src=URL.createObjectURL(M),le.onload=()=>{const be=document.createElement("canvas"),de=be.getContext("2d"),ee=800,Ie=600;let ke=le.width,he=le.height;ke>ee&&(he*=ee/ke,ke=ee),he>Ie&&(ke*=Ie/he,he=Ie),be.width=ke,be.height=he,de.drawImage(le,0,0,ke,he),be.toBlob(pe=>{se(pe),URL.revokeObjectURL(le.src),de.clearRect(0,0,be.width,be.height)},"image/jpeg",.7)}}),z=()=>{ot.dismiss()},x=()=>{var M=new Object;M.id_route=o,M.comments=y.value,M.type=p.value,M.img=g,M.img_id=m,M.amount=v.value,M.concept=w.value,M.status="done",M.id_expense=b||"null",M.id_user_over=P.id_user,M.token=P.token,!m||!g||!v.value||!w.value?W("Datos incompletos","Llena los datos requeridos para completar el registro"):Xe(`${i}api/admin/expenses/add_expense.php`,function(se){z()},M)},I=M=>{t(8,U=M),t(7,B=!0)},T=()=>{t(7,B=!1),t(8,U="")};function O(M){Lt.call(this,l,M)}function D(M){xe[M?"unshift":"push"](()=>{w=M,t(5,w)})}function Z(M){xe[M?"unshift":"push"](()=>{v=M,t(3,v)})}function ne(M){xe[M?"unshift":"push"](()=>{p=M,t(2,p)})}function oe(M){xe[M?"unshift":"push"](()=>{y=M,t(4,y)})}return[g,d,p,v,y,w,H,B,U,r,a,f,R,z,x,I,T,O,D,Z,ne,oe,M=>I(M),M=>removeFile(M)]}class Ot extends et{constructor(e){super(),tt(this,e,eo,$n,$e,{},null,[-1,-1])}}function to(l,e){e&&e!=="lg"&&e!=="sm"&&e!=="xs"?l.style.fontSize=e.replace("x","em"):l.style.fontSize=""}function io(l,e,t,i,n,o=1,r="",a=""){let f=1,b=1;n&&(n=="horizontal"?f=-1:n=="vertical"?b=-1:f=b=-1),typeof l=="string"&&(l=parseFloat(l)),typeof e=="string"&&(e=parseFloat(e)),typeof t=="string"&&(t=parseFloat(t));const g=`${e*o}${r}`,d=`${t*o}${r}`;let m=`translate(${g},${d}) scale(${f*l},${b*l})`;return i&&(m+=` rotate(${i}${a})`),m}function ni(l){let e,t,i,n,o,r,a,f,b=l[3]&&oi(l);function g(p,v){return typeof p[17][4]=="string"?oo:no}let d=g(l),m=d(l);return{c(){e=rt("svg"),b&&b.c(),t=rt("g"),i=rt("g"),m.c(),this.h()},l(p){e=st(p,"svg",{id:!0,class:!0,style:!0,viewBox:!0,"aria-hidden":!0,role:!0,xmlns:!0});var v=k(e);b&&b.l(v),t=st(v,"g",{transform:!0,"transform-origin":!0});var y=k(t);i=st(y,"g",{transform:!0});var w=k(i);m.l(w),w.forEach(u),y.forEach(u),v.forEach(u),this.h()},h(){S(i,"transform",l[16]),S(t,"transform",n="translate("+l[17][0]/2+" "+l[17][1]/2+")"),S(t,"transform-origin",o=l[17][0]/4+" 0"),S(e,"id",l[1]),S(e,"class",r="svelte-fa svelte-fa-base "+l[0]+" svelte-bvo74f"),S(e,"style",l[2]),S(e,"viewBox",a="0 0 "+l[17][0]+" "+l[17][1]),S(e,"aria-hidden",f=l[3]===void 0),S(e,"role","img"),S(e,"xmlns","http://www.w3.org/2000/svg"),je(e,"pulse",l[9]),je(e,"svelte-fa-size-lg",l[4]==="lg"),je(e,"svelte-fa-size-sm",l[4]==="sm"),je(e,"svelte-fa-size-xs",l[4]==="xs"),je(e,"svelte-fa-fw",l[6]),je(e,"svelte-fa-pull-left",l[7]==="left"),je(e,"svelte-fa-pull-right",l[7]==="right"),je(e,"spin",l[8])},m(p,v){V(p,e,v),b&&b.m(e,null),s(e,t),s(t,i),m.m(i,null),l[24](e)},p(p,v){p[3]?b?b.p(p,v):(b=oi(p),b.c(),b.m(e,t)):b&&(b.d(1),b=null),d===(d=g(p))&&m?m.p(p,v):(m.d(1),m=d(p),m&&(m.c(),m.m(i,null))),v&65536&&S(i,"transform",p[16]),v&131072&&n!==(n="translate("+p[17][0]/2+" "+p[17][1]/2+")")&&S(t,"transform",n),v&131072&&o!==(o=p[17][0]/4+" 0")&&S(t,"transform-origin",o),v&2&&S(e,"id",p[1]),v&1&&r!==(r="svelte-fa svelte-fa-base "+p[0]+" svelte-bvo74f")&&S(e,"class",r),v&4&&S(e,"style",p[2]),v&131072&&a!==(a="0 0 "+p[17][0]+" "+p[17][1])&&S(e,"viewBox",a),v&8&&f!==(f=p[3]===void 0)&&S(e,"aria-hidden",f),v&513&&je(e,"pulse",p[9]),v&17&&je(e,"svelte-fa-size-lg",p[4]==="lg"),v&17&&je(e,"svelte-fa-size-sm",p[4]==="sm"),v&17&&je(e,"svelte-fa-size-xs",p[4]==="xs"),v&65&&je(e,"svelte-fa-fw",p[6]),v&129&&je(e,"svelte-fa-pull-left",p[7]==="left"),v&129&&je(e,"svelte-fa-pull-right",p[7]==="right"),v&257&&je(e,"spin",p[8])},d(p){p&&u(e),b&&b.d(),m.d(),l[24](null)}}}function oi(l){let e,t;return{c(){e=rt("title"),t=ye(l[3])},l(i){e=st(i,"title",{});var n=k(e);t=Oe(n,l[3]),n.forEach(u)},m(i,n){V(i,e,n),s(e,t)},p(i,n){n&8&&Pe(t,i[3])},d(i){i&&u(e)}}}function no(l){let e,t,i,n,o,r,a,f,b,g;return{c(){e=rt("path"),r=rt("path"),this.h()},l(d){e=st(d,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),k(e).forEach(u),r=st(d,"path",{d:!0,fill:!0,"fill-opacity":!0,transform:!0}),k(r).forEach(u),this.h()},h(){S(e,"d",t=l[17][4][0]),S(e,"fill",i=l[11]||l[5]||"currentColor"),S(e,"fill-opacity",n=l[14]!=!1?l[12]:l[13]),S(e,"transform",o="translate("+l[17][0]/-2+" "+l[17][1]/-2+")"),S(r,"d",a=l[17][4][1]),S(r,"fill",f=l[10]||l[5]||"currentColor"),S(r,"fill-opacity",b=l[14]!=!1?l[13]:l[12]),S(r,"transform",g="translate("+l[17][0]/-2+" "+l[17][1]/-2+")")},m(d,m){V(d,e,m),V(d,r,m)},p(d,m){m&131072&&t!==(t=d[17][4][0])&&S(e,"d",t),m&2080&&i!==(i=d[11]||d[5]||"currentColor")&&S(e,"fill",i),m&28672&&n!==(n=d[14]!=!1?d[12]:d[13])&&S(e,"fill-opacity",n),m&131072&&o!==(o="translate("+d[17][0]/-2+" "+d[17][1]/-2+")")&&S(e,"transform",o),m&131072&&a!==(a=d[17][4][1])&&S(r,"d",a),m&1056&&f!==(f=d[10]||d[5]||"currentColor")&&S(r,"fill",f),m&28672&&b!==(b=d[14]!=!1?d[13]:d[12])&&S(r,"fill-opacity",b),m&131072&&g!==(g="translate("+d[17][0]/-2+" "+d[17][1]/-2+")")&&S(r,"transform",g)},d(d){d&&(u(e),u(r))}}}function oo(l){let e,t,i,n;return{c(){e=rt("path"),this.h()},l(o){e=st(o,"path",{d:!0,fill:!0,transform:!0}),k(e).forEach(u),this.h()},h(){S(e,"d",t=l[17][4]),S(e,"fill",i=l[5]||l[10]||"currentColor"),S(e,"transform",n="translate("+l[17][0]/-2+" "+l[17][1]/-2+")")},m(o,r){V(o,e,r)},p(o,r){r&131072&&t!==(t=o[17][4])&&S(e,"d",t),r&1056&&i!==(i=o[5]||o[10]||"currentColor")&&S(e,"fill",i),r&131072&&n!==(n="translate("+o[17][0]/-2+" "+o[17][1]/-2+")")&&S(e,"transform",n)},d(o){o&&u(e)}}}function lo(l){let e,t=l[17][4]&&ni(l);return{c(){t&&t.c(),e=Be()},l(i){t&&t.l(i),e=Be()},m(i,n){t&&t.m(i,n),V(i,e,n)},p(i,[n]){i[17][4]?t?t.p(i,n):(t=ni(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ce,o:Ce,d(i){i&&u(e),t&&t.d(i)}}}function ro(l,e,t){let i,n,{class:o=void 0}=e,{id:r=void 0}=e,{style:a=void 0}=e,{icon:f}=e,{title:b=void 0}=e,{size:g=void 0}=e,{color:d=void 0}=e,{fw:m=!1}=e,{pull:p=void 0}=e,{scale:v=1}=e,{translateX:y=0}=e,{translateY:w=0}=e,{rotate:H=void 0}=e,{flip:P=void 0}=e,{spin:B=!1}=e,{pulse:U=!1}=e,{primaryColor:W=""}=e,{secondaryColor:R=""}=e,{primaryOpacity:L=1}=e,{secondaryOpacity:z=.4}=e,{swapOpacity:x=!1}=e,I;function T(O){xe[O?"unshift":"push"](()=>{I=O,t(15,I)})}return l.$$set=O=>{"class"in O&&t(0,o=O.class),"id"in O&&t(1,r=O.id),"style"in O&&t(2,a=O.style),"icon"in O&&t(18,f=O.icon),"title"in O&&t(3,b=O.title),"size"in O&&t(4,g=O.size),"color"in O&&t(5,d=O.color),"fw"in O&&t(6,m=O.fw),"pull"in O&&t(7,p=O.pull),"scale"in O&&t(19,v=O.scale),"translateX"in O&&t(20,y=O.translateX),"translateY"in O&&t(21,w=O.translateY),"rotate"in O&&t(22,H=O.rotate),"flip"in O&&t(23,P=O.flip),"spin"in O&&t(8,B=O.spin),"pulse"in O&&t(9,U=O.pulse),"primaryColor"in O&&t(10,W=O.primaryColor),"secondaryColor"in O&&t(11,R=O.secondaryColor),"primaryOpacity"in O&&t(12,L=O.primaryOpacity),"secondaryOpacity"in O&&t(13,z=O.secondaryOpacity),"swapOpacity"in O&&t(14,x=O.swapOpacity)},l.$$.update=()=>{l.$$.dirty&32784&&I&&g&&to(I,g),l.$$.dirty&262144&&t(17,i=f&&f.icon||[0,0,"",[],""]),l.$$.dirty&16252928&&t(16,n=io(v,y,w,H,P,512))},[o,r,a,b,g,d,m,p,B,U,W,R,L,z,x,I,n,i,f,v,y,w,H,P,T]}class so extends et{constructor(e){super(),tt(this,e,ro,lo,$e,{class:0,id:1,style:2,icon:18,title:3,size:4,color:5,fw:6,pull:7,scale:19,translateX:20,translateY:21,rotate:22,flip:23,spin:8,pulse:9,primaryColor:10,secondaryColor:11,primaryOpacity:12,secondaryOpacity:13,swapOpacity:14})}}/*!
 * Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */var ao={prefix:"fas",iconName:"ellipsis",icon:[448,512,["ellipsis-h"],"f141","M0 256a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm168 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm224-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z"]},co={prefix:"fas",iconName:"traffic-light",icon:[320,512,[128678],"f637","M64-32C28.7-32 0-3.3 0 32L0 384c0 88.4 71.6 160 160 160s160-71.6 160-160l0-352c0-35.3-28.7-64-64-64L64-32zm96 392c30.9 0 56 25.1 56 56s-25.1 56-56 56-56-25.1-56-56 25.1-56 56-56zm56-104a56 56 0 1 1 -112 0 56 56 0 1 1 112 0zM160 152a56 56 0 1 1 0-112 56 56 0 1 1 0 112z"]},uo={prefix:"fas",iconName:"hospital",icon:[576,512,[127973,62589,"hospital-alt","hospital-wide"],"f0f8","M128 64c0-35.3 28.7-64 64-64L384 0c35.3 0 64 28.7 64 64l0 64 64 0c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 192c0-35.3 28.7-64 64-64l64 0 0-64zM272 352c-17.7 0-32 14.3-32 32l0 80 96 0 0-80c0-17.7-14.3-32-32-32l-32 0zM128 368l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16zM112 256c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0zM512 368l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16zM496 256c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0zM264 104l0 32-32 0c-8.8 0-16 7.2-16 16l0 16c0 8.8 7.2 16 16 16l32 0 0 32c0 8.8 7.2 16 16 16l16 0c8.8 0 16-7.2 16-16l0-32 32 0c8.8 0 16-7.2 16-16l0-16c0-8.8-7.2-16-16-16l-32 0 0-32c0-8.8-7.2-16-16-16l-16 0c-8.8 0-16 7.2-16 16z"]},fo={prefix:"fas",iconName:"utensils",icon:[512,512,[127860,61685,"cutlery"],"f2e7","M63.9 14.4C63.1 6.2 56.2 0 48 0s-15.1 6.2-16 14.3L17.9 149.7c-1.3 6-1.9 12.1-1.9 18.2 0 45.9 35.1 83.6 80 87.7L96 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-224.4c44.9-4.1 80-41.8 80-87.7 0-6.1-.6-12.2-1.9-18.2L223.9 14.3C223.1 6.2 216.2 0 208 0s-15.1 6.2-15.9 14.4L178.5 149.9c-.6 5.7-5.4 10.1-11.1 10.1-5.8 0-10.6-4.4-11.2-10.2L143.9 14.6C143.2 6.3 136.3 0 128 0s-15.2 6.3-15.9 14.6L99.8 149.8c-.5 5.8-5.4 10.2-11.2 10.2-5.8 0-10.6-4.4-11.1-10.1L63.9 14.4zM448 0C432 0 320 32 320 176l0 112c0 35.3 28.7 64 64 64l32 0 0 128c0 17.7 14.3 32 32 32s32-14.3 32-32l0-448c0-17.7-14.3-32-32-32z"]},ho={prefix:"fas",iconName:"gas-pump",icon:[512,512,[9981],"f52f","M32 64C32 28.7 60.7 0 96 0L256 0c35.3 0 64 28.7 64 64l0 192 8 0c48.6 0 88 39.4 88 88l0 32c0 13.3 10.7 24 24 24s24-10.7 24-24l0-154c-27.6-7.1-48-32.2-48-62l0-59.5-25.8-28.3c-8.9-9.8-8.2-25 1.6-33.9s25-8.2 33.9 1.6l71.7 78.8c9.4 10.3 14.6 23.7 14.6 37.7L512 376c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-32c0-22.1-17.9-40-40-40l-8 0 0 161.4c9.3 3.3 16 12.2 16 22.6 0 13.3-10.7 24-24 24L40 512c-13.3 0-24-10.7-24-24 0-10.5 6.7-19.3 16-22.6L32 64zM96 80l0 96c0 8.8 7.2 16 16 16l128 0c8.8 0 16-7.2 16-16l0-96c0-8.8-7.2-16-16-16L112 64c-8.8 0-16 7.2-16 16z"]},_o={prefix:"fas",iconName:"restroom",icon:[640,512,[],"f7bd","M80 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm40 304l0 128c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-154.8c-8.1 9.2-21.1 13.2-33.5 9.4-16.9-5.3-26.3-23.2-21-40.1l29.7-95.2C44.4 156.9 83.6 128 128 128s83.6 28.9 96.8 71.2l29.7 95.2c5.3 16.9-4.1 34.8-21 40.1-12.4 3.9-25.4-.2-33.5-9.4L200 480c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-128-16 0zM320 0c13.3 0 24 10.7 24 24l0 464c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-464c0-13.3 10.7-24 24-24zM464 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM440 480l0-96-17.8 0c-10.9 0-18.6-10.7-15.2-21.1l9-26.9c-3.2 0-6.4-.5-9.5-1.5-16.9-5.3-26.3-23.2-21-40.1l29.7-95.2C428.4 156.9 467.6 128 512 128s83.6 28.9 96.8 71.2l29.7 95.2c5.3 16.9-4.1 34.8-21 40.1-3.2 1-6.4 1.5-9.5 1.5l9 26.9c3.5 10.4-4.3 21.1-15.2 21.1l-17.8 0 0 96c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-96-16 0 0 96c0 17.7-14.3 32-32 32s-32-14.3-32-32z"]},po={prefix:"fas",iconName:"car-burst",icon:[640,512,["car-crash"],"f5e1","M232 16.1l0-48c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24s24-10.7 24-24zM32 168.1l48 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24s10.7 24 24 24zM281.5 70.6c9.4 9.4 24.6 9.4 33.9 0l33.9-33.9c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L281.5 36.6c-9.4 9.4-9.4 24.6 0 33.9zm-181 215l33.9-33.9c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L66.6 251.6c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0zM66.6 2.7c-9.4 9.4-9.4 24.6 0 33.9l33.9 33.9c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L100.5 2.7C91.1-6.7 76-6.7 66.6 2.7zM352.9 175.4L505 216.2c6.4 1.7 11.1 7.3 11.8 13.9l7.2 74-231.5-62 43.2-60.5c3.9-5.4 10.7-7.9 17.2-6.2zM223.6 228.5l-2.1 2.9c-21.7 5.5-39.9 22.3-46.1 45.5-4.1 15.5-12.4 46.4-24.8 92.7l-8.3 30.9c-4.6 17.1 5.6 34.6 22.6 39.2l15.5 4.1c17.1 4.6 34.6-5.6 39.2-22.6l8.3-30.9 278.2 74.5-8.3 30.9c-4.6 17.1 5.6 34.6 22.6 39.2l15.5 4.1c17.1 4.6 34.6-5.6 39.2-22.6 4.1-15.5 12.4-46.4 24.8-92.7l8.3-30.9c6.2-23.2-1.1-46.8-17.2-62.5l-.3-3.6-10-103c-3.2-33.2-26.7-60.9-58.9-69.5L369.5 113.6c-32.2-8.6-66.4 3.6-85.8 30.8l-60.2 84.2zm48.7 57.8a32 32 0 1 1 -16.6 61.8 32 32 0 1 1 16.6-61.8zm208.1 88.9a32 32 0 1 1 61.8 16.6 32 32 0 1 1 -61.8-16.6z"]},mo={prefix:"fas",iconName:"square-parking",icon:[448,512,[127359,"parking"],"f540","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM192 256l48 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-48 0 0 64zm48 64l-48 0 0 32c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-184c0-22.1 17.9-40 40-40l72 0c53 0 96 43 96 96s-43 96-96 96z"]},vo={prefix:"fas",iconName:"user-secret",icon:[448,512,[128373],"f21b","M171-16c-36.4 0-57.8 58.3-68.3 112L72 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l24 0 0 32c0 17 3.3 33.2 9.3 48l-9.3 0 0 0-20.5 0c-15.2 0-27.5 12.3-27.5 27.5 0 3 .5 5.9 1.4 8.7l28.9 86.6C40.2 379.6 16 428.1 16 482.3 16 498.7 29.3 512 45.7 512l356.6 0c16.4 0 29.7-13.3 29.7-29.7 0-54.2-24.2-102.7-62.3-135.4l28.9-86.6c.9-2.8 1.4-5.7 1.4-8.7 0-15.2-12.3-27.5-27.5-27.5l-20.5 0 0 0-9.3 0c6-14.8 9.3-31 9.3-48l0-32 24 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-30.7 0c-10.4-53.7-31.9-112-68.3-112-9.6 0-19 3.9-27.5 8.2-8.2 4.1-18.4 7.8-25.5 7.8s-17.3-3.7-25.5-7.8C190-12.1 180.6-16 171-16zm93.7 484.4l-24.8-70.9 27.9-32.5c2.7-3.2 4.2-7.2 4.2-11.4 0-9.7-7.8-17.5-17.5-17.5l-61 0c-9.7 0-17.5 7.8-17.5 17.5 0 4.2 1.5 8.2 4.2 11.4l27.9 32.5-24.8 70.9-57-180.4 35.7 0c18.4 10.2 39.5 16 62 16s43.6-5.8 62-16l35.7 0-57 180.4zM224 256c-34.7 0-64.2-22.1-75.3-53 5.7 3.2 12.3 5 19.3 5l12.4 0c16.5 0 31.1-10.6 36.3-26.2 2.3-7 12.2-7 14.5 0 5.2 15.6 19.9 26.2 36.3 26.2l12.4 0c7 0 13.6-1.8 19.3-5-11.1 30.9-40.6 53-75.3 53z"]};function li(l,e,t){const i=l.slice();return i[32]=e[t],i[34]=t,i}function ri(l,e,t){const i=l.slice();return i[35]=e[t],i}function si(l){let e,t,i,n,o,r=l[35].label+"",a,f,b,g,d;i=new so({props:{icon:l[35].icon,size:"24px",color:"#333"}});function m(){return l[18](l[35])}return{c(){e=h("div"),t=h("div"),Mt(i.$$.fragment),n=N(),o=h("span"),a=ye(r),f=N(),this.h()},l(p){e=_(p,"DIV",{style:!0});var v=k(e);t=_(v,"DIV",{style:!0});var y=k(t);St(i.$$.fragment,y),y.forEach(u),n=C(v),o=_(v,"SPAN",{style:!0});var w=k(o);a=Oe(w,r),w.forEach(u),f=C(v),v.forEach(u),this.h()},h(){c(t,"width","42px"),c(t,"height","42px"),c(t,"border-radius","50%"),c(t,"background-color",l[35].color),c(t,"display","flex"),c(t,"align-items","center"),c(t,"justify-content","center"),c(o,"font-size","11px"),c(o,"font-weight","500"),c(o,"color","#333"),c(o,"text-align","center"),c(e,"width","calc(33.333% - 7px)"),c(e,"background","white"),c(e,"border",l[6]===l[35].id?"2px solid #3880ff":"2px solid #e0e0e0"),c(e,"border-radius","10px"),c(e,"padding","10px 6px"),c(e,"display","flex"),c(e,"flex-direction","column"),c(e,"align-items","center"),c(e,"gap","6px"),c(e,"cursor","pointer"),c(e,"box-sizing","border-box"),c(e,"box-shadow",l[6]===l[35].id?"0 2px 8px rgba(56, 128, 255, 0.2)":"none")},m(p,v){V(p,e,v),s(e,t),At(i,t,null),s(e,n),s(e,o),s(o,a),s(e,f),b=!0,g||(d=ue(e,"click",m),g=!0)},p(p,v){l=p,(!b||v[0]&64)&&c(e,"border",l[6]===l[35].id?"2px solid #3880ff":"2px solid #e0e0e0"),(!b||v[0]&64)&&c(e,"box-shadow",l[6]===l[35].id?"0 2px 8px rgba(56, 128, 255, 0.2)":"none")},i(p){b||(nt(i.$$.fragment,p),b=!0)},o(p){at(i.$$.fragment,p),b=!1},d(p){p&&u(e),Pt(i),g=!1,d()}}}function ai(l){let e;return{c(){e=h("div"),this.h()},l(t){e=_(t,"DIV",{id:!0,style:!0}),k(e).forEach(u),this.h()},h(){S(e,"id","motive-map"),c(e,"height","140px"),c(e,"margin","0 10px 10px 10px"),c(e,"border-radius","10px"),c(e,"box-shadow","0 2px 6px rgba(0,0,0,0.1)")},m(t,i){V(t,e,i),l[19](e)},p:Ce,d(t){t&&u(e),l[19](null)}}}function ci(l){let e,t,i=qe(l[1]),n=[];for(let o=0;o<i.length;o+=1)n[o]=ui(li(l,i,o));return{c(){e=h("section"),t=h("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=_(o,"SECTION",{style:!0});var r=k(e);t=_(r,"DIV",{style:!0});var a=k(t);for(let f=0;f<n.length;f+=1)n[f].l(a);a.forEach(u),r.forEach(u),this.h()},h(){c(t,"display","flex"),c(t,"flex-wrap","wrap"),c(t,"gap","8px"),c(e,"padding","0 10px")},m(o,r){V(o,e,r),s(e,t);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null)},p(o,r){if(r[0]&73730){i=qe(o[1]);let a;for(a=0;a<i.length;a+=1){const f=li(o,i,a);n[a]?n[a].p(f,r):(n[a]=ui(f),n[a].c(),n[a].m(t,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=i.length}},d(o){o&&u(e),Et(n,o)}}}function ui(l){let e,t,i,n,o,r=`<ion-icon icon="${zt}"></ion-icon>`,a,f,b;function g(){return l[21](l[32])}function d(){return l[22](l[34])}return{c(){e=h("div"),t=h("ion-img"),n=N(),o=h("button"),o.innerHTML=r,a=N(),this.h()},l(m){e=_(m,"DIV",{style:!0});var p=k(e);t=_(p,"ION-IMG",{src:!0,alt:!0,style:!0}),k(t).forEach(u),n=C(p),o=_(p,"BUTTON",{style:!0,"data-svelte-h":!0}),ie(o)!=="svelte-yp839i"&&(o.innerHTML=r),a=C(p),p.forEach(u),this.h()},h(){Je(t.src,i=l[32])||E(t,"src",i),E(t,"alt","Evidencia fotográfica"),c(t,"width","100%"),c(t,"height","100%"),c(t,"object-fit","cover"),c(t,"border","1px solid #ddd"),c(t,"cursor","pointer"),c(o,"position","absolute"),c(o,"top","4px"),c(o,"right","4px"),c(o,"width","24px"),c(o,"height","24px"),c(o,"background","rgba(255,255,255,0.95)"),c(o,"border","none"),c(o,"border-radius","50%"),c(o,"display","flex"),c(o,"align-items","center"),c(o,"justify-content","center"),c(o,"color","#d13434"),c(o,"box-shadow","0 1px 4px rgba(0,0,0,0.2)"),c(o,"cursor","pointer"),c(o,"font-size","16px"),c(e,"width","calc(33.333% - 6px)"),c(e,"position","relative"),c(e,"aspect-ratio","1"),c(e,"border-radius","8px"),c(e,"overflow","hidden"),c(e,"box-sizing","border-box")},m(m,p){V(m,e,p),s(e,t),s(e,n),s(e,o),s(e,a),f||(b=[ue(t,"click",g),ue(o,"click",d)],f=!0)},p(m,p){l=m,p[0]&2&&!Je(t.src,i=l[32])&&E(t,"src",i)},d(m){m&&u(e),f=!1,He(b)}}}function fi(l){let e,t,i,n,o,r,a=`<ion-icon icon="${xt}"></ion-icon>`,f,b;return{c(){e=h("div"),t=h("div"),i=h("ion-img"),o=N(),r=h("button"),r.innerHTML=a,this.h()},l(g){e=_(g,"DIV",{style:!0});var d=k(e);t=_(d,"DIV",{style:!0});var m=k(t);i=_(m,"ION-IMG",{src:!0,alt:!0,style:!0}),k(i).forEach(u),o=C(m),r=_(m,"BUTTON",{style:!0,"data-svelte-h":!0}),ie(r)!=="svelte-24n2ej"&&(r.innerHTML=a),m.forEach(u),d.forEach(u),this.h()},h(){Je(i.src,n=l[5])||E(i,"src",n),E(i,"alt","Evidencia fotográfica"),c(i,"width","100%"),c(i,"height","auto"),c(r,"position","absolute"),c(r,"top","10px"),c(r,"right","10px"),c(r,"width","36px"),c(r,"height","36px"),c(r,"background","rgba(255,255,255,0.95)"),c(r,"border","none"),c(r,"border-radius","50%"),c(r,"display","flex"),c(r,"align-items","center"),c(r,"justify-content","center"),c(r,"cursor","pointer"),c(t,"position","relative"),c(t,"background","white"),c(t,"padding","20px"),c(t,"border-radius","12px"),c(t,"max-width","90vw"),c(t,"max-height","90vh"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0,0,0,0.85)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","10000")},m(g,d){V(g,e,d),s(e,t),s(t,i),s(t,o),s(t,r),f||(b=[ue(r,"click",l[14]),ue(t,"click",Tt(l[17])),ue(e,"click",l[14])],f=!0)},p(g,d){d[0]&32&&!Je(i.src,n=g[5])&&E(i,"src",n)},d(g){g&&u(e),f=!1,He(b)}}}function di(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(i){e=_(i,"DIV",{style:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1is61st"&&(e.innerHTML=t),this.h()},h(){c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0,0,0,0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(i,n){V(i,e,n)},d(i){i&&u(e)}}}function go(l){let e,t,i,n,o="Cancelar",r,a,f="Agregar Incidencia",b,g,d,m="Confirmar",p,v,y,w,H="Tipo de Incidencia",P,B,U,W,R,L,z="Comentarios",x,I,T,O,D,Z,ne,oe,re=`<ion-icon icon="${Dt}" slot="start"></ion-icon>
          Subir Evidencia`,me,M,se,le,be,de,ee,Ie,ke,he=qe(l[9]),pe=[];for(let A=0;A<he.length;A+=1)pe[A]=si(ri(l,he,A));const Te=A=>at(pe[A],1,1,()=>{pe[A]=null});let Ee=l[7].lat&&ai(l),ve=l[0]&&ci(l),J=l[4]&&fi(l),X=l[3]&&di();return{c(){e=h("ion-header"),t=h("ion-toolbar"),i=h("ion-buttons"),n=h("ion-button"),n.textContent=o,r=N(),a=h("ion-title"),a.textContent=f,b=N(),g=h("ion-buttons"),d=h("ion-button"),d.textContent=m,p=N(),v=h("ion-content"),y=h("div"),w=h("h3"),w.textContent=H,P=N(),B=h("div");for(let A=0;A<pe.length;A+=1)pe[A].c();U=N(),Ee&&Ee.c(),W=N(),R=h("div"),L=h("h3"),L.textContent=z,x=N(),I=h("ion-item"),T=h("ion-textarea"),O=N(),D=h("section"),Z=h("label"),ne=h("ion-button"),oe=h("label"),oe.innerHTML=re,me=N(),M=h("input"),se=N(),ve&&ve.c(),le=N(),J&&J.c(),be=N(),X&&X.c(),de=Be(),this.h()},l(A){e=_(A,"ION-HEADER",{translucent:!0});var $=k(e);t=_($,"ION-TOOLBAR",{});var j=k(t);i=_(j,"ION-BUTTONS",{slot:!0});var _e=k(i);n=_(_e,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),ie(n)!=="svelte-1f8rjcf"&&(n.textContent=o),_e.forEach(u),r=C(j),a=_(j,"ION-TITLE",{"data-svelte-h":!0}),ie(a)!=="svelte-p6dvaq"&&(a.textContent=f),b=C(j),g=_(j,"ION-BUTTONS",{slot:!0});var Se=k(g);d=_(Se,"ION-BUTTON",{color:!0,strong:!0,"data-svelte-h":!0}),ie(d)!=="svelte-1chv7eq"&&(d.textContent=m),Se.forEach(u),j.forEach(u),$.forEach(u),p=C(A),v=_(A,"ION-CONTENT",{fullscreen:!0});var Me=k(v);y=_(Me,"DIV",{style:!0});var Ae=k(y);w=_(Ae,"H3",{style:!0,"data-svelte-h":!0}),ie(w)!=="svelte-fci20u"&&(w.textContent=H),P=C(Ae),B=_(Ae,"DIV",{style:!0});var Le=k(B);for(let Q=0;Q<pe.length;Q+=1)pe[Q].l(Le);Le.forEach(u),Ae.forEach(u),U=C(Me),Ee&&Ee.l(Me),W=C(Me),R=_(Me,"DIV",{style:!0});var q=k(R);L=_(q,"H3",{style:!0,"data-svelte-h":!0}),ie(L)!=="svelte-183y9rn"&&(L.textContent=z),x=C(q),I=_(q,"ION-ITEM",{lines:!0,style:!0});var ce=k(I);T=_(ce,"ION-TEXTAREA",{placeholder:!0,rows:!0}),k(T).forEach(u),ce.forEach(u),q.forEach(u),O=C(Me),D=_(Me,"SECTION",{style:!0});var F=k(D);Z=_(F,"LABEL",{for:!0,style:!0});var K=k(Z);ne=_(K,"ION-BUTTON",{fill:!0,color:!0,expand:!0,style:!0});var Y=k(ne);oe=_(Y,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),ie(oe)!=="svelte-18yehmm"&&(oe.innerHTML=re),me=C(Y),M=_(Y,"INPUT",{style:!0,id:!0,name:!0,type:!0,accept:!0,capture:!0}),Y.forEach(u),K.forEach(u),F.forEach(u),se=C(Me),ve&&ve.l(Me),Me.forEach(u),le=C(A),J&&J.l(A),be=C(A),X&&X.l(A),de=Be(),this.h()},h(){E(n,"color","medium"),E(i,"slot","start"),E(d,"color","primary"),E(d,"strong",""),E(g,"slot","end"),E(e,"translucent",""),c(w,"margin","0 0 10px 0"),c(w,"font-size","16px"),c(w,"font-weight","600"),c(B,"display","flex"),c(B,"flex-wrap","wrap"),c(B,"gap","10px"),c(y,"padding","12px"),c(y,"background","white"),c(y,"margin","10px"),c(y,"border-radius","12px"),c(L,"margin","0 0 8px 0"),c(L,"font-size","16px"),c(L,"font-weight","600"),E(T,"placeholder","Describe la incidencia aquí..."),E(T,"rows","2"),E(I,"lines","none"),c(I,"--background","#f5f5f5"),c(I,"--border-radius","10px"),c(R,"padding","12px"),c(R,"background","white"),c(R,"margin","0 10px 10px 10px"),c(R,"border-radius","12px"),S(oe,"for","eventEvidence"),c(oe,"width","100%"),c(oe,"padding","8px"),c(oe,"cursor","pointer"),c(M,"display","none"),S(M,"id","eventEvidence"),S(M,"name","fileToUpload"),S(M,"type","file"),S(M,"accept","image/*"),S(M,"capture","environment"),E(ne,"fill","outline"),E(ne,"color","primary"),E(ne,"expand","block"),c(ne,"--border-radius","10px"),c(ne,"height","40px"),c(ne,"font-size","14px"),S(Z,"for","eventEvidence"),c(Z,"display","block"),c(Z,"width","100%"),c(D,"padding","0 10px 10px 10px"),E(v,"fullscreen","")},m(A,$){V(A,e,$),s(e,t),s(t,i),s(i,n),s(t,r),s(t,a),s(t,b),s(t,g),s(g,d),V(A,p,$),V(A,v,$),s(v,y),s(y,w),s(y,P),s(y,B);for(let j=0;j<pe.length;j+=1)pe[j]&&pe[j].m(B,null);s(v,U),Ee&&Ee.m(v,null),s(v,W),s(v,R),s(R,L),s(R,x),s(R,I),s(I,T),l[20](T),s(v,O),s(v,D),s(D,Z),s(Z,ne),s(ne,oe),s(ne,me),s(ne,M),s(v,se),ve&&ve.m(v,null),V(A,le,$),J&&J.m(A,$),V(A,be,$),X&&X.m(A,$),V(A,de,$),ee=!0,Ie||(ke=[ue(n,"click",l[11]),ue(d,"click",l[12]),ue(M,"change",l[10])],Ie=!0)},p(A,$){if($[0]&33344){he=qe(A[9]);let j;for(j=0;j<he.length;j+=1){const _e=ri(A,he,j);pe[j]?(pe[j].p(_e,$),nt(pe[j],1)):(pe[j]=si(_e),pe[j].c(),nt(pe[j],1),pe[j].m(B,null))}for(Li(),j=he.length;j<pe.length;j+=1)Te(j);Mi()}A[7].lat?Ee?Ee.p(A,$):(Ee=ai(A),Ee.c(),Ee.m(v,W)):Ee&&(Ee.d(1),Ee=null),A[0]?ve?ve.p(A,$):(ve=ci(A),ve.c(),ve.m(v,null)):ve&&(ve.d(1),ve=null),A[4]?J?J.p(A,$):(J=fi(A),J.c(),J.m(be.parentNode,be)):J&&(J.d(1),J=null),A[3]?X||(X=di(),X.c(),X.m(de.parentNode,de)):X&&(X.d(1),X=null)},i(A){if(!ee){for(let $=0;$<he.length;$+=1)nt(pe[$]);ee=!0}},o(A){pe=pe.filter(Boolean);for(let $=0;$<pe.length;$+=1)at(pe[$]);ee=!1},d(A){A&&(u(e),u(p),u(v),u(le),u(be),u(de)),Et(pe,A),Ee&&Ee.d(),l[20](null),ve&&ve.d(),J&&J.d(A),X&&X.d(A),Ie=!1,He(ke)}}}function bo(l,e,t){let i=mt,o=document.querySelector("ion-modal").componentProps.routeId,r="",a=r?it(r):new Array,f="",b=!1,g=new Object,d=!1,m="",p="",v={lat:null,lng:null},y,w,H;const P=[{id:"car_accident",icon:po,label:"Accidente",color:"#FFE4E1"},{id:"hospital",icon:uo,label:"Hospital",color:"#E1F5E1"},{id:"wc",icon:_o,label:"Baño",color:"#E1E8FF"},{id:"restaurant",icon:fo,label:"Restaurant",color:"#FFE8D1"},{id:"parking",icon:mo,label:"Parking",color:"#F0E1FF"},{id:"traffic",icon:co,label:"Tráfico",color:"#FFF9E1"},{id:"gas",icon:ho,label:"Gasolina",color:"#FFEAA7"},{id:"robbery",icon:vo,label:"Robo",color:"#FFD1DC"},{id:"other",icon:ao,label:"Otro",color:"#E8E8E8"}];ct(()=>{g=JSON.parse(localStorage.getItem("userSession"))});const B=async(M,se)=>{await(await Ze.create({header:M||"Error",message:se||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()},U=async M=>{t(3,b=!0);try{if(a.length>=5){B("Límite de evidencias","Solo se permite subir 5 fotos por parada");return}const le=M.target.files[0],be=await W(le);if(!be){B("Error","No se pudo comprimir la imagen");return}const de={fileToUpload:be,id_user_over:g.id_user,token:g.token},ee=await new Promise((Ie,ke)=>{Xe(`${i}api/admin/manager/upload_img_driver.php`,he=>Ie(he),de)});ee.success?(t(0,r=r?`${r},${ee.img}`:ee.img),t(1,a=it(r))):B("Error","No se pudo subir la imagen")}catch(se){console.error("Error during file upload:",se),B("Error","Algo salió mal al subir la imagen.")}finally{t(3,b=!1)}},W=async M=>new Promise(se=>{const le=new Image;le.src=URL.createObjectURL(M),le.onload=()=>{const be=document.createElement("canvas"),de=be.getContext("2d"),ee=800,Ie=600;let ke=le.width,he=le.height;ke>ee&&(he*=ee/ke,ke=ee),he>Ie&&(ke*=Ie/he,he=Ie),be.width=ke,be.height=he,de.drawImage(le,0,0,ke,he),be.toBlob(pe=>{se(pe),URL.revokeObjectURL(le.src),de.clearRect(0,0,be.width,be.height)},"image/jpeg",.7)}}),R=()=>{ot.dismiss()},L=()=>{t(3,b=!0);var M=new Object;t(0,r=a.join(",")),M.id_route=o,M.comments=f.value,M.lat=v.lat,M.lng=v.lng,M.type=p,M.img=r,M.id_user_over=g.id_user,M.token=g.token,M.id_driver=g.id_driver,!p||!r||!M.comments||!M.img?(t(3,b=!1),B("Datos incompletos","Llena los datos requeridos para completar el registro")):!M.lat||!M.lng?(t(3,b=!1),B("Ubicación no disponible","Por favor, asegúrate de que la ubicación está activada en tu dispositivo.")):Xe(`${i}api/admin/incidence/add_incidence.php`,function(se){se?(t(3,b=!1),B("Éxito","Incidencia registrada correctamente")):(t(3,b=!1),B("Error","No se pudo registrar la incidencia. Por favor, inténtalo de nuevo.")),R()},M)},z=M=>{t(5,m=M),t(4,d=!0)},x=()=>{t(4,d=!1),t(5,m="")};async function I(M){t(6,p=M),t(3,b=!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(async se=>{t(7,v.lat=se.coords.latitude,v),t(7,v.lng=se.coords.longitude,v),await T()},()=>{console.log("Geolocalización denegada"),t(3,b=!1)})}async function T(){if(await Ct(),!y)return;const{Map:M}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:se}=await google.maps.importLibrary("marker");w?w.setCenter(v):w=new M(y,{zoom:15,center:v,mapId:"4504f8b37365c3d0"});const le=P.find(Ie=>Ie.id===p);if(!le)return;H&&H.setMap(null);const be=document.createElement("div");be.style.cssText=`
      display:flex;align-items:center;justify-content:center;
      width:38px;height:38px;border-radius:50%;
      background:#ffffff;border:2px solid #d13434;
      box-shadow:0 0 4px rgba(0,0,0,.3);
    `;const de=document.createElementNS("http://www.w3.org/2000/svg","svg");de.setAttribute("width","24"),de.setAttribute("height","24"),de.setAttribute("viewBox","0 0 512 512"),de.style.cssText="color:#d13434;";const ee=document.createElementNS("http://www.w3.org/2000/svg","path");ee.setAttribute("fill","currentColor"),ee.setAttribute("d",le.icon.icon[4]),de.appendChild(ee),be.appendChild(de),H=new se({map:w,position:v,title:le.label,content:be}),t(3,b=!1)}function O(M=0){var se=Pi(M,a,[""],r);t(1,a=se.files),t(0,r=se.selectedImages)}function D(M){Lt.call(this,l,M)}const Z=M=>I(M.id);function ne(M){xe[M?"unshift":"push"](()=>{y=M,t(8,y)})}function oe(M){xe[M?"unshift":"push"](()=>{f=M,t(2,f)})}return[r,a,f,b,d,m,p,v,y,P,U,R,L,z,x,I,O,D,Z,ne,oe,M=>z(M),M=>O(M)]}class ko extends et{constructor(e){super(),tt(this,e,bo,go,$e,{},null,[-1,-1])}}function hi(l,e,t){const i=l.slice();return i[7]=e[t],i}function Eo(l){let e,t="Cargar gasto",i,n;function o(...r){return l[4](l[7],...r)}return{c(){e=h("ion-button"),e.textContent=t,this.h()},l(r){e=_(r,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),ie(e)!=="svelte-175aelj"&&(e.textContent=t),this.h()},h(){E(e,"fill","outline"),E(e,"size","small"),E(e,"aria-selected","")},m(r,a){V(r,e,a),i||(n=ue(e,"click",o),i=!0)},p(r,a){l=r},d(r){r&&u(e),i=!1,n()}}}function Io(l){let e,t="Gasto completado";return{c(){e=h("ion-button"),e.textContent=t,this.h()},l(i){e=_(i,"ION-BUTTON",{fill:!0,size:!0,"aria-selected":!0,"data-svelte-h":!0}),ie(e)!=="svelte-tlger7"&&(e.textContent=t),this.h()},h(){E(e,"fill","solid"),E(e,"size","small"),E(e,"aria-selected","")},m(i,n){V(i,e,n)},p:Ce,d(i){i&&u(e)}}}function _i(l,e){let t,i,n,o=e[7].concept+"",r,a,f;function b(m,p){return m[7].status=="done"?Io:Eo}let d=b(e)(e);return{key:l,first:null,c(){t=h("ion-item"),i=h("ion-label"),n=h("p"),r=ye(o),a=N(),d.c(),f=N(),this.h()},l(m){t=_(m,"ION-ITEM",{});var p=k(t);i=_(p,"ION-LABEL",{style:!0});var v=k(i);n=_(v,"P",{style:!0});var y=k(n);r=Oe(y,o),y.forEach(u),v.forEach(u),a=C(p),d.l(p),f=C(p),p.forEach(u),this.h()},h(){c(n,"margin-left","10px"),c(i,"display","flex"),this.first=t},m(m,p){V(m,t,p),s(t,i),s(i,n),s(n,r),s(t,a),d.m(t,null),s(t,f)},p(m,p){e=m,d.p(e,p)},d(m){m&&u(t),d.d()}}}function yo(l){let e,t,i,n,o=`<ion-icon style="font-size: 25px!important;" icon="${Qi}"></ion-icon>`,r,a,f="LISTA DE GASTOS",b,g,d,m=[],p=new Map,v,y,w,H="Cerrar",P,B,U=qe(l[0]);const W=R=>R[7].id_expenses;for(let R=0;R<U.length;R+=1){let L=hi(l,U,R),z=W(L);p.set(z,m[R]=_i(z,L))}return{c(){e=h("ion-header"),t=h("ion-toolbar"),i=h("ion-buttons"),n=h("ion-button"),n.innerHTML=o,r=N(),a=h("ion-title"),a.textContent=f,b=N(),g=h("ion-content"),d=h("ion-list");for(let R=0;R<m.length;R+=1)m[R].c();v=N(),y=h("ion-footer"),w=h("ion-button"),w.textContent=H,this.h()},l(R){e=_(R,"ION-HEADER",{translucent:!0});var L=k(e);t=_(L,"ION-TOOLBAR",{});var z=k(t);i=_(z,"ION-BUTTONS",{slot:!0});var x=k(i);n=_(x,"ION-BUTTON",{color:!0,"data-svelte-h":!0}),ie(n)!=="svelte-160xz3i"&&(n.innerHTML=o),x.forEach(u),r=C(z),a=_(z,"ION-TITLE",{"data-svelte-h":!0}),ie(a)!=="svelte-1phn90x"&&(a.textContent=f),z.forEach(u),L.forEach(u),b=C(R),g=_(R,"ION-CONTENT",{fullscreen:!0});var I=k(g);d=_(I,"ION-LIST",{});var T=k(d);for(let D=0;D<m.length;D+=1)m[D].l(T);T.forEach(u),I.forEach(u),v=C(R),y=_(R,"ION-FOOTER",{});var O=k(y);w=_(O,"ION-BUTTON",{fill:!0,color:!0,strong:!0,style:!0,"data-svelte-h":!0}),ie(w)!=="svelte-zv7v83"&&(w.textContent=H),O.forEach(u),this.h()},h(){E(n,"color","medium"),E(i,"slot","end"),E(e,"translucent",""),E(g,"fullscreen",""),E(w,"fill","outline"),E(w,"color","tertiary"),E(w,"strong",""),c(w,"width","99%"),c(w,"height","auto")},m(R,L){V(R,e,L),s(e,t),s(t,i),s(i,n),s(t,r),s(t,a),V(R,b,L),V(R,g,L),s(g,d);for(let z=0;z<m.length;z+=1)m[z]&&m[z].m(d,null);V(R,v,L),V(R,y,L),s(y,w),P||(B=[ue(n,"click",l[3]),ue(w,"click",l[1])],P=!0)},p(R,[L]){L&5&&(U=qe(R[0]),m=_t(m,L,W,1,R,U,p,d,pt,_i,null,hi))},i:Ce,o:Ce,d(R){R&&(u(e),u(b),u(g),u(v),u(y));for(let L=0;L<m.length;L+=1)m[L].d();P=!1,He(B)}}}function Oo(l){let e=document.querySelector("ion-modal");e.componentProps.routeId;let t=e.componentProps.expenses;ct(()=>{});const i=()=>{ot.dismiss()};function n(a,f,b,g,d){e.componentProps.ex_amount=b,e.componentProps.ex_concept=f,e.componentProps.ex_type=g,e.componentProps.id_expense=d,Qe("modal-expense",Ot,{amount:b,concept:f,type:g,id_expense:d}).then(()=>{}),i()}return[t,i,n,a=>{Qe("modal-expense",Ot,{routeId:a}).then(f=>{}),i()},(a,f)=>n(f,a.concept,a.amount,a.type,a.id_expenses)]}class wo extends et{constructor(e){super(),tt(this,e,Oo,yo,$e,{})}}const{document:pi}=an;function mi(l,e,t){const i=l.slice();return i[63]=e[t],i[65]=t,i}function vi(l,e,t){const i=l.slice();return i[63]=e[t],i[65]=t,i}function gi(l,e,t){const i=l.slice();return i[63]=e[t],i[65]=t,i}function bi(l){let e,t;return e=new Zi({props:{$$slots:{default:[Uo]},$$scope:{ctx:l}}}),{c(){Mt(e.$$.fragment)},l(i){St(e.$$.fragment,i)},m(i,n){At(e,i,n),t=!0},p(i,n){const o={};n[0]&6139|n[2]&64&&(o.$$scope={dirty:n,ctx:i}),e.$set(o)},i(i){t||(nt(e.$$.fragment,i),t=!0)},o(i){at(e.$$.fragment,i),t=!1},d(i){Pt(e,i)}}}function No(l){let e,t='<div id="g_map" style="width: 100%; height: 100vh;"></div>';return{c(){e=h("ion-content"),e.innerHTML=t},l(i){e=_(i,"ION-CONTENT",{"data-svelte-h":!0}),ie(e)!=="svelte-h8v4nk"&&(e.innerHTML=t)},m(i,n){V(i,e,n)},p:Ce,d(i){i&&u(e)}}}function Co(l){let e,t=l[9]==="list"&&l[12]&&l[14](),i;function n(f,b){if(f[7].length>0)return Lo;if(!f[3])return To}let o=n(l),r=o&&o(l),a=t&&Ci(l);return{c(){r&&r.c(),e=N(),a&&a.c(),i=Be()},l(f){r&&r.l(f),e=C(f),a&&a.l(f),i=Be()},m(f,b){r&&r.m(f,b),V(f,e,b),a&&a.m(f,b),V(f,i,b)},p(f,b){o===(o=n(f))&&r?r.p(f,b):(r&&r.d(1),r=o&&o(f),r&&(r.c(),r.m(e.parentNode,e))),b[0]&4608&&(t=f[9]==="list"&&f[12]&&f[14]()),t?a?a.p(f,b):(a=Ci(f),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},d(f){f&&(u(e),u(i)),r&&r.d(f),a&&a.d(f)}}}function To(l){let e,t,i,n='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jala para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',o,r,a,f,b,g,d="0",m,p,v,y,w,H=l[6].origin+"",P,B,U,W,R,L,z=[],x=new Map,I,T,O,D,Z,ne=l[5].length+1+"",oe,re,me,M,se,le,be=l[6].destination+"",de,ee,Ie,ke="",he,pe,Te,Ee,ve=l[4]&&ki(),J=qe(l[5]);const X=A=>A[63].id_event;for(let A=0;A<J.length;A+=1){let $=mi(l,J,A),j=X($);x.set(j,z[A]=Ii(j,$))}return{c(){ve&&ve.c(),e=N(),t=h("ion-content"),i=h("ion-refresher"),i.innerHTML=n,o=N(),r=h("ion-list"),a=h("ion-item"),f=h("ion-avatar"),b=h("div"),g=h("div"),g.textContent=d,p=N(),v=h("ion-label"),y=h("ion-text"),w=h("h3"),P=ye(H),B=N(),U=h("div"),W=N(),R=h("ion-icon"),L=N();for(let A=0;A<z.length;A+=1)z[A].c();I=N(),T=h("ion-item"),O=h("ion-avatar"),D=h("div"),Z=h("div"),oe=ye(ne),me=N(),M=h("ion-label"),se=h("ion-text"),le=h("h3"),de=ye(be),ee=N(),Ie=h("div"),Ie.innerHTML=ke,he=N(),pe=h("ion-icon"),this.h()},l(A){ve&&ve.l(A),e=C(A),t=_(A,"ION-CONTENT",{});var $=k(t);i=_($,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),ie(i)!=="svelte-1mlmyg"&&(i.innerHTML=n),o=C($),r=_($,"ION-LIST",{});var j=k(r);a=_(j,"ION-ITEM",{});var _e=k(a);f=_(_e,"ION-AVATAR",{slot:!0});var Se=k(f);b=_(Se,"DIV",{class:!0,title:!0,style:!0});var Me=k(b);g=_(Me,"DIV",{class:!0,"data-svelte-h":!0}),ie(g)!=="svelte-b78non"&&(g.textContent=d),Me.forEach(u),Se.forEach(u),p=C(_e),v=_(_e,"ION-LABEL",{button:!0});var Ae=k(v);y=_(Ae,"ION-TEXT",{color:!0});var Le=k(y);w=_(Le,"H3",{});var q=k(w);P=Oe(q,H),q.forEach(u),Le.forEach(u),B=C(Ae),U=_(Ae,"DIV",{class:!0}),k(U).forEach(u),Ae.forEach(u),W=C(_e),R=_(_e,"ION-ICON",{icon:!0,slot:!0}),k(R).forEach(u),_e.forEach(u),L=C(j);for(let ae=0;ae<z.length;ae+=1)z[ae].l(j);I=C(j),T=_(j,"ION-ITEM",{});var ce=k(T);O=_(ce,"ION-AVATAR",{slot:!0});var F=k(O);D=_(F,"DIV",{class:!0,title:!0,style:!0});var K=k(D);Z=_(K,"DIV",{class:!0});var Y=k(Z);oe=Oe(Y,ne),Y.forEach(u),K.forEach(u),F.forEach(u),me=C(ce),M=_(ce,"ION-LABEL",{button:!0});var Q=k(M);se=_(Q,"ION-TEXT",{color:!0});var ge=k(se);le=_(ge,"H3",{});var G=k(le);de=Oe(G,be),G.forEach(u),ge.forEach(u),ee=C(Q),Ie=_(Q,"DIV",{class:!0,"data-svelte-h":!0}),ie(Ie)!=="svelte-1284run"&&(Ie.innerHTML=ke),Q.forEach(u),he=C(ce),pe=_(ce,"ION-ICON",{icon:!0,slot:!0}),k(pe).forEach(u),ce.forEach(u),j.forEach(u),$.forEach(u),this.h()},h(){E(i,"slot","fixed"),S(g,"class","order svelte-1ita8l7"),S(b,"class","order-wrapper svelte-1ita8l7"),S(b,"title",m="$"+l[6].origin),c(b,"background-color",l[6].color),c(b,"color",ze(l[6].color)),E(f,"slot","start"),E(y,"color","#2e2e2e"),S(U,"class","sub svelte-1ita8l7"),E(v,"button",""),E(R,"icon",Ye),E(R,"slot","end"),S(Z,"class","order svelte-1ita8l7"),S(D,"class","order-wrapper svelte-1ita8l7"),S(D,"title",re="$"+l[6].destination),c(D,"background-color",l[6].color),c(D,"color",ze(l[6].color)),E(O,"slot","start"),E(se,"color","#2e2e2e"),S(Ie,"class","sub svelte-1ita8l7"),E(M,"button",""),E(pe,"icon",Ye),E(pe,"slot","end")},m(A,$){ve&&ve.m(A,$),V(A,e,$),V(A,t,$),s(t,i),l[36](i),s(t,o),s(t,r),s(r,a),s(a,f),s(f,b),s(b,g),s(a,p),s(a,v),s(v,y),s(y,w),s(w,P),s(v,B),s(v,U),s(a,W),s(a,R),s(r,L);for(let j=0;j<z.length;j+=1)z[j]&&z[j].m(r,null);s(r,I),s(r,T),s(T,O),s(O,D),s(D,Z),s(Z,oe),s(T,me),s(T,M),s(M,se),s(se,le),s(le,de),s(M,ee),s(M,Ie),s(T,he),s(T,pe),Te||(Ee=[ue(i,"ionRefresh",l[13]),ue(v,"click",l[37]),ue(M,"click",l[39])],Te=!0)},p(A,$){A[4]?ve||(ve=ki(),ve.c(),ve.m(e.parentNode,e)):ve&&(ve.d(1),ve=null),$[0]&64&&m!==(m="$"+A[6].origin)&&S(b,"title",m),$[0]&64&&c(b,"background-color",A[6].color),$[0]&64&&c(b,"color",ze(A[6].color)),$[0]&64&&H!==(H=A[6].origin+"")&&Pe(P,H),$[0]&10552352&&(J=qe(A[5]),z=_t(z,$,X,1,A,J,x,r,pt,Ii,I,mi)),$[0]&32&&ne!==(ne=A[5].length+1+"")&&Pe(oe,ne),$[0]&64&&re!==(re="$"+A[6].destination)&&S(D,"title",re),$[0]&64&&c(D,"background-color",A[6].color),$[0]&64&&c(D,"color",ze(A[6].color)),$[0]&64&&be!==(be=A[6].destination+"")&&Pe(de,be)},d(A){A&&(u(e),u(t)),ve&&ve.d(A),l[36](null);for(let $=0;$<z.length;$+=1)z[$].d();Te=!1,He(Ee)}}}function Lo(l){let e,t;function i(r,a){return a[0]&144&&(e=null),e==null&&(e=!!(r[7].filter(Ro).every(Fo)&&!r[4])),e?Po:Ao}let n=i(l,[-1,-1,-1]),o=n(l);return{c(){o.c(),t=Be()},l(r){o.l(r),t=Be()},m(r,a){o.m(r,a),V(r,t,a)},p(r,a){n===(n=i(r,a))&&o?o.p(r,a):(o.d(1),o=n(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&u(t),o.d(r)}}}function ki(l){return{c:Ce,l:Ce,m:Ce,d:Ce}}function Ei(l){let e;return{c(){e=h("span"),this.h()},l(t){e=_(t,"SPAN",{class:!0}),k(e).forEach(u),this.h()},h(){S(e,"class","notes svelte-1ita8l7")},m(t,i){V(t,e,i)},d(t){t&&u(e)}}}function Mo(l){let e;return{c(){e=h("ion-icon"),this.h()},l(t){e=_(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),k(e).forEach(u),this.h()},h(){E(e,"icon",Ye),E(e,"slot","end"),c(e,"color",Ue(l[63].status,l[63].date_service))},m(t,i){V(t,e,i)},p(t,i){i[0]&32&&c(e,"color",Ue(t[63].status,t[63].date_service))},d(t){t&&u(e)}}}function So(l){let e,t=(l[63].tag?l[63].tag:"")+"",i;return{c(){e=h("div"),i=ye(t),this.h()},l(n){e=_(n,"DIV",{class:!0,slot:!0,style:!0});var o=k(e);i=Oe(o,t),o.forEach(u),this.h()},h(){S(e,"class","stop-tag"),S(e,"slot","end"),c(e,"background-color",Ke(l[63].tag_color,.3)),c(e,"border","1px solid "+Ke(l[63].tag_color,.4)),c(e,"color",l[63].tag_color),c(e,"font-size","10px"),c(e,"text-align","center"),c(e,"align-content","center"),c(e,"border-radius","20px"),c(e,"white-space","normal"),c(e,"padding","3px 6px"),c(e,"width","auto",1),c(e,"display","inline-block"),c(e,"font-weight","500")},m(n,o){V(n,e,o),s(e,i)},p(n,o){o[0]&32&&t!==(t=(n[63].tag?n[63].tag:"")+"")&&Pe(i,t),o[0]&32&&c(e,"background-color",Ke(n[63].tag_color,.3)),o[0]&32&&c(e,"border","1px solid "+Ke(n[63].tag_color,.4)),o[0]&32&&c(e,"color",n[63].tag_color)},d(n){n&&u(e)}}}function Ii(l,e){let t,i,n,o,r=parseInt(e[63].pos)+1+"",a,f,b,g,d,m,p=e[63].title+"",v,y,w=e[63].support_list&&e[63].support_list.length||e[21](e[63]),H,P,B,U=w&&Ei();function W(){return e[38](e[63])}function R(x,I){return x[63].tag_color&&x[63].tag?So:Mo}let L=R(e),z=L(e);return{key:l,first:null,c(){t=h("ion-item"),i=h("ion-avatar"),n=h("div"),o=h("div"),a=ye(r),b=N(),g=h("ion-label"),d=h("ion-text"),m=h("h3"),v=ye(p),y=N(),U&&U.c(),H=N(),z.c(),this.h()},l(x){t=_(x,"ION-ITEM",{});var I=k(t);i=_(I,"ION-AVATAR",{slot:!0});var T=k(i);n=_(T,"DIV",{class:!0,title:!0,style:!0});var O=k(n);o=_(O,"DIV",{class:!0});var D=k(o);a=Oe(D,r),D.forEach(u),O.forEach(u),T.forEach(u),b=C(I),g=_(I,"ION-LABEL",{button:!0});var Z=k(g);d=_(Z,"ION-TEXT",{color:!0});var ne=k(d);m=_(ne,"H3",{});var oe=k(m);v=Oe(oe,p),y=C(oe),U&&U.l(oe),oe.forEach(u),ne.forEach(u),Z.forEach(u),H=C(I),z.l(I),I.forEach(u),this.h()},h(){S(o,"class","order svelte-1ita8l7"),S(n,"class","order-wrapper svelte-1ita8l7"),S(n,"title",f=ft(e[63].status)),c(n,"background-color",Ue(e[63].status,e[63].date_service)),c(n,"color",ze(Ue(e[63].status))),E(i,"slot","start"),E(d,"color","#2e2e2e"),E(g,"button",""),this.first=t},m(x,I){V(x,t,I),s(t,i),s(i,n),s(n,o),s(o,a),s(t,b),s(t,g),s(g,d),s(d,m),s(m,v),s(m,y),U&&U.m(m,null),s(t,H),z.m(t,null),P||(B=ue(g,"click",W),P=!0)},p(x,I){e=x,I[0]&32&&r!==(r=parseInt(e[63].pos)+1+"")&&Pe(a,r),I[0]&32&&f!==(f=ft(e[63].status))&&S(n,"title",f),I[0]&32&&c(n,"background-color",Ue(e[63].status,e[63].date_service)),I[0]&32&&c(n,"color",ze(Ue(e[63].status))),I[0]&32&&p!==(p=e[63].title+"")&&Pe(v,p),I[0]&32&&(w=e[63].support_list&&e[63].support_list.length||e[21](e[63])),w?U||(U=Ei(),U.c(),U.m(m,null)):U&&(U.d(1),U=null),L===(L=R(e))&&z?z.p(e,I):(z.d(1),z=L(e),z&&(z.c(),z.m(t,null)))},d(x){x&&u(t),U&&U.d(),z.d(),P=!1,B()}}}function Ao(l){let e,t,i='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Pull to refresh" refreshing-spinner="circles" refreshing-text="Refreshing..."></ion-refresher-content>',n,o,r,a,f,b,g="0",d,m,p,v,y,w=l[6].origin+"",H,P,B,U,W,R,L=[],z=new Map,x,I,T,O,D,Z=l[5].length+1+"",ne,oe,re,me,M,se,le=l[6].destination+"",be,de,ee,Ie="",ke,he,pe,Te,Ee=qe(l[5]);const ve=J=>J[63].id_event;for(let J=0;J<Ee.length;J+=1){let X=vi(l,Ee,J),A=ve(X);z.set(A,L[J]=Oi(A,X))}return{c(){e=h("ion-content"),t=h("ion-refresher"),t.innerHTML=i,n=N(),o=h("ion-list"),r=h("ion-item"),a=h("ion-avatar"),f=h("div"),b=h("div"),b.textContent=g,m=N(),p=h("ion-label"),v=h("ion-text"),y=h("h3"),H=ye(w),P=N(),B=h("div"),U=N(),W=h("ion-icon"),R=N();for(let J=0;J<L.length;J+=1)L[J].c();x=N(),I=h("ion-item"),T=h("ion-avatar"),O=h("div"),D=h("div"),ne=ye(Z),re=N(),me=h("ion-label"),M=h("ion-text"),se=h("h3"),be=ye(le),de=N(),ee=h("div"),ee.innerHTML=Ie,ke=N(),he=h("ion-icon"),this.h()},l(J){e=_(J,"ION-CONTENT",{});var X=k(e);t=_(X,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),ie(t)!=="svelte-1l8nqqz"&&(t.innerHTML=i),n=C(X),o=_(X,"ION-LIST",{});var A=k(o);r=_(A,"ION-ITEM",{});var $=k(r);a=_($,"ION-AVATAR",{slot:!0});var j=k(a);f=_(j,"DIV",{class:!0,title:!0,style:!0});var _e=k(f);b=_(_e,"DIV",{class:!0,"data-svelte-h":!0}),ie(b)!=="svelte-b78non"&&(b.textContent=g),_e.forEach(u),j.forEach(u),m=C($),p=_($,"ION-LABEL",{button:!0});var Se=k(p);v=_(Se,"ION-TEXT",{color:!0});var Me=k(v);y=_(Me,"H3",{});var Ae=k(y);H=Oe(Ae,w),Ae.forEach(u),Me.forEach(u),P=C(Se),B=_(Se,"DIV",{class:!0}),k(B).forEach(u),Se.forEach(u),U=C($),W=_($,"ION-ICON",{icon:!0,slot:!0}),k(W).forEach(u),$.forEach(u),R=C(A);for(let ge=0;ge<L.length;ge+=1)L[ge].l(A);x=C(A),I=_(A,"ION-ITEM",{});var Le=k(I);T=_(Le,"ION-AVATAR",{slot:!0});var q=k(T);O=_(q,"DIV",{class:!0,title:!0,style:!0});var ce=k(O);D=_(ce,"DIV",{class:!0});var F=k(D);ne=Oe(F,Z),F.forEach(u),ce.forEach(u),q.forEach(u),re=C(Le),me=_(Le,"ION-LABEL",{button:!0});var K=k(me);M=_(K,"ION-TEXT",{color:!0});var Y=k(M);se=_(Y,"H3",{});var Q=k(se);be=Oe(Q,le),Q.forEach(u),Y.forEach(u),de=C(K),ee=_(K,"DIV",{class:!0,"data-svelte-h":!0}),ie(ee)!=="svelte-1uxrbi7"&&(ee.innerHTML=Ie),K.forEach(u),ke=C(Le),he=_(Le,"ION-ICON",{icon:!0,slot:!0}),k(he).forEach(u),Le.forEach(u),A.forEach(u),X.forEach(u),this.h()},h(){E(t,"slot","fixed"),S(b,"class","order svelte-1ita8l7"),S(f,"class","order-wrapper svelte-1ita8l7"),S(f,"title",d="$"+l[6].origin),c(f,"background-color",l[6].color),c(f,"color",ze(l[6].color)),E(a,"slot","start"),E(v,"color","#2e2e2e"),S(B,"class","sub svelte-1ita8l7"),E(p,"button",""),E(W,"icon",Ye),E(W,"slot","end"),S(D,"class","order svelte-1ita8l7"),S(O,"class","order-wrapper svelte-1ita8l7"),S(O,"title",oe="$"+l[6].destination),c(O,"background-color",l[6].color),c(O,"color",ze(l[6].color)),E(T,"slot","start"),E(M,"color","#2e2e2e"),S(ee,"class","sub svelte-1ita8l7"),E(me,"button",""),E(he,"icon",Ye),E(he,"slot","end")},m(J,X){V(J,e,X),s(e,t),l[32](t),s(e,n),s(e,o),s(o,r),s(r,a),s(a,f),s(f,b),s(r,m),s(r,p),s(p,v),s(v,y),s(y,H),s(p,P),s(p,B),s(r,U),s(r,W),s(o,R);for(let A=0;A<L.length;A+=1)L[A]&&L[A].m(o,null);s(o,x),s(o,I),s(I,T),s(T,O),s(O,D),s(D,ne),s(I,re),s(I,me),s(me,M),s(M,se),s(se,be),s(me,de),s(me,ee),s(I,ke),s(I,he),pe||(Te=[ue(t,"ionRefresh",l[13]),ue(p,"click",l[33]),ue(me,"click",l[35])],pe=!0)},p(J,X){X[0]&64&&d!==(d="$"+J[6].origin)&&S(f,"title",d),X[0]&64&&c(f,"background-color",J[6].color),X[0]&64&&c(f,"color",ze(J[6].color)),X[0]&64&&w!==(w=J[6].origin+"")&&Pe(H,w),X[0]&10552352&&(Ee=qe(J[5]),L=_t(L,X,ve,1,J,Ee,z,o,pt,Oi,x,vi)),X[0]&32&&Z!==(Z=J[5].length+1+"")&&Pe(ne,Z),X[0]&64&&oe!==(oe="$"+J[6].destination)&&S(O,"title",oe),X[0]&64&&c(O,"background-color",J[6].color),X[0]&64&&c(O,"color",ze(J[6].color)),X[0]&64&&le!==(le=J[6].destination+"")&&Pe(be,le)},d(J){J&&u(e),l[32](null);for(let X=0;X<L.length;X+=1)L[X].d();pe=!1,He(Te)}}}function Po(l){let e,t,i='<ion-refresher-content pulling-icon="arrow-dropdown" pulling-text="Jale para actualizar" refreshing-spinner="circles" refreshing-text="Actualizando..."></ion-refresher-content>',n,o,r,a,f,b,g="0",d,m,p,v,y,w=l[6].origin+"",H,P,B,U,W,R,L=[],z=new Map,x,I,T,O,D,Z=l[5].length+1+"",ne,oe,re,me,M,se,le=l[6].destination+"",be,de,ee,Ie="",ke,he,pe,Te,Ee=qe(l[5]);const ve=J=>J[63].id_event;for(let J=0;J<Ee.length;J+=1){let X=gi(l,Ee,J),A=ve(X);z.set(A,L[J]=Ni(A,X))}return{c(){e=h("ion-content"),t=h("ion-refresher"),t.innerHTML=i,n=N(),o=h("ion-list"),r=h("ion-item"),a=h("ion-avatar"),f=h("div"),b=h("div"),b.textContent=g,m=N(),p=h("ion-label"),v=h("ion-text"),y=h("h3"),H=ye(w),P=N(),B=h("div"),U=N(),W=h("ion-icon"),R=N();for(let J=0;J<L.length;J+=1)L[J].c();x=N(),I=h("ion-item"),T=h("ion-avatar"),O=h("div"),D=h("div"),ne=ye(Z),re=N(),me=h("ion-label"),M=h("ion-text"),se=h("h3"),be=ye(le),de=N(),ee=h("div"),ee.innerHTML=Ie,ke=N(),he=h("ion-icon"),this.h()},l(J){e=_(J,"ION-CONTENT",{});var X=k(e);t=_(X,"ION-REFRESHER",{slot:!0,"data-svelte-h":!0}),ie(t)!=="svelte-vjbhg4"&&(t.innerHTML=i),n=C(X),o=_(X,"ION-LIST",{});var A=k(o);r=_(A,"ION-ITEM",{});var $=k(r);a=_($,"ION-AVATAR",{slot:!0});var j=k(a);f=_(j,"DIV",{class:!0,title:!0,style:!0});var _e=k(f);b=_(_e,"DIV",{class:!0,"data-svelte-h":!0}),ie(b)!=="svelte-b78non"&&(b.textContent=g),_e.forEach(u),j.forEach(u),m=C($),p=_($,"ION-LABEL",{button:!0});var Se=k(p);v=_(Se,"ION-TEXT",{color:!0});var Me=k(v);y=_(Me,"H3",{});var Ae=k(y);H=Oe(Ae,w),Ae.forEach(u),Me.forEach(u),P=C(Se),B=_(Se,"DIV",{class:!0}),k(B).forEach(u),Se.forEach(u),U=C($),W=_($,"ION-ICON",{icon:!0,slot:!0}),k(W).forEach(u),$.forEach(u),R=C(A);for(let ge=0;ge<L.length;ge+=1)L[ge].l(A);x=C(A),I=_(A,"ION-ITEM",{});var Le=k(I);T=_(Le,"ION-AVATAR",{slot:!0});var q=k(T);O=_(q,"DIV",{class:!0,title:!0,style:!0});var ce=k(O);D=_(ce,"DIV",{class:!0});var F=k(D);ne=Oe(F,Z),F.forEach(u),ce.forEach(u),q.forEach(u),re=C(Le),me=_(Le,"ION-LABEL",{button:!0});var K=k(me);M=_(K,"ION-TEXT",{color:!0});var Y=k(M);se=_(Y,"H3",{});var Q=k(se);be=Oe(Q,le),Q.forEach(u),Y.forEach(u),de=C(K),ee=_(K,"DIV",{class:!0,"data-svelte-h":!0}),ie(ee)!=="svelte-1uxrbi7"&&(ee.innerHTML=Ie),K.forEach(u),ke=C(Le),he=_(Le,"ION-ICON",{icon:!0,slot:!0}),k(he).forEach(u),Le.forEach(u),A.forEach(u),X.forEach(u),this.h()},h(){E(t,"slot","fixed"),S(b,"class","order svelte-1ita8l7"),S(f,"class","order-wrapper svelte-1ita8l7"),S(f,"title",d="$"+l[6].origin),c(f,"background-color",l[6].color),c(f,"color",ze(l[6].color)),E(a,"slot","start"),E(v,"color","#2e2e2e"),S(B,"class","sub svelte-1ita8l7"),E(p,"button",""),E(W,"icon",Ye),E(W,"slot","end"),S(D,"class","order svelte-1ita8l7"),S(O,"class","order-wrapper svelte-1ita8l7"),S(O,"title",oe="$"+l[6].destination),c(O,"background-color",l[6].color),c(O,"color",ze(l[6].color)),E(T,"slot","start"),E(M,"color","#2e2e2e"),S(ee,"class","sub svelte-1ita8l7"),E(me,"button",""),E(he,"icon",Ye),E(he,"slot","end")},m(J,X){V(J,e,X),s(e,t),l[28](t),s(e,n),s(e,o),s(o,r),s(r,a),s(a,f),s(f,b),s(r,m),s(r,p),s(p,v),s(v,y),s(y,H),s(p,P),s(p,B),s(r,U),s(r,W),s(o,R);for(let A=0;A<L.length;A+=1)L[A]&&L[A].m(o,null);s(o,x),s(o,I),s(I,T),s(T,O),s(O,D),s(D,ne),s(I,re),s(I,me),s(me,M),s(M,se),s(se,be),s(me,de),s(me,ee),s(I,ke),s(I,he),pe||(Te=[ue(t,"ionRefresh",l[13]),ue(p,"click",l[29]),ue(me,"click",l[31])],pe=!0)},p(J,X){X[0]&64&&d!==(d="$"+J[6].origin)&&S(f,"title",d),X[0]&64&&c(f,"background-color",J[6].color),X[0]&64&&c(f,"color",ze(J[6].color)),X[0]&64&&w!==(w=J[6].origin+"")&&Pe(H,w),X[0]&10552352&&(Ee=qe(J[5]),L=_t(L,X,ve,1,J,Ee,z,o,pt,Ni,x,gi)),X[0]&32&&Z!==(Z=J[5].length+1+"")&&Pe(ne,Z),X[0]&64&&oe!==(oe="$"+J[6].destination)&&S(O,"title",oe),X[0]&64&&c(O,"background-color",J[6].color),X[0]&64&&c(O,"color",ze(J[6].color)),X[0]&64&&le!==(le=J[6].destination+"")&&Pe(be,le)},d(J){J&&u(e),l[28](null);for(let X=0;X<L.length;X+=1)L[X].d();pe=!1,He(Te)}}}function yi(l){let e;return{c(){e=h("span"),this.h()},l(t){e=_(t,"SPAN",{class:!0}),k(e).forEach(u),this.h()},h(){S(e,"class","notes svelte-1ita8l7")},m(t,i){V(t,e,i)},d(t){t&&u(e)}}}function Do(l){let e;return{c(){e=h("ion-icon"),this.h()},l(t){e=_(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),k(e).forEach(u),this.h()},h(){E(e,"icon",Ye),E(e,"slot","end"),c(e,"color",Ue(l[63].status,l[63].date_service))},m(t,i){V(t,e,i)},p(t,i){i[0]&32&&c(e,"color",Ue(t[63].status,t[63].date_service))},d(t){t&&u(e)}}}function Bo(l){let e,t=(l[63].tag?l[63].tag:"")+"",i;return{c(){e=h("div"),i=ye(t),this.h()},l(n){e=_(n,"DIV",{class:!0,slot:!0,style:!0});var o=k(e);i=Oe(o,t),o.forEach(u),this.h()},h(){S(e,"class","stop-tag"),S(e,"slot","end"),c(e,"background-color",Ke(l[63].tag_color,.3)),c(e,"border","1px solid "+Ke(l[63].tag_color,.4)),c(e,"color",l[63].tag_color),c(e,"font-size","10px"),c(e,"text-align","center"),c(e,"align-content","center"),c(e,"border-radius","20px"),c(e,"white-space","normal"),c(e,"padding","3px 6px"),c(e,"width","auto",1),c(e,"display","inline-block"),c(e,"font-weight","500")},m(n,o){V(n,e,o),s(e,i)},p(n,o){o[0]&32&&t!==(t=(n[63].tag?n[63].tag:"")+"")&&Pe(i,t),o[0]&32&&c(e,"background-color",Ke(n[63].tag_color,.3)),o[0]&32&&c(e,"border","1px solid "+Ke(n[63].tag_color,.4)),o[0]&32&&c(e,"color",n[63].tag_color)},d(n){n&&u(e)}}}function Oi(l,e){let t,i,n,o,r=parseInt(e[63].pos)+1+"",a,f,b,g,d,m,p=e[63].title+"",v,y,w=e[63].support_list&&e[63].support_list.length||e[21](e[63]),H,P,B="",U,W,R,L=w&&yi();function z(){return e[34](e[63])}function x(O,D){return O[63].tag_color&&O[63].tag?Bo:Do}let I=x(e),T=I(e);return{key:l,first:null,c(){t=h("ion-item"),i=h("ion-avatar"),n=h("div"),o=h("div"),a=ye(r),b=N(),g=h("ion-label"),d=h("ion-text"),m=h("h3"),v=ye(p),y=N(),L&&L.c(),H=N(),P=h("div"),P.innerHTML=B,U=N(),T.c(),this.h()},l(O){t=_(O,"ION-ITEM",{});var D=k(t);i=_(D,"ION-AVATAR",{slot:!0});var Z=k(i);n=_(Z,"DIV",{class:!0,title:!0,style:!0});var ne=k(n);o=_(ne,"DIV",{class:!0});var oe=k(o);a=Oe(oe,r),oe.forEach(u),ne.forEach(u),Z.forEach(u),b=C(D),g=_(D,"ION-LABEL",{button:!0});var re=k(g);d=_(re,"ION-TEXT",{color:!0});var me=k(d);m=_(me,"H3",{});var M=k(m);v=Oe(M,p),y=C(M),L&&L.l(M),M.forEach(u),me.forEach(u),H=C(re),P=_(re,"DIV",{class:!0,"data-svelte-h":!0}),ie(P)!=="svelte-4k5p1b"&&(P.innerHTML=B),re.forEach(u),U=C(D),T.l(D),D.forEach(u),this.h()},h(){S(o,"class","order svelte-1ita8l7"),S(n,"class","order-wrapper svelte-1ita8l7"),S(n,"title",f=ft(e[63].status)),c(n,"background-color",Ue(e[63].status,e[63].date_service)),c(n,"color",ze(Ue(e[63].status))),E(i,"slot","start"),E(d,"color","#2e2e2e"),S(P,"class","sub svelte-1ita8l7"),E(g,"button",""),this.first=t},m(O,D){V(O,t,D),s(t,i),s(i,n),s(n,o),s(o,a),s(t,b),s(t,g),s(g,d),s(d,m),s(m,v),s(m,y),L&&L.m(m,null),s(g,H),s(g,P),s(t,U),T.m(t,null),W||(R=ue(g,"click",z),W=!0)},p(O,D){e=O,D[0]&32&&r!==(r=parseInt(e[63].pos)+1+"")&&Pe(a,r),D[0]&32&&f!==(f=ft(e[63].status))&&S(n,"title",f),D[0]&32&&c(n,"background-color",Ue(e[63].status,e[63].date_service)),D[0]&32&&c(n,"color",ze(Ue(e[63].status))),D[0]&32&&p!==(p=e[63].title+"")&&Pe(v,p),D[0]&32&&(w=e[63].support_list&&e[63].support_list.length||e[21](e[63])),w?L||(L=yi(),L.c(),L.m(m,null)):L&&(L.d(1),L=null),I===(I=x(e))&&T?T.p(e,D):(T.d(1),T=I(e),T&&(T.c(),T.m(t,null)))},d(O){O&&u(t),L&&L.d(),T.d(),W=!1,R()}}}function wi(l){let e;return{c(){e=h("span"),this.h()},l(t){e=_(t,"SPAN",{class:!0}),k(e).forEach(u),this.h()},h(){S(e,"class","notes svelte-1ita8l7")},m(t,i){V(t,e,i)},d(t){t&&u(e)}}}function xo(l){let e;return{c(){e=h("ion-icon"),this.h()},l(t){e=_(t,"ION-ICON",{icon:!0,slot:!0,style:!0}),k(e).forEach(u),this.h()},h(){E(e,"icon",Ye),E(e,"slot","end"),c(e,"color",Ue(l[63].status,l[63].date_service))},m(t,i){V(t,e,i)},p(t,i){i[0]&32&&c(e,"color",Ue(t[63].status,t[63].date_service))},d(t){t&&u(e)}}}function zo(l){let e,t=(l[63].tag?l[63].tag:"")+"",i;return{c(){e=h("div"),i=ye(t),this.h()},l(n){e=_(n,"DIV",{class:!0,slot:!0,style:!0});var o=k(e);i=Oe(o,t),o.forEach(u),this.h()},h(){S(e,"class","stop-tag"),S(e,"slot","end"),c(e,"background-color",Ke(l[63].tag_color,.3)),c(e,"border","1px solid "+Ke(l[63].tag_color,.4)),c(e,"color",l[63].tag_color),c(e,"font-size","10px"),c(e,"text-align","center"),c(e,"align-content","center"),c(e,"border-radius","20px"),c(e,"white-space","normal"),c(e,"padding","3px 6px"),c(e,"width","auto",1),c(e,"display","inline-block"),c(e,"font-weight","500")},m(n,o){V(n,e,o),s(e,i)},p(n,o){o[0]&32&&t!==(t=(n[63].tag?n[63].tag:"")+"")&&Pe(i,t),o[0]&32&&c(e,"background-color",Ke(n[63].tag_color,.3)),o[0]&32&&c(e,"border","1px solid "+Ke(n[63].tag_color,.4)),o[0]&32&&c(e,"color",n[63].tag_color)},d(n){n&&u(e)}}}function Ni(l,e){let t,i,n,o,r=parseInt(e[63].pos)+1+"",a,f,b,g,d,m,p=e[63].title+"",v,y,w=e[63].support_list&&e[63].support_list.length||e[21](e[63]),H,P,B="",U,W,R,L=w&&wi();function z(){return e[30](e[63])}function x(O,D){return O[63].tag_color&&O[63].tag?zo:xo}let I=x(e),T=I(e);return{key:l,first:null,c(){t=h("ion-item"),i=h("ion-avatar"),n=h("div"),o=h("div"),a=ye(r),b=N(),g=h("ion-label"),d=h("ion-text"),m=h("h3"),v=ye(p),y=N(),L&&L.c(),H=N(),P=h("div"),P.innerHTML=B,U=N(),T.c(),this.h()},l(O){t=_(O,"ION-ITEM",{});var D=k(t);i=_(D,"ION-AVATAR",{slot:!0});var Z=k(i);n=_(Z,"DIV",{class:!0,title:!0,style:!0});var ne=k(n);o=_(ne,"DIV",{class:!0});var oe=k(o);a=Oe(oe,r),oe.forEach(u),ne.forEach(u),Z.forEach(u),b=C(D),g=_(D,"ION-LABEL",{button:!0});var re=k(g);d=_(re,"ION-TEXT",{color:!0});var me=k(d);m=_(me,"H3",{});var M=k(m);v=Oe(M,p),y=C(M),L&&L.l(M),M.forEach(u),me.forEach(u),H=C(re),P=_(re,"DIV",{class:!0,"data-svelte-h":!0}),ie(P)!=="svelte-4k5p1b"&&(P.innerHTML=B),re.forEach(u),U=C(D),T.l(D),D.forEach(u),this.h()},h(){S(o,"class","order svelte-1ita8l7"),S(n,"class","order-wrapper svelte-1ita8l7"),S(n,"title",f=ft(e[63].status)),c(n,"background-color",Ue(e[63].status,e[63].date_service)),c(n,"color",ze(Ue(e[63].status))),E(i,"slot","start"),E(d,"color","#2e2e2e"),S(P,"class","sub svelte-1ita8l7"),E(g,"button",""),this.first=t},m(O,D){V(O,t,D),s(t,i),s(i,n),s(n,o),s(o,a),s(t,b),s(t,g),s(g,d),s(d,m),s(m,v),s(m,y),L&&L.m(m,null),s(g,H),s(g,P),s(t,U),T.m(t,null),W||(R=ue(g,"click",z),W=!0)},p(O,D){e=O,D[0]&32&&r!==(r=parseInt(e[63].pos)+1+"")&&Pe(a,r),D[0]&32&&f!==(f=ft(e[63].status))&&S(n,"title",f),D[0]&32&&c(n,"background-color",Ue(e[63].status,e[63].date_service)),D[0]&32&&c(n,"color",ze(Ue(e[63].status))),D[0]&32&&p!==(p=e[63].title+"")&&Pe(v,p),D[0]&32&&(w=e[63].support_list&&e[63].support_list.length||e[21](e[63])),w?L||(L=wi(),L.c(),L.m(m,null)):L&&(L.d(1),L=null),I===(I=x(e))&&T?T.p(e,D):(T.d(1),T=I(e),T&&(T.c(),T.m(t,null)))},d(O){O&&u(t),L&&L.d(),T.d(),W=!1,R()}}}function Ci(l){let e,t,i,n="Iniciar ruta",o,r;return{c(){e=h("ion-footer"),t=h("ion-toolbar"),i=h("ion-button"),i.textContent=n,this.h()},l(a){e=_(a,"ION-FOOTER",{});var f=k(e);t=_(f,"ION-TOOLBAR",{});var b=k(t);i=_(b,"ION-BUTTON",{expand:!0,size:!0,color:!0,style:!0,"data-svelte-h":!0}),ie(i)!=="svelte-xdhfrl"&&(i.textContent=n),b.forEach(u),f.forEach(u),this.h()},h(){E(i,"expand","block"),E(i,"size","large"),E(i,"color","primary"),c(i,"margin","8px")},m(a,f){V(a,e,f),s(e,t),s(t,i),o||(r=ue(i,"click",l[40]),o=!0)},p:Ce,d(a){a&&u(e),o=!1,r()}}}function Uo(l){let e,t,i,n,o=`<ion-icon icon="${$i}"></ion-icon>`,r,a,f,b=`<ion-icon icon="${en}"></ion-icon>`,g,d,m=`<ion-icon icon="${tn}"></ion-icon>`,p,v,y=(l[6].name?l[6].name.toUpperCase():"")+"",w,H,P,B='<ion-segment-button value="list"><ion-label>Paradas</ion-label></ion-segment-button> <ion-segment-button value="map"><ion-label>Mapa</ion-label></ion-segment-button>',U,W,R,L;function z(T,O){if(T[9]==="list")return Co;if(T[9]==="map")return No}let x=z(l),I=x&&x(l);return{c(){e=h("ion-header"),t=h("ion-toolbar"),i=h("ion-buttons"),n=h("ion-button"),n.innerHTML=o,r=N(),a=h("ion-buttons"),f=h("ion-button"),f.innerHTML=b,g=N(),d=h("ion-button"),d.innerHTML=m,p=N(),v=h("ion-title"),w=ye(y),H=N(),P=h("ion-segment"),P.innerHTML=B,U=N(),I&&I.c(),W=Be(),this.h()},l(T){e=_(T,"ION-HEADER",{translucent:!0});var O=k(e);t=_(O,"ION-TOOLBAR",{});var D=k(t);i=_(D,"ION-BUTTONS",{slot:!0});var Z=k(i);n=_(Z,"ION-BUTTON",{title:!0,alt:!0,"data-svelte-h":!0}),ie(n)!=="svelte-1a21unf"&&(n.innerHTML=o),Z.forEach(u),r=C(D),a=_(D,"ION-BUTTONS",{slot:!0});var ne=k(a);f=_(ne,"ION-BUTTON",{"data-svelte-h":!0}),ie(f)!=="svelte-dy3728"&&(f.innerHTML=b),g=C(ne),d=_(ne,"ION-BUTTON",{"data-svelte-h":!0}),ie(d)!=="svelte-1omw1hr"&&(d.innerHTML=m),ne.forEach(u),p=C(D),v=_(D,"ION-TITLE",{});var oe=k(v);w=Oe(oe,y),oe.forEach(u),D.forEach(u),H=C(O),P=_(O,"ION-SEGMENT",{value:!0,"data-svelte-h":!0}),ie(P)!=="svelte-1rseadq"&&(P.innerHTML=B),O.forEach(u),U=C(T),I&&I.l(T),W=Be(),this.h()},h(){E(n,"title","Atrás"),E(n,"alt","Atrás"),E(i,"slot","start"),E(a,"slot","end"),E(P,"value","list"),E(e,"translucent","")},m(T,O){V(T,e,O),s(e,t),s(t,i),s(i,n),s(t,r),s(t,a),s(a,f),s(a,g),s(a,d),s(t,p),s(t,v),s(v,w),s(e,H),s(e,P),V(T,U,O),I&&I.m(T,O),V(T,W,O),R||(L=[ue(n,"click",l[22]),ue(f,"click",l[25]),ue(d,"click",l[26]),ue(P,"ionChange",l[27])],R=!0)},p(T,O){O[0]&64&&y!==(y=(T[6].name?T[6].name.toUpperCase():"")+"")&&Pe(w,y),x===(x=z(T))&&I?I.p(T,O):(I&&I.d(1),I=x&&x(T),I&&(I.c(),I.m(W.parentNode,W)))},d(T){T&&(u(e),u(U),u(W)),I&&I.d(T),R=!1,He(L)}}}function Ti(l){let e,t='<ion-spinner name="dots" style="color:white;"></ion-spinner>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(i){e=_(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1aosxw0"&&(e.innerHTML=t),this.h()},h(){S(e,"class","overlay"),c(e,"position","fixed"),c(e,"top","0"),c(e,"left","0"),c(e,"width","100vw"),c(e,"height","100vh"),c(e,"background","rgba(0, 0, 0, 0.5)"),c(e,"display","flex"),c(e,"align-items","center"),c(e,"justify-content","center"),c(e,"z-index","9999")},m(i,n){V(i,e,n)},d(i){i&&u(e)}}}function Ho(l){let e,t,i,n,o=l[2]&&bi(l),r=l[11]&&Ti();return{c(){e=N(),o&&o.c(),t=N(),r&&r.c(),i=Be(),this.h()},l(a){Ri("svelte-kn0kph",pi.head).forEach(u),e=C(a),o&&o.l(a),t=C(a),r&&r.l(a),i=Be(),this.h()},h(){pi.title="Rutaflow - Detalles de ruta"},m(a,f){V(a,e,f),o&&o.m(a,f),V(a,t,f),r&&r.m(a,f),V(a,i,f),n=!0},p(a,f){a[2]?o?(o.p(a,f),f[0]&4&&nt(o,1)):(o=bi(a),o.c(),nt(o,1),o.m(t.parentNode,t)):o&&(Li(),at(o,1,1,()=>{o=null}),Mi()),a[11]?r||(r=Ti(),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},i(a){n||(nt(o),n=!0)},o(a){at(o),n=!1},d(a){a&&(u(e),u(t),u(i)),o&&o.d(a),r&&r.d(a)}}}function Ue(l,e=""){let t="#ffffff";return l==="pending"&&!e?t="#f2e300":l=="pending"&&e?t="#F6A833":l==="completed"&&(t="#44d900"),t}function ft(l){let e="";return l=="pending"?e="Pendiente":l=="completed"&&(e="Completado"),e}function ze(l){if(!l)return"#414040";l.slice(0,1)==="#"&&(l=l.slice(1)),l.length===3&&(l=l.split("").map(function(o){return o+o}).join(""));const e=parseInt(l.substr(0,2),16),t=parseInt(l.substr(2,2),16),i=parseInt(l.substr(4,2),16);return(e*299+t*587+i*114)/1e3>=128?"#414040":"#fff"}function vt(l,e){for(let t=0;t<e.length;t++)if(e[t].alias===l)return e[t].val;return""}const Ro=l=>l.mandatory==="1",Fo=l=>l.img;function Vo(l,e,t){let i;Fi(l,nn,G=>t(24,i=G));var n=this&&this.__awaiter||function(G,ae,te,fe){function we(De){return De instanceof te?De:new te(function(Ne){Ne(De)})}return new(te||(te=Promise))(function(De,Ne){function Re(Ve){try{We(fe.next(Ve))}catch(Ge){Ne(Ge)}}function Fe(Ve){try{We(fe.throw(Ve))}catch(Ge){Ne(Ge)}}function We(Ve){Ve.done?De(Ve.value):we(Ve.value).then(Re,Fe)}We((fe=fe.apply(G,ae||[])).next())})};let{routeId:o}=e,{driverId:r}=e,a=mt,f=new Object,b=!0,g=!1,d=[],m=[],p={},v=[],y=[],w,H=!1,P="list",B,U="",W="",R="",L="0",z=new Object,x="",I=!1,T=!1,O=!1;const D={car_accident:"/car-accident.svg",restaurant:"/restaurant.svg",parking:"/parking.svg",hospital:"/hospital.svg",wc:"/toilet.svg",traffic:"/traffic.svg"},Z=()=>n(void 0,void 0,void 0,function*(){yield le(o),w.complete()});ct(()=>n(void 0,void 0,void 0,function*(){J(),yield le(o)}));function ne(){const G=(v||[]).filter(ae=>ae.mandatory==="1");return G.length?!G.every(ae=>!!ae.img):!1}function oe(){const G=g||(p==null?void 0:p.km_inicial)==="0"||(p==null?void 0:p.gas_inicial)==="0",ae=ne();return G||ae}function re(){return!oe()}function me(){return n(this,void 0,void 0,function*(){return O||!oe()?!0:new Promise(G=>n(this,void 0,void 0,function*(){yield(yield Ze.create({header:"Checklist",message:"Favor de completar checklist para iniciar viaje ✅",buttons:[{text:"Previsualizar",role:"cancel",handler:()=>{O=!0,t(12,T=!0),G(!0)}},{text:"Completar",handler:()=>{O=!0,Ie(v,r,o),G(!1)}}]})).present()}))})}function M(G){return n(this,void 0,void 0,function*(){if((yield me())&&(t(9,P=G),P==="map")){yield Ct(),B=document.getElementById("g_map");const te=new google.maps.Map(B,{zoom:8,center:{lat:20.6745683,lng:-103.3986104},mapId:"4504f8b37365c3d0"}),fe=new google.maps.LatLngBounds,{AdvancedMarkerElement:we,PinElement:De}=yield google.maps.importLibrary("marker");navigator.geolocation?navigator.geolocation.getCurrentPosition(function(Ne){const Re=new google.maps.LatLng(Ne.coords.latitude,Ne.coords.longitude);new google.maps.Marker({position:Re,map:te,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"#0062ff",fillOpacity:1,scale:6,strokeColor:"#ffffff",strokeWeight:2}}),new google.maps.Circle({strokeColor:"#00BFFF",strokeOpacity:.5,strokeWeight:1,fillColor:"#00BFFF",fillOpacity:.2,map:te,center:Re,radius:Ne.coords.accuracy}),fe.extend(Re)},function(Ne){console.error("Error retrieving location:",Ne)}):console.error("Geolocation not supported by this browser."),p.lat1===p.lat2&&p.lon1===p.lon2?se(fe,te,{lat:p.lat2,lon:p.lon2,color:p.color,title:p.destination},{type:"icon",iconClass:"icon-home",title:"Origen/Destino",glyph:`0,${String(d.length+1)}`}):(se(fe,te,{lat:p.lat1,lon:p.lon1,color:p.color,title:p.origin},{type:"icon",iconClass:"icon-home",title:"Origen",glyph:"0"}),se(fe,te,{lat:p.lat2,lon:p.lon2,color:p.color,title:p.destination},{type:"icon",iconClass:"icon-flag",title:"Destino",glyph:String(d.length+1)})),d.forEach(Ne=>{const Re=parseFloat(Ne.lat),Fe=parseFloat(Ne.lon),We=new google.maps.LatLng(Re,Fe),Ve=new google.maps.Marker({position:{lat:Re,lng:Fe},map:te,title:Ne.title}),Ge=new De({background:Ue(Ne.status,Ne.date_service),borderColor:"#000",glyphColor:"#000",glyph:(parseInt(Ne.pos)+1).toString()});new we({map:te,position:We,content:Ge.element,title:"Parada "+(parseInt(Ne.pos)+1).toString()+": "+Ne.title}).addListener("click",function(){de(Ne,!1)}),fe.extend(Ve.getPosition())}),m.forEach(Ne=>{const Re=+Ne.lat,Fe=+Ne.lng;if(isNaN(Re)||isNaN(Fe))return;const We=D[Ne.type]||"alert-sharp",Ve=document.createElement("div");Ve.style.cssText="display:flex;align-items:center;justify-content:center;transform:scale(.85);";const Ge=document.createElement("ion-icon");We.startsWith("/")?Ge.setAttribute("src",We):Ge.setAttribute("icon",We),Ge.style.cssText="font-size:20px;color:#d13434;",Ve.appendChild(Ge);const lt=new De({background:"#fff",borderColor:"#000",glyph:Ve}),zi=new we({map:te,position:{lat:Re,lng:Fe},content:lt.element,title:Ne.motive||Ne.type});fe.extend(zi.position)}),te.fitBounds(fe)}})}function se(G,ae,te,fe){return n(this,void 0,void 0,function*(){let we;const De=parseFloat(te.lat),Ne=parseFloat(te.lon),Re=new google.maps.LatLng(De,Ne),{AdvancedMarkerElement:Fe,PinElement:We}=yield google.maps.importLibrary("marker");fe.type=="icon"?(we=document.createElement("i"),we.className=`${fe.iconClass} icon`,we.style.fontSize="14px",we.style.color=ze(te.color),we.style.fontWeight="600"):fe.type=="text";const Ve=new google.maps.Marker({position:{lat:De,lng:Ne},map:ae,title:`${fe.title}. ${te.title}`}),Ge=new We({background:te.color,borderColor:"#000",glyphColor:ze(te.color),glyph:fe.glyph});return new Fe({map:ae,position:Re,content:Ge.element,title:fe.title+": "+te.title}).addListener("click",function(){ee(p,fe.title=="Destino"||fe.title=="Origen/Destino")}),Ve})}function le(G){return n(this,void 0,void 0,function*(){let ae=new FormData;ae.append("id_route",G),ae=ve(ae),ae.append("id_enterprise",f.id_enterprise);try{const fe=yield(yield fetch(`${a}api/admin/report/seguimiento_list.php`,{method:"POST",body:ae})).json();t(6,p=fe.data.seguimiento_list[0]),t(5,d=fe.data.event_list),t(7,v=fe.data.checklist),y=fe.data.expenses,m=fe.data.incidence_list,p&&t(4,g=p.km_inicial=="0"&&p.gas_inicial=="0"),!O&&oe()&&(yield me()),t(3,b=!1)}catch(te){t(3,b=!1),console.error("Error fetching data:",te)}})}const be=G=>new Promise((ae,te)=>{let fe=new FormData;fe.append("id_route",G.id_route),fe.append("id_event",G.id_event),fe=ve(fe),fetch(`${a}api/admin/evidence/evidence_by_event.php`,{method:"POST",body:fe}).then(we=>we.json()).then(we=>{ae(we.data.event_evidence[0])}).catch(we=>{console.error("Error fetching data:",we),te(we)})});function de(G,ae,te){const fe=typeof te=="boolean"?te:!re();return x||(x=n(this,void 0,void 0,function*(){let we=null;try{we=yield be(G)}catch{}const De=Object.assign(Object.assign(Object.assign({},G),{stopsApproval:U,smsActive:W,signatureActive:R}),we||{});try{yield Qe("modal-delivery-info",Qt,{delivery:De,isLast:ae,readOnly:fe})}finally{x=null,le(o)}}),x)}const ee=(G,ae)=>{let te={};ae?te={title:G.destination,line1:G.dest_address}:te={title:G.origin,line1:G.origin_address},te.enterprise_name=G.enterprise_name,te.client_name=G.client_name,te.client_phone=G.tel,te.id_route=G.id_route,te.stopsApproval=U,te.smsActive=W,Qe("modal-delivery-info",Qt,{delivery:te,isLast:ae,flag:!0,readOnly:!re()})},Ie=(G,ae,te)=>(t(11,I=!0),H||(H=!0,Qe("modal-checklist",xi,{checklist:G,driverId:ae,routeId:te,isLast:!1},{breakpoints:[.25,.5,.9],initialBreakpoint:.75,backdropBreakpoint:.25,handle:!0,handleBehavior:"cycle",canDismiss:!0,showBackdrop:!0}).then(()=>{t(11,I=!1),H=!1,le(te)})),""),ke=G=>n(void 0,void 0,void 0,function*(){return t(11,I=!0),yield le(G),y.length>0?Qe("modal-expense-detail",wo,{routeId:G,expenses:y}).then(()=>{t(11,I=!1)}):Qe("modal-expense",Ot,{routeId:G}).then(()=>{t(11,I=!1)}),""}),he=G=>n(void 0,void 0,void 0,function*(){return t(11,I=!0),yield le(G),Qe("modal-incidence",ko,{routeId:G}).then(()=>{t(11,I=!1)}),""}),pe=G=>{if(G.tracking_type=="subscription"){if(G.subscriber_info&&G.payment_type==="cash"&&new Date(G.subscriber_info.payment_next)<new Date)return!0}else if(G.tracking_type=="ecommerce"&&Number(G.payment_pending)>0)return!0;return!1},Te=()=>{f.type=="super"||f.type=="admin"?ht("/drivers/me"):f.id_driver&&ht(`/drivers/${f.id_driver}`)},Ee=(G,ae)=>n(void 0,void 0,void 0,function*(){yield(yield Ze.create({header:G||"Error",message:ae||"Vuelva a intentar",buttons:[{text:"Cerrar"}]})).present()});function ve(G){return G.append("token",f.token),G.append("id_user_over",f.id_user),G}const J=()=>n(void 0,void 0,void 0,function*(){if(f.id_enterprise){let G=new FormData;G.append("id_enterprise",f.id_enterprise),G=ve(G);try{const ae=yield fetch(`${a}api/admin/enterprise/enterprise_settings.php`,{method:"POST",body:G});ae.ok?(z=(yield ae.json()).nodos,U=vt("stops_wait_approval",z),W=vt("sms_active",z),t(10,L=vt("stops_order_restriction",z)),R=vt("signature_active",z)):console.error("File upload failed:",ae.statusText)}catch(ae){console.error("Error during file upload:",ae)}}}),X=()=>he(o),A=()=>ke(o),$=G=>M(G.detail.value);function j(G){xe[G?"unshift":"push"](()=>{w=G,t(8,w)})}const _e=()=>{ee(p,!1)},Se=G=>{const ae=d.findIndex(Ne=>Ne.id_event===G.id_event),te=ae===0,fe=ae>0?d[ae-1]:null,we=te||fe&&fe.img!==null,De=G.img!==null&&G.img!=="";we||te&&!De||L=="1"?de(G,!1):Ee("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},Me=()=>{ee(p,!0)};function Ae(G){xe[G?"unshift":"push"](()=>{w=G,t(8,w)})}const Le=()=>{ee(p,!1)},q=G=>{const ae=d.findIndex(Ne=>Ne.id_event===G.id_event),te=ae===0,fe=ae>0?d[ae-1]:null,we=te||fe&&fe.img!==null,De=G.img!==null&&G.img!=="";we||te&&!De||L=="1"?de(G,!1):Ee("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},ce=()=>{ee(p,!0)};function F(G){xe[G?"unshift":"push"](()=>{w=G,t(8,w)})}const K=()=>{ee(p,!1)},Y=G=>{const ae=d.findIndex(Ne=>Ne.id_event===G.id_event),te=ae===0,fe=ae>0?d[ae-1]:null,we=te||fe&&fe.img!==null,De=G.img!==null&&G.img!=="";we||te&&!De||L=="1"?de(G,!1):Ee("Información incompleta","No puedes visualizar otras paradas hasta cargar evidencia del destino pasado")},Q=()=>{ee(p,!0)},ge=()=>Ie(v,r,o);return l.$$set=G=>{"routeId"in G&&t(0,o=G.routeId),"driverId"in G&&t(1,r=G.driverId)},l.$$.update=()=>{l.$$.dirty[0]&16777221&&(t(0,{routeId:o,driverId:r}=i.params,o,(t(1,r),t(24,i),t(2,f),t(0,o))),t(2,f=JSON.parse(localStorage.getItem("userSession"))),f?f.id_user&&(f.type=="admin"||f.type=="super")?(le(o),ht(`/drivers/me/routes/${o}`)):f.id_user&&f.id_driver&&(le(o),ht(`/drivers/${f.id_driver}/routes/${o}`)):ht("/"))},[o,r,f,b,g,d,p,v,w,P,L,I,T,Z,oe,M,de,ee,Ie,ke,he,pe,Te,Ee,i,X,A,$,j,_e,Se,Me,Ae,Le,q,ce,F,K,Y,Q,ge]}class Yo extends et{constructor(e){super(),tt(this,e,Vo,Ho,$e,{routeId:0,driverId:1},null,[-1,-1,-1])}}export{Yo as component};
