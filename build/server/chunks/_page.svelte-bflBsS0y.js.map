{"version":3,"file":"_page.svelte-bflBsS0y.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/drivers/_driverId_/routes/_routeId_/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, a as add_attribute, e as escape, f as each, d as subscribe, v as validate_component } from \"../../../../../../chunks/ssr.js\";\nimport { modalController, alertController } from \"@ionic/core\";\nimport { arrowBack, warningOutline, cashOutline, locationOutline } from \"ionicons/icons/index.mjs\";\nimport { defineCustomElement } from \"@ionic/core/components/ion-modal.js\";\nimport { initialize } from \"@ionic/core/components/index.js\";\nimport { g as goto } from \"../../../../../../chunks/client.js\";\nimport { DATABASE_URL } from \"../../../../../../chunks/hooks.js\";\nimport { p as page, I as IonPage, h as hexToRGBA } from \"../../../../../../chunks/index2.js\";\nimport \"signature_pad\";\nconst registerCustomElement = (tagName, component) => {\n  if (!customElements.get(tagName)) {\n    class SvelteElement extends HTMLElement {\n      constructor() {\n        super();\n        this.attachShadow({ mode: \"open\" });\n      }\n      connectedCallback() {\n        new component({\n          target: this.shadowRoot,\n          props: this.componentProps || {}\n        });\n      }\n    }\n    customElements.define(tagName, SvelteElement);\n  }\n};\nconst isRegistered = (name) => document.createElement(name).constructor !== HTMLElement;\nconst registerWebComponentOnce = (selector, component) => {\n  if (!isRegistered(selector)) {\n    registerCustomElement(selector, component);\n  }\n};\nconst IonicShowModal = async (selector, component, componentProps = {}, modalOptions = {}) => {\n  initialize();\n  defineCustomElement();\n  registerWebComponentOnce(selector, component);\n  const modal = await modalController.create({\n    component: selector,\n    componentProps,\n    // sigue funcionando para Ionic, pero Svelte leerÃ¡ `el.componentProps`\n    ...modalOptions\n  });\n  modal.addEventListener(\"ionModalDidPresent\", () => {\n    const el = modal.querySelector(selector);\n    if (el) el.componentProps = componentProps;\n  });\n  await modal.present();\n  return modal.onWillDismiss();\n};\nconst ChecklistControl = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let checklist = [];\n  let checkk = [];\n  let checkbox_item = {};\n  let KmInicial, GasInicial;\n  let loadingStates = {};\n  let imagesName = {};\n  return `<ion-header translucent><ion-toolbar><ion-buttons slot=\"start\"><ion-button color=\"medium\" data-svelte-h=\"svelte-18837zq\">Cancelar</ion-button></ion-buttons> <ion-title data-svelte-h=\"svelte-19bar5p\">REQUERIMIENTOS DE RUTA</ion-title></ion-toolbar></ion-header> <ion-content fullscreen><ion-list>${`<ion-item><ion-label style=\"display:flex;\"><input${add_attribute(\"id\", `chkbox-km-ini`, 0)} style=\"pointer-events: auto;\" type=\"checkbox\" required${add_attribute(\"this\", KmInicial, 0)}> <p style=\"margin-left:10px;\" data-svelte-h=\"svelte-88twxi\">Kilometraje inicial</p></ion-label> <ion-button fill=\"outline\" size=\"small\" class=\"loadKmInicial\" aria-selected>${escape(\"Cargar km\")}</ion-button></ion-item> <ion-item><ion-label style=\"display:flex;\"><input${add_attribute(\"id\", `chkbox-gas-ini`, 0)} style=\"pointer-events: auto;\" type=\"checkbox\" required${add_attribute(\"this\", GasInicial, 0)}> <p style=\"margin-left:10px;\" data-svelte-h=\"svelte-1ux30eb\">Gasolina inicial (litros)</p></ion-label> <ion-button fill=\"outline\" class=\"loadGasInicial\" size=\"small\" style=\"height: 16px \">${escape(\"Cargar gas\")}</ion-button></ion-item>`} ${checklist ? `${each(checklist, (check) => {\n    return `<ion-item><ion-label style=\"display:flex;\"><input${add_attribute(\"id\", `chkbox-${check.id_checklist_event}`, 0)} style=\"pointer-events: auto;\" type=\"checkbox\"${add_attribute(\"value\", check.id_checklist_event, 0)} required${~checkk.indexOf(check.id_checklist_event) ? add_attribute(\"checked\", true, 1) : \"\"}${add_attribute(\"this\", checkbox_item[check.id_checklist_event], 0)}> <p style=\"margin-left:10px;\">${escape(check.item)}</p> <b style=\"margin-left:5px;\">${escape(check.mandatory == \"1\" ? \" * \" : \"\")} </b></ion-label> <ion-button fill=\"outline\" class=\"loadEvidence\" size=\"small\"><div class=\"button-content\">${loadingStates[check.id_checklist_event] ? `<ion-spinner name=\"dots\" class=\"button-spinner\"></ion-spinner>` : `<label for=\"${\"chklist-\" + escape(check.id_checklist_event, true)}\" class=\"button-label\">${escape(imagesName[check.id_checklist_event] ? imagesName[check.id_checklist_event] : \"Cargar evidencia\")} </label>`} <input style=\"display:none;\" id=\"${\"chklist-\" + escape(check.id_checklist_event, true)}\" name=\"fileToUpload\" type=\"file\" accept=\"image/*\" capture=\"environment\"> </div></ion-button> </ion-item>`;\n  })}` : ``}</ion-list></ion-content>  <ion-footer><ion-button fill=\"outline\" color=\"tertiary\" strong style=\"width: 99%; height: auto; margin-bottom: 120px;\" data-svelte-h=\"svelte-1vqzxem\">Confirmar</ion-button></ion-footer> ${``}`;\n});\nconst css = {\n  code: \".sub.svelte-1ita8l7{font-size:12px;margin-top:5px}.order-wrapper.svelte-1ita8l7{width:100%;height:100%;border-radius:50%;border:1px solid #cbcfde;text-align:center;display:flex;justify-content:center}.order.svelte-1ita8l7{align-self:center}.notes.svelte-1ita8l7{background-color:#e0b500;display:inline-block;width:8px;height:8px;border-radius:50%}\",\n  map: '{\"version\":3,\"file\":\"+page.svelte\",\"sources\":[\"+page.svelte\"],\"sourcesContent\":[\"<script lang=\\\\\"ts\\\\\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\\\n    return new (P || (P = Promise))(function (resolve, reject) {\\\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\\\n        function rejected(value) { try { step(generator[\\\\\"throw\\\\\"](value)); } catch (e) { reject(e); } }\\\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\\\n    });\\\\n};\\\\nexport let routeId;\\\\nexport let driverId;\\\\nimport DeliveryInfo from \\\\\"./_DeliveryInfo.svelte\\\\\";\\\\nimport IonPage from \\\\\"ionic-svelte/components/IonPage.svelte\\\\\";\\\\nimport ChecklistControl from \\\\\"./_ChecklistControl.svelte\\\\\";\\\\nimport AddExpense from \\\\\"./_AddExpense.svelte\\\\\";\\\\nimport AddIncidence from \\\\\"./_AddIncidence.svelte\\\\\";\\\\nimport ExpenseDetails from \\\\\"./_ExpenseDetails.svelte\\\\\";\\\\nimport { onMount, tick } from \\\\\"svelte\\\\\";\\\\nimport { IonicShowModal } from \\\\\"../../../../../services/IonicControllers\\\\\";\\\\nimport { alertController } from \\\\\"@ionic/core\\\\\";\\\\nimport { page } from \\\\\"$app/stores\\\\\";\\\\nimport { goto } from \\\\\"$app/navigation\\\\\";\\\\nimport { locationOutline, cashOutline, warningOutline, } from \\\\\"ionicons/icons\\\\\";\\\\nimport { arrowBack } from \\\\\"ionicons/icons\\\\\";\\\\nimport { DATABASE_URL } from \\\\\"../../../../../hooks\\\\\";\\\\nimport { hexToRGBA } from \\\\\"$lib\\\\\";\\\\n/*Back URL*/\\\\nlet back_url = DATABASE_URL;\\\\nlet dataSession = new Object();\\\\nlet loading = true;\\\\nlet showChecklist = false;\\\\nlet deliveries = [];\\\\nlet incidences = [];\\\\nlet stats = {};\\\\nlet checklist = [];\\\\nlet expenses = [];\\\\nlet refresher;\\\\nlet isModalOpen = false;\\\\nlet segmentValue = \\\\\"list\\\\\"; // Controls the tab selection\\\\nlet mapElement;\\\\nlet stopsApproval = \\\\\"\\\\\";\\\\nlet smsActive = \\\\\"\\\\\";\\\\nlet signatureActive = \\\\\"\\\\\";\\\\nlet orderRestriction = \\\\\"0\\\\\";\\\\nlet settings = new Object();\\\\nlet deliveryInfoModalPromise = \\\\\"\\\\\";\\\\nlet isLoading = false;\\\\nlet showStartButton = false; // mostrarÃ¡ el botÃ³n tras \\\\\"Previsualizar\\\\\"\\\\n// NUEVO: para no repetir la advertencia cada vez\\\\nlet checklistWarnShown = false;\\\\nconst motiveIconName = {\\\\n    car_accident: \\\\\"/car-accident.svg\\\\\",\\\\n    restaurant: \\\\\"/restaurant.svg\\\\\",\\\\n    parking: \\\\\"/parking.svg\\\\\",\\\\n    hospital: \\\\\"/hospital.svg\\\\\", // svg externo\\\\n    wc: \\\\\"/toilet.svg\\\\\", // svg externo\\\\n    traffic: \\\\\"/traffic.svg\\\\\", // svg externo\\\\n};\\\\nconst refresh = () => __awaiter(void 0, void 0, void 0, function* () {\\\\n    yield loadRoute(routeId);\\\\n    refresher.complete();\\\\n});\\\\nonMount(() => __awaiter(void 0, void 0, void 0, function* () {\\\\n    checkSettings();\\\\n    yield loadRoute(routeId);\\\\n}));\\\\n$: {\\\\n    ({ routeId, driverId } = $page.params);\\\\n    dataSession = JSON.parse(localStorage.getItem(\\\\\"userSession\\\\\"));\\\\n    if (dataSession) {\\\\n        if (dataSession.id_user &&\\\\n            (dataSession.type == \\\\\"admin\\\\\" || dataSession.type == \\\\\"super\\\\\")) {\\\\n            loadRoute(routeId);\\\\n            goto(`/drivers/me/routes/${routeId}`);\\\\n        }\\\\n        else if (dataSession.id_user && dataSession.id_driver) {\\\\n            loadRoute(routeId);\\\\n            goto(`/drivers/${dataSession.id_driver}/routes/${routeId}`);\\\\n        }\\\\n    }\\\\n    else {\\\\n        goto(\\\\\"/\\\\\");\\\\n    }\\\\n}\\\\n// âœ… Por estas dos funciones\\\\nfunction hasMandatoryChecklistIncomplete() {\\\\n    const mandatory = (checklist || []).filter((i) => i.mandatory === \\\\\"1\\\\\");\\\\n    if (!mandatory.length)\\\\n        return false;\\\\n    return !mandatory.every((i) => !!i.img);\\\\n}\\\\nfunction needsChecklistOrKmGas() {\\\\n    // km/gas pendientes (lo mismo que tu flag showChecklist)\\\\n    const kmGasMissing = showChecklist ||\\\\n        (stats === null || stats === void 0 ? void 0 : stats.km_inicial) === \\\\\"0\\\\\" ||\\\\n        (stats === null || stats === void 0 ? void 0 : stats.gas_inicial) === \\\\\"0\\\\\";\\\\n    // checklist obligatorio incompleto\\\\n    const mandatoryIncomplete = hasMandatoryChecklistIncomplete();\\\\n    return kmGasMissing || mandatoryIncomplete;\\\\n}\\\\n// âž• NUEVO: true = puede editar, false = SOLO LECTURA\\\\nfunction canEditStops() {\\\\n    return !needsChecklistOrKmGas();\\\\n}\\\\n// ðŸ” Reemplaza COMPLETA la funciÃ³n maybeWarnChecklist por esta\\\\nfunction maybeWarnChecklist() {\\\\n    return __awaiter(this, void 0, void 0, function* () {\\\\n        // si ya se mostrÃ³ o no hace falta advertir, continuar\\\\n        if (checklistWarnShown)\\\\n            return true;\\\\n        if (!needsChecklistOrKmGas())\\\\n            return true;\\\\n        return new Promise((resolve) => __awaiter(this, void 0, void 0, function* () {\\\\n            const alert = yield alertController.create({\\\\n                header: \\\\\"Checklist\\\\\",\\\\n                message: \\\\\"Favor de completar checklist para iniciar viaje âœ…\\\\\",\\\\n                buttons: [\\\\n                    {\\\\n                        text: \\\\\"Previsualizar\\\\\",\\\\n                        role: \\\\\"cancel\\\\\",\\\\n                        handler: () => {\\\\n                            checklistWarnShown = true;\\\\n                            showStartButton = true;\\\\n                            resolve(true); // continuar\\\\n                        },\\\\n                    },\\\\n                    {\\\\n                        text: \\\\\"Completar\\\\\",\\\\n                        handler: () => {\\\\n                            checklistWarnShown = true;\\\\n                            showChecklistModal(checklist, driverId, routeId);\\\\n                            resolve(false); // NO continuar\\\\n                        },\\\\n                    },\\\\n                ],\\\\n            });\\\\n            yield alert.present();\\\\n        }));\\\\n    });\\\\n}\\\\nfunction setSegmentValue(value) {\\\\n    return __awaiter(this, void 0, void 0, function* () {\\\\n        // advertencia (solo una vez) y aborta si eligen abrir el checklist\\\\n        const proceed = yield maybeWarnChecklist();\\\\n        if (!proceed)\\\\n            return;\\\\n        segmentValue = value;\\\\n        if (segmentValue === \\\\\"map\\\\\") {\\\\n            yield tick();\\\\n            mapElement = document.getElementById(\\\\\"g_map\\\\\");\\\\n            const map = new google.maps.Map(mapElement, {\\\\n                zoom: 8,\\\\n                center: { lat: 20.6745683, lng: -103.3986104 },\\\\n                mapId: \\\\\"4504f8b37365c3d0\\\\\",\\\\n            });\\\\n            const bounds = new google.maps.LatLngBounds();\\\\n            const { AdvancedMarkerElement, PinElement } = yield google.maps.importLibrary(\\\\\"marker\\\\\");\\\\n            // Get user\\'s current location\\\\n            if (navigator.geolocation) {\\\\n                navigator.geolocation.getCurrentPosition(function (position) {\\\\n                    const userLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\\\\n                    // Add a blue dot to indicate the user\\'s location\\\\n                    new google.maps.Marker({\\\\n                        position: userLatLng,\\\\n                        map: map,\\\\n                        icon: {\\\\n                            path: google.maps.SymbolPath.CIRCLE,\\\\n                            fillColor: \\\\\"#0062ff\\\\\",\\\\n                            fillOpacity: 1.0,\\\\n                            scale: 6, // Adjust size as needed\\\\n                            strokeColor: \\\\\"#ffffff\\\\\",\\\\n                            strokeWeight: 2,\\\\n                        },\\\\n                    });\\\\n                    // Optional: Draw an accuracy circle around the user\\'s location\\\\n                    new google.maps.Circle({\\\\n                        strokeColor: \\\\\"#00BFFF\\\\\",\\\\n                        strokeOpacity: 0.5,\\\\n                        strokeWeight: 1,\\\\n                        fillColor: \\\\\"#00BFFF\\\\\",\\\\n                        fillOpacity: 0.2,\\\\n                        map: map,\\\\n                        center: userLatLng,\\\\n                        radius: position.coords.accuracy, // Radius is based on accuracy of location\\\\n                    });\\\\n                    // Extend the map bounds to include the user\\'s location\\\\n                    bounds.extend(userLatLng);\\\\n                }, function (error) {\\\\n                    console.error(\\\\\"Error retrieving location:\\\\\", error);\\\\n                });\\\\n            }\\\\n            else {\\\\n                console.error(\\\\\"Geolocation not supported by this browser.\\\\\");\\\\n            }\\\\n            if (stats.lat1 === stats.lat2 && stats.lon1 === stats.lon2) {\\\\n                createMarker(bounds, map, {\\\\n                    lat: stats.lat2,\\\\n                    lon: stats.lon2,\\\\n                    color: stats.color,\\\\n                    title: stats.destination,\\\\n                }, {\\\\n                    type: \\\\\"icon\\\\\",\\\\n                    iconClass: \\\\\"icon-home\\\\\",\\\\n                    title: \\\\\"Origen/Destino\\\\\",\\\\n                    glyph: `0,${String(deliveries.length + 1)}`,\\\\n                });\\\\n            }\\\\n            else {\\\\n                //For origin marker\\\\n                createMarker(bounds, map, {\\\\n                    lat: stats.lat1,\\\\n                    lon: stats.lon1,\\\\n                    color: stats.color,\\\\n                    title: stats.origin,\\\\n                }, {\\\\n                    type: \\\\\"icon\\\\\",\\\\n                    iconClass: \\\\\"icon-home\\\\\",\\\\n                    title: \\\\\"Origen\\\\\",\\\\n                    glyph: \\\\\"0\\\\\",\\\\n                });\\\\n                //For destination marker\\\\n                createMarker(bounds, map, {\\\\n                    lat: stats.lat2,\\\\n                    lon: stats.lon2,\\\\n                    color: stats.color,\\\\n                    title: stats.destination,\\\\n                }, {\\\\n                    type: \\\\\"icon\\\\\",\\\\n                    iconClass: \\\\\"icon-flag\\\\\",\\\\n                    title: \\\\\"Destino\\\\\",\\\\n                    glyph: String(deliveries.length + 1),\\\\n                });\\\\n            }\\\\n            // Adding markers for stops/events\\\\n            deliveries.forEach((delivery) => {\\\\n                const lat = parseFloat(delivery.lat);\\\\n                const lon = parseFloat(delivery.lon);\\\\n                const waypointLatLng = new google.maps.LatLng(lat, lon);\\\\n                const marker = new google.maps.Marker({\\\\n                    position: { lat: lat, lng: lon },\\\\n                    map: map,\\\\n                    title: delivery.title,\\\\n                });\\\\n                // Change the background color.\\\\n                const pin = new PinElement({\\\\n                    background: getDeliveryColor(delivery.status, delivery.date_service),\\\\n                    borderColor: \\\\\"#000\\\\\",\\\\n                    glyphColor: \\\\\"#000\\\\\",\\\\n                    glyph: (parseInt(delivery.pos) + 1).toString(),\\\\n                });\\\\n                const waypointMarker = new AdvancedMarkerElement({\\\\n                    map: map,\\\\n                    position: waypointLatLng,\\\\n                    content: pin.element,\\\\n                    title: \\\\\"Parada \\\\\" +\\\\n                        (parseInt(delivery.pos) + 1).toString() +\\\\n                        \\\\\": \\\\\" +\\\\n                        delivery.title,\\\\n                });\\\\n                waypointMarker.addListener(\\\\\"click\\\\\", function () {\\\\n                    showDeliveryInfoModal(delivery, false);\\\\n                });\\\\n                bounds.extend(marker.getPosition());\\\\n            });\\\\n            incidences.forEach((inc) => {\\\\n                const lat = +inc.lat, lng = +inc.lng;\\\\n                if (isNaN(lat) || isNaN(lng))\\\\n                    return;\\\\n                const iconName = motiveIconName[inc.type] || \\\\\"alert-sharp\\\\\";\\\\n                /* contenedor para el pin */\\\\n                const wrapper = document.createElement(\\\\\"div\\\\\");\\\\n                wrapper.style.cssText =\\\\n                    \\\\\"display:flex;align-items:center;justify-content:center;\\\\\" +\\\\n                        \\\\\"transform:scale(.85);\\\\\";\\\\n                const ion = document.createElement(\\\\\"ion-icon\\\\\");\\\\n                /* Ionicon integrado o svg externo */\\\\n                if (iconName.startsWith(\\\\\"/\\\\\")) {\\\\n                    ion.setAttribute(\\\\\"src\\\\\", iconName); // hospital.svg, toilet.svg\\\\n                }\\\\n                else {\\\\n                    ion.setAttribute(\\\\\"icon\\\\\", iconName); // warning-sharp, etc.\\\\n                }\\\\n                ion.style.cssText = \\\\\"font-size:20px;color:#d13434;\\\\\";\\\\n                wrapper.appendChild(ion);\\\\n                /* Pin rojo para incidencias */\\\\n                const pin = new PinElement({\\\\n                    background: \\\\\"#fff\\\\\",\\\\n                    borderColor: \\\\\"#000\\\\\",\\\\n                    glyph: wrapper,\\\\n                });\\\\n                const marker = new AdvancedMarkerElement({\\\\n                    map,\\\\n                    position: { lat, lng: lng },\\\\n                    content: pin.element,\\\\n                    title: inc.motive || inc.type,\\\\n                });\\\\n                bounds.extend(marker.position);\\\\n            });\\\\n            // Adjust map to fit all markers\\\\n            map.fitBounds(bounds);\\\\n        }\\\\n    });\\\\n}\\\\nfunction createMarker(bounds, map, obj, contentConfig) {\\\\n    return __awaiter(this, void 0, void 0, function* () {\\\\n        let contentElement;\\\\n        const lat = parseFloat(obj.lat);\\\\n        const lon = parseFloat(obj.lon);\\\\n        const waypointLatLng = new google.maps.LatLng(lat, lon);\\\\n        const { AdvancedMarkerElement, PinElement } = yield google.maps.importLibrary(\\\\\"marker\\\\\");\\\\n        if (contentConfig.type == \\\\\"icon\\\\\") {\\\\n            contentElement = document.createElement(\\\\\"i\\\\\");\\\\n            contentElement.className = `${contentConfig.iconClass} icon`; // Add your icon class\\\\n            contentElement.style.fontSize = \\\\\"14px\\\\\"; // Adjust size as needed\\\\n            contentElement.style.color = getContrast(obj.color); // Set color dynamically\\\\n            contentElement.style.fontWeight = \\\\\"600\\\\\";\\\\n        }\\\\n        else if (contentConfig.type == \\\\\"text\\\\\") {\\\\n            //En caso de querer markers con texto en el futuro\\\\n        }\\\\n        const marker = new google.maps.Marker({\\\\n            position: { lat: lat, lng: lon },\\\\n            map: map,\\\\n            title: `${contentConfig.title}. ${obj.title}`,\\\\n        });\\\\n        // Change the background color.\\\\n        const pin = new PinElement({\\\\n            background: obj.color,\\\\n            borderColor: \\\\\"#000\\\\\",\\\\n            glyphColor: getContrast(obj.color),\\\\n            glyph: contentConfig.glyph,\\\\n        });\\\\n        const waypointMarker = new AdvancedMarkerElement({\\\\n            map: map,\\\\n            position: waypointLatLng,\\\\n            content: pin.element,\\\\n            title: contentConfig.title + \\\\\": \\\\\" + obj.title,\\\\n        });\\\\n        waypointMarker.addListener(\\\\\"click\\\\\", function () {\\\\n            showOrigenDestinyModal(stats, contentConfig.title == \\\\\"Destino\\\\\" ||\\\\n                contentConfig.title == \\\\\"Origen/Destino\\\\\");\\\\n        });\\\\n        return marker;\\\\n    });\\\\n}\\\\nfunction loadRoute(routeId) {\\\\n    return __awaiter(this, void 0, void 0, function* () {\\\\n        let requestData = new FormData();\\\\n        requestData.append(\\\\\"id_route\\\\\", routeId);\\\\n        requestData = addAuthData(requestData);\\\\n        requestData.append(\\\\\"id_enterprise\\\\\", dataSession.id_enterprise);\\\\n        try {\\\\n            const response = yield fetch(`${back_url}api/admin/report/seguimiento_list.php`, {\\\\n                method: \\\\\"POST\\\\\",\\\\n                body: requestData,\\\\n            });\\\\n            const data = yield response.json();\\\\n            stats = data.data.seguimiento_list[0];\\\\n            deliveries = data.data.event_list;\\\\n            checklist = data.data.checklist;\\\\n            expenses = data.data.expenses;\\\\n            incidences = data.data.incidence_list;\\\\n            if (stats) {\\\\n                showChecklist =\\\\n                    stats.km_inicial == \\\\\"0\\\\\" && stats.gas_inicial == \\\\\"0\\\\\";\\\\n            }\\\\n            // Advertir si faltan km/gas o checklist obligatorio (solo una vez)\\\\n            if (!checklistWarnShown && needsChecklistOrKmGas()) {\\\\n                yield maybeWarnChecklist();\\\\n            }\\\\n            loading = false; // Data loading complete\\\\n        }\\\\n        catch (error) {\\\\n            loading = false; // Data loading complete\\\\n            console.error(\\\\\"Error fetching data:\\\\\", error);\\\\n        }\\\\n    });\\\\n}\\\\nfunction getDeliveryColor(status, service_time = \\\\\"\\\\\") {\\\\n    let color = \\\\\"#ffffff\\\\\";\\\\n    if (status === \\\\\"pending\\\\\" && !service_time) {\\\\n        color = \\\\\"#f2e300\\\\\";\\\\n    }\\\\n    else if (status == \\\\\"pending\\\\\" && service_time) {\\\\n        color = \\\\\"#F6A833\\\\\";\\\\n    }\\\\n    else if (status === \\\\\"completed\\\\\") {\\\\n        color = \\\\\"#44d900\\\\\";\\\\n    }\\\\n    return color;\\\\n}\\\\nfunction getStatusTitle(status) {\\\\n    let state = \\\\\"\\\\\";\\\\n    if (status == \\\\\"pending\\\\\") {\\\\n        state = \\\\\"Pendiente\\\\\";\\\\n    }\\\\n    else if (status == \\\\\"completed\\\\\") {\\\\n        state = \\\\\"Completado\\\\\";\\\\n    }\\\\n    return state;\\\\n}\\\\nfunction getContrast(hexColor) {\\\\n    if (!hexColor)\\\\n        return \\\\\"#414040\\\\\";\\\\n    if (hexColor.slice(0, 1) === \\\\\"#\\\\\") {\\\\n        hexColor = hexColor.slice(1);\\\\n    }\\\\n    if (hexColor.length === 3) {\\\\n        hexColor = hexColor\\\\n            .split(\\\\\"\\\\\")\\\\n            .map(function (hex) {\\\\n            return hex + hex;\\\\n        })\\\\n            .join(\\\\\"\\\\\");\\\\n    }\\\\n    const r = parseInt(hexColor.substr(0, 2), 16);\\\\n    const g = parseInt(hexColor.substr(2, 2), 16);\\\\n    const b = parseInt(hexColor.substr(4, 2), 16);\\\\n    const yiq = (r * 299 + g * 587 + b * 114) / 1000;\\\\n    return yiq >= 128 ? \\\\\"#414040\\\\\" : \\\\\"#fff\\\\\";\\\\n}\\\\nconst refresh_event_info = (delivery) => {\\\\n    return new Promise((resolve, reject) => {\\\\n        let requestData = new FormData();\\\\n        requestData.append(\\\\\"id_route\\\\\", delivery.id_route);\\\\n        requestData.append(\\\\\"id_event\\\\\", delivery.id_event);\\\\n        requestData = addAuthData(requestData);\\\\n        fetch(`${back_url}api/admin/evidence/evidence_by_event.php`, {\\\\n            method: \\\\\"POST\\\\\",\\\\n            body: requestData,\\\\n        })\\\\n            .then((response) => response.json())\\\\n            .then((data) => {\\\\n            resolve(data.data.event_evidence[0]);\\\\n        })\\\\n            .catch((error) => {\\\\n            console.error(\\\\\"Error fetching data:\\\\\", error);\\\\n            reject(error);\\\\n        });\\\\n    });\\\\n};\\\\nfunction showDeliveryInfoModal(delivery, isLast, readOnly) {\\\\n    // readOnly por default depende del estado del checklist/KM-Gas\\\\n    const isReadOnly = typeof readOnly === \\\\\"boolean\\\\\" ? readOnly : !canEditStops();\\\\n    if (deliveryInfoModalPromise)\\\\n        return deliveryInfoModalPromise;\\\\n    deliveryInfoModalPromise = (() => __awaiter(this, void 0, void 0, function* () {\\\\n        let evidenceData = null;\\\\n        try {\\\\n            evidenceData = yield refresh_event_info(delivery);\\\\n        }\\\\n        catch (_) { }\\\\n        const payload = Object.assign(Object.assign(Object.assign({}, delivery), { stopsApproval,\\\\n            smsActive,\\\\n            signatureActive }), (evidenceData || {}));\\\\n        try {\\\\n            yield IonicShowModal(\\\\\"modal-delivery-info\\\\\", DeliveryInfo, {\\\\n                delivery: payload,\\\\n                isLast,\\\\n                // ðŸ‘‡ PASA EL MODO LECTURA AL MODAL\\\\n                readOnly: isReadOnly,\\\\n            });\\\\n        }\\\\n        finally {\\\\n            deliveryInfoModalPromise = null;\\\\n            loadRoute(routeId);\\\\n        }\\\\n    }))();\\\\n    return deliveryInfoModalPromise;\\\\n}\\\\nconst showOrigenDestinyModal = (stats, isLast) => {\\\\n    let delivery = {};\\\\n    if (isLast) {\\\\n        delivery = {\\\\n            title: stats.destination,\\\\n            line1: stats.dest_address,\\\\n        };\\\\n    }\\\\n    else {\\\\n        delivery = {\\\\n            title: stats.origin,\\\\n            line1: stats.origin_address,\\\\n        };\\\\n    }\\\\n    delivery.enterprise_name = stats.enterprise_name;\\\\n    delivery.client_name = stats.client_name;\\\\n    delivery.client_phone = stats.tel;\\\\n    delivery.id_route = stats.id_route;\\\\n    delivery.stopsApproval = stopsApproval;\\\\n    delivery.smsActive = smsActive;\\\\n    const flag = true;\\\\n    IonicShowModal(\\\\\"modal-delivery-info\\\\\", DeliveryInfo, {\\\\n        delivery,\\\\n        isLast,\\\\n        flag,\\\\n        // ðŸ‘‡ Solo lectura si falta checklist obligatorio o KM/Gas inicial\\\\n        readOnly: !canEditStops(),\\\\n    });\\\\n};\\\\nconst showChecklistModal = (checklist, driverId, routeId) => {\\\\n    const isLast = false;\\\\n    isLoading = true;\\\\n    if (!isModalOpen) {\\\\n        isModalOpen = true;\\\\n        IonicShowModal(\\\\\"modal-checklist\\\\\", ChecklistControl, { checklist, driverId, routeId, isLast }, {\\\\n            breakpoints: [0.25, 0.5, 0.9],\\\\n            initialBreakpoint: 0.75,\\\\n            backdropBreakpoint: 0.25,\\\\n            handle: true,\\\\n            handleBehavior: \\\\\"cycle\\\\\",\\\\n            canDismiss: true,\\\\n            showBackdrop: true\\\\n        }).then(() => {\\\\n            isLoading = false;\\\\n            isModalOpen = false;\\\\n            // al cerrar el modal, refrescamos por si se completÃ³ algo\\\\n            loadRoute(routeId);\\\\n        });\\\\n        // (opcional) changeRouteStatus(routeId, \\\\\"checklist\\\\\");\\\\n    }\\\\n    return \\\\\"\\\\\";\\\\n};\\\\nconst showExpenseModal = (routeId) => __awaiter(void 0, void 0, void 0, function* () {\\\\n    isLoading = true;\\\\n    yield loadRoute(routeId);\\\\n    if (expenses.length > 0) {\\\\n        IonicShowModal(\\\\\"modal-expense-detail\\\\\", ExpenseDetails, {\\\\n            routeId,\\\\n            expenses,\\\\n        }).then(() => {\\\\n            isLoading = false;\\\\n        });\\\\n    }\\\\n    else {\\\\n        IonicShowModal(\\\\\"modal-expense\\\\\", AddExpense, {\\\\n            routeId,\\\\n        }).then(() => {\\\\n            isLoading = false;\\\\n        });\\\\n    }\\\\n    return \\\\\"\\\\\";\\\\n});\\\\nconst showIncidenceModal = (routeId) => __awaiter(void 0, void 0, void 0, function* () {\\\\n    isLoading = true;\\\\n    yield loadRoute(routeId);\\\\n    IonicShowModal(\\\\\"modal-incidence\\\\\", AddIncidence, {\\\\n        routeId,\\\\n    }).then(() => {\\\\n        isLoading = false;\\\\n    });\\\\n    return \\\\\"\\\\\";\\\\n});\\\\nconst mustCharge = (delivery) => {\\\\n    if (delivery.tracking_type == \\\\\"subscription\\\\\") {\\\\n        if (delivery.subscriber_info && delivery.payment_type === \\\\\"cash\\\\\") {\\\\n            let date = new Date(delivery.subscriber_info.payment_next);\\\\n            if (date < new Date()) {\\\\n                return true;\\\\n            }\\\\n        }\\\\n    }\\\\n    else if (delivery.tracking_type == \\\\\"ecommerce\\\\\") {\\\\n        if (Number(delivery.payment_pending) > 0) {\\\\n            return true;\\\\n        }\\\\n    }\\\\n    return false;\\\\n};\\\\nfunction changeRouteStatus(id_route, status) {\\\\n    let requestData = new FormData();\\\\n    requestData.append(\\\\\"id_route\\\\\", id_route);\\\\n    requestData.append(\\\\\"status\\\\\", status);\\\\n    requestData = addAuthData(requestData);\\\\n    fetch(`${back_url}api/admin/route/change_status.php`, {\\\\n        method: \\\\\"POST\\\\\",\\\\n        body: requestData,\\\\n    })\\\\n        .then((response) => response.json())\\\\n        .then(() => { })\\\\n        .catch((error) => {\\\\n        console.error(\\\\\"Error fetching data:\\\\\", error);\\\\n    });\\\\n    return \\\\\"\\\\\";\\\\n}\\\\nconst goBack = () => {\\\\n    if (dataSession.type == \\\\\"super\\\\\" || dataSession.type == \\\\\"admin\\\\\") {\\\\n        goto(`/drivers/me`);\\\\n    }\\\\n    else if (dataSession.id_driver) {\\\\n        goto(`/drivers/${dataSession.id_driver}`);\\\\n    }\\\\n};\\\\nconst showAlert = (customHeader, customMessage) => __awaiter(void 0, void 0, void 0, function* () {\\\\n    const alert = yield alertController.create({\\\\n        header: customHeader || \\\\\"Error\\\\\",\\\\n        message: customMessage || \\\\\"Vuelva a intentar\\\\\",\\\\n        buttons: [{ text: \\\\\"Cerrar\\\\\" }],\\\\n    });\\\\n    yield alert.present();\\\\n});\\\\nfunction addAuthData(requestData) {\\\\n    requestData.append(\\\\\"token\\\\\", dataSession.token);\\\\n    requestData.append(\\\\\"id_user_over\\\\\", dataSession.id_user);\\\\n    return requestData;\\\\n}\\\\nconst checkSettings = () => __awaiter(void 0, void 0, void 0, function* () {\\\\n    if (dataSession.id_enterprise) {\\\\n        let formData = new FormData();\\\\n        formData.append(\\\\\"id_enterprise\\\\\", dataSession.id_enterprise);\\\\n        formData = addAuthData(formData);\\\\n        try {\\\\n            const response = yield fetch(`${back_url}api/admin/enterprise/enterprise_settings.php`, {\\\\n                method: \\\\\"POST\\\\\",\\\\n                body: formData,\\\\n            });\\\\n            if (response.ok) {\\\\n                const result = yield response.json();\\\\n                settings = result.nodos;\\\\n                stopsApproval = getSettingVal(\\\\\"stops_wait_approval\\\\\", settings);\\\\n                smsActive = getSettingVal(\\\\\"sms_active\\\\\", settings);\\\\n                orderRestriction = getSettingVal(\\\\\"stops_order_restriction\\\\\", settings);\\\\n                signatureActive = getSettingVal(\\\\\"signature_active\\\\\", settings);\\\\n            }\\\\n            else {\\\\n                console.error(\\\\\"File upload failed:\\\\\", response.statusText);\\\\n            }\\\\n        }\\\\n        catch (error) {\\\\n            console.error(\\\\\"Error during file upload:\\\\\", error);\\\\n        }\\\\n    }\\\\n});\\\\nfunction getSettingVal(alias, settings) {\\\\n    for (let i = 0; i < settings.length; i++) {\\\\n        if (settings[i].alias === alias) {\\\\n            return settings[i].val;\\\\n        }\\\\n    }\\\\n    return \\\\\"\\\\\";\\\\n}\\\\n<\\/script>\\\\r\\\\n\\\\r\\\\n<svelte:head>\\\\r\\\\n    <title>Rutaflow - Detalles de ruta</title>\\\\r\\\\n</svelte:head>\\\\r\\\\n\\\\r\\\\n{#if dataSession}\\\\r\\\\n    <IonPage>\\\\r\\\\n        <ion-header translucent>\\\\r\\\\n            <ion-toolbar>\\\\r\\\\n                <ion-buttons slot=\\\\\"start\\\\\">\\\\r\\\\n                    <ion-button title=\\\\\"AtrÃ¡s\\\\\" alt=\\\\\"AtrÃ¡s\\\\\" on:click={goBack}\\\\r\\\\n                        ><ion-icon icon={arrowBack} /></ion-button\\\\r\\\\n                    >\\\\r\\\\n                </ion-buttons>\\\\r\\\\n                <ion-buttons slot=\\\\\"end\\\\\">\\\\r\\\\n                    <ion-button on:click={() => showIncidenceModal(routeId)}\\\\r\\\\n                        ><ion-icon icon={warningOutline} /></ion-button\\\\r\\\\n                    >\\\\r\\\\n                    <ion-button on:click={() => showExpenseModal(routeId)}\\\\r\\\\n                        ><ion-icon icon={cashOutline} /></ion-button\\\\r\\\\n                    >\\\\r\\\\n                </ion-buttons>\\\\r\\\\n\\\\r\\\\n                <ion-title\\\\r\\\\n                    >{stats.name ? stats.name.toUpperCase() : \\\\\"\\\\\"}</ion-title\\\\r\\\\n                >\\\\r\\\\n            </ion-toolbar>\\\\r\\\\n            <!-- Tabs for switching between List and Map -->\\\\r\\\\n            <ion-segment\\\\r\\\\n                value=\\\\\"list\\\\\"\\\\r\\\\n                on:ionChange={(e) => setSegmentValue(e.detail.value)}\\\\r\\\\n            >\\\\r\\\\n                <ion-segment-button value=\\\\\"list\\\\\">\\\\r\\\\n                    <ion-label>Paradas</ion-label>\\\\r\\\\n                </ion-segment-button>\\\\r\\\\n                <ion-segment-button value=\\\\\"map\\\\\">\\\\r\\\\n                    <ion-label>Mapa</ion-label>\\\\r\\\\n                </ion-segment-button>\\\\r\\\\n            </ion-segment>\\\\r\\\\n        </ion-header>\\\\r\\\\n        <!-- Conditional rendering based on the selected tab -->\\\\r\\\\n        {#if segmentValue === \\\\\"list\\\\\"}\\\\r\\\\n            {#if checklist.length > 0}\\\\r\\\\n                {#if checklist\\\\r\\\\n                    .filter((item) => item.mandatory === \\\\\"1\\\\\")\\\\r\\\\n                    .every((item) => item.img) && !showChecklist}\\\\r\\\\n                    <ion-content>\\\\r\\\\n                        <ion-refresher\\\\r\\\\n                            slot=\\\\\"fixed\\\\\"\\\\r\\\\n                            bind:this={refresher}\\\\r\\\\n                            on:ionRefresh={refresh}\\\\r\\\\n                        >\\\\r\\\\n                            <ion-refresher-content\\\\r\\\\n                                pulling-icon=\\\\\"arrow-dropdown\\\\\"\\\\r\\\\n                                pulling-text=\\\\\"Jale para actualizar\\\\\"\\\\r\\\\n                                refreshing-spinner=\\\\\"circles\\\\\"\\\\r\\\\n                                refreshing-text=\\\\\"Actualizando...\\\\\"\\\\r\\\\n                            />\\\\r\\\\n                        </ion-refresher>\\\\r\\\\n                        <ion-list>\\\\r\\\\n                            <ion-item>\\\\r\\\\n                                <ion-avatar slot=\\\\\"start\\\\\">\\\\r\\\\n                                    <div\\\\r\\\\n                                        class=\\\\\"order-wrapper\\\\\"\\\\r\\\\n                                        title=\\\\\"${stats.origin}\\\\\"\\\\r\\\\n                                        style=\\\\\"background-color: {stats.color}; color: {getContrast(\\\\r\\\\n                                            stats.color\\\\r\\\\n                                        )}\\\\\"\\\\r\\\\n                                    >\\\\r\\\\n                                        <div class=\\\\\"order\\\\\">0</div>\\\\r\\\\n                                    </div>\\\\r\\\\n                                </ion-avatar>\\\\r\\\\n                                <ion-label\\\\r\\\\n                                    button\\\\r\\\\n                                    on:click={() => {\\\\r\\\\n                                        showOrigenDestinyModal(stats, false);\\\\r\\\\n                                    }}\\\\r\\\\n                                >\\\\r\\\\n                                    <ion-text color=\\\\\"#2e2e2e\\\\\">\\\\r\\\\n                                        <h3>\\\\r\\\\n                                            {stats.origin}\\\\r\\\\n                                        </h3>\\\\r\\\\n                                    </ion-text>\\\\r\\\\n                                    <div class=\\\\\"sub\\\\\" />\\\\r\\\\n                                </ion-label>\\\\r\\\\n                                <ion-icon icon={locationOutline} slot=\\\\\"end\\\\\" />\\\\r\\\\n                            </ion-item>\\\\r\\\\n                            {#each deliveries as delivery, index (delivery.id_event)}\\\\r\\\\n                                <ion-item>\\\\r\\\\n                                    <ion-avatar slot=\\\\\"start\\\\\">\\\\r\\\\n                                        <div\\\\r\\\\n                                            class=\\\\\"order-wrapper\\\\\"\\\\r\\\\n                                            title={getStatusTitle(\\\\r\\\\n                                                delivery.status\\\\r\\\\n                                            )}\\\\r\\\\n                                            style=\\\\\"background-color: {getDeliveryColor(\\\\r\\\\n                                                delivery.status,\\\\r\\\\n                                                delivery.date_service\\\\r\\\\n                                            )}; color: {getContrast(\\\\r\\\\n                                                getDeliveryColor(\\\\r\\\\n                                                    delivery.status\\\\r\\\\n                                                )\\\\r\\\\n                                            )}\\\\\"\\\\r\\\\n                                        >\\\\r\\\\n                                            <div class=\\\\\"order\\\\\">\\\\r\\\\n                                                {parseInt(delivery.pos) + 1}\\\\r\\\\n                                            </div>\\\\r\\\\n                                        </div>\\\\r\\\\n                                    </ion-avatar>\\\\r\\\\n                                    <ion-label\\\\r\\\\n                                        button\\\\r\\\\n                                        on:click={() => {\\\\r\\\\n                                            const currentIndex =\\\\r\\\\n                                                deliveries.findIndex(\\\\r\\\\n                                                    (item) =>\\\\r\\\\n                                                        item.id_event ===\\\\r\\\\n                                                        delivery.id_event\\\\r\\\\n                                                );\\\\r\\\\n                                            const isFirstDelivery =\\\\r\\\\n                                                currentIndex === 0;\\\\r\\\\n                                            const previousDelivery =\\\\r\\\\n                                                currentIndex > 0\\\\r\\\\n                                                    ? deliveries[\\\\r\\\\n                                                          currentIndex - 1\\\\r\\\\n                                                      ]\\\\r\\\\n                                                    : null;\\\\r\\\\n                                            const previousDeliveryHasImage =\\\\r\\\\n                                                isFirstDelivery ||\\\\r\\\\n                                                (previousDelivery &&\\\\r\\\\n                                                    previousDelivery.img !==\\\\r\\\\n                                                        null);\\\\r\\\\n                                            const currentDeliveryHasImage =\\\\r\\\\n                                                delivery.img !== null &&\\\\r\\\\n                                                delivery.img !== \\\\\"\\\\\";\\\\r\\\\n\\\\r\\\\n                                            if (\\\\r\\\\n                                                previousDeliveryHasImage ||\\\\r\\\\n                                                (isFirstDelivery &&\\\\r\\\\n                                                    !currentDeliveryHasImage) ||\\\\r\\\\n                                                orderRestriction == \\\\\"1\\\\\"\\\\r\\\\n                                            ) {\\\\r\\\\n                                                showDeliveryInfoModal(\\\\r\\\\n                                                    delivery,\\\\r\\\\n                                                    false\\\\r\\\\n                                                );\\\\r\\\\n                                            } else {\\\\r\\\\n                                                showAlert(\\\\r\\\\n                                                    \\\\\"InformaciÃ³n incompleta\\\\\",\\\\r\\\\n                                                    \\\\\"No puedes visualizar otras paradas hasta cargar evidencia del destino pasado\\\\\"\\\\r\\\\n                                                );\\\\r\\\\n                                            }\\\\r\\\\n                                        }}\\\\r\\\\n                                    >\\\\r\\\\n                                        <ion-text color=\\\\\"#2e2e2e\\\\\">\\\\r\\\\n                                            <h3>\\\\r\\\\n                                                {delivery.title}\\\\r\\\\n                                                {#if (delivery.support_list && delivery.support_list.length) || mustCharge(delivery)}\\\\r\\\\n                                                    <span class=\\\\\"notes\\\\\" />\\\\r\\\\n                                                {/if}\\\\r\\\\n                                            </h3>\\\\r\\\\n                                        </ion-text>\\\\r\\\\n                                        <div class=\\\\\"sub\\\\\">\\\\r\\\\n                                        </div>\\\\r\\\\n                                    </ion-label>\\\\r\\\\n                                    {#if delivery.tag_color && delivery.tag}\\\\r\\\\n                                        <div\\\\r\\\\n                                            class=\\\\\"stop-tag\\\\\"\\\\r\\\\n                                            slot=\\\\\"end\\\\\"\\\\r\\\\n                                            style=\\\\\"background-color:{hexToRGBA(\\\\r\\\\n                                                delivery.tag_color,\\\\r\\\\n                                                0.3\\\\r\\\\n                                            )};\\\\r\\\\n                                                border: 1px solid {hexToRGBA(\\\\r\\\\n                                                delivery.tag_color,\\\\r\\\\n                                                0.4\\\\r\\\\n                                            )}; \\\\r\\\\n                                                color: {delivery.tag_color};\\\\r\\\\n                                                font-size: 10px;\\\\r\\\\n                                                text-align: center;\\\\r\\\\n                                                align-content: center;\\\\r\\\\n                                                border-radius: 20px;\\\\r\\\\n                                                white-space: normal;\\\\r\\\\n                                                padding: 3px 6px;\\\\r\\\\n                                                width: auto !important;\\\\r\\\\n                                                display: inline-block;\\\\r\\\\n                                                font-weight: 500;\\\\\"\\\\r\\\\n                                        >\\\\r\\\\n                                            {delivery.tag ? delivery.tag : \\\\\"\\\\\"}\\\\r\\\\n                                        </div>\\\\r\\\\n                                    {:else}\\\\r\\\\n                                        <ion-icon\\\\r\\\\n                                            icon={locationOutline}\\\\r\\\\n                                            slot=\\\\\"end\\\\\"\\\\r\\\\n                                            style=\\\\\"color: {getDeliveryColor(\\\\r\\\\n                                                delivery.status,\\\\r\\\\n                                                delivery.date_service\\\\r\\\\n                                            )}\\\\\"\\\\r\\\\n                                        />\\\\r\\\\n                                    {/if}\\\\r\\\\n                                </ion-item>\\\\r\\\\n                            {/each}\\\\r\\\\n                            <ion-item>\\\\r\\\\n                                <ion-avatar slot=\\\\\"start\\\\\">\\\\r\\\\n                                    <div\\\\r\\\\n                                        class=\\\\\"order-wrapper\\\\\"\\\\r\\\\n                                        title=\\\\\"${stats.destination}\\\\\"\\\\r\\\\n                                        style=\\\\\"background-color: {stats.color}; color: {getContrast(\\\\r\\\\n                                            stats.color\\\\r\\\\n                                        )}\\\\\"\\\\r\\\\n                                    >\\\\r\\\\n                                        <div class=\\\\\"order\\\\\">\\\\r\\\\n                                            {deliveries.length + 1}\\\\r\\\\n                                        </div>\\\\r\\\\n                                    </div>\\\\r\\\\n                                </ion-avatar>\\\\r\\\\n                                <ion-label\\\\r\\\\n                                    button\\\\r\\\\n                                    on:click={() => {\\\\r\\\\n                                        showOrigenDestinyModal(stats, true);\\\\r\\\\n                                    }}\\\\r\\\\n                                >\\\\r\\\\n                                    <ion-text color=\\\\\"#2e2e2e\\\\\">\\\\r\\\\n                                        <h3>\\\\r\\\\n                                            {stats.destination}\\\\r\\\\n                                        </h3>\\\\r\\\\n                                    </ion-text>\\\\r\\\\n                                    <div class=\\\\\"sub\\\\\">\\\\r\\\\n                                    </div>\\\\r\\\\n                                </ion-label>\\\\r\\\\n                                <ion-icon icon={locationOutline} slot=\\\\\"end\\\\\" />\\\\r\\\\n                            </ion-item>\\\\r\\\\n                        </ion-list>\\\\r\\\\n                    </ion-content>\\\\r\\\\n                {:else}\\\\r\\\\n                    <!-- ANTES aquÃ­ abrÃ­a el modal automÃ¡ticamente.\\\\r\\\\n                         Se eliminÃ³ esa llamada para que solo advierta y el usuario decida. -->\\\\r\\\\n                    <ion-content>\\\\r\\\\n                        <ion-refresher\\\\r\\\\n                            slot=\\\\\"fixed\\\\\"\\\\r\\\\n                            bind:this={refresher}\\\\r\\\\n                            on:ionRefresh={refresh}\\\\r\\\\n                        >\\\\r\\\\n                            <ion-refresher-content\\\\r\\\\n                                pulling-icon=\\\\\"arrow-dropdown\\\\\"\\\\r\\\\n                                pulling-text=\\\\\"Pull to refresh\\\\\"\\\\r\\\\n                                refreshing-spinner=\\\\\"circles\\\\\"\\\\r\\\\n                                refreshing-text=\\\\\"Refreshing...\\\\\"\\\\r\\\\n                            />\\\\r\\\\n                        </ion-refresher>\\\\r\\\\n                        <ion-list>\\\\r\\\\n                            <ion-item>\\\\r\\\\n                                <ion-avatar slot=\\\\\"start\\\\\">\\\\r\\\\n                                    <div\\\\r\\\\n                                        class=\\\\\"order-wrapper\\\\\"\\\\r\\\\n                                        title=\\\\\"${stats.origin}\\\\\"\\\\r\\\\n                                        style=\\\\\"background-color: {stats.color}; color: {getContrast(\\\\r\\\\n                                            stats.color\\\\r\\\\n                                        )}\\\\\"\\\\r\\\\n                                    >\\\\r\\\\n                                        <div class=\\\\\"order\\\\\">0</div>\\\\r\\\\n                                    </div>\\\\r\\\\n                                </ion-avatar>\\\\r\\\\n                                <ion-label\\\\r\\\\n                                    button\\\\r\\\\n                                    on:click={() => {\\\\r\\\\n                                        showOrigenDestinyModal(stats, false);\\\\r\\\\n                                    }}\\\\r\\\\n                                >\\\\r\\\\n                                    <ion-text color=\\\\\"#2e2e2e\\\\\">\\\\r\\\\n                                        <h3>\\\\r\\\\n                                            {stats.origin}\\\\r\\\\n                                        </h3>\\\\r\\\\n                                    </ion-text>\\\\r\\\\n                                    <div class=\\\\\"sub\\\\\" />\\\\r\\\\n                                </ion-label>\\\\r\\\\n                                <ion-icon icon={locationOutline} slot=\\\\\"end\\\\\" />\\\\r\\\\n                            </ion-item>\\\\r\\\\n                            {#each deliveries as delivery, index (delivery.id_event)}\\\\r\\\\n                                <ion-item>\\\\r\\\\n                                    <ion-avatar slot=\\\\\"start\\\\\">\\\\r\\\\n                                        <div\\\\r\\\\n                                            class=\\\\\"order-wrapper\\\\\"\\\\r\\\\n                                            title={getStatusTitle(\\\\r\\\\n                                                delivery.status\\\\r\\\\n                                            )}\\\\r\\\\n                                            style=\\\\\"background-color: {getDeliveryColor(\\\\r\\\\n                                                delivery.status,\\\\r\\\\n                                                delivery.date_service\\\\r\\\\n                                            )}; color: {getContrast(\\\\r\\\\n                                                getDeliveryColor(\\\\r\\\\n                                                    delivery.status\\\\r\\\\n                                                )\\\\r\\\\n                                            )}\\\\\"\\\\r\\\\n                                        >\\\\r\\\\n                                            <div class=\\\\\"order\\\\\">\\\\r\\\\n                                                {parseInt(delivery.pos) + 1}\\\\r\\\\n                                            </div>\\\\r\\\\n                                        </div>\\\\r\\\\n                                    </ion-avatar>\\\\r\\\\n                                    <ion-label\\\\r\\\\n                                        button\\\\r\\\\n                                        on:click={() => {\\\\r\\\\n                                            const currentIndex =\\\\r\\\\n                                                deliveries.findIndex(\\\\r\\\\n                                                    (item) =>\\\\r\\\\n                                                        item.id_event ===\\\\r\\\\n                                                        delivery.id_event\\\\r\\\\n                                                );\\\\r\\\\n                                            const isFirstDelivery =\\\\r\\\\n                                                currentIndex === 0;\\\\r\\\\n                                            const previousDelivery =\\\\r\\\\n                                                currentIndex > 0\\\\r\\\\n                                                    ? deliveries[\\\\r\\\\n                                                          currentIndex - 1\\\\r\\\\n                                                      ]\\\\r\\\\n                                                    : null;\\\\r\\\\n                                            const previousDeliveryHasImage =\\\\r\\\\n                                                isFirstDelivery ||\\\\r\\\\n                                                (previousDelivery &&\\\\r\\\\n                                                    previousDelivery.img !==\\\\r\\\\n                                                        null);\\\\r\\\\n                                            const currentDeliveryHasImage =\\\\r\\\\n                                                delivery.img !== null &&\\\\r\\\\n                                                delivery.img !== \\\\\"\\\\\";\\\\r\\\\n\\\\r\\\\n                                            if (\\\\r\\\\n                                                previousDeliveryHasImage ||\\\\r\\\\n                                                (isFirstDelivery &&\\\\r\\\\n                                                    !currentDeliveryHasImage) ||\\\\r\\\\n                                                orderRestriction == \\\\\"1\\\\\"\\\\r\\\\n                                            ) {\\\\r\\\\n                                                showDeliveryInfoModal(\\\\r\\\\n                                                    delivery,\\\\r\\\\n                                                    false\\\\r\\\\n                                                );\\\\r\\\\n                                            } else {\\\\r\\\\n                                                showAlert(\\\\r\\\\n                                                    \\\\\"InformaciÃ³n incompleta\\\\\",\\\\r\\\\n                                                    \\\\\"No puedes visualizar otras paradas hasta cargar evidencia del destino pasado\\\\\"\\\\r\\\\n                                                );\\\\r\\\\n                                            }\\\\r\\\\n                                        }}\\\\r\\\\n                                    >\\\\r\\\\n                                        <ion-text color=\\\\\"#2e2e2e\\\\\">\\\\r\\\\n                                            <h3>\\\\r\\\\n                                                {delivery.title}\\\\r\\\\n                                                {#if (delivery.support_list && delivery.support_list.length) || mustCharge(delivery)}\\\\r\\\\n                                                    <span class=\\\\\"notes\\\\\" />\\\\r\\\\n                                                {/if}\\\\r\\\\n                                            </h3>\\\\r\\\\n                                        </ion-text>\\\\r\\\\n                                        <div class=\\\\\"sub\\\\\">\\\\r\\\\n                                        </div>\\\\r\\\\n                                    </ion-label>\\\\r\\\\n                                    {#if delivery.tag_color && delivery.tag}\\\\r\\\\n                                        <div\\\\r\\\\n                                            class=\\\\\"stop-tag\\\\\"\\\\r\\\\n                                            slot=\\\\\"end\\\\\"\\\\r\\\\n                                            style=\\\\\"background-color:{hexToRGBA(\\\\r\\\\n                                                delivery.tag_color,\\\\r\\\\n                                                0.3\\\\r\\\\n                                            )};\\\\r\\\\n                                                border: 1px solid {hexToRGBA(\\\\r\\\\n                                                delivery.tag_color,\\\\r\\\\n                                                0.4\\\\r\\\\n                                            )}; \\\\r\\\\n                                                color: {delivery.tag_color};\\\\r\\\\n                                                font-size: 10px;\\\\r\\\\n                                                text-align: center;\\\\r\\\\n                                                align-content: center;\\\\r\\\\n                                                border-radius: 20px;\\\\r\\\\n                                                white-space: normal;\\\\r\\\\n                                                padding: 3px 6px;\\\\r\\\\n                                                width: auto !important;\\\\r\\\\n                                                display: inline-block;\\\\r\\\\n                                                font-weight: 500;\\\\\"\\\\r\\\\n                                        >\\\\r\\\\n                                            {delivery.tag ? delivery.tag : \\\\\"\\\\\"}\\\\r\\\\n                                        </div>\\\\r\\\\n                                    {:else}\\\\r\\\\n                                        <ion-icon\\\\r\\\\n                                            icon={locationOutline}\\\\r\\\\n                                            slot=\\\\\"end\\\\\"\\\\r\\\\n                                            style=\\\\\"color: {getDeliveryColor(\\\\r\\\\n                                                delivery.status,\\\\r\\\\n                                                delivery.date_service\\\\r\\\\n                                            )}\\\\\"\\\\r\\\\n                                        />\\\\r\\\\n                                    {/if}\\\\r\\\\n                                </ion-item>\\\\r\\\\n                            {/each}\\\\r\\\\n                            <ion-item>\\\\r\\\\n                                <ion-avatar slot=\\\\\"start\\\\\">\\\\r\\\\n                                    <div\\\\r\\\\n                                        class=\\\\\"order-wrapper\\\\\"\\\\r\\\\n                                        title=\\\\\"${stats.destination}\\\\\"\\\\r\\\\n                                        style=\\\\\"background-color: {stats.color}; color: {getContrast(\\\\r\\\\n                                            stats.color\\\\r\\\\n                                        )}\\\\\"\\\\r\\\\n                                    >\\\\r\\\\n                                        <div class=\\\\\"order\\\\\">\\\\r\\\\n                                            {deliveries.length + 1}\\\\r\\\\n                                        </div>\\\\r\\\\n                                    </div>\\\\r\\\\n                                </ion-avatar>\\\\r\\\\n                                <ion-label\\\\r\\\\n                                    button\\\\r\\\\n                                    on:click={() => {\\\\r\\\\n                                        showOrigenDestinyModal(stats, true);\\\\r\\\\n                                    }}\\\\r\\\\n                                >\\\\r\\\\n                                    <ion-text color=\\\\\"#2e2e2e\\\\\">\\\\r\\\\n                                        <h3>\\\\r\\\\n                                            {stats.destination}\\\\r\\\\n                                        </h3>\\\\r\\\\n                                    </ion-text>\\\\r\\\\n                                    <div class=\\\\\"sub\\\\\">\\\\r\\\\n                                    </div>\\\\r\\\\n                                </ion-label>\\\\r\\\\n                                <ion-icon icon={locationOutline} slot=\\\\\"end\\\\\" />\\\\r\\\\n                            </ion-item>\\\\r\\\\n                        </ion-list>\\\\r\\\\n                    </ion-content>\\\\r\\\\n                {/if}\\\\r\\\\n            {:else if !loading}\\\\r\\\\n                {#if showChecklist}\\\\r\\\\n                    <!-- Ya no abrimos modal automÃ¡ticamente -->\\\\r\\\\n                {/if}\\\\r\\\\n                <ion-content>\\\\r\\\\n                    <ion-refresher\\\\r\\\\n                        slot=\\\\\"fixed\\\\\"\\\\r\\\\n                        bind:this={refresher}\\\\r\\\\n                        on:ionRefresh={refresh}\\\\r\\\\n                    >\\\\r\\\\n                        <ion-refresher-content\\\\r\\\\n                            pulling-icon=\\\\\"arrow-dropdown\\\\\"\\\\r\\\\n                            pulling-text=\\\\\"Jala para actualizar\\\\\"\\\\r\\\\n                            refreshing-spinner=\\\\\"circles\\\\\"\\\\r\\\\n                            refreshing-text=\\\\\"Actualizando...\\\\\"\\\\r\\\\n                        />\\\\r\\\\n                    </ion-refresher>\\\\r\\\\n                    <ion-list>\\\\r\\\\n                        <ion-item>\\\\r\\\\n                            <ion-avatar slot=\\\\\"start\\\\\">\\\\r\\\\n                                <div\\\\r\\\\n                                    class=\\\\\"order-wrapper\\\\\"\\\\r\\\\n                                    title=\\\\\"${stats.origin}\\\\\"\\\\r\\\\n                                    style=\\\\\"background-color: {stats.color}; color: {getContrast(\\\\r\\\\n                                        stats.color\\\\r\\\\n                                    )}\\\\\"\\\\r\\\\n                                >\\\\r\\\\n                                    <div class=\\\\\"order\\\\\">0</div>\\\\r\\\\n                                </div>\\\\r\\\\n                            </ion-avatar>\\\\r\\\\n                            <ion-label\\\\r\\\\n                                button\\\\r\\\\n                                on:click={() => {\\\\r\\\\n                                    showOrigenDestinyModal(stats, false);\\\\r\\\\n                                }}\\\\r\\\\n                            >\\\\r\\\\n                                <ion-text color=\\\\\"#2e2e2e\\\\\">\\\\r\\\\n                                    <h3>\\\\r\\\\n                                        {stats.origin}\\\\r\\\\n                                    </h3>\\\\r\\\\n                                </ion-text>\\\\r\\\\n                                <div class=\\\\\"sub\\\\\" />\\\\r\\\\n                            </ion-label>\\\\r\\\\n                            <ion-icon icon={locationOutline} slot=\\\\\"end\\\\\" />\\\\r\\\\n                        </ion-item>\\\\r\\\\n                        {#each deliveries as delivery, index (delivery.id_event)}\\\\r\\\\n                            <ion-item>\\\\r\\\\n                                <ion-avatar slot=\\\\\"start\\\\\">\\\\r\\\\n                                    <div\\\\r\\\\n                                        class=\\\\\"order-wrapper\\\\\"\\\\r\\\\n                                        title={getStatusTitle(delivery.status)}\\\\r\\\\n                                        style=\\\\\"background-color: {getDeliveryColor(\\\\r\\\\n                                            delivery.status,\\\\r\\\\n                                            delivery.date_service\\\\r\\\\n                                        )}; color: {getContrast(\\\\r\\\\n                                            getDeliveryColor(delivery.status)\\\\r\\\\n                                        )}\\\\\"\\\\r\\\\n                                    >\\\\r\\\\n                                        <div class=\\\\\"order\\\\\">\\\\r\\\\n                                            {parseInt(delivery.pos) + 1}\\\\r\\\\n                                        </div>\\\\r\\\\n                                    </div>\\\\r\\\\n                                </ion-avatar>\\\\r\\\\n                                <ion-label\\\\r\\\\n                                    button\\\\r\\\\n                                    on:click={() => {\\\\r\\\\n                                        const currentIndex =\\\\r\\\\n                                            deliveries.findIndex(\\\\r\\\\n                                                (item) =>\\\\r\\\\n                                                    item.id_event ===\\\\r\\\\n                                                    delivery.id_event\\\\r\\\\n                                            );\\\\r\\\\n                                        const isFirstDelivery =\\\\r\\\\n                                            currentIndex === 0;\\\\r\\\\n                                        const previousDelivery =\\\\r\\\\n                                            currentIndex > 0\\\\r\\\\n                                                ? deliveries[currentIndex - 1]\\\\r\\\\n                                                : null;\\\\r\\\\n                                        const previousDeliveryHasImage =\\\\r\\\\n                                            isFirstDelivery ||\\\\r\\\\n                                            (previousDelivery &&\\\\r\\\\n                                                previousDelivery.img !== null);\\\\r\\\\n                                        const currentDeliveryHasImage =\\\\r\\\\n                                            delivery.img !== null &&\\\\r\\\\n                                            delivery.img !== \\\\\"\\\\\";\\\\r\\\\n\\\\r\\\\n                                        if (\\\\r\\\\n                                            previousDeliveryHasImage ||\\\\r\\\\n                                            (isFirstDelivery &&\\\\r\\\\n                                                !currentDeliveryHasImage) ||\\\\r\\\\n                                            orderRestriction == \\\\\"1\\\\\"\\\\r\\\\n                                        ) {\\\\r\\\\n                                            showDeliveryInfoModal(\\\\r\\\\n                                                delivery,\\\\r\\\\n                                                false\\\\r\\\\n                                            );\\\\r\\\\n                                        } else {\\\\r\\\\n                                            showAlert(\\\\r\\\\n                                                \\\\\"InformaciÃ³n incompleta\\\\\",\\\\r\\\\n                                                \\\\\"No puedes visualizar otras paradas hasta cargar evidencia del destino pasado\\\\\"\\\\r\\\\n                                            );\\\\r\\\\n                                        }\\\\r\\\\n                                    }}\\\\r\\\\n                                >\\\\r\\\\n                                    <ion-text color=\\\\\"#2e2e2e\\\\\">\\\\r\\\\n                                        <h3>\\\\r\\\\n                                            {delivery.title}\\\\r\\\\n                                            {#if (delivery.support_list && delivery.support_list.length) || mustCharge(delivery)}\\\\r\\\\n                                                <span class=\\\\\"notes\\\\\" />\\\\r\\\\n                                            {/if}\\\\r\\\\n                                        </h3>\\\\r\\\\n                                    </ion-text>\\\\r\\\\n                                </ion-label>\\\\r\\\\n                                {#if delivery.tag_color && delivery.tag}\\\\r\\\\n                                    <div\\\\r\\\\n                                        class=\\\\\"stop-tag\\\\\"\\\\r\\\\n                                        slot=\\\\\"end\\\\\"\\\\r\\\\n                                        style=\\\\\"background-color:{hexToRGBA(\\\\r\\\\n                                            delivery.tag_color,\\\\r\\\\n                                            0.3\\\\r\\\\n                                        )};\\\\r\\\\n                                                border: 1px solid {hexToRGBA(\\\\r\\\\n                                            delivery.tag_color,\\\\r\\\\n                                            0.4\\\\r\\\\n                                        )}; \\\\r\\\\n                                                color: {delivery.tag_color};\\\\r\\\\n                                                font-size: 10px;\\\\r\\\\n                                                text-align: center;\\\\r\\\\n                                                align-content: center;\\\\r\\\\n                                                border-radius: 20px;\\\\r\\\\n                                                white-space: normal;\\\\r\\\\n                                                padding: 3px 6px;\\\\r\\\\n                                                width: auto !important;\\\\r\\\\n                                                display: inline-block;\\\\r\\\\n                                                font-weight: 500;\\\\\"\\\\r\\\\n                                    >\\\\r\\\\n                                        {delivery.tag ? delivery.tag : \\\\\"\\\\\"}\\\\r\\\\n                                    </div>\\\\r\\\\n                                {:else}\\\\r\\\\n                                    <ion-icon\\\\r\\\\n                                        icon={locationOutline}\\\\r\\\\n                                        slot=\\\\\"end\\\\\"\\\\r\\\\n                                        style=\\\\\"color: {getDeliveryColor(\\\\r\\\\n                                            delivery.status,\\\\r\\\\n                                            delivery.date_service\\\\r\\\\n                                        )}\\\\\"\\\\r\\\\n                                    />\\\\r\\\\n                                {/if}\\\\r\\\\n                            </ion-item>\\\\r\\\\n                        {/each}\\\\r\\\\n                        <ion-item>\\\\r\\\\n                            <ion-avatar slot=\\\\\"start\\\\\">\\\\r\\\\n                                <div\\\\r\\\\n                                    class=\\\\\"order-wrapper\\\\\"\\\\r\\\\n                                    title=\\\\\"${stats.destination}\\\\\"\\\\r\\\\n                                    style=\\\\\"background-color: {stats.color}; color: {getContrast(\\\\r\\\\n                                        stats.color\\\\r\\\\n                                    )}\\\\\"\\\\r\\\\n                                >\\\\r\\\\n                                    <div class=\\\\\"order\\\\\">\\\\r\\\\n                                        {deliveries.length + 1}\\\\r\\\\n                                    </div>\\\\r\\\\n                                </div>\\\\r\\\\n                            </ion-avatar>\\\\r\\\\n                            <ion-label\\\\r\\\\n                                button\\\\r\\\\n                                on:click={() => {\\\\r\\\\n                                    showOrigenDestinyModal(stats, true);\\\\r\\\\n                                }}\\\\r\\\\n                            >\\\\r\\\\n                                <ion-text color=\\\\\"#2e2e2e\\\\\">\\\\r\\\\n                                    <h3>\\\\r\\\\n                                        {stats.destination}\\\\r\\\\n                                    </h3>\\\\r\\\\n                                </ion-text>\\\\r\\\\n                                <div class=\\\\\"sub\\\\\">\\\\r\\\\n                                </div>\\\\r\\\\n                            </ion-label>\\\\r\\\\n                            <ion-icon icon={locationOutline} slot=\\\\\"end\\\\\" />\\\\r\\\\n                        </ion-item>\\\\r\\\\n                    </ion-list>\\\\r\\\\n                </ion-content>\\\\r\\\\n            {/if}\\\\r\\\\n\\\\r\\\\n        {#if segmentValue === \\\\\"list\\\\\" && showStartButton && needsChecklistOrKmGas()}\\\\r\\\\n              <ion-footer>\\\\r\\\\n                <ion-toolbar>\\\\r\\\\n                  <ion-button\\\\r\\\\n                    expand=\\\\\"block\\\\\"\\\\r\\\\n                    size=\\\\\"large\\\\\"\\\\r\\\\n                    color=\\\\\"primary\\\\\"\\\\r\\\\n                    on:click={() => showChecklistModal(checklist, driverId, routeId)}\\\\r\\\\n                    style=\\\\\"margin: 8px;\\\\\"\\\\r\\\\n                  >\\\\r\\\\n                    Iniciar ruta\\\\r\\\\n                  </ion-button>\\\\r\\\\n                </ion-toolbar>\\\\r\\\\n              </ion-footer>\\\\r\\\\n            {/if}\\\\r\\\\n\\\\r\\\\n        {:else if segmentValue === \\\\\"map\\\\\"}\\\\r\\\\n            <!-- Google Maps View -->\\\\r\\\\n            <ion-content>\\\\r\\\\n                <!-- HTML where the map will render -->\\\\r\\\\n                <div id=\\\\\"g_map\\\\\" style=\\\\\"width: 100%; height: 100vh;\\\\\" />\\\\r\\\\n            </ion-content>\\\\r\\\\n        {/if}\\\\r\\\\n    </IonPage>\\\\r\\\\n{/if}\\\\r\\\\n{#if isLoading}\\\\r\\\\n    <div\\\\r\\\\n        class=\\\\\"overlay\\\\\"\\\\r\\\\n        style=\\\\\"position: fixed;\\\\r\\\\n                                top: 0;\\\\r\\\\n                                left: 0;\\\\r\\\\n                                width: 100vw;\\\\r\\\\n                                height: 100vh;\\\\r\\\\n                                background: rgba(0, 0, 0, 0.5);\\\\r\\\\n                                display: flex;\\\\r\\\\n                                align-items: center;\\\\r\\\\n                                justify-content: center;\\\\r\\\\n                                z-index: 9999;\\\\\"\\\\r\\\\n    >\\\\r\\\\n        <ion-spinner name=\\\\\"dots\\\\\" style=\\\\\"color:white;\\\\\" />\\\\r\\\\n    </div>\\\\r\\\\n{/if}\\\\r\\\\n\\\\r\\\\n<style>\\\\r\\\\n    .sub {\\\\r\\\\n        font-size: 12px;\\\\r\\\\n        margin-top: 5px;\\\\r\\\\n    }\\\\r\\\\n\\\\r\\\\n    .order-wrapper {\\\\r\\\\n        width: 100%;\\\\r\\\\n        height: 100%;\\\\r\\\\n        border-radius: 50%;\\\\r\\\\n        border: 1px solid #cbcfde;\\\\r\\\\n        text-align: center;\\\\r\\\\n        display: flex;\\\\r\\\\n        justify-content: center;\\\\r\\\\n    }\\\\r\\\\n\\\\r\\\\n    .order {\\\\r\\\\n        align-self: center;\\\\r\\\\n    }\\\\r\\\\n\\\\r\\\\n    .notes {\\\\r\\\\n        background-color: #e0b500;\\\\r\\\\n        display: inline-block;\\\\r\\\\n        width: 8px;\\\\r\\\\n        height: 8px;\\\\r\\\\n        border-radius: 50%;\\\\r\\\\n    }\\\\r\\\\n    #map {\\\\r\\\\n        height: 400px;\\\\r\\\\n        width: 100%;\\\\r\\\\n    }\\\\r\\\\n</style>\\\\r\\\\n\"],\"names\":[],\"mappings\":\"AA6wCI,mBAAK,CACD,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,GAChB,CAEA,6BAAe,CACX,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MACrB,CAEA,qBAAO,CACH,UAAU,CAAE,MAChB,CAEA,qBAAO,CACH,gBAAgB,CAAE,OAAO,CACzB,OAAO,CAAE,YAAY,CACrB,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,GAAG,CACX,aAAa,CAAE,GACnB\"}'\n};\nfunction getDeliveryColor(status, service_time = \"\") {\n  let color = \"#ffffff\";\n  if (status === \"pending\" && !service_time) {\n    color = \"#f2e300\";\n  } else if (status == \"pending\" && service_time) {\n    color = \"#F6A833\";\n  } else if (status === \"completed\") {\n    color = \"#44d900\";\n  }\n  return color;\n}\nfunction getStatusTitle(status) {\n  let state = \"\";\n  if (status == \"pending\") {\n    state = \"Pendiente\";\n  } else if (status == \"completed\") {\n    state = \"Completado\";\n  }\n  return state;\n}\nfunction getContrast(hexColor) {\n  if (!hexColor) return \"#414040\";\n  if (hexColor.slice(0, 1) === \"#\") {\n    hexColor = hexColor.slice(1);\n  }\n  if (hexColor.length === 3) {\n    hexColor = hexColor.split(\"\").map(function(hex) {\n      return hex + hex;\n    }).join(\"\");\n  }\n  const r = parseInt(hexColor.substr(0, 2), 16);\n  const g = parseInt(hexColor.substr(2, 2), 16);\n  const b = parseInt(hexColor.substr(4, 2), 16);\n  const yiq = (r * 299 + g * 587 + b * 114) / 1e3;\n  return yiq >= 128 ? \"#414040\" : \"#fff\";\n}\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $page, $$unsubscribe_page;\n  $$unsubscribe_page = subscribe(page, (value) => $page = value);\n  var __awaiter = function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P ? value : new P(function(resolve) {\n        resolve(value);\n      });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function step(result) {\n        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n      }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  };\n  let { routeId } = $$props;\n  let { driverId } = $$props;\n  let back_url = DATABASE_URL;\n  let dataSession = new Object();\n  let loading = true;\n  let showChecklist = false;\n  let deliveries = [];\n  let incidences = [];\n  let stats = {};\n  let checklist = [];\n  let expenses = [];\n  let refresher;\n  let isModalOpen = false;\n  let isLoading = false;\n  let showStartButton = false;\n  let checklistWarnShown = false;\n  function hasMandatoryChecklistIncomplete() {\n    const mandatory = (checklist || []).filter((i) => i.mandatory === \"1\");\n    if (!mandatory.length) return false;\n    return !mandatory.every((i) => !!i.img);\n  }\n  function needsChecklistOrKmGas() {\n    const kmGasMissing = showChecklist || (stats === null || stats === void 0 ? void 0 : stats.km_inicial) === \"0\" || (stats === null || stats === void 0 ? void 0 : stats.gas_inicial) === \"0\";\n    const mandatoryIncomplete = hasMandatoryChecklistIncomplete();\n    return kmGasMissing || mandatoryIncomplete;\n  }\n  function maybeWarnChecklist() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (checklistWarnShown) return true;\n      if (!needsChecklistOrKmGas()) return true;\n      return new Promise((resolve) => __awaiter(this, void 0, void 0, function* () {\n        const alert = yield alertController.create({\n          header: \"Checklist\",\n          message: \"Favor de completar checklist para iniciar viaje âœ…\",\n          buttons: [\n            {\n              text: \"Previsualizar\",\n              role: \"cancel\",\n              handler: () => {\n                checklistWarnShown = true;\n                showStartButton = true;\n                resolve(true);\n              }\n            },\n            {\n              text: \"Completar\",\n              handler: () => {\n                checklistWarnShown = true;\n                showChecklistModal(checklist, driverId, routeId);\n                resolve(false);\n              }\n            }\n          ]\n        });\n        yield alert.present();\n      }));\n    });\n  }\n  function loadRoute(routeId2) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let requestData = new FormData();\n      requestData.append(\"id_route\", routeId2);\n      requestData = addAuthData(requestData);\n      requestData.append(\"id_enterprise\", dataSession.id_enterprise);\n      try {\n        const response = yield fetch(`${back_url}api/admin/report/seguimiento_list.php`, { method: \"POST\", body: requestData });\n        const data = yield response.json();\n        stats = data.data.seguimiento_list[0];\n        deliveries = data.data.event_list;\n        checklist = data.data.checklist;\n        expenses = data.data.expenses;\n        incidences = data.data.incidence_list;\n        if (stats) {\n          showChecklist = stats.km_inicial == \"0\" && stats.gas_inicial == \"0\";\n        }\n        if (!checklistWarnShown && needsChecklistOrKmGas()) {\n          yield maybeWarnChecklist();\n        }\n        loading = false;\n      } catch (error) {\n        loading = false;\n        console.error(\"Error fetching data:\", error);\n      }\n    });\n  }\n  const showChecklistModal = (checklist2, driverId2, routeId2) => {\n    const isLast = false;\n    isLoading = true;\n    if (!isModalOpen) {\n      isModalOpen = true;\n      IonicShowModal(\"modal-checklist\", ChecklistControl, { checklist: checklist2, driverId: driverId2, routeId: routeId2, isLast }, {\n        breakpoints: [0.25, 0.5, 0.9],\n        initialBreakpoint: 0.75,\n        backdropBreakpoint: 0.25,\n        handle: true,\n        handleBehavior: \"cycle\",\n        canDismiss: true,\n        showBackdrop: true\n      }).then(() => {\n        isLoading = false;\n        isModalOpen = false;\n        loadRoute(routeId2);\n      });\n    }\n    return \"\";\n  };\n  const mustCharge = (delivery) => {\n    if (delivery.tracking_type == \"subscription\") {\n      if (delivery.subscriber_info && delivery.payment_type === \"cash\") {\n        let date = new Date(delivery.subscriber_info.payment_next);\n        if (date < /* @__PURE__ */ new Date()) {\n          return true;\n        }\n      }\n    } else if (delivery.tracking_type == \"ecommerce\") {\n      if (Number(delivery.payment_pending) > 0) {\n        return true;\n      }\n    }\n    return false;\n  };\n  function addAuthData(requestData) {\n    requestData.append(\"token\", dataSession.token);\n    requestData.append(\"id_user_over\", dataSession.id_user);\n    return requestData;\n  }\n  if ($$props.routeId === void 0 && $$bindings.routeId && routeId !== void 0) $$bindings.routeId(routeId);\n  if ($$props.driverId === void 0 && $$bindings.driverId && driverId !== void 0) $$bindings.driverId(driverId);\n  $$result.css.add(css);\n  {\n    {\n      ({ routeId, driverId } = $page.params);\n      dataSession = JSON.parse(localStorage.getItem(\"userSession\"));\n      if (dataSession) {\n        if (dataSession.id_user && (dataSession.type == \"admin\" || dataSession.type == \"super\")) {\n          loadRoute(routeId);\n          goto();\n        } else if (dataSession.id_user && dataSession.id_driver) {\n          loadRoute(routeId);\n          goto(`/drivers/${dataSession.id_driver}/routes/${routeId}`);\n        }\n      } else {\n        goto();\n      }\n    }\n  }\n  $$unsubscribe_page();\n  return `${$$result.head += `<!-- HEAD_svelte-kn0kph_START -->${$$result.title = `<title>Rutaflow - Detalles de ruta</title>`, \"\"}<!-- HEAD_svelte-kn0kph_END -->`, \"\"} ${dataSession ? `${validate_component(IonPage, \"IonPage\").$$render($$result, {}, {}, {\n    default: () => {\n      return `<ion-header translucent><ion-toolbar><ion-buttons slot=\"start\"><ion-button title=\"AtrÃ¡s\" alt=\"AtrÃ¡s\" data-svelte-h=\"svelte-1a21unf\"><ion-icon${add_attribute(\"icon\", arrowBack, 0)}></ion-icon></ion-button></ion-buttons> <ion-buttons slot=\"end\"><ion-button data-svelte-h=\"svelte-dy3728\"><ion-icon${add_attribute(\"icon\", warningOutline, 0)}></ion-icon></ion-button> <ion-button data-svelte-h=\"svelte-1omw1hr\"><ion-icon${add_attribute(\"icon\", cashOutline, 0)}></ion-icon></ion-button></ion-buttons> <ion-title>${escape(stats.name ? stats.name.toUpperCase() : \"\")}</ion-title></ion-toolbar>  <ion-segment value=\"list\" data-svelte-h=\"svelte-1rseadq\"><ion-segment-button value=\"list\"><ion-label>Paradas</ion-label></ion-segment-button> <ion-segment-button value=\"map\"><ion-label>Mapa</ion-label></ion-segment-button></ion-segment></ion-header>  ${`${checklist.length > 0 ? `${checklist.filter((item) => item.mandatory === \"1\").every((item) => item.img) && !showChecklist ? `<ion-content><ion-refresher slot=\"fixed\"${add_attribute(\"this\", refresher, 0)} data-svelte-h=\"svelte-vjbhg4\"><ion-refresher-content pulling-icon=\"arrow-dropdown\" pulling-text=\"Jale para actualizar\" refreshing-spinner=\"circles\" refreshing-text=\"Actualizando...\"></ion-refresher-content></ion-refresher> <ion-list><ion-item><ion-avatar slot=\"start\"><div class=\"order-wrapper svelte-1ita8l7\" title=\"${\"$\" + escape(stats.origin, true)}\" style=\"${\"background-color: \" + escape(stats.color, true) + \"; color: \" + escape(getContrast(stats.color), true)}\"><div class=\"order svelte-1ita8l7\" data-svelte-h=\"svelte-b78non\">0</div></div></ion-avatar> <ion-label button><ion-text color=\"#2e2e2e\"><h3>${escape(stats.origin)}</h3></ion-text> <div class=\"sub svelte-1ita8l7\"></div></ion-label> <ion-icon${add_attribute(\"icon\", locationOutline, 0)} slot=\"end\"></ion-icon></ion-item> ${each(deliveries, (delivery, index) => {\n        return `<ion-item><ion-avatar slot=\"start\"><div class=\"order-wrapper svelte-1ita8l7\"${add_attribute(\"title\", getStatusTitle(delivery.status), 0)} style=\"${\"background-color: \" + escape(getDeliveryColor(delivery.status, delivery.date_service), true) + \"; color: \" + escape(getContrast(getDeliveryColor(delivery.status)), true)}\"><div class=\"order svelte-1ita8l7\">${escape(parseInt(delivery.pos) + 1)}</div> </div></ion-avatar> <ion-label button><ion-text color=\"#2e2e2e\"><h3>${escape(delivery.title)} ${delivery.support_list && delivery.support_list.length || mustCharge(delivery) ? `<span class=\"notes svelte-1ita8l7\"></span>` : ``} </h3></ion-text> <div class=\"sub svelte-1ita8l7\" data-svelte-h=\"svelte-4k5p1b\"></div></ion-label> ${delivery.tag_color && delivery.tag ? `<div class=\"stop-tag\" slot=\"end\" style=\"${\"background-color:\" + escape(hexToRGBA(delivery.tag_color, 0.3), true) + \"; border: 1px solid \" + escape(hexToRGBA(delivery.tag_color, 0.4), true) + \"; color: \" + escape(delivery.tag_color, true) + \"; font-size: 10px; text-align: center; align-content: center; border-radius: 20px; white-space: normal; padding: 3px 6px; width: auto !important; display: inline-block; font-weight: 500;\"}\">${escape(delivery.tag ? delivery.tag : \"\")} </div>` : `<ion-icon${add_attribute(\"icon\", locationOutline, 0)} slot=\"end\" style=\"${\"color: \" + escape(getDeliveryColor(delivery.status, delivery.date_service), true)}\"></ion-icon>`} </ion-item>`;\n      })} <ion-item><ion-avatar slot=\"start\"><div class=\"order-wrapper svelte-1ita8l7\" title=\"${\"$\" + escape(stats.destination, true)}\" style=\"${\"background-color: \" + escape(stats.color, true) + \"; color: \" + escape(getContrast(stats.color), true)}\"><div class=\"order svelte-1ita8l7\">${escape(deliveries.length + 1)}</div></div></ion-avatar> <ion-label button><ion-text color=\"#2e2e2e\"><h3>${escape(stats.destination)}</h3></ion-text> <div class=\"sub svelte-1ita8l7\" data-svelte-h=\"svelte-1uxrbi7\"></div></ion-label> <ion-icon${add_attribute(\"icon\", locationOutline, 0)} slot=\"end\"></ion-icon></ion-item></ion-list></ion-content>` : ` <ion-content><ion-refresher slot=\"fixed\"${add_attribute(\"this\", refresher, 0)} data-svelte-h=\"svelte-1l8nqqz\"><ion-refresher-content pulling-icon=\"arrow-dropdown\" pulling-text=\"Pull to refresh\" refreshing-spinner=\"circles\" refreshing-text=\"Refreshing...\"></ion-refresher-content></ion-refresher> <ion-list><ion-item><ion-avatar slot=\"start\"><div class=\"order-wrapper svelte-1ita8l7\" title=\"${\"$\" + escape(stats.origin, true)}\" style=\"${\"background-color: \" + escape(stats.color, true) + \"; color: \" + escape(getContrast(stats.color), true)}\"><div class=\"order svelte-1ita8l7\" data-svelte-h=\"svelte-b78non\">0</div></div></ion-avatar> <ion-label button><ion-text color=\"#2e2e2e\"><h3>${escape(stats.origin)}</h3></ion-text> <div class=\"sub svelte-1ita8l7\"></div></ion-label> <ion-icon${add_attribute(\"icon\", locationOutline, 0)} slot=\"end\"></ion-icon></ion-item> ${each(deliveries, (delivery, index) => {\n        return `<ion-item><ion-avatar slot=\"start\"><div class=\"order-wrapper svelte-1ita8l7\"${add_attribute(\"title\", getStatusTitle(delivery.status), 0)} style=\"${\"background-color: \" + escape(getDeliveryColor(delivery.status, delivery.date_service), true) + \"; color: \" + escape(getContrast(getDeliveryColor(delivery.status)), true)}\"><div class=\"order svelte-1ita8l7\">${escape(parseInt(delivery.pos) + 1)}</div> </div></ion-avatar> <ion-label button><ion-text color=\"#2e2e2e\"><h3>${escape(delivery.title)} ${delivery.support_list && delivery.support_list.length || mustCharge(delivery) ? `<span class=\"notes svelte-1ita8l7\"></span>` : ``} </h3></ion-text> <div class=\"sub svelte-1ita8l7\" data-svelte-h=\"svelte-4k5p1b\"></div></ion-label> ${delivery.tag_color && delivery.tag ? `<div class=\"stop-tag\" slot=\"end\" style=\"${\"background-color:\" + escape(hexToRGBA(delivery.tag_color, 0.3), true) + \"; border: 1px solid \" + escape(hexToRGBA(delivery.tag_color, 0.4), true) + \"; color: \" + escape(delivery.tag_color, true) + \"; font-size: 10px; text-align: center; align-content: center; border-radius: 20px; white-space: normal; padding: 3px 6px; width: auto !important; display: inline-block; font-weight: 500;\"}\">${escape(delivery.tag ? delivery.tag : \"\")} </div>` : `<ion-icon${add_attribute(\"icon\", locationOutline, 0)} slot=\"end\" style=\"${\"color: \" + escape(getDeliveryColor(delivery.status, delivery.date_service), true)}\"></ion-icon>`} </ion-item>`;\n      })} <ion-item><ion-avatar slot=\"start\"><div class=\"order-wrapper svelte-1ita8l7\" title=\"${\"$\" + escape(stats.destination, true)}\" style=\"${\"background-color: \" + escape(stats.color, true) + \"; color: \" + escape(getContrast(stats.color), true)}\"><div class=\"order svelte-1ita8l7\">${escape(deliveries.length + 1)}</div></div></ion-avatar> <ion-label button><ion-text color=\"#2e2e2e\"><h3>${escape(stats.destination)}</h3></ion-text> <div class=\"sub svelte-1ita8l7\" data-svelte-h=\"svelte-1uxrbi7\"></div></ion-label> <ion-icon${add_attribute(\"icon\", locationOutline, 0)} slot=\"end\"></ion-icon></ion-item></ion-list></ion-content>`}` : `${!loading ? `${showChecklist ? `` : ``} <ion-content><ion-refresher slot=\"fixed\"${add_attribute(\"this\", refresher, 0)} data-svelte-h=\"svelte-1mlmyg\"><ion-refresher-content pulling-icon=\"arrow-dropdown\" pulling-text=\"Jala para actualizar\" refreshing-spinner=\"circles\" refreshing-text=\"Actualizando...\"></ion-refresher-content></ion-refresher> <ion-list><ion-item><ion-avatar slot=\"start\"><div class=\"order-wrapper svelte-1ita8l7\" title=\"${\"$\" + escape(stats.origin, true)}\" style=\"${\"background-color: \" + escape(stats.color, true) + \"; color: \" + escape(getContrast(stats.color), true)}\"><div class=\"order svelte-1ita8l7\" data-svelte-h=\"svelte-b78non\">0</div></div></ion-avatar> <ion-label button><ion-text color=\"#2e2e2e\"><h3>${escape(stats.origin)}</h3></ion-text> <div class=\"sub svelte-1ita8l7\"></div></ion-label> <ion-icon${add_attribute(\"icon\", locationOutline, 0)} slot=\"end\"></ion-icon></ion-item> ${each(deliveries, (delivery, index) => {\n        return `<ion-item><ion-avatar slot=\"start\"><div class=\"order-wrapper svelte-1ita8l7\"${add_attribute(\"title\", getStatusTitle(delivery.status), 0)} style=\"${\"background-color: \" + escape(getDeliveryColor(delivery.status, delivery.date_service), true) + \"; color: \" + escape(getContrast(getDeliveryColor(delivery.status)), true)}\"><div class=\"order svelte-1ita8l7\">${escape(parseInt(delivery.pos) + 1)}</div> </div></ion-avatar> <ion-label button><ion-text color=\"#2e2e2e\"><h3>${escape(delivery.title)} ${delivery.support_list && delivery.support_list.length || mustCharge(delivery) ? `<span class=\"notes svelte-1ita8l7\"></span>` : ``}</h3> </ion-text></ion-label> ${delivery.tag_color && delivery.tag ? `<div class=\"stop-tag\" slot=\"end\" style=\"${\"background-color:\" + escape(hexToRGBA(delivery.tag_color, 0.3), true) + \"; border: 1px solid \" + escape(hexToRGBA(delivery.tag_color, 0.4), true) + \"; color: \" + escape(delivery.tag_color, true) + \"; font-size: 10px; text-align: center; align-content: center; border-radius: 20px; white-space: normal; padding: 3px 6px; width: auto !important; display: inline-block; font-weight: 500;\"}\">${escape(delivery.tag ? delivery.tag : \"\")} </div>` : `<ion-icon${add_attribute(\"icon\", locationOutline, 0)} slot=\"end\" style=\"${\"color: \" + escape(getDeliveryColor(delivery.status, delivery.date_service), true)}\"></ion-icon>`} </ion-item>`;\n      })} <ion-item><ion-avatar slot=\"start\"><div class=\"order-wrapper svelte-1ita8l7\" title=\"${\"$\" + escape(stats.destination, true)}\" style=\"${\"background-color: \" + escape(stats.color, true) + \"; color: \" + escape(getContrast(stats.color), true)}\"><div class=\"order svelte-1ita8l7\">${escape(deliveries.length + 1)}</div></div></ion-avatar> <ion-label button><ion-text color=\"#2e2e2e\"><h3>${escape(stats.destination)}</h3></ion-text> <div class=\"sub svelte-1ita8l7\" data-svelte-h=\"svelte-1284run\"></div></ion-label> <ion-icon${add_attribute(\"icon\", locationOutline, 0)} slot=\"end\"></ion-icon></ion-item></ion-list></ion-content>` : ``}`} ${showStartButton && needsChecklistOrKmGas() ? `<ion-footer><ion-toolbar><ion-button expand=\"block\" size=\"large\" color=\"primary\" style=\"margin: 8px;\" data-svelte-h=\"svelte-xdhfrl\">Iniciar ruta</ion-button></ion-toolbar></ion-footer>` : ``}`}`;\n    }\n  })}` : ``} ${isLoading ? `<div class=\"overlay\" style=\"position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center; z-index: 9999;\" data-svelte-h=\"svelte-1aosxw0\"><ion-spinner name=\"dots\" style=\"color:white;\"></ion-spinner></div>` : ``}`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}